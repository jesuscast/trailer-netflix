!function(e){"use strict";e.Requireify={_registry:{},_debug:{messages:[]},_lastRegistered:"",_bind:function(e,i,s){return function(r){return e.call(i,r,s)}},_normalize:function(e,i){var s=e.split("/"),r=i.split("/"),t=r.slice(0,-1),n=0,o=[];for(n=0;n<s.length;n++)"."===s[n]?o=t:".."===s[n]?(t.pop(),o=t):o.push(s[n]);return o=o.join("/"),".js"!==o.slice(-3)&&".jsx"!==o.slice(-4)&&".dust"!==o.slice(-5)&&(o+=".js"),o},register:function(e,i){var s,r=this._registry,t=this._debug.messages;if("function"==typeof i){if(r[e])return s="[nf-requireify] Module "+e+" already loaded, skipping!",console&&console.log(s),void t.push({msg:s});r[e]={invoke:i}}this._lastRegistered=e},require:function(e,i){var s,r=this._registry,t=this._debug,n=e,o=!0;return(e.indexOf("./")>-1||e.indexOf("../")>-1)&&(n=this._normalize(e,i),o=!1),r[n]?(r[n].exports||(s={exports:{}},r[n].invoke(this._bind(this.require,this,n),this.requireAsync,s,s.exports),r[n].exports=s.exports),r[n].exports):(t.messages.push({msg:"[nf-requireify] MODULE NOT FOUND!",module:n,requiredBy:i,loader:"nf-requireify"}),{stub:!0})},requireAsync:function(){},kickoff:function(e){var i;if(e){if("string"==typeof e)this.require(e);else if(e instanceof Array)for(i=0;i<e.length;i++)this.require(e[i])}else""!==this._lastRegistered&&this.require(this._lastRegistered)}}}(window);
Requireify.register("nf-rx",function(t,e,n,r){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.nfRx=t()}}(function(){return function e(n,r,o){function i(u,c){if(!r[u]){if(!n[u]){var a="function"==typeof t&&t;if(!c&&a)return a(u,!0);if(s)return s(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[u]={exports:{}};n[u][0].call(l.exports,function(t){var e=n[u][1][t];return i(e?e:t)},l,l.exports,e,n,r,o)}return r[u].exports}for(var s="function"==typeof t&&t,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(){"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)e.push(n);return e}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n,r,o=[];for(e=0,n=this.length;n>e;e++)r=this[e],t(r)&&o.push(r);return o}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var e,n,r;for(e=0,n=this.length;n>e;e++)r=this[e],t(r)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,n;for(e=0,n=this.length;n>e;e++)if(t===this[e])return e;return-1}),function(t,e){var n,r=function(){},o=function(){return(new Date).getTime()},i=function(t,e){return t===e},s=function(t){return t},u=function(t){return t.toString()},c=Object.prototype.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)"prototype"!==r&&c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.base=e.prototype,t},f=function(t,e){for(var n in e)"prototype"!==n&&c.call(e,n)&&(t[n]=e[n])},l=Array.prototype.slice,h="Argument out of range",p="Object has been disposed";n=t.Rx={Internals:{}},n.VERSION="2.0.20327";var b=function(t,e){return function(){return t[e].apply(t,arguments)}},d=function(t,e){return Ee(function(n){return new N(e.getDisposable(),t.subscribe(n))})},v=function(t,e,n){return Ee(function(r){var o=new R,i=new R,s=n(r,o,i);return o.disposable(t.materialize().select(function(t){return{switchValue:function(e){return e(t)}}}).subscribe(s)),i.disposable(e.materialize().select(function(t){return{switchValue:function(e,n){return n(t)}}}).subscribe(s)),new N(o,i)})},m=function(t){for(var e=new Object(this),n=0,r=e.length>>>0;r>n;n++)if(!t.call(arguments[1],e[n],n,e))return!1;return!0},y=function(t){for(var e,n=[],r=new Object(this),o=0,i=r.length>>>0;i>o;o++)e=r[o],t.call(arguments[1],e,o,r)&&n.push(e);return n},w=function(t){for(var e=[],n=new Object(this),r=0,o=n.length>>>0;o>r;r++)e.push(t.call(arguments[1],n[r],r,n));return e},g=function(t,e){return 1===t.length&&t[e]instanceof Array?t[e]:l.call(t)},E=n.Internals.List=function(){function t(t){this.comparer=t||i,this.length=0,this.items=[]}return t.fromArray=function(e,n){var r=new t(n);return r.items=e.slice(),r.length=e.length,r},t.prototype.add=function(t){this.items[this.length++]=t},t.prototype.removeAt=function(t){if(0>t||t>=this.length)throw new Error(h);this.items.splice(t,1),this.length--},t.prototype.indexOf=function(t){for(var e=0,n=this.items.length;n>e;e++)if(this.comparer(t,this.items[e]))return e;return-1},t.prototype.remove=function(t){var e=this.indexOf(t);return-1===e?!1:(this.removeAt(e),!0)},t.prototype.clear=function(){this.items=[],this.length=0},t.prototype.item=function(t,n){if(0>t||t>=count)throw new Error(h);return n===e?this.items[t]:(this.items[t]=n,void 0)},t.prototype.toArray=function(){return this.items.slice(0)},t.prototype.contains=function(t){for(var e=0,n=this.items.length;n>e;e++)if(this.comparer(t,this.items[e]))return!0;return!1},t}(),x=function(t,e,n,r,o){for(var i=o;i>0;)n[i+r-1]=t[i+e-1],i--},C=function(){function t(t,e){this.id=t,this.value=e}return t.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e},t}(),O=function(){function t(t){this.items=new Array(t),this.length=0}return t.prototype.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},t.prototype.percolate=function(t){var e,n;t>=this.length||0>t||(e=t-1>>1,0>e||e===t||this.isHigherPriority(t,e)&&(n=this.items[t],this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)))},t.prototype.heapify=function(t){var n,r,o,i;t===e&&(t=0),t>=this.length||0>t||(r=2*t+1,o=2*t+2,n=t,r<this.length&&this.isHigherPriority(r,n)&&(n=r),o<this.length&&this.isHigherPriority(o,n)&&(n=o),n!==t&&(i=this.items[t],this.items[t]=this.items[n],this.items[n]=i,this.heapify(n)))},t.prototype.peek=function(){return this.items[0].value},t.prototype.removeAt=function(t){var e;this.items[t]=this.items[--this.length],delete this.items[this.length],this.heapify(),this.length<this.items.length>>2&&(e=this.items,this.items=new Array(this.items.length>>1),x(e,0,this.items,0,this.length))},t.prototype.dequeue=function(){var t=this.peek();return this.removeAt(0),t},t.prototype.enqueue=function(e){var n,r;this.length>=this.items.length&&(r=this.items,this.items=new Array(2*this.items.length),x(r,0,this.items,0,r.length)),n=this.length++,this.items[n]=new C(t.count++,e),this.percolate(n)},t.prototype.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},t.count=0,t}(),N=n.CompositeDisposable=function(){function t(){var t=g(arguments,0);this.disposables=E.fromArray(t),this.isDisposed=!1,this.length=this.disposables.length}return t.prototype.add=function(t){this.isDisposed?t.dispose():(this.disposables.add(t),this.length++)},t.prototype.remove=function(t){var e=!1;return this.isDisposed||(e=this.disposables.remove(t),this.length--),e&&t.dispose(),e},t.prototype.dispose=function(){var t;if(this.isDisposed||(this.isDisposed=!0,t=this.disposables.toArray(),this.disposables.clear(),this.length=0),t)for(var e=0,n=t.length;n>e;e++)t[e].dispose()},t.prototype.clear=function(){var t=this.disposables.toArray();this.disposables.clear(),this.length=0;for(var e=0,n=t.length;n>e;e++)t[e].dispose()},t.prototype.contains=function(t){return this.disposables.contains(t)},t.prototype.toArray=function(){return this.disposables.toArray()},t}(),A=n.Disposable=function(){function t(t){this.isDisposed=!1,this.action=t}return t.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},t}(),D=A.create=function(t){return new A(t)},S=A.empty=new A(function(){}),R=n.SingleAssignmentDisposable=function(){function t(){this.isDisposed=!1,this.current=null}return t.prototype.disposable=function(t){return t?this.setDisposable(t):this.getDisposable()},t.prototype.getDisposable=function(){return this.current},t.prototype.setDisposable=function(t){if(null!==this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;e||(this.current=t),e&&null!==t&&t.dispose()},t.prototype.dispose=function(){var t=null;this.isDisposed||(this.isDisposed=!0,t=this.current,this.current=null),null!==t&&t.dispose()},t}(),W=n.SerialDisposable=function(){function t(){this.isDisposed=!1,this.current=null}return t.prototype.getDisposable=function(){return this.current},t.prototype.setDisposable=function(t){var e=this.isDisposed,n=null;e||(n=this.current,this.current=t),null!==n&&n.dispose(),e&&null!==t&&t.dispose()},t.prototype.disposable=function(t){return t?(this.setDisposable(t),void 0):this.getDisposable()},t.prototype.dispose=function(){var t=null;this.isDisposed||(this.isDisposed=!0,t=this.current,this.current=null),null!==t&&t.dispose()},t}(),_=n.RefCountDisposable=function(){function t(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?S:new e(this)};var e=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t}();return t}(),q=function(){function t(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}return t.prototype.dispose=function(){var t=this;this.scheduler.schedule(function(){t.isDisposed||(t.isDisposed=!0,t.disposable.dispose())})},t}(),k=function(){function t(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||function(t,e){return t-e},this.disposable=new R}return t.prototype.invoke=function(){return this.disposable.disposable(this.invokeCore())},t.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},t.prototype.isCancelled=function(){return this.disposable.isDisposed},t.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)},t}(),j=n.Scheduler=function(){function t(t,e,n,r){this.now=t,this._schedule=e,this._scheduleRelative=n,this._scheduleAbsolute=r}var e=function(t,e){var n=e.first,r=e.second,o=new N,i=function(e){r(e,function(e){var n=!1,r=!1,s=t.scheduleWithState(e,function(t,e){return n?o.remove(s):r=!0,i(e),S});r||(o.add(s),n=!0)})};return i(n),o},n=function(t,e){var n=e.first,r=e.second,o=new N,i=function(e){r(e,function(e,n){var r,s,u;s=!1,u=!1,r=t.scheduleWithRelativeAndState(e,n,function(t,e){return s?o.remove(r):u=!0,i(e),S}),u||(o.add(r),s=!0)})};return i(n),o},r=function(t,e){var n=e.first,r=e.second,o=new N,i=function(e){r(e,function(e,n){var r=!1,s=!1,u=t.scheduleWithAbsoluteAndState(e,n,function(t,e){return r?o.remove(u):s=!0,i(e),S});s||(o.add(u),r=!0)})};return i(n),o},i=function(t,e){return e(),S};return t.prototype.schedule=function(t){return this._schedule(t,i)},t.prototype.scheduleWithState=function(t,e){return this._schedule(t,e)},t.prototype.scheduleWithRelative=function(t,e){return this._scheduleRelative(e,t,i)},t.prototype.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)},t.prototype.scheduleWithAbsolute=function(t,e){return this._scheduleAbsolute(e,t,i)},t.prototype.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)},t.prototype.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,function(t,e){t(function(){e(t)})})},t.prototype.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState({first:t,second:n},function(t,n){return e(t,n)})},t.prototype.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,function(t,e){t(function(n){e(t,n)})})},t.prototype.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative({first:t,second:r},e,function(t,e){return n(t,e)})},t.prototype.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,function(t,e){t(function(n){e(t,n)})})},t.prototype.scheduleRecursiveWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute({first:t,second:n},e,function(t,e){return r(t,e)})},t.now=o,t.normalize=function(t){return 0>t&&(t=0),t},t}(),T=function(){function t(){var e=this;t.base.constructor.call(this,o,function(t,n){return n(e,t)},function(t,n,r){for(;j.normalize(n)>0;);return r(e,t)},function(t,n,r){return e.scheduleWithRelativeAndState(t,n-e.now(),r)})}return a(t,j),t}(),V=j.Immediate=new T,L=function(){function t(){F.queue=new O(4)}return t.prototype.dispose=function(){F.queue=null},t.prototype.run=function(){for(var t,e=F.queue;e.length>0;)if(t=e.dequeue(),!t.isCancelled()){for(;t.dueTime-j.now()>0;);t.isCancelled()||t.invoke()}},t}(),F=function(){function t(){var e=this;t.base.constructor.call(this,o,function(t,n){return e.scheduleWithRelativeAndState(t,0,n)},function(n,r,o){var i,s=e.now()+j.normalize(r),u=t.queue,c=new k(e,n,o,s);if(null===u){i=new L;try{t.queue.enqueue(c),i.run()}finally{i.dispose()}}else u.enqueue(c);return c.disposable},function(t,n,r){return e.scheduleWithRelativeAndState(t,n-e.now(),r)})}return a(t,j),t.prototype.scheduleRequired=function(){return null===t.queue},t.prototype.ensureTrampoline=function(t){return this.scheduleRequired()?this.schedule(t):t()},t.queue=null,t}(),z=j.CurrentThread=new F;n.VirtualTimeScheduler=function(){function t(e,n){var r=this;this.clock=e,this.comparer=n,this.isEnabled=!1,t.base.constructor.call(this,function(){return r.toDateTimeOffset(r.clock)},function(t,e){return r.scheduleAbsolute(t,r.clock,e)},function(t,e,n){return r.scheduleRelative(t,r.toRelative(e),n)},function(t,e,n){return r.scheduleRelative(t,r.toRelative(e-r.now()),n)}),this.queue=new O(1024)}return a(t,j),t.prototype.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},t.prototype.start=function(){var t;if(!this.isEnabled){this.isEnabled=!0;do t=this.getNext(),null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1;while(this.isEnabled)}},t.prototype.stop=function(){return this.isEnabled=!1},t.prototype.advanceTo=function(t){var e;if(this.comparer(this.clock,t)>=0)throw new Error(h);if(!this.isEnabled){this.isEnabled=!0;do e=this.getNext(),null!==e&&this.comparer(e.dueTime,t)<=0?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1;while(this.isEnabled);return this.clock=t}},t.prototype.advanceBy=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new Error(h);return this.advanceTo(e)},t.prototype.getNext=function(){for(var t;this.queue.length>0;){if(t=this.queue.peek(),!t.isCancelled())return t;this.queue.dequeue()}return null},t.prototype.scheduleAbsolute=function(t,e,n){var r=this,o=function(t,e){return r.queue.remove(i),n(t,e)},i=new k(r,t,o,e,r.comparer);return r.queue.enqueue(i),i.disposable},t}();var I=function(){function e(n){var r=this;e.base.constructor.call(this,o,function(e,o){var i=new R,s=t.setTimeout(function(){i.setDisposable(o(r,e))},n||0);return new N(i,D(function(){t.clearTimeout(s)}))},function(e,n,o){var i=new R,s=j.normalize(n),u=t.setTimeout(function(){i.setDisposable(o(r,e))},s);return new N(i,D(function(){t.clearTimeout(u)}))},function(t,e,n){return r.scheduleWithRelativeAndState(t,e-r.now(),n)})}return a(e,j),e}(),M=j.Timeout=new I;n.TimeoutScheduler=I;var U=n.Notification=function(){function t(){}return t.prototype.accept=function(t,e,n){return arguments.length>1||"function"==typeof t?this._accept(t,e,n):this._acceptObservable(t)},t.prototype.toObservable=function(t){var e=this;return t=t||j.Immediate,Ee(function(n){return t.schedule(function(){e._acceptObservable(n),"N"===e.kind&&n.onCompleted()})})},t.prototype.hasValue=!1,t.prototype.equals=function(t){var n=t===e||null===t?"":t.toString();return this.toString()===n},t}();U.createOnNext=function(t){var e=new U;return e.value=t,e.hasValue=!0,e.kind="N",e._accept=function(t){return t(this.value)},e._acceptObservable=function(t){return t.onNext(this.value)},e.toString=function(){return"OnNext("+this.value+")"},e},U.createOnError=function(t){var e=new U;return e.exception=t,e.kind="E",e._accept=function(t,e){return e(this.exception)},e._acceptObservable=function(t){return t.onError(this.exception)},e.toString=function(){return"OnError("+this.exception+")"},e},U.createOnCompleted=function(){var t=new U;return t.kind="C",t._accept=function(t,e,n){return n()},t._acceptObservable=function(t){return t.onCompleted()},t.toString=function(){return"OnCompleted()"},t};var B=n.Internals.Enumerator=function(t,e,n){this.moveNext=t,this.getCurrent=e,this.dispose=n},P=B.create=function(t,e,n){var o=!1;return n||(n=r),new B(function(){if(o)return!1;var e=t();return e||(o=!0,n()),e},function(){return e()},function(){o||(n(),o=!0)})},H=n.Internals.Enumerable=function(t){this.getEnumerator=t},X=H.prototype;X.concat=function(){var t=this;return Ee(function(e){var n,r=t.getEnumerator(),o=!1,i=new W;return n=V.scheduleRecursive(function(t){var n,s,u,c=!1;if(!o){try{c=r.moveNext(),c?n=r.getCurrent():r.dispose()}catch(a){u=a,r.dispose()}if(u)return e.onError(u),void 0;if(!c)return e.onCompleted(),void 0;s=new R,i.disposable(s),s.disposable(n.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){t()}))}}),new N(i,n,D(function(){o=!0,r.dispose()}))})},X.catchException=function(){var t=this;return Ee(function(e){var n,r,o,i=t.getEnumerator(),s=!1;return r=new W,n=V.scheduleRecursive(function(t){var n,u,c,a;if(a=!1,!s){try{a=i.moveNext(),a&&(n=i.getCurrent())}catch(f){c=f}if(c)return e.onError(c),void 0;if(!a)return o?e.onError(o):e.onCompleted(),void 0;u=new R,r.disposable(u),u.disposable(n.subscribe(function(t){e.onNext(t)},function(e){o=e,t()},function(){e.onCompleted()}))}}),new N(r,n,D(function(){s=!0}))})};var J=H.repeat=function(t,n){return n===e&&(n=-1),new H(function(){var e,r=n;return P(function(){return 0===r?!1:(r>0&&r--,e=t,!0)},function(){return e})})},G=H.forEach=function(t,e){return e||(e=s),new H(function(){var n,r=-1;return P(function(){return++r<t.length?(n=e(t[r],r),!0):!1},function(){return n})})},K=n.Observer=function(){},Q=n.Internals.AbstractObserver=function(){function t(){this.isStopped=!1}return a(t,K),t.prototype.onNext=function(t){this.isStopped||this.next(t)},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t}(),Y=function(){function t(e,n,r){t.base.constructor.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return a(t,Q),t.prototype.next=function(t){this._onNext(t)},t.prototype.error=function(t){this._onError(t)},t.prototype.completed=function(){this._onCompleted()},t}(),Z=n.Internals.BinaryObserver=function(){function t(t,e){"function"==typeof t&&"function"==typeof e?(this.leftObserver=ee(t),this.rightObserver=ee(e)):(this.leftObserver=t,this.rightObserver=e)}return a(t,K),t.prototype.onNext=function(t){var e=this;return t.switchValue(function(t){return t.accept(e.leftObserver)},function(t){return t.accept(e.rightObserver)})},t.prototype.onError=function(){},t.prototype.onCompleted=function(){},t}(),$=function(){function t(t,e){this.scheduler=t,this.observer=e,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new W}return a(t,Q),t.prototype.ensureActive=function(){var t=!1,e=this;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.disposable(this.scheduler.scheduleRecursive(function(t){var n;if(!(e.queue.length>0))return e.isAcquired=!1,void 0;n=e.queue.shift();try{n()}catch(r){throw e.queue=[],e.hasFaulted=!0,r}t()}))},t.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})},t.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})},t.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})},t.prototype.dispose=function(){t.base.dispose.call(this),this.disposable.dispose()},t}(),te=K.create=function(t,e,n){return t||(t=r),e||(e=function(t){throw t}),n||(n=r),new Y(t,e,n)},ee=(K.fromNotifier=function(t){return new Y(function(e){return t(U.createOnNext(e))},function(e){return t(U.createOnError(e))},function(){return t(U.createOnCompleted())})},function(t){return new Y(function(e){t(U.createOnNext(e))},function(e){t(U.createOnError(e))},function(){t(U.createOnCompleted())})});K.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},K.prototype.asObserver=function(){var t=this;return new Y(function(e){return t.onNext(e)},function(e){return t.onError(e)},function(){return t.onCompleted()})};var ne=n.Observable=function(){function t(){}return t.prototype.subscribe=function(t,e,n){var r;return r=0===arguments.length||arguments.length>1||"function"==typeof t?te(t,e,n):t,this._subscribe(r)},t}(),re=ne.prototype,oe=function(){function t(e){t.base.constructor.call(this),this._subscribe=function(t){var n=new ie(t);return z.scheduleRequired()?z.schedule(function(){n.disposable(e(n))}):n.disposable(e(n)),n}}return a(t,ne),t.prototype._subscribe=function(t){return this._subscribe(t)},t}(),ie=function(){function t(e){t.base.constructor.call(this),this.observer=e,this.m=new R}return a(t,Q),t.prototype.disposable=function(t){return this.m.disposable(t)},t.prototype.next=function(t){this.observer.onNext(t)},t.prototype.error=function(t){this.observer.onError(t),this.m.dispose()},t.prototype.completed=function(){this.observer.onCompleted(),this.m.dispose()},t.prototype.dispose=function(){t.base.dispose.call(this),this.m.dispose()},t}(),se=function(){function t(e,n,r){t.base.constructor.call(this),this.key=e,this.underlyingObservable=r?Ee(function(t){return new N(r.getDisposable(),n.subscribe(t))}):n}return a(t,ne),t.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},t}(),ue=n.ConnectableObservable=function(){function t(t,e){var n={subject:e,source:t.asObservable(),hasSubscription:!1,subscription:null};this.connect=function(){return n.hasSubscription||(n.hasSubscription=!0,n.subscription=new N(n.source.subscribe(n.subject),D(function(){n.hasSubscription=!1}))),n.subscription},this._subscribe=function(t){return n.subject.subscribe(t)}}return a(t,ne),t.prototype.connect=function(){return this.connect()},t.prototype.refCount=function(){var t=null,e=0,n=this;return Ee(function(r){var o,i;return e++,o=1===e,i=n.subscribe(r),o&&(t=n.connect()),D(function(){i.dispose(),e--,0===e&&t.dispose()})})},t.prototype._subscribe=function(t){return this._subscribe(t)},t}(),ce=function(){function t(t,e){this.subject=t,this.observer=e}return t.prototype.dispose=function(){this.subject.isDisposed||null===this.observer||(this.subject.observers.remove(this.observer),this.observer=null)},t}(),ae=n.Subject=function(){function t(){t.base.constructor.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=new E}a(t,ne),f(t,K);var e=function(){if(this.isDisposed)throw new Error(p)};return t.prototype.onCompleted=function(){var t;if(e.call(this),this.isStopped||(t=this.observers.toArray(),this.observers=new E,this.isStopped=!0),t)for(var n=0,r=t.length;r>n;n++)t[n].onCompleted()},t.prototype.onError=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new E,this.isStopped=!0,this.exception=t),n)for(var r=0,o=n.length;o>r;r++)n[r].onError(t)},t.prototype.onNext=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray()),n)for(var r=0,o=n.length;o>r;r++)n[r].onNext(t)},t.prototype._subscribe=function(t){return e.call(this),this.isStopped?this.exception?(t.onError(this.exception),S):(t.onCompleted(),S):(this.observers.add(t),new ce(this,t))},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null},t.create=function(t,e){return new pe(t,e)},t}(),fe=n.AsyncSubject=function(){function t(){t.base.constructor.call(this),this.isDisposed=!1,this.isStopped=!1,this.value=null,this.hasValue=!1,this.observers=new E,this.exception=null}a(t,ne),f(t,K);var e=function(){if(this.isDisposed)throw new Error(p)};return t.prototype.onCompleted=function(){var t,n,r,o,i,s=!1;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new E,this.isStopped=!0,r=this.value,s=this.hasValue),n)if(s)for(o=0,i=n.length;i>o;o++)t=n[o],t.onNext(r),t.onCompleted();else for(o=0,i=n.length;i>o;o++)n[o].onCompleted()},t.prototype.onError=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new E,this.isStopped=!0,this.exception=t),n)for(var r=0,o=n.length;o>r;r++)n[r].onError(t)},t.prototype.onNext=function(t){e.call(this),this.isStopped||(this.value=t,this.hasValue=!0)},t.prototype._subscribe=function(t){var n,r,o;return e.call(this),this.isStopped?(n=this.exception,r=this.hasValue,o=this.value,n?t.onError(n):r?(t.onNext(o),t.onCompleted()):t.onCompleted(),S):(this.observers.add(t),new ce(this,t))},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null},t}(),le=n.BehaviorSubject=function(){function t(e){t.base.constructor.call(this),this.value=e,this.observers=new E,this.isDisposed=!1,this.isStopped=!1,this.exception=null}a(t,ne),f(t,K);var e=function(){if(this.isDisposed)throw new Error(p)};return t.prototype.onCompleted=function(){var t;if(e.call(this),this.isStopped||(t=this.observers.toArray(),this.observers=new E,this.isStopped=!0),t)for(var n=0,r=t.length;r>n;n++)t[n].onCompleted()},t.prototype.onError=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new E,this.isStopped=!0,this.exception=t),n)for(var r=0,o=n.length;o>r;r++)n[r].onError(t)},t.prototype.onNext=function(t){var n;if(e.call(this),this.isStopped||(this.value=t,n=this.observers.toArray()),n)for(var r=0,o=n.length;o>r;r++)n[r].onNext(t)},t.prototype._subscribe=function(t){var n;return e.call(this),this.isStopped?(n=this.exception,n?t.onError(n):t.onCompleted(),S):(this.observers.add(t),t.onNext(this.value),new ce(this,t))},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null},t}(),he=n.ReplaySubject=function(){function t(t,n,r){this.bufferSize=t===e?Number.MAX_VALUE:t,this.window=n===e?Number.MAX_VALUE:n,this.scheduler=r||z,this.q=[],this.observers=new E,this.isStopped=!1,this.isDisposed=!1}a(t,ne),f(t,ne);var n=function(){if(this.isDisposed)throw new Error(p)};t.prototype._trim=function(t){var e=this.isStopped?1:0,n=e+this.bufferSize;for(n<this.bufferSize&&(n=this.bufferSize);this.q.length>n;)this.q.shift();for(;this.q.length>e&&t-this.q[0].timestamp>this.window;)this.q.shift()},t.prototype._enqueue=function(t){var e=this.scheduler.now(),n={value:t,timestamp:e};this.q.push(n),this._trim(e)},t.prototype.onNext=function(t){var e,r,o,i;if(n.call(this),!this.isStopped)for(e=this.observers.toArray(),this._enqueue(U.createOnNext(t)),o=0,i=e.length;i>o;o++)r=e[o],r.onNext(t);if(e)for(o=0,i=e.length;i>o;o++)r=e[o],r.ensureActive()},t.prototype.onError=function(t){var e,r,o;if(n.call(this),!this.isStopped){for(this.isStopped=!0,this._enqueue(U.createOnError(t)),e=this.observers.toArray(),r=0,o=e.length;o>r;r++)e[r].onError(t);this.observers=new E}if(e)for(r=0,o=e.length;o>r;r++)e[r].ensureActive()},t.prototype.onCompleted=function(){var t,e,r;if(n.call(this),!this.isStopped){for(this.isStopped=!0,this._enqueue(U.createOnCompleted()),t=this.observers.toArray(),e=0,r=t.length;r>e;e++)t[e].onCompleted();this.observers=new E}if(t)for(e=0,r=t.length;r>e;e++)t[e].ensureActive()},t.prototype._subscribe=function(t){var e=new $(this.scheduler,t),o=new r(this,e);n.call(this),this._trim(this.scheduler.now()),this.observers.add(e);for(var i=0,s=this.q.length;s>i;i++)this.q[i].value.accept(e);return e.ensureActive(),o},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null};var r=function(){function t(t,e){this.subject=t,this.observer=e}return t.prototype.dispose=function(){this.observer.dispose(),this.subject.isDisposed||this.subject.observers.remove(this.observer)},t}();return t}(),pe=function(){function t(t,e){this.observer=t,this.observable=e}return a(t,ne),f(t,K),t.prototype.onCompleted=function(){return this.observer.onCompleted()},t.prototype.onError=function(t){return this.observer.onError(t)},t.prototype.onNext=function(t){return this.observer.onNext(t)},t.prototype._subscribe=function(t){return this.observable.subscribe(t)},t}();ne.start=function(t,e,n,r){return n||(n=[]),be(t,r).apply(e,n)};var be=ne.toAsync=function(t,e){return e||(e=M),function(){var n=new fe,r=function(){var e;try{e=t.apply(this,arguments)}catch(r){return n.onError(r),void 0}n.onNext(e),n.onCompleted()},o=l.call(arguments),i=this;return e.schedule(function(){r.apply(i,o)}),n}};re.multicast=function(t,e){var n=this;return"function"==typeof t?Ee(function(r){var o=n.multicast(t());return new N(e(o).subscribe(r),o.connect())}):new ue(n,t)},re.publish=function(t){return t?this.multicast(function(){return new ae},t):this.multicast(new ae)},re.publishLast=function(t){return t?this.multicast(function(){return new fe},t):this.multicast(new fe)},re.replay=function(t,e,n,r){return t&&null!==t?this.multicast(function(){return new he(e,n,r)},t):this.multicast(new he(e,n,r))},re.publishValue=function(t,e){return"function"==typeof t?this.multicast(function(){return new le(e)},t):this.multicast(new le(t))};var de=ne.never=function(){return Ee(function(){return S})},ve=ne.empty=function(t){return t||(t=V),Ee(function(e){return t.schedule(function(){e.onCompleted()})})},me=ne.returnValue=function(t,e){return e||(e=V),Ee(function(n){return e.schedule(function(){n.onNext(t),n.onCompleted()})})},ye=ne.throwException=function(t,e){return e||(e=V),Ee(function(n){return e.schedule(function(){n.onError(t)})})};ne.generate=function(t,e,n,r,o){return o||(o=z),Ee(function(i){var s=!0,u=t;return o.scheduleRecursive(function(t){var o,c;try{s?s=!1:u=n(u),o=e(u),o&&(c=r(u))}catch(a){return i.onError(a),void 0}o?(i.onNext(c),t()):i.onCompleted()})})};var we=ne.defer=function(t){return Ee(function(e){var n;try{n=t()}catch(r){return ye(r).subscribe(e)}return n.subscribe(e)})};ne.using=function(t,e){return Ee(function(n){var r,o,i=S;try{r=t(),null!==r&&(i=r),o=e(r)}catch(s){return new N(ye(s).subscribe(n),i)}return new N(o.subscribe(n),i)})};var ge=ne.fromArray=function(t,e){return e||(e=z),Ee(function(n){var r=0;return e.scheduleRecursive(function(e){r<t.length?(n.onNext(t[r++]),e()):n.onCompleted()})})},Ee=ne.createWithDisposable=function(t){return new oe(t)};ne.create=function(t){return Ee(function(e){return D(t(e))})},ne.range=function(t,e,n){return n||(n=z),Ee(function(r){return n.scheduleRecursiveWithState(0,function(n,o){e>n?(r.onNext(t+n),o(n+1)):r.onCompleted()})})},re.repeat=function(t){return J(this,t).concat()},re.retry=function(t){return J(this,t).catchException()},ne.repeat=function(t,n,r){return r||(r=z),n===e&&(n=-1),me(t,r).repeat(n)},re.select=function(t){var e=this;return Ee(function(n){var r=0;return e.subscribe(function(e){var o;try{o=t(e,r++)}catch(i){return n.onError(i),void 0}n.onNext(o)},b(n,"onError"),b(n,"onCompleted"))})},re.where=function(t){var e=this;return Ee(function(n){var r=0;return e.subscribe(function(e){var o;try{o=t(e,r++)}catch(i){return n.onError(i),void 0}o&&n.onNext(e)},b(n,"onError"),b(n,"onCompleted"))})},re.groupByUntil=function(t,n,r,o){var i=this;return n||(n=s),o||(o=u),Ee(function(s){var u={},c=new N,a=new _(c);return c.add(i.subscribe(function(i){var f,l,h,p,b,d,v,m,y,w,g;try{v=t(i),m=o(v)}catch(E){for(g in u)u[g].onError(E);return s.onError(E),void 0}b=!1;try{w=u[m],w||(w=new ae,u[m]=w,b=!0)}catch(E){for(g in u)u[g].onError(E);return s.onError(E),void 0}if(b){d=new se(v,w,a),l=new se(v,w);try{f=r(l)}catch(E){for(g in u)u[g].onError(E);return s.onError(E),void 0}s.onNext(d),y=new R,c.add(y),p=function(){u[m]!==e&&(delete u[m],w.onCompleted()),c.remove(y)},y.disposable(f.take(1).subscribe(function(){},function(t){for(g in u)u[g].onError(t);s.onError(t)},function(){p()}))}try{h=n(i)}catch(E){for(g in u)u[g].onError(E);return s.onError(E),void 0}w.onNext(h)},function(t){for(var e in u)u[e].onError(t);s.onError(t)},function(){for(var t in u)u[t].onCompleted();s.onCompleted()})),a})},re.groupBy=function(t,e,n){return this.groupByUntil(t,e,function(){return de()},n)},re.take=function(t,e){if(0>t)throw new Error(h);if(0===t)return ve(e);var n=this;return Ee(function(e){var r=t;return n.subscribe(function(t){r>0&&(r--,e.onNext(t),0===r&&e.onCompleted())},b(e,"onError"),b(e,"onCompleted"))})},re.skip=function(t){if(0>t)throw new Error(h);var e=this;return Ee(function(n){var r=t;return e.subscribe(function(t){0>=r?n.onNext(t):r--},b(n,"onError"),b(n,"onCompleted"))})},re.takeWhile=function(t){var e=this;
return Ee(function(n){var r=0,o=!0;return e.subscribe(function(e){if(o){try{o=t(e,r++)}catch(i){return n.onError(i),void 0}o?n.onNext(e):n.onCompleted()}},b(n,"onError"),b(n,"onCompleted"))})},re.skipWhile=function(t){var e=this;return Ee(function(n){var r=0,o=!1;return e.subscribe(function(e){if(!o)try{o=!t(e,r++)}catch(i){return n.onError(i),void 0}o&&n.onNext(e)},b(n,"onError"),b(n,"onCompleted"))})},re.selectMany=function(t,e){return e?this.selectMany(function(n){return t(n).select(function(t){return e(n,t)})}):"function"==typeof t?xe.call(this,t):xe.call(this,function(){return t})};var xe=function(t){return this.select(t).mergeObservable()},Ce="Sequence contains no elements.";re.finalValue=function(){var t=this;return Ee(function(e){var n,r=!1;return t.subscribe(function(t){r=!0,n=t},function(t){e.onError(t)},function(){r?(e.onNext(n),e.onCompleted()):e.onError(new Error(Ce))})})},re.toArray=function(){var t=function(t,e){return t.push(e),t};return this.scan([],t).startWith([]).finalValue()},re.materialize=function(){var t=this;return Ee(function(e){return t.subscribe(function(t){e.onNext(U.createOnNext(t))},function(t){e.onNext(U.createOnError(t)),e.onCompleted()},function(){e.onNext(U.createOnCompleted()),e.onCompleted()})})},re.dematerialize=function(){var t=this;return Ee(function(e){return t.subscribe(function(t){return t.accept(e)},b(e,"onError"),b(e,"onCompleted"))})},re.asObservable=function(){var t=this;return Ee(function(e){return t.subscribe(e)})},re.windowWithCount=function(t,n){var r=this;if(0>=t)throw new Error(h);if(n===e&&(n=t),0>=n)throw new Error(h);return Ee(function(e){var o=new R,i=new _(o),s=0,u=[],c=function(){var t=new ae;u.push(t),e.onNext(d(t,i))};return c(),o.disposable(r.subscribe(function(e){var r,o,i;for(o=0;o<u.length;o++)u[o].onNext(e);r=s-t+1,r>=0&&r%n===0&&(i=u.shift(),i.onCompleted()),s++,s%n===0&&c()},function(t){for(;u.length>0;)u.shift().onError(t);e.onError(t)},function(){for(;u.length>0;)u.shift().onCompleted();e.onCompleted()})),i})},re.bufferWithCount=function(t,n){return n===e&&(n=t),this.windowWithCount(t,n).selectMany(function(t){return t.toArray()}).where(function(t){return t.length>0})},re.startWith=function(){var t,e,n=0;return arguments.length>0&&null!==arguments[0]&&void 0!==arguments[0].now?(e=arguments[0],n=1):e=V,t=l.call(arguments,n),G([ge(t,e),this]).concat()},re.scan=function(){var t,e,n=!1;2===arguments.length?(t=arguments[0],e=arguments[1],n=!0):e=arguments[0];var r=this;return we(function(){var o,i=!1;return r.select(function(r){return i?o=e(o,r):(o=n?e(t,r):r,i=!0),o})})},re.distinctUntilChanged=function(t,e){var n=this;return t||(t=s),e||(e=i),Ee(function(r){var o,i=!1;return n.subscribe(function(n){var s,u=!1;try{s=t(n)}catch(c){return r.onError(c),void 0}if(i)try{u=e(o,s)}catch(c){return r.onError(c),void 0}i&&u||(i=!0,o=s,r.onNext(n))},b(r,"onError"),b(r,"onCompleted"))})},re.finallyAction=function(t){var e=this;return Ee(function(n){var r=e.subscribe(n);return D(function(){try{r.dispose()}finally{t()}})})},re.doAction=function(t,e,n){var r,o=this;return"function"==typeof t?r=t:(r=function(e){t.onNext(e)},e=function(e){t.onError(e)},n=function(){t.onCompleted()}),Ee(function(t){return o.subscribe(function(e){try{r(e)}catch(n){t.onError(n)}t.onNext(e)},function(n){if(e){try{e(n)}catch(r){t.onError(r)}t.onError(n)}else t.onError(n)},function(){if(n){try{n()}catch(e){t.onError(e)}t.onCompleted()}else t.onCompleted()})})},re.skipLast=function(t){var e=this;return Ee(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&n.onNext(r.shift())},b(n,"onError"),b(n,"onCompleted"))})},re.takeLast=function(t){var e=this;return Ee(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},b(n,"onError"),function(){for(;r.length>0;)n.onNext(r.shift());n.onCompleted()})})},re.ignoreElements=function(){var t=this;return Ee(function(e){return t.subscribe(r,b(e,"onError"),b(e,"onCompleted"))})},re.elementAt=function(t){if(0>t)throw new Error(h);var e=this;return Ee(function(n){var r=t;return e.subscribe(function(t){0===r&&(n.onNext(t),n.onCompleted()),r--},b(n,"onError"),function(){n.onError(new Error(h))})})},re.elementAtOrDefault=function(t,n){var r=this;if(0>t)throw new Error(h);return n===e&&(n=null),Ee(function(e){var o=t;return r.subscribe(function(t){0===o&&(e.onNext(t),e.onCompleted()),o--},b(e,"onError"),function(){e.onNext(n),e.onCompleted()})})},re.defaultIfEmpty=function(t){var n=this;return t===e&&(t=null),Ee(function(e){var r=!1;return n.subscribe(function(t){r=!0,e.onNext(t)},b(e,"onError"),function(){r||e.onNext(t),e.onCompleted()})})},re.distinct=function(t,e){var n=this;return t||(t=s),e||(e=u),Ee(function(r){var o={};return n.subscribe(function(n){var i,s,u,c=!1;try{i=t(n),s=e(i)}catch(a){return r.onError(a),void 0}for(u in o)if(s===u){c=!0;break}c||(o[s]=null,r.onNext(n))},b(r,"onError"),b(r,"onCompleted"))})},re.mergeObservable=function(){var t=this;return Ee(function(e){var n=new N,r=!1,o=new R;return n.add(o),o.disposable(t.subscribe(function(t){var o=new R;n.add(o),o.disposable(t.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){n.remove(o),r&&1===n.length&&e.onCompleted()}))},function(t){e.onError(t)},function(){r=!0,1===n.length&&e.onCompleted()})),n})},re.merge=function(t){if("number"!=typeof t)return ne.merge(this,t);var e=this;return Ee(function(n){var r=0,o=new N,i=!1,s=[],u=function(t){var e=new R;o.add(e),e.disposable(t.subscribe(function(t){n.onNext(t)},function(t){n.onError(t)},function(){var t;o.remove(e),s.length>0?(t=s.shift(),u(t)):(r--,i&&0===r&&n.onCompleted())}))};return o.add(e.subscribe(function(e){t>r?(r++,u(e)):s.push(e)},b(n,"onError"),function(){i=!0,0===r&&n.onCompleted()})),o})},re.switchLatest=function(){var t=this;return Ee(function(e){var n=!1,r=new W,o=!1,i=0,s=t.subscribe(function(t){var s=new R,u=++i;return n=!0,r.disposable(s),s.disposable(t.subscribe(function(t){i===u&&e.onNext(t)},function(t){i===u&&e.onError(t)},function(){i===u&&(n=!1,o&&e.onCompleted())}))},b(e,"onError"),function(){o=!0,n||e.onCompleted()});return new N(s,r)})},ne.merge=function(){var t,e;return arguments[0]?arguments[0].now?(t=arguments[0],e=l.call(arguments,1)):(t=V,e=l.call(arguments,0)):(t=V,e=l.call(arguments,1)),e[0]instanceof Array&&(e=e[0]),ge(e,t).mergeObservable()};var Oe=function(t,e,n){var r=l.call(n,0);return r.unshift(t),e.apply(t,r)};re.concat=function(){return Oe(this,Ne,arguments)},re.concatObservable=function(){return this.merge(1)};var Ne=ne.concat=function(){var t=g(arguments,0);return G(t).concat()};re.catchException=function(t){return"function"==typeof t?Ae(this,t):De([this,t])};var Ae=function(t,e){return Ee(function(n){var r=new R,o=new W;return r.disposable(t.subscribe(b(n,"onNext"),function(t){var r,i;try{i=e(t)}catch(s){return n.onError(s),void 0}r=new R,o.disposable(r),r.disposable(i.subscribe(n))},b(n,"onCompleted"))),o})},De=ne.catchException=function(){var t=g(arguments,0);return G(t).catchException()};re.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Se([this,t])};var Se=ne.onErrorResumeNext=function(){var t=g(arguments,0);return Ee(function(e){var n=0,r=new W,o=V.scheduleRecursive(function(o){var i,s;n<t.length?(i=t[n++],s=new R,r.disposable(s),s.disposable(i.subscribe(b(e,"onNext"),function(){o()},function(){o()}))):e.onCompleted()});return new N(r,o)})};re.combineLatest=function(){var t=this,e=l.call(arguments),n=e.pop();return e.unshift(this),Ee(function(r){for(var o=e.length,i=new Array(o),u=!1,c=new Array(o),a=new Array(o),f=function(e){var o;if(i[e]=!0,u||(u=m.call(i,s))){try{o=n.apply(t,a)}catch(f){return r.onError(f),void 0}r.onNext(o)}else m.call(y.call(c,function(t,n){return n!==e}),s)&&r.onCompleted()},l=function(t){c[t]=!0,m.call(c,s)&&r.onCompleted()},h=new Array(o),p=0;o>p;p++)!function(t){h[t]=new R,h[t].setDisposable(e[t].subscribe(function(e){a[t]=e,f(t)},b(r,"onError"),function(){l(t)}))}(p);return new N(h)})},re.zip=function(){var t=this,e=l.call(arguments),n=e.pop();return e.unshift(t),Ee(function(r){for(var o=e.length,i=new Array(o),u=new Array(o),c=function(e){var o,c;if(m.call(i,function(t){return t&&t.length>0})){try{c=w.call(i,function(t){return t.shift()}),o=n.apply(t,c)}catch(a){return r.onError(a),void 0}r.onNext(o)}else m.call(y.call(u,function(t,n){return n!==e}),s)&&r.onCompleted()},a=function(t){u[t]=!0,m.call(u,s)&&r.onCompleted()},f=new Array(o),l=0;o>l;l++)!function(t){f[t]=new R,f[t].setDisposable(e[t].subscribe(function(e){i[t]||(i[t]=[]),i[t].push(e),c(t)},b(r,"onError"),function(){a(t)}))}(l);var h=new N(f);return h.add(D(function(){for(var t=0;o>t;t++)i[t]=null})),h})},re.takeUntil=function(t){var e=this;return v(t,e,function(t,e){var n=!1,r=!1;return new Z(function(e){r||n||("C"===e.kind?n=!0:"E"===e.kind?(n=!0,r=!0,t.onError(e.exception)):(r=!0,t.onCompleted()))},function(n){r||(n.accept(t),r="N"!==n.kind,r&&e.dispose())})})},re.skipUntil=function(t){return v(this,t,function(t,e,n){var r=!1,o=!1;return new Z(function(e){"E"==e.kind?t.onError(e.exception):r&&e.accept(t)},function(e){o||("N"===e.kind?r=!0:"E"===e.kind&&t.onError(e.exception),o=!0,n.dispose())})})},ne.amb=function(){var t,e,n=de(),r=g(arguments,0),o=function(t,e){return t.amb(e)};for(t=0,e=r.length;e>t;t++)n=o(n,r[t]);return n},re.amb=function(t){return v(this,t,function(t,e,n){var r="N";return new Z(function(e){"N"===r&&(r="L",n.dispose()),"L"===r&&e.accept(t)},function(n){"N"===r&&(r="R",e.dispose()),"R"===r&&n.accept(t)})})};var Re=function(t){function e(){e.base.constructor.apply(this,arguments)}return a(e,t),e.prototype.next=function(t){e.base.next.call(this,t),this.ensureActive()},e.prototype.error=function(t){e.base.error.call(this,t),this.ensureActive()},e.prototype.completed=function(){e.base.completed.call(this),this.ensureActive()},e}($);re.observeOn=function(t){var e=this;return Ee(function(n){return e.subscribe(new Re(t,n))})},re.subscribeOn=function(t){var e=this;return Ee(function(n){var r=new R,o=new W;return o.setDisposable(r),r.setDisposable(t.schedule(function(){o.setDisposable(new q(t,e.subscribe(n)))})),o})}}("undefined"!=typeof window?window:this),function(t,e){var n;n="undefined"!=typeof t.module&&"undefined"!=typeof t.module.exports?t.require("./rx.min.js"):t.Rx;var r=n.Observable,o=r.prototype,i=r.createWithDisposable,s=n.CompositeDisposable,u=function(t,e){return t===e},c=function(t){return t},a=function(t,e){return t>e?1:t===e?0:-1},f=function(t,e,n){return i(function(r){var o=!1,i=null,s=[];return t.subscribe(function(t){var u,c;try{c=e(t)}catch(a){return r.onError(a),void 0}if(u=0,o)try{u=n(c,i)}catch(f){return r.onError(f),void 0}else o=!0,i=c;u>0&&(i=c,s=[]),u>=0&&s.push(t)},function(t){r.onError(t)},function(){r.onNext(s),r.onCompleted()})})};o.aggregate=function(t,e){return this.scan(t,e).startWith(t).finalValue()},o.aggregate1=function(t){return this.scan1(t).finalValue()},o.any=function(t){var n=this;return t!==e?n.where(t).any():i(function(t){return n.subscribe(function(){t.onNext(!0),t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})})},o.all=function(t){return this.where(function(e){return!t(e)}).any().select(function(t){return!t})},o.contains=function(t,e){return e||(e=u),this.where(function(n){return e(n,t)}).any()},o.count=function(){return this.aggregate(0,function(t){return t+1})},o.sum=function(){return this.aggregate(0,function(t,e){return t+e})},o.minBy=function(t,e){return e||(e=a),f(this,t,function(t,n){return-1*e(t,n)})};var l=function(t){if(0==t.length)throw Error("Sequence contains no elements.");return t[0]};o.min=function(t){return this.minBy(c,t).select(function(t){return l(t)})},o.maxBy=function(t,e){return e||(e=a),f(this,t,e)},o.max=function(t){return this.maxBy(c,t).select(function(t){return l(t)})},o.average=function(){return this.scan({sum:0,count:0},function(t,e){return{sum:t.sum+e,count:t.count+1}}).finalValue().select(function(t){return t.sum/t.count})},o.sequenceEqual=function(t,e){var n=this;return e||(e=u),i(function(r){var o=!1,i=!1,u=[],c=[],a=n.subscribe(function(t){var n,o;if(0<c.length){o=c.shift();try{n=e(o,t)}catch(s){return r.onError(s),void 0}n||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(0<c.length?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))}),f=t.subscribe(function(t){var n,i;if(0<u.length){i=u.shift();try{n=e(i,t)}catch(s){return r.onError(s),void 0}n||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):c.push(t)},function(t){r.onError(t)},function(){i=!0,0===c.length&&(0<u.length?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new s(a,f)})}}("undefined"!=typeof window?window:this),function(t,e){var n;n="undefined"!=typeof t.module&&"undefined"!=typeof t.module.exports?t.require("./rx.min.js"):t.Rx;var r=n.Observable,o=r.prototype,i=r.createWithDisposable,s=r.defer,u=(r.fromArray,r.throwException),c=n.Scheduler.Timeout,a=n.SingleAssignmentDisposable,f=n.SerialDisposable,l=n.CompositeDisposable,h=n.RefCountDisposable,p=n.Subject,b=n.Internals.BinaryObserver,d=function(t,e){return i(function(n){return new l(e.getDisposable(),t.subscribe(n))})},v=function(t,e,n){return i(function(r){var o=new a,i=new a,s=n(r,o,i);return o.disposable(t.materialize().select(function(t){return{switchValue:function(e){return e(t)}}}).subscribe(s)),i.disposable(e.materialize().select(function(t){return{switchValue:function(e,n){return n(t)}}}).subscribe(s)),new l(o,i)})},m=function(t){return 0>t?0:t},y=function(t,e){return i(function(n){return e.scheduleWithAbsolute(t,function(){n.onNext(0),n.onCompleted()})})},w=function(t,e,n){var r=m(e);return i(function(e){var o=0,i=t;return n.scheduleRecursiveWithAbsolute(i,function(t){var s;r>0&&(s=n.now(),i+=r,s>=i&&(i=s+r)),e.onNext(o++),t(i)})})},g=function(t,e){var n=m(t);return i(function(t){return e.scheduleWithRelative(n,function(){t.onNext(0),t.onCompleted()})})},E=function(t,e,n){return s(function(){return w(n.now()+t,e,n)})},x=r.interval=function(t,e){return e||(e=c),E(t,t,e)};r.timer=function(t,n,r){var o;return r||(r=c),n!==e&&"number"==typeof n?o=n:n!==e&&"object"==typeof n&&(r=n),t instanceof Date&&o===e?y(t.getTime(),r):t instanceof Date&&o!==e?(o=n,w(t.getTime(),o,r)):o===e?g(t,r):E(t,o,r)};var C=function(t,e,n){return i(function(r){var o,i=!1,s=new f,u=null,c=[],h=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,f;"E"===t.value.kind?(c=[],c.push(t),u=t.value.exception,f=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),f=!i,i=!0),f&&(null!==u?r.onError(u):(o=new a,s.disposable(o),o.disposable(n.scheduleRecursiveWithRelative(e,function(t){var e,o,s,a;if(null===u){h=!0;do s=null,c.length>0&&c[0].timestamp-n.now()<=0&&(s=c.shift().value),null!==s&&s.accept(r);while(null!==s);a=!1,o=0,c.length>0?(a=!0,o=Math.max(0,c[0].timestamp-n.now())):i=!1,e=u,h=!1,null!==e?r.onError(e):a&&t(o)}}))))}),new l(o,s)})},O=function(t,e,n){return s(function(){var t=e-n.now();return C(t,n)})};o.delay=function(t,e){return e||(e=c),t instanceof Date?O(this,t.getTime(),e):C(this,t,e)},o.throttle=function(t,e){e||(e=c);var n=this;return i(function(r){var o,i=new f,s=!1,u=0,c=null;return o=n.subscribe(function(n){var o,f;s=!0,c=n,u++,o=u,f=new a,i.disposable(f),f.disposable(e.scheduleWithRelative(t,function(){s&&u===o&&r.onNext(c),s=!1}))},function(t){i.dispose(),r.onError(t),s=!1,u++},function(){i.dispose(),s&&r.onNext(c),r.onCompleted(),s=!1,u++}),new l(o,i)})},o.windowWithTime=function(t,n,r){var o,s=this;return n===e&&(o=t),r===e&&(r=c),"number"==typeof n?o=n:"object"==typeof n&&(o=t,r=n),i(function(e){var n,i,u,c=o,b=t,v=[],m=new f,y=0;return i=new l(m),u=new h(i),n=function(){var t,i,s,f,l;s=new a,m.disposable(s),i=!1,t=!1,b===c?(i=!0,t=!0):c>b?i=!0:t=!0,f=i?b:c,l=f-y,y=f,i&&(b+=o),t&&(c+=o),s.disposable(r.scheduleWithRelative(l,function(){var r;t&&(r=new p,v.push(r),e.onNext(d(r,u))),i&&(r=v.shift(),r.onCompleted()),n()}))},v.push(new p),e.onNext(d(v[0],u)),n(),i.add(s.subscribe(function(t){var e,n;for(e=0;e<v.length;e++)n=v[e],n.onNext(t)},function(t){var n,r;for(n=0;n<v.length;n++)r=v[n],r.onError(t);e.onError(t)},function(){var t,n;for(t=0;t<v.length;t++)n=v[t],n.onCompleted();e.onCompleted()})),u})},o.windowWithTimeOrCount=function(t,e,n){var r=this;return n||(n=c),i(function(o){var i,s,u,c,b=0,v=new f,m=0;return s=new l(v),u=new h(s),i=function(e){var r=new a;v.disposable(r),r.disposable(n.scheduleWithRelative(t,function(){var t;e===m&&(b=0,t=++m,c.onCompleted(),c=new p,o.onNext(d(c,u)),i(t))}))},c=new p,o.onNext(d(c,u)),i(0),s.add(r.subscribe(function(t){var n=0,r=!1;c.onNext(t),b++,b===e&&(r=!0,b=0,n=++m,c.onCompleted(),c=new p,o.onNext(d(c,u))),r&&i(n)},function(t){c.onError(t),o.onError(t)},function(){c.onCompleted(),o.onCompleted()})),u})},o.bufferWithTime=function(t,n,r){var o;return n===e&&(o=t),r||(r=c),"number"==typeof n?o=n:"object"==typeof n&&(o=t,r=n),this.windowWithTime(t,o,r).selectMany(function(t){return t.toArray()})},o.bufferWithTimeOrCount=function(t,e,n){return n||(n=c),this.windowWithTimeOrCount(t,e,n).selectMany(function(t){return t.toArray()})},o.timeInterval=function(t){var e=this;return t||(t=c),s(function(){var n=t.now();return e.select(function(e){var r=t.now(),o=r-n;return n=r,{value:e,interval:o}})})},o.timestamp=function(t){return t||(t=c),this.select(function(e){return{value:e,timestamp:t.now()}})};var N=function(t,n){return v(t,n,function(t){var n,r=!1;return new b(function(e){"N"===e.kind&&(n=e),"E"===e.kind&&e.accept(t),"C"===e.kind&&(r=!0)},function(){var o=n;n=e,o!==e&&o.accept(t),r&&t.onCompleted()})})};o.sample=function(t,e){return e||(e=c),"number"==typeof t?N(this,x(t,e)):N(this,t)},o.timeout=function(t,n,r){var o,s=this;return n===e&&(n=u(new Error("Timeout"))),r||(r=c),o=t instanceof Date?function(t,e){r.scheduleWithAbsolute(t,e)}:function(t,e){r.scheduleWithRelative(t,e)},i(function(e){var r,i=0,u=new a,c=new f,h=!1,p=new f;return c.disposable(u),r=function(){var r=i;p.disposable(o(t,function(){var t;h=i===r,t=h,t&&c.disposable(n.subscribe(e))}))},r(),u.disposable(s.subscribe(function(t){var n=!h;n&&(i++,e.onNext(t),r())},function(t){var n=!h;n&&(i++,e.onError(t))},function(){var t=!h;t&&(i++,e.onCompleted())})),new l(c,p)})},r.generateWithAbsoluteTime=function(t,e,n,r,o,s){return s||(s=c),i(function(i){var u,c,a=!0,f=!1,l=t;return s.scheduleRecursiveWithAbsolute(s.now(),function(t){f&&i.onNext(u);try{a?a=!1:l=n(l),f=e(l),f&&(u=r(l),c=o(l))}catch(s){return i.onError(s),void 0}f?t(c):i.onCompleted()})})},r.generateWithRelativeTime=function(t,e,n,r,o,s){return s||(s=c),i(function(i){var u,c,a=!0,f=!1,l=t;return s.scheduleRecursiveWithRelative(0,function(t){f&&i.onNext(u);try{a?a=!1:l=n(l),f=e(l),f&&(u=r(l),c=o(l))}catch(s){return i.onError(s),void 0}f?t(c):i.onCompleted()})})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.forEach=e.Observable.subscribe,e.Observable.map=e.Observable.select,e.Observable.filter=e.Observable.where,e.Observable.flatMap=e.Observable.selectMany;var n=e.Observer.create(function(t){var e,n,r;this.hasItem=!0,e||(e=this.unsubscribe,n=this.obsOrFunc,r=this.outerSubscription,void 0!==r?(r.dispose(),this.outerSubscription=void 0):this.unsubscribe=!0,this.subscription=n instanceof Function?n(t).subscribe(this.observer):n.subscribe(this.observer))},function(t){this.unsubscribe||this.observer.onError(t)},function(){this.unsubscribe||this.hasItem||this.observer.onCompleted()}),r=e.Disposable.create(function(){var t=this.observableSubscription,e=this.observer,n=e.subscription;void 0!==t?(t.dispose(),this.observableSubscription=void 0):void 0!==n&&(n.dispose(),this.observerSubscription=void 0)}),o=Object.create(new e.Observable,{_subscribe:{value:function(t){var e,o=Object.create(n,{obsOrFunc:{value:this.obsOrFunc},observer:{value:t}}),i=this.source.subscribe(o);return o.outerSubscription=i,e=Object.create(r,{observableSubscription:{value:i},observer:{value:o}}),o.unsubscribe&&i.dispose(),e}}});e.Observable.prototype.then=function(t){return Object.create(o,{source:{value:this},obsOrFunc:{value:t}})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=new e.Observable;n.subscribe=function(t,n,r){return"function"==typeof t?(t(this.value),r&&r()):(t.onNext(this.value),t.onCompleted()),e.Disposable.empty},e.Observable.fastReturnValue=function(t){return Object.create(n,{value:{value:t}})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=e.Observer.create(function(t){var e,n,r=this.projection(t),o=this.observer;for(n=0,e=r.length;e>n;n++)o.onNext(r[n])},function(t){this.observer.onError(t)},function(){this.observer.onCompleted()});e.Observable.prototype.selectManyArrays=function(t){var r=this;return e.Observable.fastCreateWithDisposable(function(e){return r.subscribe(Object.create(n,{observer:{value:e},projection:{value:t}}))})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.prototype.subscribeIgnoreErrors=function(t,e,n){return"function"!=typeof t?(void 0===t.onError&&(t.onError=function(){}),this.subscribe(t)):(void 0===e&&(e=function(){}),this.subscribe(t,e,n))},e.Observable.prototype.windowWithTime=function(t){var n=this;return e.Observable.createWithDisposable(function(e){var r,o=[],i=function(){e.onNext(o.slice()),o.length=0};return n.subscribe(function(e){o.push(e),null===r&&(r=setTimeout(i,t))},function(t){null!==r&&clearTimeout(r),o.length>0&&e.onNext(o),e.onError(t)},function(){null!==r&&clearTimeout(r),o.length>0&&e.onNext(o),e.onCompleted()})})},e.Observable.prototype.chain=function(t){return t.reduce(function(t,e){return t.selectMany(e)},this)},e.EventDisposable=function(t,e){this.observers=t,this.observer=e},e.EventDisposable.prototype=new e.Disposable,e.EventDisposable.prototype.dispose=function(){for(var t=this.observers,e=this.observer,n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}},e.Event=function(){this.observers=[]},e.Event.prototype=new e.Observable,e.Event.prototype.subscribe=function(t){var n=this.observers;return t="function"==typeof t?{onNext:t}:t,this.observers[n.length]=t,new e.EventDisposable(n,t)},e.Event.prototype.onNext=function(t){for(var e,n=this.observers,r=0;r<n.length;)e=n[r],e.onNext(t),e===n[r]&&r++},e.Observable.forkJoin=function(){var t=function(t,e){return 1===t.length&&t[e]instanceof Array?t[e]:Array.prototype.slice.call(t)};return function(){var n=t(arguments,0);return e.Observable.createWithDisposable(function(t){var r=n.length;if(0===r)return t.onCompleted(),void 0;for(var o=new e.CompositeDisposable,i=!1,s=new Array(r),u=new Array(r),c=new Array(r),a=0;r>a;a++)!function(e){var a=n[e];o.add(a.subscribe(function(t){i||(s[e]=!0,c[e]=t)},function(e){i=!0,t.onError(e),o.dispose()},function(){if(!i){if(!s[e])return t.onCompleted(),void 0;u[e]=!0;for(var n=0;r>n;n++)if(!u[n])return;i=!0,t.onNext(c),t.onCompleted()}}))}(a);return o})}}(),e.Observable.combineLatest=function(){var t=function(t,e){this.value=t,this.next=e};return t.prototype.toArray=function(){for(var t=this,e=[];t;)e.push(t.value),t=t.next;return e},function(n,r){var o,i=n.length-1;if(n.length>1){for(o=n[i].select(function(e){return new t(e)}),i=n.length-2;i>=0;i--)o=o.combineLatest(n[i],function(e,n){return new t(n,e)});return o.select(function(t){return r.apply(null,t.toArray())})}return 1==n.length?n[0].select(r):e.Observable.empty()}}(),e.Observable.zip=function(){var t=function(t,e){this.value=t,this.next=e};return t.prototype.toArray=function(){for(var t=this,e=[];t;)e.push(t.value),t=t.next;return e},function(n,r){var o,i=n.length-1;if(n.length>1){for(o=n[i].select(function(e){return new t(e)}),i=n.length-2;i>=0;i--)o=o.zip(n[i],function(e,n){return new t(n,e)});return o.select(function(t){return r.apply(null,t.toArray())})}return 1==n.length?n[0].select(r):e.Observable.empty()}}(),e.Observable.prototype.withPrevious=function(t){var n=this,r=arguments;return e.Observable.createWithDisposable(function(e){return 1===r.length&&e.onNext({current:t,previous:void 0}),n.subscribe(function(n){e.onNext({current:n,previous:t}),t=n},function(t){e.onError(t)},function(){e.onCompleted()})})},e.Observable.prototype.toMap=function(t,n){var r=this;return e.Observable.createWithDisposable(function(e){var o={};return r.subscribe(function(e){var r=t(e);n&&(e=n(e)),o[r]=e},function(t){e.onError(t)},function(){e.onNext(o),e.onCompleted()})})},e.Observable.fastCreateWithDisposable=function(t){var n=new e.Observable;return n._subscribe=t,n},e.Observable.prototype.time=function(n){var r=this;return e.Observable.fastCreateWithDisposable(function(e){var o=!1,i=t.util.log;return i.time(n),i.time(n+"-untilFirstOnNext"),r.subscribe(function(t){o||(i.timeEnd(n+"-untilFirstOnNext"),i.time(n+"-fromFirstOnNextUntilCompletedOrError"),o=!0),e.onNext(t)},function(t){i.timeEnd(n+"-untilFirstOnNext"),i.timeEnd(n+"-fromFirstOnNextUntilCompletedOrError"),i.timeEnd(n),e.onError(t)},function(){i.timeEnd(n+"-untilFirstOnNext"),i.timeEnd(n+"-fromFirstOnNextUntilCompletedOrError"),i.timeEnd(n),e.onCompleted()})})},e.Observable.prototype.buffer=function(t){var n=this;return e.Observable.createWithDisposable(function(e){var r,o,i,s=[];return n.subscribe(function(n){s.push(n),void 0===i&&(i=setTimeout(function(){i=void 0,e.onNext(s),s=[],r?e.onError(r):o&&e.onCompleted()},t))},function(t){void 0===i?e.onError(t):r=t},function(){void 0===i?e.onCompleted():o=!0})})},e.Observable.prototype.last=function(){var t=this;return e.Observable.fastCreateWithDisposable(function(e){var n,r=!1;return t.subscribe(function(t){n=t,r=!0},function(t){r&&e.onNext(n),e.onError(t)},function(){r&&e.onNext(n),e.onCompleted()})})},e.Observable.fromArrayFast=function(t){return e.Observable.fastCreateWithDisposable(function(e){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n]);e.onCompleted()})},e.Observable.prototype.toArrayFast=function(){var t=this;return e.Observable.fastCreateWithDisposable(function(e){var n=[];return t.subscribe(function(t){n.push(t)},function(t){e.onError(t)},function(){e.onNext(n),e.onCompleted()})})},e.Observable.prototype.finalValueFast=function(){var t=this;return e.Observable.fastCreateWithDisposable(function(e){var n,r=!1;return t.subscribe(function(t){r=!0,n=t},function(t){e.onError(t)},function(){r&&e.onNext(n),e.onCompleted()})})},e.Observable.prototype.reduce=function(t){var e,n;return 2===arguments.length&&(n=!0,e=arguments[1]),n?this.scan(e,t).startWith(e).finalValue():this.scan(t).finalValue()},e.Observable.prototype.or=function(t){return this.selectMany(function(n){return n?e.Observable.returnValue(n):t})},e.Observable.or=function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=1;for(n;n<t.length;n+=1)e=e.or(t[n]);return e}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=function(t){return this._hasValue&&t.onNext(this._value),e.Subject.prototype._subscribe.call(this,t)};e.ReplayLastSubject=function(t){e.Subject.call(this),this._value=t,this._hasValue=arguments.length>0,this._subscribe=n},e.ReplayLastSubject.prototype=Object.create(e.Subject.prototype),e.ReplayLastSubject.prototype.constructor=e.ReplayLastSubject,e.ReplayLastSubject.prototype.onNext=function(t){this._hasValue&&t===this._value||(this._value=t,this._hasValue=!0,e.Subject.prototype.onNext.call(this,t))},e.Observable.prototype.replayLast=function(){var t=new e.ReplayLastSubject;return this.subscribe(t),t}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.prototype.retryWhile=function(t,n){var r=this;return e.Observable.create(function(e){var o,i=0,s=function(){o=r.subscribe(function(t){e.onNext(t)},function(r){n>i&&t(r)?(i++,s()):e.onError(r)},function(){e.onCompleted()})};return s(),function(){o.dispose()}})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.prototype.takeUntilSettled=function(t){var n=this;if("number"!=typeof t)throw new Error("Rx.Observable#takeUntilSettled() expects a number");return e.Observable.createWithDisposable(function(e){function r(t){clearTimeout(i),t?e.onError(t):e.onCompleted()}function o(n){clearTimeout(i),e.onNext(n),i=setTimeout(r,t)}var i;return n.subscribe(o,r,r)})}}("undefined"!=typeof window?window:this),function(t){function e(t,e,r){return n.Observable.createWithDisposable(function(n){return t.subscribe(function(t){n.onNext(t),n.onCompleted()},n.onError.bind(n),function(){e?(n.onNext(r),n.onCompleted()):n.onError(new Error("Sequence contains no elements."))})})}var n=t.Rx,r=n.Observable.prototype;r.first=function(t,n){return t?this.where(t,n).first():e(this,!1)},r.firstOrDefault=function(t,n){return t?this.where(t).firstOrDefault(null,n):e(this,!0,n)}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=e.Observable;e.computed=function(t,r){var o,i=[],s=[],u=t.read;for(var c in t.params)o=t.params[c],i.push(c),s.push(o.subscribe?o:new e.BehaviorSubject(o));var a=n.combineLatest(s,function(){var t,e,n=arguments,r={};for(e=0,t=i.length;t>e;e+=1)r[i[e]]=n[e];return r});return n.create(function(t){var e=a.select(r?u.bind(r):u).distinctUntilChanged().subscribe(t);return function(){e.dispose()}})}}("undefined"!=typeof window?window:this)},{}],"nf-rx":[function(t,e){"use strict";var n,r=t("../dist/nf-rx.js");n="undefined"!=typeof window?window.Rx:r.Rx,e.exports=n},{"../dist/nf-rx.js":1}]},{},[])("nf-rx")})});

Requireify.register("nf-cons-log",function(e,t,n,i){!function(e){if("object"==typeof i&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.nfConsLog=e()}}(function(){return function t(n,i,s){function o(a,u){if(!i[a]){if(!n[a]){var d="function"==typeof e&&e;if(!u&&d)return d(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=i[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return o(t?t:e)},f,f.exports,t,n,i,s)}return i[a].exports}for(var r="function"==typeof e&&e,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(e,t){!function(e){"use strict";e.util="undefined"==typeof e.util?{}:e.util,e.util.isObjectOrArray=function(e){return e&&"object"==typeof e}}("undefined"!=typeof window?window:this),function(e){"use strict";var t=e.netflix||{};t.pureMixin=function(e,n){var i,s,o,r,a=Object.keys(n),u=t.pureMixin;for(r=a.length-1;r>=0;r--)i=a[r],s=n[i],o=e[i],void 0!==o&&void 0!==s&&null!==o&&null!==s&&"object"==typeof o&&"object"==typeof s&&(n[i]=u(o,s)),n[i]={value:n[i]};return Object.create(e,n)},t.deepMixin=function(e,n){var i,s,o;if(void 0===e||null===e)return n;if("string"==typeof e&&"undefined"!=typeof n)return e;for(i in n)s=e[i],o=n[i],void 0!==s&&null!==s?e[i]=t.deepMixin(s,o):"object"==typeof s&&void 0!==o&&null!==o&&"object"==typeof o?t.deepMixin(s,o):e[i]=o;return e}}("undefined"!=typeof window?window:this),function(t){"use strict";var n=e("nf-rx");t.netflix=t.netflix||{},t.netflix.notification=t.netflix.notification||{},t.netflix.notification.notifications=new n.Subject}("undefined"!=typeof window?window:this),function(e){"use strict";var t=e.netflix,n={appSession:{send:"both"},userSession:{send:"both"},sharedContext:{send:"both"},uiModalViewChanged:{eventProperties:{value:"modalView"},send:"start"},uiModelessView:{send:"both",overlapping:"true"},uiDataRequest:{send:"end"}};t.notification=t.notification||{},t.notification.specification=t.notification.specification||{},t.notification.specification.uiQOE=t.notification.specification.uiQOE||{};for(var i in n)n.hasOwnProperty(i)&&!t.notification.specification.uiQOE[i]&&(t.notification.specification.uiQOE[i]=n[i])}("undefined"!=typeof window?window:this),function(t){"use strict";var n=e("nf-rx"),i={enumerable:!1},s=function(){},o=t.util.isObjectOrArray,r=t.netflix;r.notification.ClientNotifications=function(e){e=e||{};var t=e.requestSender||s,i=e.timeStampGenerator||function(){return 0},o=e.guidGenerator||s,r=e.log||s,a=e.maxBufferSize,u=e.maxFlushDelay,d=e.specification,c=e.sessionState,f=e.retryFailedRequests,l=e.metadata||{},h=e.sequencePrefix||"",v=isNaN(e.timeStampOffset)?0:e.timeStampOffset,p=e.isValidEvent||function(){return!0};this.setTimeStampOffset(v),this.log=r,this.metadata=l,this.specification=d,this._isValidEvent=p,this._retryFailedRequests=Boolean(f),this.sessionState=c||{sessions:{},sessionsList:[]},this.events=this._createEvents(),this.sequence=1,this._sequencePrefix=h,this._timestampOffset=0,this._timeStampGenerator=i,this.maxFlushDelay=u,this.maxBufferSize=a,this._queuedRequests=[],this._queue=[],this.nextGuid=o,this.eventsWithActiveSessions=this._createEventsWithActiveSessions(),this._flushes=new n.Subject,this.outgoingRequests=this._createRequests(),this.unsentRequests=new n.Subject,this.enabled=void 0,this._enabledChanges=new n.Subject,this._isEventEnabledByEventNameByCategory={},this._eventsQueuedBeforeEnabled=[],this._requestSender=t,this.requests=this._createRequestsObservable()},r.notification.ClientNotifications.prototype={setTimeStampOffset:function(e){this._timestampOffset=e},getTimeStampOffset:function(){return this._timestampOffset},timeStamp:function(){return this._timeStampGenerator()+this._timestampOffset},setSequencePrefix:function(e){this._sequencePrefix=e},getSequencePrefix:function(){return this._sequencePrefix},clearSequencePrefix:function(){this._sequencePrefix=""},getRequestSendDelayMs:function(e){var t=e.retryCount||0;return 100*(t&&Math.pow(2,t))},removeQueuedRequest:function(e){var t=this._queuedRequests,n=t.indexOf(e);n>-1&&t.splice(n,1)},suspend:function(){var e,t=this,n={metadata:this.metadata,maxBufferSize:this.maxBufferSize,maxFlushDelay:this.maxFlushDelay,eventsQueuedBeforeEnabled:this._eventsQueuedBeforeEnabled,sequence:void 0,sequencePrefix:this._sequencePrefix,enabled:this.enabled,sessionState:this.sessionState,queuedRequests:this._queuedRequests.slice(0)};return this.maxBufferSize=Number.MAX_VALUE,this.sessionState.sessionsList.concat(this._eventsQueuedBeforeEnabled).filter(function(e){var n=t._getEventSpecification(e);return n&&n.cancelOnSuspend}).forEach(function(e){t.notifyEnd(e,{data:{reason:"canceled"}})}),e=this.createRequestFromUnsentEvents(),e&&n.queuedRequests.push(e),n.queuedRequests.forEach(function(e){delete e.retryCount}),n.sequence=this.sequence,n},restore:function(e){this.maxBufferSize=e.maxBufferSize||this.maxBufferSize,this.maxFlushDelay=e.maxFlushDelay||this.maxFlushDelay,this._eventsQueuedBeforeEnabled=e.eventsQueuedBeforeEnabled||this._eventsQueuedBeforeEnabled,this.sequence=e.sequence||this.sequence,this._sequencePrefix=e.sequencePrefix||this._sequencePrefix,r.deepMixin(this.metadata,e.metadata||{}),this.sessionState=e.sessionState||this.sessionState,e.enabled===!1&&this.start(e.enabled),this.addToUnsentRequests(e.queuedRequests||[])},addToUnsentRequests:function(e){var t;if(Array.isArray(e))for(this.log("Adding "+e.length+" unsent requests."),t=0;t<e.length;++t)this.unsentRequests.onNext(e[t])},notify:function(e,t,n){return n=n||{},n.type="event",n.category=e,n.name=t,this.enabled!==!1&&this.events.onNext(n),n},start:function(e){var t,n=this._eventsQueuedBeforeEnabled,i=n.length;if(void 0!==e){if(this.enabled=e,e===!0)for(t=0;i>t;t++)this.events.onNext(n[t]);n.length=0,this._enabledChanges.onNext(e)}},getSession:function(e,t){var n,i,s,o,r=e+"."+t,a=this.sessionState;if(!a||!a.sessions)return this.log("ClientNotifications#getSession called but we have no session state."),void 0;if(s=this.sessionState.sessions[r])return s;for(i=this._eventsQueuedBeforeEnabled,n=i.length,o=n-1;o>=0;--o)if(s=i[o],s.category===e&&s.sessionName===t)return s},_getEventKey:function(e){return e.category+"."+e.sessionName},notifyStart:function(e,t,n){var i,s,o,r;if(n=n||{},i=n.sessionId,n.type="sessionStarted",n.category=e,n.name=t+".started",n.sessionName=t,void 0!==i&&(s=this._getEventKey(n),o=this.sessionState.sessions[s],void 0!==o))if(Array.isArray(o)){if(r=this._arrayIndexWhere(o,function(e){return e.sessionId===i}),-1!==r)return o[r]}else if(o.sessionId===n.sessionId)return o;return this.enabled!==!1&&this.events.onNext(n),n},notifyEnd:function(e,t,n){var i,s=this,o=e,r=t,a=void 0!==o.category,u=a?this.getSession(e.category,e.name):this.getSession(e,t);if(a?(e=o.category,t=o.sessionName,r=r||{},r.sessionId=o.sessionId,n=r):n=n||{},u&&(Array.isArray(u)&&(r.sessionId?(i=s._arrayIndexWhere(u,function(e){return e.sessionId===r.sessionId}),-1!==i&&(u=u[i])):u=u[u.length-1]),u.childrenWhoseSessionsIClose))for(var d=u.childrenWhoseSessionsIClose.length-1;d>=0;d--)this.notifyEnd(u.childrenWhoseSessionsIClose[d]);return n.type="sessionEnded",n.category=e,n.name=t+".ended",n.sessionName=t,this.enabled!==!1&&this.events.onNext(n),n},areEventsQueued:function(){return this._queue.length>0},flush:function(){this._flushes.onNext()},_arrayIndexWhere:function(e,t){var n;for(n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1},_getEventSessionKey:function(e){var t=e.sessionKey;return void 0===t&&(t=[e.category,e.sessionName,e.sessionId],e.sessionKey=t),t},_isEventEnabled:function(e,t){var n,i,s;return n=this._isEventEnabledByEventNameByCategory[e.category]||{},this._isEventEnabledByEventNameByCategory[e.category]=n,"undefined"!=typeof n[e.sessionName]?n[e.sessionName]:(i=Number(t.disabledChance),i=isNaN(i)?0:i,s=Math.floor(100*Math.random())>=i,n[e.sessionName]=s,s||this.log("Disabling "+e.category+"."+e.sessionName+" (disabledChance: "+(t.disabledChance||0)+")"),s)},_getSuppressPercentage:function(e){var t=Number(e.suppressPercentage);return isNaN(t)?0:t},_getEventSpecification:function(e){var t,n=this.specification,s=e.specification;return s&&"object"==typeof s?s:(n&&"object"==typeof n?(t=n[e.category]||{},s=t[e.sessionName]||t[e.name],s&&"object"==typeof s||(s={},t&&"object"==typeof t&&(t[e.name]=s))):s={},s.suppressPercentage=this._getSuppressPercentage(s),e.specification=s,Object.defineProperty(e,"specification",i),s)},_addTimeAndIds:function(e){return void 0===e.time&&(e.time=this.timeStamp()),void 0===e.id&&(e.id=this.nextGuid()),"sessionStarted"===e.type&&void 0===e.sessionId&&(e.sessionId=this.nextGuid()),e},_sendQueuedRequest:function(e){var t=this;return this._requestSender(e).doAction(function(){t.removeQueuedRequest(e)},function(){t.removeQueuedRequest(e),t._retryFailedRequests&&(++e.retryCount,t.log("Request failed, retrying..."),t.outgoingRequests.onNext(e))}).catchException(function(){return n.Observable.returnValue(e)})},_sendRequestAfterDelay:function(e){this._queuedRequests.push(e),e.time=e.time||this.timeStamp(),e.retryCount=e.retryCount||0;var t=this.getRequestSendDelayMs(e);return t&&this.log("Delaying request with timestamp "+e.time+" by "+t+"ms..."),n.Observable.timer(t).take(1).selectMany(this._sendQueuedRequest.bind(this,e))},_waitUntilEnabled:function(e){return this.enabled?n.Observable.returnValue(e):this._enabledChanges.where(function(e){return e===!0}).select(function(){return e}).take(1)},_createRequestsObservable:function(){return n.Observable.merge(this.unsentRequests.selectMany(this._waitUntilEnabled.bind(this)),this.outgoingRequests.selectMany(this._waitUntilEnabled.bind(this))).selectMany(this._sendRequestAfterDelay.bind(this)).publish().connect()},_createEvents:function(){var e=this,t=new n.Subject,i=t.onNext;return t.onNext=function(n){e._addTimeAndIds(n),void 0===e.enabled?e._eventsQueuedBeforeEnabled.push(n):e.enabled===!0&&e._isValidEvent(n)&&i.call(t,n)},t},_writePromotedPropertyValueToPath:function(e,t,n){var i,s,o;for(i=0;i<t.length-1;i++)s=t[i],o=e[s],(null===o||"object"!=typeof o)&&(o={},e[s]=o),e=o;e[t[t.length-1]]=n},_writePromotedPropertiesFromSession:function(e,t,n){var i,s,r,a,u,d,c,f=t.data;if(void 0!==f)for(i in e){if(s=e[i],s===!0&&(s=i),o(s)&&!Array.isArray(s)){if(r=s,a=r[n.category],u=o(a)&&a[n.sessionName],d=o(a)&&void 0!==a["default"]?a["default"]:r["default"],d=void 0===d?!1:d,c=void 0===a||o(a)&&void 0===u,a===!1||u===!1||c&&d===!1)continue;(u===!0||a===!0||c&&d===!0)&&(s=i),s=c?d:void 0!==u?u:a}Array.isArray(s)?this._writePromotedPropertyValueToPath(n,s,f[i]):n[s]=f[i]}},_writePromotedProperties:function(e,t,n){var i,s,o,r;for(i=0;i<e.length;i++)s=e[i],o=this._getEventSpecification(s),o&&(r=o[t],void 0!==r&&this._writePromotedPropertiesFromSession(r,s,n))},_createEventsWithActiveSessions:function(){var e=this;return n.Observable.createWithDisposable(function(t){var n=function(s){var o,a,u,d,c,f,l,h,v,p,y,m,g,S,b,x=e.sessionState,q=x.sessions,w=x.sessionsList;if("event"!==s.type){if(l=e._getEventSpecification(s),f=e._getEventKey(s),o=q[f],a=Array.isArray(o)?o[o.length-1]:o,"sessionStarted"===s.type){if(void 0!==a){if(a.sessionId===s.sessionId)return a;if(!l||!l.overlapping)return e.log("Implicitly ending "+s.category+"."+s.sessionName),n(e._addTimeAndIds({type:"sessionEnded",category:s.category,name:s.sessionName+".ended",sessionName:s.sessionName,sessionId:o.sessionId,time:s.time})),n(s);Array.isArray(o)||(o=[o],q[f]=o),o.push(s),w.push(s)}else q[f]=s,w.push(s);l&&l.parentThatClosesMySessionWhenItCloses&&(S=q[l.parentThatClosesMySessionWhenItCloses],Array.isArray(S)&&(S=S[S.length-1]),S&&S.time<s.time&&(b={sessionId:s.sessionId,id:s.id,sessionStartTime:s.time,category:s.category,sessionName:s.sessionName},S.childrenWhoseSessionsIClose?S.childrenWhoseSessionsIClose.push(b):S.childrenWhoseSessionsIClose=[b])),!l||"start"!==l.send&&"both"!==l.send||((y=e.onNotifyStart)&&y(s),(y=l.onNotifyStart)&&y(s))}else if("sessionEnded"===s.type){if(void 0===o)return;if(void 0!==s.sessionId?Array.isArray(o)?(p=e._arrayIndexWhere(o,function(e){return e.sessionId===s.sessionId}),-1!==p&&(h=o[p],o.splice(p,1),0===o.length&&(q[f]=void 0))):o.sessionId===s.sessionId&&(h=o,q[f]=void 0):Array.isArray(o)?(h=o.pop(),0===o.length&&(q[f]=void 0)):(h=o,q[f]=void 0),l&&l.parentThatClosesMySessionWhenItCloses&&(S=q[l.parentThatClosesMySessionWhenItCloses],S&&(Array.isArray(S)&&(S=S[S.length-1]),S.childrenWhoseSessionsIClose&&(p=e._arrayIndexWhere(S.childrenWhoseSessionsIClose,function(e){return e.id===h.id}),-1!==p&&S.childrenWhoseSessionsIClose.splice(p,1)))),void 0===h)return;s.sessionId=h.sessionId,c=w.length,w[c-1].id===h.id?w.length=c-1:(p=e._arrayIndexWhere(w,function(e){return e.id===h.id}),-1!==p&&w.splice(p,1)),void 0===s.duration&&(s.duration=s.time-h.time),!l||"end"!==l.send&&"both"!==l.send||((g=e.onNotifyEnd)&&g(h,s),(g=l.onNotifyEnd)?g(h,s):"end"===l.send&&(void 0===s.data&&(s.data={}),s.data=r.deepMixin(s.data,h.data),s.dataContext=r.deepMixin(s.dataContext,h.dataContext)))}}else e.onNotify&&e.onNotify(s);if("event"===s.type||void 0!==l&&("both"===l.send||"sessionStarted"===s.type&&"start"===l.send||"sessionEnded"===s.type&&"end"===l.send&&void 0!==h)){for(v=[],m=0;m<w.length;m++)u=w[m],d=e._getEventSpecification(u),d&&void 0!==d.send&&v.push(e._getEventSessionKey(u));s.activeSessions=v,e._writePromotedProperties(w,"eventProperties",s),s.sessionState=x,Object.defineProperty(s,"sessionState",i),t.onNext(s)}};return e.events.subscribe(n,function(e){t.onError(e)},function(){t.onCompleted()})})},createRequestFromUnsentEvents:function(){return this.areEventsQueued()?this._createRequest(this._queue):void 0},clearDisabledEvents:function(){var e,t,n,i=this._isEventEnabledByEventNameByCategory;this.log("Clearing disabled state for all event types");for(t in i){e=i[t]||{};for(n in e)delete e[n]}},_canSendEvent:function(e){var t=this._getEventSpecification(e);return this._isEventEnabled(e,t)&&(0===t.suppressPercentage||Math.floor(100*Math.random())>=t.suppressPercentage)},_createRequest:function(e){var t,n=this,i={};return n._writePromotedProperties(this.sessionState.sessionsList,"requestProperties",i),i.events=e.filter(n._canSendEvent.bind(n)).map(function(e){return e.sequence=n._sequencePrefix+n.sequence,n.sequence++,e}),(t=n.onRequest)&&t(i),i},_createRequests:function(){var e=this;return n.Observable.create(function(t){var n,i,o,r=e._queue,a=function(){var e;r.length>0&&(n=clearTimeout(n),e=r.slice(0),r.length=0,t.onNext(e))},u=function(){void 0!==i&&i.dispose(),void 0!==o&&o.dispose(),n&&(n=clearTimeout(n))};return o=e._flushes.subscribe(function(){a()},function(e){void 0!==u&&u(),t.onError(e)},s),i=e.eventsWithActiveSessions.subscribe(function(t){1===r.length&&(n=setTimeout(a,e.maxFlushDelay)),r.push(t),e.maxBufferSize<=r.length&&a()},function(e){u(),t.onError(e)},function(){a(),u(),t.onCompleted()}),u}).select(function(t){return e._createRequest(t)})}}}("undefined"!=typeof window?window:this),function(e){"use strict";var t=function(t){var n;try{n="object"==typeof e.localStorage?"localstorage":"none"}catch(i){n="none"}var s=function(n){try{return e.localStorage.getItem(t+"."+n)}catch(i){return null}},o=function(n,i){try{return i=JSON.stringify(i),e.localStorage.setItem(t+"."+n,i),!0}catch(s){return!1}},r=function(){return n};return{type:r,get:s,set:o}};e.netflix=e.netflix||{},e.netflix.BrowserDb=function(e){return t(e)}}("undefined"!=typeof window?window:this),function(t){"use strict";t.netflix=t.netflix||{},t.netflix.notification=t.netflix.notification||{},t.netflix.notification.constants=t.netflix.notification.constants||{},t.netflix.session=function(){var n,i,s,o,r=1e3,a=60*r,u=60*a,d=(t.netflix.notification.constants&&t.netflix.notification.constants.sessionLength||30)*a,c=8*u,f=new t.netflix.BrowserDb("NFSessionData"),l=function(){return(new Date).getTime()},h=function(){return void 0===n||l()-n>d},v=function(){return void 0===n||l()-n>c},p=function(){n=l(),S()},y=function(){var e,n,i,s,o="cL=",r=t.document&&t.document.cookie.split(";");if(r)for(i=0;i<r.length;i++){for(s=r[i];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(o)){e=s.substring(o.length,s.length);break}}try{e&&(e=decodeURIComponent(e).split("|"),n={timeStamp:e[0],activeSessions:[["uiQOE","appSession",e[1]],["uiQOE","userSession",e[2]]],sequencePrefix:e[3],sequence:parseInt(e[4],10),token:m(e,5)})}catch(a){n=null}return n},m=function(e,t){try{return e[t]}catch(n){return""}},g=function(){"none"===f.type()&&(i=!0),n=f.get("nfSessionTs"),s=y();try{s&&s.timeStamp>n?n=s.timeStamp:s=void 0}catch(e){s=void 0}o=!0},S=function(){f.set("nfSessionTs",l())},b=function(){var n=window&&t.jQuery||e("jquery"),i=function(){t.netflix.session.newSession()||f.set("nfSessionTs",l())};t.netflix.session.disabled()||(n&&!n.stub?n(t).bind("beforeunload",i):t.addEventListener("beforeunload",i,!1))};return g(),{disabled:function(){return i},newSession:h,newApp:v,lastActivity:function(){return n},ready:function(){return o},cookieData:function(){return s},keepAlive:p,initTimers:b,database:f}}()}("undefined"!=typeof window?window:this),function(t){"use strict";var n=e("nf-rx"),i=t,s=i.netflix;i.netflix.clientNotifications=function(t,o,r){var a,u,d,c="userSession",f="appSession",l="sharedContext",h="uiQOE",v=s.notification.constants,p=v&&v.pageName||i.location&&i.location.pathname,y=v&&"jfk"===v.uiMode,m=v&&v.debugMode&&i.console,g=v&&v.maxFlushDelay||5e3,S=v&&v.maxBufferSize||20,b=v&&v.logPageOnStart!==!1,x=v?v.ownerToken:"",q=function(){var e=Math.floor(new Date/1e3).toString(),t=Math.floor(1e8*Math.random()).toString();return e+t},w=function(){return(new Date).getTime()},_=function(){return 6e4*(new Date).getTimezoneOffset()},E=function(e){return s.session.disabled()?!1:a.sessionState.sessions[h+"."+e]},N=function(){if(!i.netflix.session.disabled()){i.nflxappbridge&&(d=i.nflxappbridge);try{if(i.netflix.session.ready()){I(),b&&O();var e=a.suspend();R(e),a.restore(e)}else i.setTimeout(N,100)}catch(t){}}},I=function(){if(!s.session.disabled()){var e,u=r.cookieData(),c=r.database.get("nfNotifications"),f={requestSender:function(e){return n.Observable.create(function(t){return A(e,function(e,n){e?t.onError(e):t.onNext(n)}),function(){}}).select(function(){return e})},timeStampGenerator:w,guidGenerator:q,maxBufferSize:S,maxFlushDelay:g,specification:o,sessionState:null,retryFailedRequests:!0};a=new t(f),a.metadata.token=x;try{void 0!==u?e=k(u):null!==c&&(e=JSON.parse(c),e.enabled=void 0),void 0!==e&&C(e)&&(m&&console.log("restoring"+JSON.stringify(e)),a.restore(e))}catch(l){}a.onRequest=function(e){e.locale=v&&v.locale?v.locale:"",e.device={},a.metadata&&a.metadata.device&&(e.device=a.metadata.device),e.device.utcOffset=_(),v.version&&(e.version=v.version),e.browser={userAgent:i.navigator.userAgent,requestUrl:i.location.href,referrerUrl:i.document.referrer},d&&(v.appName="www-hosted"),e.appName=v.appName||"www",e.time=w()}}},C=function(e){var t=e.metadata.token;return"undefined"==typeof t||""===t?!0:t.toString()===x.toString()},O=function(){var e=v&&v.videoId,t=v&&v.trackId,n={category:h,modalView:p};e&&(n.dataContext=n.dataContext||{},n.dataContext.videoId=e),t&&(n.dataContext=n.dataContext||{},n.dataContext.trackId=t),B("uiModalViewChanged",n)},R=function(e){r.disabled()||r.database.set("nfNotifications",e)},P=function(){r.disabled()||(a.start(!0),a.flush())},A=function(t,n){var s=JSON?JSON.stringify(t):t,o=i&&i.jQuery||e("jquery"),r={name:"X-Netflix.ichnaea.request.type",value:"UiRequest"},a="application/json",u="POST",d="/ichnaea/log";if(m&&console.log("Sending data to server: "+s),o&&!o.stub)o.ajax({type:u,url:d,data:s,contentType:a,beforeSend:function(e){e.setRequestHeader(r.name,r.value)},success:function(){n(null,null)},error:n});else{var c=new i.XMLHttpRequest,f=function(){c.onload=null,c.onerror=null,c.ontimeout=null,c.onabort=null,c=null},l=function(){n(null,null),f()},h=function(){n(!0,c),f()};c.open(u,d),c.withCredentials=!0,c.setRequestHeader(r.name,r.value),c.setRequestHeader("Content-Type",a),c.onload=l,c.onerror=h,c.ontimeout=h,c.onabort=h,c.send(s)}},j=function(e){var t=r.lastActivity(),n=r.newApp(),s=r.newSession(),o=E(f),a=E(c),u=E(l);if(e!==c&&e!==f&&e!==l&&(n||void 0===o?(void 0!==a&&M(c,{category:h,data:{endReason:"timeout",lastUserActivityTime:t}}),void 0!==o&&M(f,{category:h,data:{endReason:"timeout",lastUserActivityTime:t}}),T(f),v["accept-language"]?T(c,{category:h,data:{trigger:"appStart",acceptLanguageHeader:v["accept-language"]}}):T(c,{category:h,data:{trigger:"appStart"}})):(s||void 0===a)&&(void 0!==a&&M(c,{category:h,data:{endReason:"timeout",lastUserActivityTime:t}}),T(c,{category:h,data:{trigger:"inputEvent",idleTime:w()-t}})),"www-hosted"===v.appName)){var d,p={},y=i.location.href;y.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,i){p[t]=i}),p&&p.uuid&&(d=p.uuid),void 0===u?d&&T(l,{category:h,data:{trigger:"signup",role:"receiver",uuid:d}}):d&&d!==u.data.uuid&&(M(l,{category:h,data:{role:"receiver",uuid:u.data.uuid}}),T(l,{category:h,data:{trigger:"signup",role:"receiver",uuid:d}}))}},T=function(e,t){return D("start",e,t)},M=function(e,t){return D("end",e,t)},B=function(e,t){return D("singleton",e,t)},D=function(e,t,n){if(s.session.disabled())return!1;var o,d=n||{};switch(d.modalView=d.modalView||p,y&&"undefined"==typeof d.kids&&(d.kids=y),o=d.category||h,"undefined"===a&&i.setTimeout(function(){D(e,t,n)},100),m&&console.log("notifying "+t+" : "+JSON.stringify(n)),j(t),r.keepAlive(),e){case"start":return"object"==typeof d.endOnUnload&&(u=u||{},d.endOnUnload.category=o,u[t]=d.endOnUnload,delete d.endOnUnload),a.notifyStart(o,t,d);case"end":return"Object"==typeof d.startEvent?a.notifyEnd(d.startEvent):a.notifyEnd(o,t,d);default:return a.notify(o,t,d)}},Q=function(){if(u)for(var e in u)u.hasOwnProperty(e)&&M(e,u[e])},W=function(){var e,t=E(f),n=E(c),s={};if(void 0!==t&&!r.newApp())try{s.appId=t.sessionId,void 0!==n&&(s.sessionId=n.sessionId),s.timeStamp=r.lastActivity(),s.sequencePrefix=a.getSequencePrefix(),e=encodeURIComponent(s.timeStamp+"|"+s.appId+"|"+s.sessionId+"|"+s.sequencePrefix+"|"+a.sequence+"|"+x),i.document.cookie="cL="+e+"; path=/; domain="+i.location.hostname}catch(o){}},k=function(e){var t,n,i,s,o=e.activeSessions,r={},a=[],u={},d=[];for(s=0;s<o.length;s++){try{n=o[s][2],t=o[s][1]}catch(c){break}d.push([h,t,n]),i={sessionId:n,type:"sessionStarted",category:h,name:t+".started",sessionName:t,id:n,activeSessions:d},u[h+"."+t]=i,a.push(i)}return m&&console.log("Restoring "+d),r.sessionState={sessions:u,sessionsList:a},e.esn&&(r.metadata=r.metadata||{},r.metadata.device={esn:e.esn}),"NaN"!==e.sequence&&(r.sequence=e.sequence),e.sequencePrefix&&(r.sequencePrefix=e.sequencePrefix),e.token&&(r.metadata=r.metadata||{},r.metadata.token=e.token),r},U=function(){var t=i&&i.jQuery||e("jquery"),n=function(){s.session.disabled()||(Q(),W(),R(a.suspend()))};s.session.initTimers(),P(),W(),t&&!t.stub?t(i).unload(n):i.addEventListener("unload",n)},F=function(){a.flush()};return N(),{start:U,notify:B,notifyStart:T,notifyEnd:M,getCurrentSession:E,flushBuffer:F,createClientNotifications:I}}(s.notification.ClientNotifications,s.notification.specification,s.session)}("undefined"!=typeof window?window:this),t.exports="undefined"!=typeof window?window:this},{jquery:"jquery","nf-rx":"nf-rx"}],"nf-cons-log":[function(e,t){"use strict";function n(){}var i,s=e("../dist/clientNotifications.js");i="undefined"!=typeof window?window.netflix:s.netflix,t.exports={init:function(){try{i.clientNotifications.start()}catch(e){}},active:function(){return i.session&&i.notification&&i.clientNotifications},session:i.session,notification:i.notification,clientNotifications:i.clientNotifications||{notifyEnd:n,notifyStart:n,notify:n}}},{"../dist/clientNotifications.js":1}]},{},[])("nf-cons-log")})});

Requireify.register("react",function(e,t,n,r){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.React=e()}}(function(){return function t(n,r,o){function i(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[s]={exports:{}};n[s][0].call(p.exports,function(e){var t=n[s][1][e];return i(t?t:e)},p,p.exports,t,n,r,o)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t){"use strict";var n=e("./LinkedStateMixin"),r=e("./React"),o=e("./ReactComponentWithPureRenderMixin"),i=e("./ReactCSSTransitionGroup"),a=e("./ReactTransitionGroup"),s=e("./ReactUpdates"),u=e("./cx"),c=e("./cloneWithProps"),l=e("./update");r.addons={CSSTransitionGroup:i,LinkedStateMixin:n,PureRenderMixin:o,TransitionGroup:a,batchedUpdates:s.batchedUpdates,classSet:u,cloneWithProps:c,update:l},t.exports=r},{"./LinkedStateMixin":25,"./React":31,"./ReactCSSTransitionGroup":34,"./ReactComponentWithPureRenderMixin":39,"./ReactTransitionGroup":87,"./ReactUpdates":88,"./cloneWithProps":110,"./cx":115,"./update":154}],2:[function(e,t){"use strict";var n=e("./focusNode"),r={componentDidMount:function(){this.props.autoFocus&&n(this.getDOMNode())}};t.exports=r},{"./focusNode":122}],3:[function(e,t){"use strict";function n(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}var o=e("./EventConstants"),i=e("./EventPropagators"),a=e("./ExecutionEnvironment"),s=e("./SyntheticInputEvent"),u=e("./keyOf"),c=a.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||n()),l=32,p=String.fromCharCode(l),d=o.topLevelTypes,f={beforeInput:{phasedRegistrationNames:{bubbled:u({onBeforeInput:null}),captured:u({onBeforeInputCapture:null})},dependencies:[d.topCompositionEnd,d.topKeyPress,d.topTextInput,d.topPaste]}},h=null,m=!1,v={eventTypes:f,extractEvents:function(e,t,n,o){var a;if(c)switch(e){case d.topKeyPress:var u=o.which;if(u!==l)return;m=!0,a=p;break;case d.topTextInput:if(a=o.data,a===p&&m)return;break;default:return}else{switch(e){case d.topPaste:h=null;break;case d.topKeyPress:o.which&&!r(o)&&(h=String.fromCharCode(o.which));break;case d.topCompositionEnd:h=o.data}if(null===h)return;a=h}if(a){var v=s.getPooled(f.beforeInput,n,o);return v.data=a,h=null,i.accumulateTwoPhaseDispatches(v),v}}};t.exports=v},{"./EventConstants":17,"./EventPropagators":22,"./ExecutionEnvironment":23,"./SyntheticInputEvent":98,"./keyOf":144}],4:[function(e,t){var n=e("./invariant"),r={addClass:function(e,t){return n(!/\s/.test(t)),t&&(e.classList?e.classList.add(t):r.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return n(!/\s/.test(t)),t&&(e.classList?e.classList.remove(t):r.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?r.addClass:r.removeClass)(e,t)},hasClass:function(e,t){return n(!/\s/.test(t)),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};t.exports=r},{"./invariant":137}],5:[function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeOpacity:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){o.forEach(function(t){r[n(t,e)]=r[e]})});var i={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:i};t.exports=a},{}],6:[function(e,t){"use strict";var n=e("./CSSProperty"),r=e("./ExecutionEnvironment"),o=(e("./camelizeStyleName"),e("./dangerousStyleValue")),i=e("./hyphenateStyleName"),a=e("./memoizeStringOnly"),s=(e("./warning"),a(function(e){return i(e)})),u="cssFloat";r.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(u="styleFloat");var c={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t+=s(n)+":",t+=o(n,r)+";")}return t||null},setValueForStyles:function(e,t){var r=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=o(i,t[i]);if("float"===i&&(i=u),a)r[i]=a;else{var s=n.shorthandPropertyExpansions[i];if(s)for(var c in s)r[c]="";else r[i]=""}}}};t.exports=c},{"./CSSProperty":5,"./ExecutionEnvironment":23,"./camelizeStyleName":109,"./dangerousStyleValue":116,"./hyphenateStyleName":135,"./memoizeStringOnly":146,"./warning":155}],7:[function(e,t){"use strict";function n(){this._callbacks=null,this._contexts=null}var r=e("./PooledClass"),o=e("./Object.assign"),i=e("./invariant");o(n.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){i(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./Object.assign":29,"./PooledClass":30,"./invariant":137}],8:[function(e,t){"use strict";function n(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function r(e){var t=M.getPooled(P.change,w,e);E.accumulateTwoPhaseDispatches(t),R.batchedUpdates(o,t)}function o(e){g.enqueueEvents(e),g.processEventQueue()}function i(e,t){T=e,w=t,T.attachEvent("onchange",r)}function a(){T&&(T.detachEvent("onchange",r),T=null,w=null)}function s(e,t,n){return e===x.topChange?n:void 0}function u(e,t,n){e===x.topFocus?(a(),i(t,n)):e===x.topBlur&&a()}function c(e,t){T=e,w=t,_=e.value,S=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(T,"value",k),T.attachEvent("onpropertychange",p)}function l(){T&&(delete T.value,T.detachEvent("onpropertychange",p),T=null,w=null,_=null,S=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==_&&(_=t,r(e))}}function d(e,t,n){return e===x.topInput?n:void 0}function f(e,t,n){e===x.topFocus?(l(),c(t,n)):e===x.topBlur&&l()}function h(e){return e!==x.topSelectionChange&&e!==x.topKeyUp&&e!==x.topKeyDown||!T||T.value===_?void 0:(_=T.value,w)}function m(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===x.topClick?n:void 0}var y=e("./EventConstants"),g=e("./EventPluginHub"),E=e("./EventPropagators"),C=e("./ExecutionEnvironment"),R=e("./ReactUpdates"),M=e("./SyntheticEvent"),b=e("./isEventSupported"),O=e("./isTextInputElement"),D=e("./keyOf"),x=y.topLevelTypes,P={change:{phasedRegistrationNames:{bubbled:D({onChange:null}),captured:D({onChangeCapture:null})},dependencies:[x.topBlur,x.topChange,x.topClick,x.topFocus,x.topInput,x.topKeyDown,x.topKeyUp,x.topSelectionChange]}},T=null,w=null,_=null,S=null,N=!1;C.canUseDOM&&(N=b("change")&&(!("documentMode"in document)||document.documentMode>8));var I=!1;C.canUseDOM&&(I=b("input")&&(!("documentMode"in document)||document.documentMode>9));var k={get:function(){return S.get.call(this)},set:function(e){_=""+e,S.set.call(this,e)}},A={eventTypes:P,extractEvents:function(e,t,r,o){var i,a;if(n(t)?N?i=s:a=u:O(t)?I?i=d:(i=h,a=f):m(t)&&(i=v),i){var c=i(e,t,r);if(c){var l=M.getPooled(P.change,c,o);return E.accumulateTwoPhaseDispatches(l),l}}a&&a(e,t,r)}};t.exports=A},{"./EventConstants":17,"./EventPluginHub":19,"./EventPropagators":22,"./ExecutionEnvironment":23,"./ReactUpdates":88,"./SyntheticEvent":96,"./isEventSupported":138,"./isTextInputElement":140,"./keyOf":144}],9:[function(e,t){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};t.exports=r},{}],10:[function(e,t){"use strict";function n(e){switch(e){case y.topCompositionStart:return E.compositionStart;case y.topCompositionEnd:return E.compositionEnd;case y.topCompositionUpdate:return E.compositionUpdate}}function r(e,t){return e===y.topKeyDown&&t.keyCode===h}function o(e,t){switch(e){case y.topKeyUp:return-1!==f.indexOf(t.keyCode);case y.topKeyDown:return t.keyCode!==h;case y.topKeyPress:case y.topMouseDown:case y.topBlur:return!0;default:return!1}}function i(e){this.root=e,this.startSelection=c.getSelection(e),this.startValue=this.getText()}var a=e("./EventConstants"),s=e("./EventPropagators"),u=e("./ExecutionEnvironment"),c=e("./ReactInputSelection"),l=e("./SyntheticCompositionEvent"),p=e("./getTextContentAccessor"),d=e("./keyOf"),f=[9,13,27,32],h=229,m=u.canUseDOM&&"CompositionEvent"in window,v=!m||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,y=a.topLevelTypes,g=null,E={compositionEnd:{phasedRegistrationNames:{bubbled:d({onCompositionEnd:null}),captured:d({onCompositionEndCapture:null})},dependencies:[y.topBlur,y.topCompositionEnd,y.topKeyDown,y.topKeyPress,y.topKeyUp,y.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:d({onCompositionStart:null}),captured:d({onCompositionStartCapture:null})},dependencies:[y.topBlur,y.topCompositionStart,y.topKeyDown,y.topKeyPress,y.topKeyUp,y.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:d({onCompositionUpdate:null}),captured:d({onCompositionUpdateCapture:null})},dependencies:[y.topBlur,y.topCompositionUpdate,y.topKeyDown,y.topKeyPress,y.topKeyUp,y.topMouseDown]}};i.prototype.getText=function(){return this.root.value||this.root[p()]},i.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var C={eventTypes:E,extractEvents:function(e,t,a,u){var c,p;if(m?c=n(e):g?o(e,u)&&(c=E.compositionEnd):r(e,u)&&(c=E.compositionStart),v&&(g||c!==E.compositionStart?c===E.compositionEnd&&g&&(p=g.getData(),g=null):g=new i(t)),c){var d=l.getPooled(c,a,u);return p&&(d.data=p),s.accumulateTwoPhaseDispatches(d),d}}};t.exports=C},{"./EventConstants":17,"./EventPropagators":22,"./ExecutionEnvironment":23,"./ReactInputSelection":63,"./SyntheticCompositionEvent":94,"./getTextContentAccessor":132,"./keyOf":144}],11:[function(e,t){"use strict";function n(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r,o=e("./Danger"),i=e("./ReactMultiChildUpdateTypes"),a=e("./getTextContentAccessor"),s=e("./invariant"),u=a();r="textContent"===u?function(e,t){e.textContent=t}:function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var c={dangerouslyReplaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,updateTextContent:r,processUpdates:function(e,t){for(var a,u=null,c=null,l=0;a=e[l];l++)if(a.type===i.MOVE_EXISTING||a.type===i.REMOVE_NODE){var p=a.fromIndex,d=a.parentNode.childNodes[p],f=a.parentID;s(d),u=u||{},u[f]=u[f]||[],u[f][p]=d,c=c||[],c.push(d)}var h=o.dangerouslyRenderMarkup(t);if(c)for(var m=0;m<c.length;m++)c[m].parentNode.removeChild(c[m]);for(var v=0;a=e[v];v++)switch(a.type){case i.INSERT_MARKUP:n(a.parentNode,h[a.markupIndex],a.toIndex);break;case i.MOVE_EXISTING:n(a.parentNode,u[a.parentID][a.fromIndex],a.toIndex);break;case i.TEXT_CONTENT:r(a.parentNode,a.textContent);break;case i.REMOVE_NODE:}}};t.exports=c},{"./Danger":14,"./ReactMultiChildUpdateTypes":70,"./getTextContentAccessor":132,"./invariant":137}],12:[function(e,t){"use strict";function n(e,t){return(e&t)===t}var r=e("./invariant"),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},i=e.DOMAttributeNames||{},s=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var c in t){r(!a.isStandardName.hasOwnProperty(c)),a.isStandardName[c]=!0;var l=c.toLowerCase();if(a.getPossibleStandardName[l]=c,i.hasOwnProperty(c)){var p=i[c];a.getPossibleStandardName[p]=c,a.getAttributeName[c]=p}else a.getAttributeName[c]=l;a.getPropertyName[c]=s.hasOwnProperty(c)?s[c]:c,a.getMutationMethod[c]=u.hasOwnProperty(c)?u[c]:null;var d=t[c];a.mustUseAttribute[c]=n(d,o.MUST_USE_ATTRIBUTE),a.mustUseProperty[c]=n(d,o.MUST_USE_PROPERTY),a.hasSideEffects[c]=n(d,o.HAS_SIDE_EFFECTS),a.hasBooleanValue[c]=n(d,o.HAS_BOOLEAN_VALUE),a.hasNumericValue[c]=n(d,o.HAS_NUMERIC_VALUE),a.hasPositiveNumericValue[c]=n(d,o.HAS_POSITIVE_NUMERIC_VALUE),a.hasOverloadedBooleanValue[c]=n(d,o.HAS_OVERLOADED_BOOLEAN_VALUE),r(!a.mustUseAttribute[c]||!a.mustUseProperty[c]),r(a.mustUseProperty[c]||!a.hasSideEffects[c]),r(!!a.hasBooleanValue[c]+!!a.hasNumericValue[c]+!!a.hasOverloadedBooleanValue[c]<=1)}}},i={},a={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){var n=a._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=i[e];return r||(i[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:o};t.exports=a},{"./invariant":137}],13:[function(e,t){"use strict";function n(e,t){return null==t||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&1>t||r.hasOverloadedBooleanValue[e]&&t===!1}var r=e("./DOMProperty"),o=e("./escapeTextForBrowser"),i=e("./memoizeStringOnly"),a=(e("./warning"),i(function(e){return o(e)+'="'})),s={createMarkupForID:function(e){return a(r.ID_ATTRIBUTE_NAME)+o(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(n(e,t))return"";var i=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?o(i):a(i)+o(t)+'"'}return r.isCustomAttribute(e)?null==t?"":a(e)+o(t)+'"':null},setValueForProperty:function(e,t,o){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var i=r.getMutationMethod[t];if(i)i(e,o);else if(n(t,o))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+o);else{var a=r.getPropertyName[t];r.hasSideEffects[t]&&""+e[a]==""+o||(e[a]=o)}}else r.isCustomAttribute(t)&&(null==o?e.removeAttribute(t):e.setAttribute(t,""+o))},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,void 0);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var o=r.getPropertyName[t],i=r.getDefaultValueForProperty(e.nodeName,o);r.hasSideEffects[t]&&""+e[o]===i||(e[o]=i)}}else r.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=s},{"./DOMProperty":12,"./escapeTextForBrowser":120,"./memoizeStringOnly":146,"./warning":155}],14:[function(e,t){"use strict";function n(e){return e.substring(1,e.indexOf(" "))}var r=e("./ExecutionEnvironment"),o=e("./createNodesFromMarkup"),i=e("./emptyFunction"),a=e("./getMarkupWrap"),s=e("./invariant"),u=/^(<[^ \/>]+)/,c="data-danger-index",l={dangerouslyRenderMarkup:function(e){s(r.canUseDOM);for(var t,l={},p=0;p<e.length;p++)s(e[p]),t=n(e[p]),t=a(t)?t:"*",l[t]=l[t]||[],l[t][p]=e[p];var d=[],f=0;for(t in l)if(l.hasOwnProperty(t)){var h=l[t];for(var m in h)if(h.hasOwnProperty(m)){var v=h[m];h[m]=v.replace(u,"$1 "+c+'="'+m+'" ')}var y=o(h.join(""),i);for(p=0;p<y.length;++p){var g=y[p];g.hasAttribute&&g.hasAttribute(c)&&(m=+g.getAttribute(c),g.removeAttribute(c),s(!d.hasOwnProperty(m)),d[m]=g,f+=1)}}return s(f===d.length),s(d.length===e.length),d},dangerouslyReplaceNodeWithMarkup:function(e,t){s(r.canUseDOM),s(t),s("html"!==e.tagName.toLowerCase());var n=o(t,i)[0];e.parentNode.replaceChild(n,e)}};t.exports=l},{"./ExecutionEnvironment":23,"./createNodesFromMarkup":114,"./emptyFunction":118,"./getMarkupWrap":129,"./invariant":137}],15:[function(e,t){"use strict";var n=e("./keyOf"),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({CompositionEventPlugin:null}),n({BeforeInputEventPlugin:null}),n({AnalyticsEventPlugin:null}),n({MobileSafariClickEventPlugin:null})];t.exports=r},{"./keyOf":144}],16:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./EventPropagators"),o=e("./SyntheticMouseEvent"),i=e("./ReactMount"),a=e("./keyOf"),s=n.topLevelTypes,u=i.getFirstReactDOM,c={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[s.topMouseOut,s.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[s.topMouseOut,s.topMouseOver]}},l=[null,null],p={eventTypes:c,extractEvents:function(e,t,n,a){if(e===s.topMouseOver&&(a.relatedTarget||a.fromElement))return null;if(e!==s.topMouseOut&&e!==s.topMouseOver)return null;var p;if(t.window===t)p=t;else{var d=t.ownerDocument;p=d?d.defaultView||d.parentWindow:window}var f,h;if(e===s.topMouseOut?(f=t,h=u(a.relatedTarget||a.toElement)||p):(f=p,h=t),f===h)return null;var m=f?i.getID(f):"",v=h?i.getID(h):"",y=o.getPooled(c.mouseLeave,m,a);y.type="mouseleave",y.target=f,y.relatedTarget=h;var g=o.getPooled(c.mouseEnter,v,a);return g.type="mouseenter",g.target=h,g.relatedTarget=f,r.accumulateEnterLeaveDispatches(y,g,m,v),l[0]=y,l[1]=g,l}};t.exports=p},{"./EventConstants":17,"./EventPropagators":22,"./ReactMount":68,"./SyntheticMouseEvent":100,"./keyOf":144}],17:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({bubbled:null,captured:null}),o=n({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),i={topLevelTypes:o,PropagationPhases:r};t.exports=i},{"./keyMirror":143}],18:[function(e,t){var n=e("./emptyFunction"),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!0),{remove:function(){e.removeEventListener(t,r,!0)}}):{remove:n}},registerDefault:function(){}};t.exports=r},{"./emptyFunction":118}],19:[function(e,t){"use strict";var n=e("./EventPluginRegistry"),r=e("./EventPluginUtils"),o=e("./accumulateInto"),i=e("./forEachAccumulated"),a=e("./invariant"),s={},u=null,c=function(e){if(e){var t=r.executeDispatch,o=n.getPluginModuleForEvent(e);o&&o.executeDispatch&&(t=o.executeDispatch),r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},l=null,p={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){l=e},getInstanceHandle:function(){return l},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(e,t,n){a(!n||"function"==typeof n);var r=s[t]||(s[t]={});r[e]=n},getListener:function(e,t){var n=s[t];return n&&n[e]},deleteListener:function(e,t){var n=s[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in s)delete s[t][e]},extractEvents:function(e,t,r,i){for(var a,s=n.plugins,u=0,c=s.length;c>u;u++){var l=s[u];if(l){var p=l.extractEvents(e,t,r,i);p&&(a=o(a,p))}}return a},enqueueEvents:function(e){e&&(u=o(u,e))},processEventQueue:function(){var e=u;u=null,i(e,c),a(!u)},__purge:function(){s={}},__getListenerBank:function(){return s}};t.exports=p},{"./EventPluginRegistry":20,"./EventPluginUtils":21,"./accumulateInto":106,"./forEachAccumulated":123,"./invariant":137}],20:[function(e,t){"use strict";function n(){if(a)for(var e in s){var t=s[e],n=a.indexOf(e);if(i(n>-1),!u.plugins[n]){i(t.extractEvents),u.plugins[n]=t;var o=t.eventTypes;for(var c in o)i(r(o[c],t,c))}}}function r(e,t,n){i(!u.eventNameDispatchConfigs.hasOwnProperty(n)),u.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];o(s,t,n)}return!0}return e.registrationName?(o(e.registrationName,t,n),!0):!1}function o(e,t,n){i(!u.registrationNameModules[e]),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var i=e("./invariant"),a=null,s={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){i(!a),a=Array.prototype.slice.call(e),n()},injectEventPluginsByName:function(e){var t=!1;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];s.hasOwnProperty(r)&&s[r]===o||(i(!s[r]),s[r]=o,t=!0)}t&&n()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=u.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){a=null;for(var e in s)s.hasOwnProperty(e)&&delete s[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=u.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=u},{"./invariant":137}],21:[function(e,t){"use strict";function n(e){return e===m.topMouseUp||e===m.topTouchEnd||e===m.topTouchCancel}function r(e){return e===m.topMouseMove||e===m.topTouchMove}function o(e){return e===m.topMouseDown||e===m.topTouchStart}function i(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)t(e,n[o],r[o]);else n&&t(e,n,r)}function a(e,t,n){e.currentTarget=h.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function s(e,t){i(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function u(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function c(e){var t=u(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function l(e){var t=e._dispatchListeners,n=e._dispatchIDs;f(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function p(e){return!!e._dispatchListeners}var d=e("./EventConstants"),f=e("./invariant"),h={Mount:null,injectMount:function(e){h.Mount=e}},m=d.topLevelTypes,v={isEndish:n,isMoveish:r,isStartish:o,executeDirectDispatch:l,executeDispatch:a,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:p,injection:h,useTouchEvents:!1};t.exports=v},{"./EventConstants":17,"./invariant":137}],22:[function(e,t){"use strict";function n(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return m(e,r)}function r(e,t,r){var o=t?h.bubbled:h.captured,i=n(e,r,o);i&&(r._dispatchListeners=d(r._dispatchListeners,i),r._dispatchIDs=d(r._dispatchIDs,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,r,e)}function i(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=m(e,r);o&&(n._dispatchListeners=d(n._dispatchListeners,o),n._dispatchIDs=d(n._dispatchIDs,e))}}function a(e){e&&e.dispatchConfig.registrationName&&i(e.dispatchMarker,null,e)}function s(e){f(e,o)}function u(e,t,n,r){p.injection.getInstanceHandle().traverseEnterLeave(n,r,i,e,t)}function c(e){f(e,a)}var l=e("./EventConstants"),p=e("./EventPluginHub"),d=e("./accumulateInto"),f=e("./forEachAccumulated"),h=l.PropagationPhases,m=p.getListener,v={accumulateTwoPhaseDispatches:s,accumulateDirectDispatches:c,accumulateEnterLeaveDispatches:u};t.exports=v},{"./EventConstants":17,"./EventPluginHub":19,"./accumulateInto":106,"./forEachAccumulated":123}],23:[function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},{}],24:[function(e,t){"use strict";var n,r=e("./DOMProperty"),o=e("./ExecutionEnvironment"),i=r.injection.MUST_USE_ATTRIBUTE,a=r.injection.MUST_USE_PROPERTY,s=r.injection.HAS_BOOLEAN_VALUE,u=r.injection.HAS_SIDE_EFFECTS,c=r.injection.HAS_NUMERIC_VALUE,l=r.injection.HAS_POSITIVE_NUMERIC_VALUE,p=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var d=document.implementation;n=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:i|s,allowTransparency:i,alt:null,async:s,autoComplete:null,autoPlay:s,cellPadding:null,cellSpacing:null,charSet:i,checked:a|s,classID:i,className:n?i:a,cols:i|l,colSpan:null,content:null,contentEditable:null,contextMenu:i,controls:a|s,coords:null,crossOrigin:null,data:null,dateTime:i,defer:s,dir:null,disabled:i|s,download:p,draggable:null,encType:null,form:i,formAction:i,formEncType:i,formMethod:i,formNoValidate:s,formTarget:i,frameBorder:i,height:i,hidden:i|s,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,label:null,lang:null,list:i,loop:a|s,manifest:i,marginHeight:null,marginWidth:null,max:null,maxLength:i,media:i,mediaGroup:null,method:null,min:null,multiple:a|s,muted:a|s,name:null,noValidate:s,open:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|s,rel:null,required:s,role:i,rows:i|l,rowSpan:null,sandbox:null,scope:null,scrolling:null,seamless:i|s,selected:a|s,shape:null,size:i|l,sizes:i,span:l,spellCheck:null,src:null,srcDoc:a,srcSet:i,start:c,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|u,width:i,wmode:i,autoCapitalize:null,autoCorrect:null,itemProp:i,itemScope:i|s,itemType:i,property:null},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=f},{"./DOMProperty":12,"./ExecutionEnvironment":23}],25:[function(e,t){"use strict";var n=e("./ReactLink"),r=e("./ReactStateSetters"),o={linkState:function(e){return new n(this.state[e],r.createStateKeySetter(this,e))}};t.exports=o},{"./ReactLink":66,"./ReactStateSetters":83}],26:[function(e,t){"use strict";function n(e){u(null==e.props.checkedLink||null==e.props.valueLink)}function r(e){n(e),u(null==e.props.value&&null==e.props.onChange)}function o(e){n(e),u(null==e.props.checked&&null==e.props.onChange)}function i(e){this.props.valueLink.requestChange(e.target.value)}function a(e){this.props.checkedLink.requestChange(e.target.checked)}var s=e("./ReactPropTypes"),u=e("./invariant"),c={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},l={Mixin:{propTypes:{value:function(e,t){return!e[t]||c[e.type]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t){return!e[t]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func}},getValue:function(e){return e.props.valueLink?(r(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(o(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(r(e),i):e.props.checkedLink?(o(e),a):e.props.onChange}};t.exports=l},{"./ReactPropTypes":77,"./invariant":137}],27:[function(e,t){"use strict";function n(e){e.remove()}var r=e("./ReactBrowserEventEmitter"),o=e("./accumulateInto"),i=e("./forEachAccumulated"),a=e("./invariant"),s={trapBubbledEvent:function(e,t){a(this.isMounted());var n=r.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=o(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&i(this._localEventListeners,n)}};t.exports=s},{"./ReactBrowserEventEmitter":33,"./accumulateInto":106,"./forEachAccumulated":123,"./invariant":137}],28:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./emptyFunction"),o=n.topLevelTypes,i={eventTypes:null,extractEvents:function(e,t,n,i){if(e===o.topTouchStart){var a=i.target;a&&!a.onclick&&(a.onclick=r)}}};t.exports=i},{"./EventConstants":17,"./emptyFunction":118}],29:[function(e,t){function n(e){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var t=Object(e),n=Object.prototype.hasOwnProperty,r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o){var i=Object(o);for(var a in i)n.call(i,a)&&(t[a]=i[a])}}return t}t.exports=n},{}],30:[function(e,t){"use strict";var n=e("./invariant"),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},i=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},a=function(e,t,n,r,o){var i=this;if(i.instancePool.length){var a=i.instancePool.pop();return i.call(a,e,t,n,r,o),a}return new i(e,t,n,r,o)},s=function(e){var t=this;n(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},u=10,c=r,l=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||c,n.poolSize||(n.poolSize=u),n.release=s,n},p={addPoolingTo:l,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:i,fiveArgumentPooler:a};t.exports=p},{"./invariant":137}],31:[function(e,t){"use strict";var n=e("./DOMPropertyOperations"),r=e("./EventPluginUtils"),o=e("./ReactChildren"),i=e("./ReactComponent"),a=e("./ReactCompositeComponent"),s=e("./ReactContext"),u=e("./ReactCurrentOwner"),c=e("./ReactElement"),l=(e("./ReactElementValidator"),e("./ReactDOM")),p=e("./ReactDOMComponent"),d=e("./ReactDefaultInjection"),f=e("./ReactInstanceHandles"),h=e("./ReactLegacyElement"),m=e("./ReactMount"),v=e("./ReactMultiChild"),y=e("./ReactPerf"),g=e("./ReactPropTypes"),E=e("./ReactServerRendering"),C=e("./ReactTextComponent"),R=e("./Object.assign"),M=e("./deprecated"),b=e("./onlyChild");
d.inject();var O=c.createElement,D=c.createFactory;O=h.wrapCreateElement(O),D=h.wrapCreateFactory(D);var x=y.measure("React","render",m.render),P={Children:{map:o.map,forEach:o.forEach,count:o.count,only:b},DOM:l,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:a.createClass,createElement:O,createFactory:D,constructAndRenderComponent:m.constructAndRenderComponent,constructAndRenderComponentByID:m.constructAndRenderComponentByID,render:x,renderToString:E.renderToString,renderToStaticMarkup:E.renderToStaticMarkup,unmountComponentAtNode:m.unmountComponentAtNode,isValidClass:h.isValidClass,isValidElement:c.isValidElement,withContext:s.withContext,__spread:R,renderComponent:M("React","renderComponent","render",this,x),renderComponentToString:M("React","renderComponentToString","renderToString",this,E.renderToString),renderComponentToStaticMarkup:M("React","renderComponentToStaticMarkup","renderToStaticMarkup",this,E.renderToStaticMarkup),isValidComponent:M("React","isValidComponent","isValidElement",this,c.isValidElement)};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({Component:i,CurrentOwner:u,DOMComponent:p,DOMPropertyOperations:n,InstanceHandles:f,Mount:m,MultiChild:v,TextComponent:C}),P.version="0.12.2",t.exports=P},{"./DOMPropertyOperations":13,"./EventPluginUtils":21,"./Object.assign":29,"./ReactChildren":36,"./ReactComponent":37,"./ReactCompositeComponent":40,"./ReactContext":41,"./ReactCurrentOwner":42,"./ReactDOM":43,"./ReactDOMComponent":45,"./ReactDefaultInjection":55,"./ReactElement":56,"./ReactElementValidator":57,"./ReactInstanceHandles":64,"./ReactLegacyElement":65,"./ReactMount":68,"./ReactMultiChild":69,"./ReactPerf":73,"./ReactPropTypes":77,"./ReactServerRendering":81,"./ReactTextComponent":84,"./deprecated":117,"./onlyChild":148}],32:[function(e,t){"use strict";var n=e("./ReactEmptyComponent"),r=e("./ReactMount"),o=e("./invariant"),i={getDOMNode:function(){return o(this.isMounted()),n.isNullComponentID(this._rootNodeID)?null:r.getNode(this._rootNodeID)}};t.exports=i},{"./ReactEmptyComponent":58,"./ReactMount":68,"./invariant":137}],33:[function(e,t){"use strict";function n(e){return Object.prototype.hasOwnProperty.call(e,h)||(e[h]=d++,l[e[h]]={}),l[e[h]]}var r=e("./EventConstants"),o=e("./EventPluginHub"),i=e("./EventPluginRegistry"),a=e("./ReactEventEmitterMixin"),s=e("./ViewportMetrics"),u=e("./Object.assign"),c=e("./isEventSupported"),l={},p=!1,d=0,f={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},h="_reactListenersID"+String(Math.random()).slice(2),m=u({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var o=t,a=n(o),s=i.registrationNameDependencies[e],u=r.topLevelTypes,l=0,p=s.length;p>l;l++){var d=s[l];a.hasOwnProperty(d)&&a[d]||(d===u.topWheel?c("wheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",o):c("mousewheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",o):m.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",o):d===u.topScroll?c("scroll",!0)?m.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",o):m.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):d===u.topFocus||d===u.topBlur?(c("focus",!0)?(m.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",o),m.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",o)):c("focusin")&&(m.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",o),m.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",o)),a[u.topBlur]=!0,a[u.topFocus]=!0):f.hasOwnProperty(d)&&m.ReactEventListener.trapBubbledEvent(d,f[d],o),a[d]=!0)}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!p){var e=s.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),p=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});t.exports=m},{"./EventConstants":17,"./EventPluginHub":19,"./EventPluginRegistry":20,"./Object.assign":29,"./ReactEventEmitterMixin":60,"./ViewportMetrics":105,"./isEventSupported":138}],34:[function(e,t){"use strict";var n=e("./React"),r=e("./Object.assign"),o=n.createFactory(e("./ReactTransitionGroup")),i=n.createFactory(e("./ReactCSSTransitionGroupChild")),a=n.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:n.PropTypes.string.isRequired,transitionEnter:n.PropTypes.bool,transitionLeave:n.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return i({name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return o(r({},this.props,{childFactory:this._wrapChild}))}});t.exports=a},{"./Object.assign":29,"./React":31,"./ReactCSSTransitionGroupChild":35,"./ReactTransitionGroup":87}],35:[function(e,t){"use strict";var n=e("./React"),r=e("./CSSCore"),o=e("./ReactTransitionEvents"),i=e("./onlyChild"),a=17,s=n.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),i=this.props.name+"-"+e,a=i+"-active",s=function(e){e&&e.target!==n||(r.removeClass(n,i),r.removeClass(n,a),o.removeEndEventListener(n,s),t&&t())};o.addEndEventListener(n,s),r.addClass(n,i),this.queueClass(a)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,a))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(r.addClass.bind(r,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return i(this.props.children)}});t.exports=s},{"./CSSCore":4,"./React":31,"./ReactTransitionEvents":86,"./onlyChild":148}],36:[function(e,t){"use strict";function n(e,t){this.forEachFunction=e,this.forEachContext=t}function r(e,t,n,r){var o=e;o.forEachFunction.call(o.forEachContext,t,r)}function o(e,t,o){if(null==e)return e;var i=n.getPooled(t,o);p(e,r,i),n.release(i)}function i(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function a(e,t,n,r){var o=e,i=o.mapResult,a=!i.hasOwnProperty(n);if(a){var s=o.mapFunction.call(o.mapContext,t,r);i[n]=s}}function s(e,t,n){if(null==e)return e;var r={},o=i.getPooled(r,t,n);return p(e,a,o),i.release(o),r}function u(){return null}function c(e){return p(e,u,null)}var l=e("./PooledClass"),p=e("./traverseAllChildren"),d=(e("./warning"),l.twoArgumentPooler),f=l.threeArgumentPooler;l.addPoolingTo(n,d),l.addPoolingTo(i,f);var h={forEach:o,map:s,count:c};t.exports=h},{"./PooledClass":30,"./traverseAllChildren":153,"./warning":155}],37:[function(e,t){"use strict";var n=e("./ReactElement"),r=e("./ReactOwner"),o=e("./ReactUpdates"),i=e("./Object.assign"),a=e("./invariant"),s=e("./keyMirror"),u=s({MOUNTED:null,UNMOUNTED:null}),c=!1,l=null,p=null,d={injection:{injectEnvironment:function(e){a(!c),p=e.mountImageIntoNode,l=e.unmountIDFromEnvironment,d.BackendIDOperations=e.BackendIDOperations,c=!0}},LifeCycle:u,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===u.MOUNTED},setProps:function(e,t){var n=this._pendingElement||this._currentElement;this.replaceProps(i({},n.props,e),t)},replaceProps:function(e,t){a(this.isMounted()),a(0===this._mountDepth),this._pendingElement=n.cloneAndReplaceProps(this._pendingElement||this._currentElement,e),o.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var r=this._pendingElement||this._currentElement;this._pendingElement=n.cloneAndReplaceProps(r,i({},r.props,e)),o.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=u.UNMOUNTED,this._pendingCallbacks=null,this._currentElement=e,this._pendingElement=null},mountComponent:function(e,t,n){a(!this.isMounted());var o=this._currentElement.ref;if(null!=o){var i=this._currentElement._owner;r.addComponentAsRefTo(this,o,i)}this._rootNodeID=e,this._lifeCycleState=u.MOUNTED,this._mountDepth=n},unmountComponent:function(){a(this.isMounted());var e=this._currentElement.ref;null!=e&&r.removeComponentAsRefFrom(this,e,this._owner),l(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=u.UNMOUNTED},receiveComponent:function(e,t){a(this.isMounted()),this._pendingElement=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(null!=this._pendingElement){var t=this._currentElement,n=this._pendingElement;this._currentElement=n,this.props=n.props,this._owner=n._owner,this._pendingElement=null,this.updateComponent(e,t)}},updateComponent:function(e,t){var n=this._currentElement;(n._owner!==t._owner||n.ref!==t.ref)&&(null!=t.ref&&r.removeComponentAsRefFrom(this,t.ref,t._owner),null!=n.ref&&r.addComponentAsRefTo(this,n.ref,n._owner))},mountComponentIntoNode:function(e,t,n){var r=o.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),o.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var o=this.mountComponent(e,n,0);p(o,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return t&&t.refs?t.refs[e]:null}}};t.exports=d},{"./Object.assign":29,"./ReactElement":56,"./ReactOwner":72,"./ReactUpdates":88,"./invariant":137,"./keyMirror":143}],38:[function(e,t){"use strict";var n=e("./ReactDOMIDOperations"),r=e("./ReactMarkupChecksum"),o=e("./ReactMount"),i=e("./ReactPerf"),a=e("./ReactReconcileTransaction"),s=e("./getReactRootElementInContainer"),u=e("./invariant"),c=e("./setInnerHTML"),l=1,p=9,d={ReactReconcileTransaction:a,BackendIDOperations:n,unmountIDFromEnvironment:function(e){o.purgeID(e)},mountImageIntoNode:i.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){if(u(t&&(t.nodeType===l||t.nodeType===p)),n){if(r.canReuseMarkup(e,s(t)))return;u(t.nodeType!==p)}u(t.nodeType!==p),c(t,e)})};t.exports=d},{"./ReactDOMIDOperations":47,"./ReactMarkupChecksum":67,"./ReactMount":68,"./ReactPerf":73,"./ReactReconcileTransaction":79,"./getReactRootElementInContainer":131,"./invariant":137,"./setInnerHTML":149}],39:[function(e,t){"use strict";var n=e("./shallowEqual"),r={shouldComponentUpdate:function(e,t){return!n(this.props,e)||!n(this.state,t)}};t.exports=r},{"./shallowEqual":150}],40:[function(e,t){"use strict";function n(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&D("function"==typeof t[n])}function o(e,t){var n=I.hasOwnProperty(t)?I[t]:null;L.hasOwnProperty(t)&&D(n===S.OVERRIDE_BASE),e.hasOwnProperty(t)&&D(n===S.DEFINE_MANY||n===S.DEFINE_MANY_MERGED)}function i(e){var t=e._compositeLifeCycleState;D(e.isMounted()||t===A.MOUNTING),D(null==f.current),D(t!==A.UNMOUNTING)}function a(e,t){if(t){D(!y.isValidFactory(t)),D(!h.isValidElement(t));var n=e.prototype;t.hasOwnProperty(_)&&k.mixins(e,t.mixins);for(var r in t)if(t.hasOwnProperty(r)&&r!==_){var i=t[r];if(o(n,r),k.hasOwnProperty(r))k[r](e,i);else{var a=I.hasOwnProperty(r),s=n.hasOwnProperty(r),u=i&&i.__reactDontBind,p="function"==typeof i,d=p&&!a&&!s&&!u;if(d)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=i,n[r]=i;else if(s){var f=I[r];D(a&&(f===S.DEFINE_MANY_MERGED||f===S.DEFINE_MANY)),f===S.DEFINE_MANY_MERGED?n[r]=c(n[r],i):f===S.DEFINE_MANY&&(n[r]=l(n[r],i))}else n[r]=i}}}}function s(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var o=n in k;D(!o);var i=n in e;D(!i),e[n]=r}}}function u(e,t){return D(e&&t&&"object"==typeof e&&"object"==typeof t),T(t,function(t,n){D(void 0===e[n]),e[n]=t}),e}function c(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);return null==n?r:null==r?n:u(n,r)}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var p=e("./ReactComponent"),d=e("./ReactContext"),f=e("./ReactCurrentOwner"),h=e("./ReactElement"),m=(e("./ReactElementValidator"),e("./ReactEmptyComponent")),v=e("./ReactErrorUtils"),y=e("./ReactLegacyElement"),g=e("./ReactOwner"),E=e("./ReactPerf"),C=e("./ReactPropTransferer"),R=e("./ReactPropTypeLocations"),M=(e("./ReactPropTypeLocationNames"),e("./ReactUpdates")),b=e("./Object.assign"),O=e("./instantiateReactComponent"),D=e("./invariant"),x=e("./keyMirror"),P=e("./keyOf"),T=(e("./monitorCodeUse"),e("./mapObject")),w=e("./shouldUpdateReactComponent"),_=(e("./warning"),P({mixins:null})),S=x({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),N=[],I={mixins:S.DEFINE_MANY,statics:S.DEFINE_MANY,propTypes:S.DEFINE_MANY,contextTypes:S.DEFINE_MANY,childContextTypes:S.DEFINE_MANY,getDefaultProps:S.DEFINE_MANY_MERGED,getInitialState:S.DEFINE_MANY_MERGED,getChildContext:S.DEFINE_MANY_MERGED,render:S.DEFINE_ONCE,componentWillMount:S.DEFINE_MANY,componentDidMount:S.DEFINE_MANY,componentWillReceiveProps:S.DEFINE_MANY,shouldComponentUpdate:S.DEFINE_ONCE,componentWillUpdate:S.DEFINE_MANY,componentDidUpdate:S.DEFINE_MANY,componentWillUnmount:S.DEFINE_MANY,updateComponent:S.OVERRIDE_BASE},k={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)a(e,t[n])},childContextTypes:function(e,t){r(e,t,R.childContext),e.childContextTypes=b({},e.childContextTypes,t)},contextTypes:function(e,t){r(e,t,R.context),e.contextTypes=b({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps=e.getDefaultProps?c(e.getDefaultProps,t):t},propTypes:function(e,t){r(e,t,R.prop),e.propTypes=b({},e.propTypes,t)},statics:function(e,t){s(e,t)}},A=x({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null}),L={construct:function(){p.Mixin.construct.apply(this,arguments),g.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return p.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==A.MOUNTING},mountComponent:E.measure("ReactCompositeComponent","mountComponent",function(e,t,n){p.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=A.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._currentElement._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,D("object"==typeof this.state&&!Array.isArray(this.state)),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=O(this._renderValidatedComponent(),this._currentElement.type),this._compositeLifeCycleState=null;var r=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),r}),unmountComponent:function(){this._compositeLifeCycleState=A.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,p.Mixin.unmountComponent.call(this)},setState:function(e,t){D("object"==typeof e||null==e),this.replaceState(b({},this._pendingState||this.state,e),t)},replaceState:function(e,t){i(this),this._pendingState=e,this._compositeLifeCycleState!==A.MOUNTING&&M.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var r in n)t[r]=e[r]}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext();if(this.constructor.displayName||"ReactCompositeComponent",t){D("object"==typeof this.constructor.childContextTypes);for(var n in t)D(n in this.constructor.childContextTypes);return b({},e,t)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,r){var o=this.constructor.displayName;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i](t,i,o,r);a instanceof Error&&n(this)}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t!==A.MOUNTING&&t!==A.RECEIVING_PROPS&&(null!=this._pendingElement||null!=this._pendingState||this._pendingForceUpdate)){var n=this.context,r=this.props,o=this._currentElement;null!=this._pendingElement&&(o=this._pendingElement,n=this._processContext(o._context),r=this._processProps(o.props),this._pendingElement=null,this._compositeLifeCycleState=A.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=null;var i=this._pendingState||this.state;this._pendingState=null;var a=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,i,n);a?(this._pendingForceUpdate=!1,this._performComponentUpdate(o,r,i,n,e)):(this._currentElement=o,this.props=r,this.state=i,this.context=n,this._owner=o._owner)}},_performComponentUpdate:function(e,t,n,r,o){var i=this._currentElement,a=this.props,s=this.state,u=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this._currentElement=e,this.props=t,this.state=n,this.context=r,this._owner=e._owner,this.updateComponent(o,i),this.componentDidUpdate&&o.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,a,s,u),this)},receiveComponent:function(e,t){(e!==this._currentElement||null==e._owner)&&p.Mixin.receiveComponent.call(this,e,t)},updateComponent:E.measure("ReactCompositeComponent","updateComponent",function(e,t){p.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,r=n._currentElement,o=this._renderValidatedComponent();if(w(r,o))n.receiveComponent(o,e);else{var i=this._rootNodeID,a=n._rootNodeID;n.unmountComponent(),this._renderedComponent=O(o,this._currentElement.type);var s=this._renderedComponent.mountComponent(i,e,this._mountDepth+1);p.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(a,s)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;D(this.isMounted()||t===A.MOUNTING),D(t!==A.UNMOUNTING&&null==f.current),this._pendingForceUpdate=!0,M.enqueueUpdate(this,e)},_renderValidatedComponent:E.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=d.current;d.current=this._processChildContext(this._currentElement._context),f.current=this;try{e=this.render(),null===e||e===!1?(e=m.getEmptyComponent(),m.registerNullComponentID(this._rootNodeID)):m.deregisterNullComponentID(this._rootNodeID)}finally{d.current=t,f.current=null}return D(h.isValidElement(e)),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(e)){var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(v.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=e.bind(t);return n}},U=function(){};b(U.prototype,p.Mixin,g.Mixin,C.Mixin,L);var F={LifeCycle:A,Base:U,createClass:function(e){var t=function(){};t.prototype=new U,t.prototype.constructor=t,N.forEach(a.bind(null,t)),a(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),D(t.prototype.render);for(var n in I)t.prototype[n]||(t.prototype[n]=null);return y.wrapFactory(h.createFactory(t))},injection:{injectMixin:function(e){N.push(e)}}};t.exports=F},{"./Object.assign":29,"./ReactComponent":37,"./ReactContext":41,"./ReactCurrentOwner":42,"./ReactElement":56,"./ReactElementValidator":57,"./ReactEmptyComponent":58,"./ReactErrorUtils":59,"./ReactLegacyElement":65,"./ReactOwner":72,"./ReactPerf":73,"./ReactPropTransferer":74,"./ReactPropTypeLocationNames":75,"./ReactPropTypeLocations":76,"./ReactUpdates":88,"./instantiateReactComponent":136,"./invariant":137,"./keyMirror":143,"./keyOf":144,"./mapObject":145,"./monitorCodeUse":147,"./shouldUpdateReactComponent":151,"./warning":155}],41:[function(e,t){"use strict";var n=e("./Object.assign"),r={current:{},withContext:function(e,t){var o,i=r.current;r.current=n({},i,e);try{o=t()}finally{r.current=i}return o}};t.exports=r},{"./Object.assign":29}],42:[function(e,t){"use strict";var n={current:null};t.exports=n},{}],43:[function(e,t){"use strict";function n(e){return o.markNonLegacyFactory(r.createFactory(e))}var r=e("./ReactElement"),o=(e("./ReactElementValidator"),e("./ReactLegacyElement")),i=e("./mapObject"),a=i({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},n);t.exports=a},{"./ReactElement":56,"./ReactElementValidator":57,"./ReactLegacyElement":65,"./mapObject":145}],44:[function(e,t){"use strict";var n=e("./AutoFocusMixin"),r=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),i=e("./ReactElement"),a=e("./ReactDOM"),s=e("./keyMirror"),u=i.createFactory(a.button.type),c=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=o.createClass({displayName:"ReactDOMButton",mixins:[n,r],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&c[t]||(e[t]=this.props[t]);return u(e,this.props.children)}});t.exports=l},{"./AutoFocusMixin":2,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56,"./keyMirror":143}],45:[function(e,t){"use strict";function n(e){e&&(y(null==e.children||null==e.dangerouslySetInnerHTML),y(null==e.style||"object"==typeof e.style))}function r(e,t,n,r){var o=d.findReactContainerForID(e);if(o){var i=o.nodeType===O?o.ownerDocument:o;C(t,i)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function o(e){T.call(P,e)||(y(x.test(e)),P[e]=!0)}function i(e){o(e),this._tag=e,this.tagName=e.toUpperCase()}var a=e("./CSSPropertyOperations"),s=e("./DOMProperty"),u=e("./DOMPropertyOperations"),c=e("./ReactBrowserComponentMixin"),l=e("./ReactComponent"),p=e("./ReactBrowserEventEmitter"),d=e("./ReactMount"),f=e("./ReactMultiChild"),h=e("./ReactPerf"),m=e("./Object.assign"),v=e("./escapeTextForBrowser"),y=e("./invariant"),g=(e("./isEventSupported"),e("./keyOf")),E=(e("./monitorCodeUse"),p.deleteListener),C=p.listenTo,R=p.registrationNameModules,M={string:!0,number:!0},b=g({style:null}),O=1,D={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},x=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,P={},T={}.hasOwnProperty;i.displayName="ReactDOMComponent",i.Mixin={mountComponent:h.measure("ReactDOMComponent","mountComponent",function(e,t,r){l.Mixin.mountComponent.call(this,e,t,r),n(this.props);var o=D[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+o}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n="<"+this._tag;for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];if(null!=i)if(R.hasOwnProperty(o))r(this._rootNodeID,o,i,e);else{o===b&&(i&&(i=t.style=m({},t.style)),i=a.createMarkupForStyles(i));var s=u.createMarkupForProperty(o,i);s&&(n+=" "+s)}}if(e.renderToStaticMarkup)return n+">";var c=u.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(null!=t){if(null!=t.__html)return t.__html}else{var n=M[typeof this.props.children]?this.props.children:null,r=null!=n?null:this.props.children;if(null!=n)return v(n);if(null!=r){var o=this.mountChildren(r,e);return o.join("")}}return""},receiveComponent:function(e,t){(e!==this._currentElement||null==e._owner)&&l.Mixin.receiveComponent.call(this,e,t)},updateComponent:h.measure("ReactDOMComponent","updateComponent",function(e,t){n(this._currentElement.props),l.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n,o,i,a=this.props;for(n in e)if(!a.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===b){var u=e[n];for(o in u)u.hasOwnProperty(o)&&(i=i||{},i[o]="")}else R.hasOwnProperty(n)?E(this._rootNodeID,n):(s.isStandardName[n]||s.isCustomAttribute(n))&&l.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in a){var c=a[n],p=e[n];if(a.hasOwnProperty(n)&&c!==p)if(n===b)if(c&&(c=a.style=m({},c)),p){for(o in p)!p.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in c)c.hasOwnProperty(o)&&p[o]!==c[o]&&(i=i||{},i[o]=c[o])}else i=c;else R.hasOwnProperty(n)?r(this._rootNodeID,n,c,t):(s.isStandardName[n]||s.isCustomAttribute(n))&&l.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,c)}i&&l.BackendIDOperations.updateStylesByID(this._rootNodeID,i)},_updateDOMChildren:function(e,t){var n=this.props,r=M[typeof e.children]?e.children:null,o=M[typeof n.children]?n.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,s=null!=r?null:e.children,u=null!=o?null:n.children,c=null!=r||null!=i,p=null!=o||null!=a;null!=s&&null==u?this.updateChildren(null,t):c&&!p&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=a?i!==a&&l.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,a):null!=u&&this.updateChildren(u,t)},unmountComponent:function(){this.unmountChildren(),p.deleteAllListeners(this._rootNodeID),l.Mixin.unmountComponent.call(this)}},m(i.prototype,l.Mixin,i.Mixin,f.Mixin,c),t.exports=i},{"./CSSPropertyOperations":6,"./DOMProperty":12,"./DOMPropertyOperations":13,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactBrowserEventEmitter":33,"./ReactComponent":37,"./ReactMount":68,"./ReactMultiChild":69,"./ReactPerf":73,"./escapeTextForBrowser":120,"./invariant":137,"./isEventSupported":138,"./keyOf":144,"./monitorCodeUse":147}],46:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),o=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),a=e("./ReactElement"),s=e("./ReactDOM"),u=a.createFactory(s.form.type),c=i.createClass({displayName:"ReactDOMForm",mixins:[o,r],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(n.topLevelTypes.topSubmit,"submit")}});t.exports=c},{"./EventConstants":17,"./LocalEventTrapMixin":27,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56}],47:[function(e,t){"use strict";var n=e("./CSSPropertyOperations"),r=e("./DOMChildrenOperations"),o=e("./DOMPropertyOperations"),i=e("./ReactMount"),a=e("./ReactPerf"),s=e("./invariant"),u=e("./setInnerHTML"),c={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:a.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var r=i.getNode(e);s(!c.hasOwnProperty(t)),null!=n?o.setValueForProperty(r,t,n):o.deleteValueForProperty(r,t)}),deletePropertyByID:a.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var r=i.getNode(e);s(!c.hasOwnProperty(t)),o.deleteValueForProperty(r,t,n)}),updateStylesByID:a.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var r=i.getNode(e);n.setValueForStyles(r,t)}),updateInnerHTMLByID:a.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=i.getNode(e);u(n,t)}),updateTextContentByID:a.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=i.getNode(e);r.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:a.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=i.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:a.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=i.getNode(e[n].parentID);r.processUpdates(e,t)})};t.exports=l},{"./CSSPropertyOperations":6,"./DOMChildrenOperations":11,"./DOMPropertyOperations":13,"./ReactMount":68,"./ReactPerf":73,"./invariant":137,"./setInnerHTML":149}],48:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),o=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),a=e("./ReactElement"),s=e("./ReactDOM"),u=a.createFactory(s.img.type),c=i.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[o,r],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(n.topLevelTypes.topError,"error")}});t.exports=c},{"./EventConstants":17,"./LocalEventTrapMixin":27,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56}],49:[function(e,t){"use strict";function n(){this.isMounted()&&this.forceUpdate()}var r=e("./AutoFocusMixin"),o=e("./DOMPropertyOperations"),i=e("./LinkedValueUtils"),a=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),u=e("./ReactElement"),c=e("./ReactDOM"),l=e("./ReactMount"),p=e("./ReactUpdates"),d=e("./Object.assign"),f=e("./invariant"),h=u.createFactory(c.input.type),m={},v=s.createClass({displayName:"ReactDOMInput",mixins:[r,i.Mixin,a],getInitialState:function(){var e=this.props.defaultValue;
return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=d({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=i.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=i.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,h(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());m[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete m[t]},componentDidUpdate:function(){var e=this.getDOMNode();null!=this.props.checked&&o.setValueForProperty(e,"checked",this.props.checked||!1);var t=i.getValue(this);null!=t&&o.setValueForProperty(e,"value",""+t)},_handleChange:function(e){var t,r=i.getOnChange(this);r&&(t=r.call(this,e)),p.asap(n,this);var o=this.props.name;if("radio"===this.props.type&&null!=o){for(var a=this.getDOMNode(),s=a;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),c=0,d=u.length;d>c;c++){var h=u[c];if(h!==a&&h.form===a.form){var v=l.getID(h);f(v);var y=m[v];f(y),p.asap(n,y)}}}return t}});t.exports=v},{"./AutoFocusMixin":2,"./DOMPropertyOperations":13,"./LinkedValueUtils":26,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56,"./ReactMount":68,"./ReactUpdates":88,"./invariant":137}],50:[function(e,t){"use strict";var n=e("./ReactBrowserComponentMixin"),r=e("./ReactCompositeComponent"),o=e("./ReactElement"),i=e("./ReactDOM"),a=(e("./warning"),o.createFactory(i.option.type)),s=r.createClass({displayName:"ReactDOMOption",mixins:[n],componentWillMount:function(){},render:function(){return a(this.props,this.props.children)}});t.exports=s},{"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56,"./warning":155}],51:[function(e,t){"use strict";function n(){this.isMounted()&&(this.setState({value:this._pendingValue}),this._pendingValue=0)}function r(e,t){if(null!=e[t])if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function o(e,t){var n,r,o,i=e.props.multiple,a=null!=t?t:e.state.value,s=e.getDOMNode().options;if(i)for(n={},r=0,o=a.length;o>r;++r)n[""+a[r]]=!0;else n=""+a;for(r=0,o=s.length;o>r;r++){var u=i?n.hasOwnProperty(s[r].value):s[r].value===n;u!==s[r].selected&&(s[r].selected=u)}}var i=e("./AutoFocusMixin"),a=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),c=e("./ReactElement"),l=e("./ReactDOM"),p=e("./ReactUpdates"),d=e("./Object.assign"),f=c.createFactory(l.select.type),h=u.createClass({displayName:"ReactDOMSelect",mixins:[i,a.Mixin,s],propTypes:{defaultValue:r,value:r},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillMount:function(){this._pendingValue=null},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},render:function(){var e=d({},this.props);return e.onChange=this._handleChange,e.value=null,f(e,this.props.children)},componentDidMount:function(){o(this,a.getValue(this))},componentDidUpdate:function(e){var t=a.getValue(this),n=!!e.multiple,r=!!this.props.multiple;(null!=t||n!==r)&&o(this,t)},_handleChange:function(e){var t,r=a.getOnChange(this);r&&(t=r.call(this,e));var o;if(this.props.multiple){o=[];for(var i=e.target.options,s=0,u=i.length;u>s;s++)i[s].selected&&o.push(i[s].value)}else o=e.target.value;return this._pendingValue=o,p.asap(n,this),t}});t.exports=h},{"./AutoFocusMixin":2,"./LinkedValueUtils":26,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56,"./ReactUpdates":88}],52:[function(e,t){"use strict";function n(e,t,n,r){return e===n&&t===r}function r(e){var t=document.selection,n=t.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var i=o.text.length,a=i+r;return{start:i,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var r=t.anchorNode,o=t.anchorOffset,i=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0),u=n(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(e),l.setEnd(s.startContainer,s.startOffset);var p=n(l.startContainer,l.startOffset,l.endContainer,l.endOffset),d=p?0:l.toString().length,f=d+c,h=document.createRange();h.setStart(r,o),h.setEnd(i,a);var m=h.collapsed;return{start:m?f:d,end:m?d:f}}function i(e,t){var n,r,o=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),o.moveToElementText(e),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,o=Math.min(t.start,r),i="undefined"==typeof t.end?o:Math.min(t.end,r);if(!n.extend&&o>i){var a=i;i=o,o=a}var s=u(e,o),l=u(e,i);if(s&&l){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(p),n.extend(l.node,l.offset)):(p.setEnd(l.node,l.offset),n.addRange(p))}}}var s=e("./ExecutionEnvironment"),u=e("./getNodeForCharacterOffset"),c=e("./getTextContentAccessor"),l=s.canUseDOM&&document.selection,p={getOffsets:l?r:o,setOffsets:l?i:a};t.exports=p},{"./ExecutionEnvironment":23,"./getNodeForCharacterOffset":130,"./getTextContentAccessor":132}],53:[function(e,t){"use strict";function n(){this.isMounted()&&this.forceUpdate()}var r=e("./AutoFocusMixin"),o=e("./DOMPropertyOperations"),i=e("./LinkedValueUtils"),a=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),u=e("./ReactElement"),c=e("./ReactDOM"),l=e("./ReactUpdates"),p=e("./Object.assign"),d=e("./invariant"),f=(e("./warning"),u.createFactory(c.textarea.type)),h=s.createClass({displayName:"ReactDOMTextarea",mixins:[r,i.Mixin,a],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(d(null==e),Array.isArray(t)&&(d(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=p({},this.props);return d(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,f(e,this.state.initialValue)},componentDidUpdate:function(){var e=i.getValue(this);if(null!=e){var t=this.getDOMNode();o.setValueForProperty(t,"value",""+e)}},_handleChange:function(e){var t,r=i.getOnChange(this);return r&&(t=r.call(this,e)),l.asap(n,this),t}});t.exports=h},{"./AutoFocusMixin":2,"./DOMPropertyOperations":13,"./LinkedValueUtils":26,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":56,"./ReactUpdates":88,"./invariant":137,"./warning":155}],54:[function(e,t){"use strict";function n(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),o=e("./Transaction"),i=e("./Object.assign"),a=e("./emptyFunction"),s={initialize:a,close:function(){p.isBatchingUpdates=!1}},u={initialize:a,close:r.flushBatchedUpdates.bind(r)},c=[u,s];i(n.prototype,o.Mixin,{getTransactionWrappers:function(){return c}});var l=new n,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var r=p.isBatchingUpdates;p.isBatchingUpdates=!0,r?e(t,n):l.perform(e,null,t,n)}};t.exports=p},{"./Object.assign":29,"./ReactUpdates":88,"./Transaction":104,"./emptyFunction":118}],55:[function(e,t){"use strict";function n(){O.EventEmitter.injectReactEventListener(b),O.EventPluginHub.injectEventPluginOrder(s),O.EventPluginHub.injectInstanceHandle(D),O.EventPluginHub.injectMount(x),O.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:u,ChangeEventPlugin:o,CompositionEventPlugin:a,MobileSafariClickEventPlugin:p,SelectEventPlugin:P,BeforeInputEventPlugin:r}),O.NativeComponent.injectGenericComponentClass(m),O.NativeComponent.injectComponentClasses({button:v,form:y,img:g,input:E,option:C,select:R,textarea:M,html:S("html"),head:S("head"),body:S("body")}),O.CompositeComponent.injectMixin(d),O.DOMProperty.injectDOMPropertyConfig(l),O.DOMProperty.injectDOMPropertyConfig(_),O.EmptyComponent.injectEmptyComponent("noscript"),O.Updates.injectReconcileTransaction(f.ReactReconcileTransaction),O.Updates.injectBatchingStrategy(h),O.RootIndex.injectCreateReactRootIndex(c.canUseDOM?i.createReactRootIndex:T.createReactRootIndex),O.Component.injectEnvironment(f)}var r=e("./BeforeInputEventPlugin"),o=e("./ChangeEventPlugin"),i=e("./ClientReactRootIndex"),a=e("./CompositionEventPlugin"),s=e("./DefaultEventPluginOrder"),u=e("./EnterLeaveEventPlugin"),c=e("./ExecutionEnvironment"),l=e("./HTMLDOMPropertyConfig"),p=e("./MobileSafariClickEventPlugin"),d=e("./ReactBrowserComponentMixin"),f=e("./ReactComponentBrowserEnvironment"),h=e("./ReactDefaultBatchingStrategy"),m=e("./ReactDOMComponent"),v=e("./ReactDOMButton"),y=e("./ReactDOMForm"),g=e("./ReactDOMImg"),E=e("./ReactDOMInput"),C=e("./ReactDOMOption"),R=e("./ReactDOMSelect"),M=e("./ReactDOMTextarea"),b=e("./ReactEventListener"),O=e("./ReactInjection"),D=e("./ReactInstanceHandles"),x=e("./ReactMount"),P=e("./SelectEventPlugin"),T=e("./ServerReactRootIndex"),w=e("./SimpleEventPlugin"),_=e("./SVGDOMPropertyConfig"),S=e("./createFullPageComponent");t.exports={inject:n}},{"./BeforeInputEventPlugin":3,"./ChangeEventPlugin":8,"./ClientReactRootIndex":9,"./CompositionEventPlugin":10,"./DefaultEventPluginOrder":15,"./EnterLeaveEventPlugin":16,"./ExecutionEnvironment":23,"./HTMLDOMPropertyConfig":24,"./MobileSafariClickEventPlugin":28,"./ReactBrowserComponentMixin":32,"./ReactComponentBrowserEnvironment":38,"./ReactDOMButton":44,"./ReactDOMComponent":45,"./ReactDOMForm":46,"./ReactDOMImg":48,"./ReactDOMInput":49,"./ReactDOMOption":50,"./ReactDOMSelect":51,"./ReactDOMTextarea":53,"./ReactDefaultBatchingStrategy":54,"./ReactEventListener":61,"./ReactInjection":62,"./ReactInstanceHandles":64,"./ReactMount":68,"./SVGDOMPropertyConfig":89,"./SelectEventPlugin":90,"./ServerReactRootIndex":91,"./SimpleEventPlugin":92,"./createFullPageComponent":113}],56:[function(e,t){"use strict";var n=e("./ReactContext"),r=e("./ReactCurrentOwner"),o=(e("./warning"),{key:!0,ref:!0}),i=function(e,t,n,r,o,i){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=o,this.props=i};i.prototype={_isReactElement:!0},i.createElement=function(e,t,a){var s,u={},c=null,l=null;if(null!=t){l=void 0===t.ref?null:t.ref,c=null==t.key?null:""+t.key;for(s in t)t.hasOwnProperty(s)&&!o.hasOwnProperty(s)&&(u[s]=t[s])}var p=arguments.length-2;if(1===p)u.children=a;else if(p>1){for(var d=Array(p),f=0;p>f;f++)d[f]=arguments[f+2];u.children=d}if(e&&e.defaultProps){var h=e.defaultProps;for(s in h)"undefined"==typeof u[s]&&(u[s]=h[s])}return new i(e,c,l,r.current,n.current,u)},i.createFactory=function(e){var t=i.createElement.bind(null,e);return t.type=e,t},i.cloneAndReplaceProps=function(e,t){var n=new i(e.type,e.key,e.ref,e._owner,e._context,t);return n},i.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=i},{"./ReactContext":41,"./ReactCurrentOwner":42,"./warning":155}],57:[function(e,t){"use strict";function n(){var e=p.current;return e&&e.constructor.displayName||void 0}function r(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,i("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t))}function o(e,t,n){v.test(e)&&i("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function i(e,t,r,o){var i=n(),a=o.displayName,s=i||a,u=f[e];if(!u.hasOwnProperty(s)){u[s]=!0,t+=i?" Check the render method of "+i+".":" Check the renderComponent call using <"+a+">.";var c=null;r._owner&&r._owner!==p.current&&(c=r._owner.constructor.displayName,t+=" It was passed a child from "+c+"."),t+=" See http://fb.me/react-warning-keys for more information.",d(e,{component:s,componentOwner:c}),console.warn(t)}}function a(){var e=n()||"";h.hasOwnProperty(e)||(h[e]=!0,d("react_object_map_children"))}function s(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];c.isValidElement(i)&&r(i,t)}else if(c.isValidElement(e))e._store.validated=!0;else if(e&&"object"==typeof e){a();for(var s in e)o(s,e[s],t)}}function u(e,t,n,r){for(var o in t)if(t.hasOwnProperty(o)){var i;try{i=t[o](n,o,e,r)}catch(a){i=a}i instanceof Error&&!(i.message in m)&&(m[i.message]=!0,d("react_failed_descriptor_type_check",{message:i.message}))}}var c=e("./ReactElement"),l=e("./ReactPropTypeLocations"),p=e("./ReactCurrentOwner"),d=e("./monitorCodeUse"),f=(e("./warning"),{react_key_warning:{},react_numeric_key_warning:{}}),h={},m={},v=/^\d+$/,y={createElement:function(e){var t=c.createElement.apply(this,arguments);if(null==t)return t;for(var n=2;n<arguments.length;n++)s(arguments[n],e);if(e){var r=e.displayName;e.propTypes&&u(r,e.propTypes,t.props,l.prop),e.contextTypes&&u(r,e.contextTypes,t._context,l.context)}return t},createFactory:function(e){var t=y.createElement.bind(null,e);return t.type=e,t}};t.exports=y},{"./ReactCurrentOwner":42,"./ReactElement":56,"./ReactPropTypeLocations":76,"./monitorCodeUse":147,"./warning":155}],58:[function(e,t){"use strict";function n(){return u(a),a()}function r(e){c[e]=!0}function o(e){delete c[e]}function i(e){return c[e]}var a,s=e("./ReactElement"),u=e("./invariant"),c={},l={injectEmptyComponent:function(e){a=s.createFactory(e)}},p={deregisterNullComponentID:o,getEmptyComponent:n,injection:l,isNullComponentID:i,registerNullComponentID:r};t.exports=p},{"./ReactElement":56,"./invariant":137}],59:[function(e,t){"use strict";var n={guard:function(e){return e}};t.exports=n},{}],60:[function(e,t){"use strict";function n(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),o={handleTopLevel:function(e,t,o,i){var a=r.extractEvents(e,t,o,i);n(a)}};t.exports=o},{"./EventPluginHub":19}],61:[function(e,t){"use strict";function n(e){var t=l.getID(e),n=c.getReactRootIDFromNodeID(t),r=l.findReactContainerForID(n),o=l.getFirstReactDOM(r);return o}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){for(var t=l.getFirstReactDOM(f(e.nativeEvent))||window,r=t;r;)e.ancestors.push(r),r=n(r);for(var o=0,i=e.ancestors.length;i>o;o++){t=e.ancestors[o];var a=l.getID(t)||"";m._handleTopLevel(e.topLevelType,t,a,e.nativeEvent)}}function i(e){var t=h(window);e(t)}var a=e("./EventListener"),s=e("./ExecutionEnvironment"),u=e("./PooledClass"),c=e("./ReactInstanceHandles"),l=e("./ReactMount"),p=e("./ReactUpdates"),d=e("./Object.assign"),f=e("./getEventTarget"),h=e("./getUnboundedScrollPosition");d(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(r,u.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:s.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?a.listen(r,t,m.dispatchEvent.bind(null,e)):void 0},trapCapturedEvent:function(e,t,n){var r=n;return r?a.capture(r,t,m.dispatchEvent.bind(null,e)):void 0},monitorScrollValue:function(e){var t=i.bind(null,e);a.listen(window,"scroll",t),a.listen(window,"resize",t)},dispatchEvent:function(e,t){if(m._enabled){var n=r.getPooled(e,t);try{p.batchedUpdates(o,n)}finally{r.release(n)}}}};t.exports=m},{"./EventListener":18,"./ExecutionEnvironment":23,"./Object.assign":29,"./PooledClass":30,"./ReactInstanceHandles":64,"./ReactMount":68,"./ReactUpdates":88,"./getEventTarget":128,"./getUnboundedScrollPosition":133}],62:[function(e,t){"use strict";var n=e("./DOMProperty"),r=e("./EventPluginHub"),o=e("./ReactComponent"),i=e("./ReactCompositeComponent"),a=e("./ReactEmptyComponent"),s=e("./ReactBrowserEventEmitter"),u=e("./ReactNativeComponent"),c=e("./ReactPerf"),l=e("./ReactRootIndex"),p=e("./ReactUpdates"),d={Component:o.injection,CompositeComponent:i.injection,DOMProperty:n.injection,EmptyComponent:a.injection,EventPluginHub:r.injection,EventEmitter:s.injection,NativeComponent:u.injection,Perf:c.injection,RootIndex:l.injection,Updates:p.injection};t.exports=d},{"./DOMProperty":12,"./EventPluginHub":19,"./ReactBrowserEventEmitter":33,"./ReactComponent":37,"./ReactCompositeComponent":40,"./ReactEmptyComponent":58,"./ReactNativeComponent":71,"./ReactPerf":73,"./ReactRootIndex":80,"./ReactUpdates":88}],63:[function(e,t){"use strict";function n(e){return o(document.documentElement,e)}var r=e("./ReactDOMSelection"),o=e("./containsNode"),i=e("./focusNode"),a=e("./getActiveElement"),s={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:s.hasSelectionCapabilities(e)?s.getSelection(e):null}},restoreSelection:function(e){var t=a(),r=e.focusedElem,o=e.selectionRange;t!==r&&n(r)&&(s.hasSelectionCapabilities(r)&&s.setSelection(r,o),i(r))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,o=t.end;if("undefined"==typeof o&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",o-n),i.select()}else r.setOffsets(e,t)}};t.exports=s},{"./ReactDOMSelection":52,"./containsNode":111,"./focusNode":122,"./getActiveElement":124}],64:[function(e,t){"use strict";function n(e){return d+e.toString(36)}function r(e,t){return e.charAt(t)===d||t===e.length}function o(e){return""===e||e.charAt(0)===d&&e.charAt(e.length-1)!==d}function i(e,t){return 0===t.indexOf(e)&&r(t,e.length)}function a(e){return e?e.substr(0,e.lastIndexOf(d)):""}function s(e,t){if(p(o(e)&&o(t)),p(i(e,t)),e===t)return e;for(var n=e.length+f,a=n;a<t.length&&!r(t,a);a++);return t.substr(0,a)}function u(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var i=0,a=0;n>=a;a++)if(r(e,a)&&r(t,a))i=a;else if(e.charAt(a)!==t.charAt(a))break;var s=e.substr(0,i);return p(o(s)),s}function c(e,t,n,r,o,u){e=e||"",t=t||"",p(e!==t);var c=i(t,e);p(c||i(e,t));for(var l=0,d=c?a:s,f=e;;f=d(f,t)){var m;if(o&&f===e||u&&f===t||(m=n(f,c,r)),m===!1||f===t)break;p(l++<h)}}var l=e("./ReactRootIndex"),p=e("./invariant"),d=".",f=d.length,h=100,m={createReactRootID:function(){return n(l.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===d&&e.length>1){var t=e.indexOf(d,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,o){var i=u(e,t);i!==e&&c(e,i,n,r,!1,!0),i!==t&&c(i,t,n,o,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(c("",e,t,n,!0,!1),c(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){c("",e,t,n,!0,!1)},_getFirstCommonAncestorID:u,_getNextDescendantID:s,isAncestorIDOf:i,SEPARATOR:d};t.exports=m},{"./ReactRootIndex":80,"./invariant":137}],65:[function(e,t){"use strict";function n(e,t){if("function"==typeof t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("function"==typeof r){var o=r.bind(t);for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);e[n]=o}else e[n]=r}}var r=(e("./ReactCurrentOwner"),e("./invariant")),o=(e("./monitorCodeUse"),e("./warning"),{}),i={},a={};a.wrapCreateFactory=function(e){var t=function(t){return"function"!=typeof t?e(t):t.isReactNonLegacyFactory?e(t.type):t.isReactLegacyFactory?e(t.type):t};return t},a.wrapCreateElement=function(e){var t=function(t){if("function"!=typeof t)return e.apply(this,arguments);var n;return t.isReactNonLegacyFactory?(n=Array.prototype.slice.call(arguments,0),n[0]=t.type,e.apply(this,n)):t.isReactLegacyFactory?(t._isMockFunction&&(t.type._mockedReactClassConstructor=t),n=Array.prototype.slice.call(arguments,0),n[0]=t.type,e.apply(this,n)):t.apply(null,Array.prototype.slice.call(arguments,1))};return t},a.wrapFactory=function(e){r("function"==typeof e);var t=function(){return e.apply(this,arguments)};return n(t,e.type),t.isReactLegacyFactory=o,t.type=e.type,t},a.markNonLegacyFactory=function(e){return e.isReactNonLegacyFactory=i,e},a.isValidFactory=function(e){return"function"==typeof e&&e.isReactLegacyFactory===o},a.isValidClass=function(e){return a.isValidFactory(e)},a._isLegacyCallWarningEnabled=!0,t.exports=a},{"./ReactCurrentOwner":42,"./invariant":137,"./monitorCodeUse":147,"./warning":155}],66:[function(e,t){"use strict";function n(e,t){this.value=e,this.requestChange=t}function r(e){var t={value:"undefined"==typeof e?o.PropTypes.any.isRequired:e.isRequired,requestChange:o.PropTypes.func.isRequired};return o.PropTypes.shape(t)}var o=e("./React");n.PropTypes={link:r},t.exports=n},{"./React":31}],67:[function(e,t){"use strict";var n=e("./adler32"),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=n(e);return e.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var o=t.getAttribute(r.CHECKSUM_ATTR_NAME);o=o&&parseInt(o,10);var i=n(e);return i===o}};t.exports=r},{"./adler32":107}],68:[function(e,t){"use strict";function n(e){var t=E(e);return t&&I.getID(t)}function r(e){var t=o(e);if(t)if(x.hasOwnProperty(t)){var n=x[t];n!==e&&(R(!s(n,t)),x[t]=e)}else x[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(D)||""}function i(e,t){var n=o(e);n!==t&&delete x[n],e.setAttribute(D,t),x[t]=e}function a(e){return x.hasOwnProperty(e)&&s(x[e],e)||(x[e]=I.findReactNodeByID(e)),x[e]}function s(e,t){if(e){R(o(e)===t);var n=I.findReactContainerForID(t);if(n&&y(n,e))return!0}return!1}function u(e){delete x[e]}function c(e){var t=x[e];return t&&s(t,e)?void(N=t):!1}function l(e){N=null,m.traverseAncestors(e,c);var t=N;return N=null,t}var p=e("./DOMProperty"),d=e("./ReactBrowserEventEmitter"),f=(e("./ReactCurrentOwner"),e("./ReactElement")),h=e("./ReactLegacyElement"),m=e("./ReactInstanceHandles"),v=e("./ReactPerf"),y=e("./containsNode"),g=e("./deprecated"),E=e("./getReactRootElementInContainer"),C=e("./instantiateReactComponent"),R=e("./invariant"),M=e("./shouldUpdateReactComponent"),b=(e("./warning"),h.wrapCreateElement(f.createElement)),O=m.SEPARATOR,D=p.ID_ATTRIBUTE_NAME,x={},P=1,T=9,w={},_={},S=[],N=null,I={_instancesByReactRootID:w,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var o=t.props;return I.scrollMonitor(n,function(){e.replaceProps(o,r)}),e},_registerComponent:function(e,t){R(t&&(t.nodeType===P||t.nodeType===T)),d.ensureScrollValueMonitoring();var n=I.registerContainer(t);return w[n]=e,n},_renderNewRootComponent:v.measure("ReactMount","_renderNewRootComponent",function(e,t,n){var r=C(e,null),o=I._registerComponent(r,t);return r.mountComponentIntoNode(o,t,n),r}),render:function(e,t,r){R(f.isValidElement(e));var o=w[n(t)];if(o){var i=o._currentElement;if(M(i,e))return I._updateRootComponent(o,e,t,r);I.unmountComponentAtNode(t)}var a=E(t),s=a&&I.isRenderedByReact(a),u=s&&!o,c=I._renderNewRootComponent(e,t,u);return r&&r.call(c),c},constructAndRenderComponent:function(e,t,n){var r=b(e,t);return I.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return R(r),I.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=n(e);return t&&(t=m.getReactRootIDFromNodeID(t)),t||(t=m.createReactRootID()),_[t]=e,t},unmountComponentAtNode:function(e){var t=n(e),r=w[t];return r?(I.unmountComponentFromNode(r,e),delete w[t],delete _[t],!0):!1},unmountComponentFromNode:function(e,t){for(e.unmountComponent(),t.nodeType===T&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=m.getReactRootIDFromNodeID(e),n=_[t];return n},findReactNodeByID:function(e){var t=I.findReactContainerForID(e);return I.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=I.getID(e);return t?t.charAt(0)===O:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(I.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=S,r=0,o=l(t)||e;for(n[0]=o.firstChild,n.length=1;r<n.length;){for(var i,a=n[r++];a;){var s=I.getID(a);s?t===s?i=a:m.isAncestorIDOf(s,t)&&(n.length=r=0,n.push(a.firstChild)):n.push(a.firstChild),a=a.nextSibling}if(i)return n.length=0,i}n.length=0,R(!1)},getReactRootID:n,getID:r,setID:i,getNode:a,purgeID:u};I.renderComponent=g("ReactMount","renderComponent","render",this,I.render),t.exports=I},{"./DOMProperty":12,"./ReactBrowserEventEmitter":33,"./ReactCurrentOwner":42,"./ReactElement":56,"./ReactInstanceHandles":64,"./ReactLegacyElement":65,"./ReactPerf":73,"./containsNode":111,"./deprecated":117,"./getReactRootElementInContainer":131,"./instantiateReactComponent":136,"./invariant":137,"./shouldUpdateReactComponent":151,"./warning":155}],69:[function(e,t){"use strict";function n(e,t,n){h.push({parentID:e,parentNode:null,type:c.INSERT_MARKUP,markupIndex:m.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function r(e,t,n){h.push({parentID:e,parentNode:null,type:c.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function o(e,t){h.push({parentID:e,parentNode:null,type:c.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function i(e,t){h.push({parentID:e,parentNode:null,type:c.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function a(){h.length&&(u.BackendIDOperations.dangerouslyProcessChildrenUpdates(h,m),s())}function s(){h.length=0,m.length=0}var u=e("./ReactComponent"),c=e("./ReactMultiChildUpdateTypes"),l=e("./flattenChildren"),p=e("./instantiateReactComponent"),d=e("./shouldUpdateReactComponent"),f=0,h=[],m=[],v={Mixin:{mountChildren:function(e,t){var n=l(e),r=[],o=0;this._renderedChildren=n;for(var i in n){var a=n[i];if(n.hasOwnProperty(i)){var s=p(a,null);n[i]=s;var u=this._rootNodeID+i,c=s.mountComponent(u,t,this._mountDepth+1);s._mountIndex=o,r.push(c),o++}}return r},updateTextContent:function(e){f++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{f--,f||(t?s():a())}},updateChildren:function(e,t){f++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{f--,f||(n?s():a())}},_updateChildren:function(e,t){var n=l(e),r=this._renderedChildren;if(n||r){var o,i=0,a=0;for(o in n)if(n.hasOwnProperty(o)){var s=r&&r[o],u=s&&s._currentElement,c=n[o];if(d(u,c))this.moveChild(s,a,i),i=Math.max(s._mountIndex,i),s.receiveComponent(c,t),s._mountIndex=a;else{s&&(i=Math.max(s._mountIndex,i),this._unmountChildByName(s,o));var f=p(c,null);this._mountChildByNameAtIndex(f,o,a,t)}a++}for(o in r)!r.hasOwnProperty(o)||n&&n[o]||this._unmountChildByName(r[o],o)}},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){n(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){o(this._rootNodeID,e._mountIndex)},setTextContent:function(e){i(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var o=this._rootNodeID+t,i=e.mountComponent(o,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,i),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};t.exports=v},{"./ReactComponent":37,"./ReactMultiChildUpdateTypes":70,"./flattenChildren":121,"./instantiateReactComponent":136,"./shouldUpdateReactComponent":151}],70:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=r},{"./keyMirror":143}],71:[function(e,t){"use strict";function n(e,t,n){var r=a[e];return null==r?(o(i),new i(e,t)):n===e?(o(i),new i(e,t)):new r.type(t)}var r=e("./Object.assign"),o=e("./invariant"),i=null,a={},s={injectGenericComponentClass:function(e){i=e},injectComponentClasses:function(e){r(a,e)}},u={createInstanceForTag:n,injection:s};t.exports=u},{"./Object.assign":29,"./invariant":137}],72:[function(e,t){"use strict";var n=e("./emptyObject"),r=e("./invariant"),o={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r(o.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(o.isValidOwner(n)),n.refs[t]===e&&n.detachRef(t)},Mixin:{construct:function(){this.refs=n},attachRef:function(e,t){r(t.isOwnedBy(this));var o=this.refs===n?this.refs={}:this.refs;o[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=o},{"./emptyObject":119,"./invariant":137}],73:[function(e,t){"use strict";function n(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:n,measure:function(e,t,n){return n},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r},{}],74:[function(e,t){"use strict";function n(e){return function(t,n,r){t[n]=t.hasOwnProperty(n)?e(t[n],r):r}}function r(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=c[n];r&&c.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var o=e("./Object.assign"),i=e("./emptyFunction"),a=e("./invariant"),s=e("./joinClasses"),u=(e("./warning"),n(function(e,t){return o({},t,e)})),c={children:i,className:n(s),style:u},l={TransferStrategies:c,mergeProps:function(e,t){return r(o({},e),t)},Mixin:{transferPropsTo:function(e){return a(e._owner===this),r(e.props,this.props),e}}};t.exports=l},{"./Object.assign":29,"./emptyFunction":118,"./invariant":137,"./joinClasses":142,"./warning":155}],75:[function(e,t){"use strict";var n={};t.exports=n},{}],76:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({prop:null,context:null,childContext:null});t.exports=r},{"./keyMirror":143}],77:[function(e,t){"use strict";function n(e){function t(t,n,r,o,i){if(o=o||C,null!=n[r])return e(n,r,o,i);var a=y[i];return t?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+o+"`.")):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,r,o){var i=t[n],a=h(i);if(a!==e){var s=y[o],u=m(i);return new Error("Invalid "+s+" `"+n+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}}return n(t)}function o(){return n(E.thatReturns())}function i(e){function t(t,n,r,o){var i=t[n];if(!Array.isArray(i)){var a=y[o],s=h(i);return new Error("Invalid "+a+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var u=0;u<i.length;u++){var c=e(i,u,r,o);if(c instanceof Error)return c}}return n(t)}function a(){function e(e,t,n,r){if(!v.isValidElement(e[t])){var o=y[r];return new Error("Invalid "+o+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}}return n(e)}function s(e){function t(t,n,r,o){if(!(t[n]instanceof e)){var i=y[o],a=e.name||C;return new Error("Invalid "+i+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}}return n(t)}function u(e){function t(t,n,r,o){for(var i=t[n],a=0;a<e.length;a++)if(i===e[a])return;var s=y[o],u=JSON.stringify(e);return new Error("Invalid "+s+" `"+n+"` of value `"+i+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return n(t)}function c(e){function t(t,n,r,o){var i=t[n],a=h(i);
if("object"!==a){var s=y[o];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an object."))}for(var u in i)if(i.hasOwnProperty(u)){var c=e(i,u,r,o);if(c instanceof Error)return c}}return n(t)}function l(e){function t(t,n,r,o){for(var i=0;i<e.length;i++){var a=e[i];if(null==a(t,n,r,o))return}var s=y[o];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return n(t)}function p(){function e(e,t,n,r){if(!f(e[t])){var o=y[r];return new Error("Invalid "+o+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}}return n(e)}function d(e){function t(t,n,r,o){var i=t[n],a=h(i);if("object"!==a){var s=y[o];return new Error("Invalid "+s+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `object`."))}for(var u in e){var c=e[u];if(c){var l=c(i,u,r,o);if(l)return l}}}return n(t,"expected `object`")}function f(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(f);if(v.isValidElement(e))return!0;for(var t in e)if(!f(e[t]))return!1;return!0;default:return!1}}function h(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function m(e){var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var v=e("./ReactElement"),y=e("./ReactPropTypeLocationNames"),g=e("./deprecated"),E=e("./emptyFunction"),C="<<anonymous>>",R=a(),M=p(),b={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:o(),arrayOf:i,element:R,instanceOf:s,node:M,objectOf:c,oneOf:u,oneOfType:l,shape:d,component:g("React.PropTypes","component","element",this,R),renderable:g("React.PropTypes","renderable","node",this,M)};t.exports=b},{"./ReactElement":56,"./ReactPropTypeLocationNames":75,"./deprecated":117,"./emptyFunction":118}],78:[function(e,t){"use strict";function n(){this.listenersToPut=[]}var r=e("./PooledClass"),o=e("./ReactBrowserEventEmitter"),i=e("./Object.assign");i(n.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];o.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./Object.assign":29,"./PooledClass":30,"./ReactBrowserEventEmitter":33}],79:[function(e,t){"use strict";function n(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=s.getPooled()}var r=e("./CallbackQueue"),o=e("./PooledClass"),i=e("./ReactBrowserEventEmitter"),a=e("./ReactInputSelection"),s=e("./ReactPutListenerQueue"),u=e("./Transaction"),c=e("./Object.assign"),l={initialize:a.getSelectionInformation,close:a.restoreSelection},p={initialize:function(){var e=i.isEnabled();return i.setEnabled(!1),e},close:function(e){i.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},h=[f,l,p,d],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};c(n.prototype,u.Mixin,m),o.addPoolingTo(n),t.exports=n},{"./CallbackQueue":7,"./Object.assign":29,"./PooledClass":30,"./ReactBrowserEventEmitter":33,"./ReactInputSelection":63,"./ReactPutListenerQueue":78,"./Transaction":104}],80:[function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){r.createReactRootIndex=e}},r={createReactRootIndex:null,injection:n};t.exports=r},{}],81:[function(e,t){"use strict";function n(e){c(o.isValidElement(e));var t;try{var n=i.createReactRootID();return t=s.getPooled(!1),t.perform(function(){var r=u(e,null),o=r.mountComponent(n,t,0);return a.addChecksumToMarkup(o)},null)}finally{s.release(t)}}function r(e){c(o.isValidElement(e));var t;try{var n=i.createReactRootID();return t=s.getPooled(!0),t.perform(function(){var r=u(e,null);return r.mountComponent(n,t,0)},null)}finally{s.release(t)}}var o=e("./ReactElement"),i=e("./ReactInstanceHandles"),a=e("./ReactMarkupChecksum"),s=e("./ReactServerRenderingTransaction"),u=e("./instantiateReactComponent"),c=e("./invariant");t.exports={renderToString:n,renderToStaticMarkup:r}},{"./ReactElement":56,"./ReactInstanceHandles":64,"./ReactMarkupChecksum":67,"./ReactServerRenderingTransaction":82,"./instantiateReactComponent":136,"./invariant":137}],82:[function(e,t){"use strict";function n(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=o.getPooled(null),this.putListenerQueue=i.getPooled()}var r=e("./PooledClass"),o=e("./CallbackQueue"),i=e("./ReactPutListenerQueue"),a=e("./Transaction"),s=e("./Object.assign"),u=e("./emptyFunction"),c={initialize:function(){this.reactMountReady.reset()},close:u},l={initialize:function(){this.putListenerQueue.reset()},close:u},p=[l,c],d={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null,i.release(this.putListenerQueue),this.putListenerQueue=null}};s(n.prototype,a.Mixin,d),r.addPoolingTo(n),t.exports=n},{"./CallbackQueue":7,"./Object.assign":29,"./PooledClass":30,"./ReactPutListenerQueue":78,"./Transaction":104,"./emptyFunction":118}],83:[function(e,t){"use strict";function n(e,t){var n={};return function(r){n[t]=r,e.setState(n)}}var r={createStateSetter:function(e,t){return function(n,r,o,i,a,s){var u=t.call(e,n,r,o,i,a,s);u&&e.setState(u)}},createStateKeySetter:function(e,t){var r=e.__keySetters||(e.__keySetters={});return r[t]||(r[t]=n(e,t))}};r.Mixin={createStateSetter:function(e){return r.createStateSetter(this,e)},createStateKeySetter:function(e){return r.createStateKeySetter(this,e)}},t.exports=r},{}],84:[function(e,t){"use strict";var n=e("./DOMPropertyOperations"),r=e("./ReactComponent"),o=e("./ReactElement"),i=e("./Object.assign"),a=e("./escapeTextForBrowser"),s=function(){};i(s.prototype,r.Mixin,{mountComponent:function(e,t,o){r.Mixin.mountComponent.call(this,e,t,o);var i=a(this.props);return t.renderToStaticMarkup?i:"<span "+n.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e){var t=e.props;t!==this.props&&(this.props=t,r.BackendIDOperations.updateTextContentByID(this._rootNodeID,t))}});var u=function(e){return new o(s,null,null,null,null,e)};u.type=s,t.exports=u},{"./DOMPropertyOperations":13,"./Object.assign":29,"./ReactComponent":37,"./ReactElement":56,"./escapeTextForBrowser":120}],85:[function(e,t){"use strict";var n=e("./ReactChildren"),r={getChildMapping:function(e){return n.map(e,function(e){return e})},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var a,s={};for(var u in t){if(r.hasOwnProperty(u))for(a=0;a<r[u].length;a++){var c=r[u][a];s[r[u][a]]=n(c)}s[u]=n(u)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}};t.exports=r},{"./ReactChildren":36}],86:[function(e,t){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var n in a){var r=a[n];for(var o in r)if(o in t){s.push(r[o]);break}}}function r(e,t,n){e.addEventListener(t,n,!1)}function o(e,t,n){e.removeEventListener(t,n,!1)}var i=e("./ExecutionEnvironment"),a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];i.canUseDOM&&n();var u={addEndEventListener:function(e,t){return 0===s.length?void window.setTimeout(t,0):void s.forEach(function(n){r(e,n,t)})},removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){o(e,n,t)})}};t.exports=u},{"./ExecutionEnvironment":23}],87:[function(e,t){"use strict";var n=e("./React"),r=e("./ReactTransitionChildMapping"),o=e("./Object.assign"),i=e("./cloneWithProps"),a=e("./emptyFunction"),s=n.createClass({displayName:"ReactTransitionGroup",propTypes:{component:n.PropTypes.any,childFactory:n.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:a.thatReturnsArgument}},getInitialState:function(){return{children:r.getChildMapping(this.props.children)}},componentWillReceiveProps:function(e){var t=r.getChildMapping(e.children),n=this.state.children;this.setState({children:r.mergeChildMappings(n,t)});var o;for(o in t){var i=n&&n.hasOwnProperty(o);!t[o]||i||this.currentlyTransitioningKeys[o]||this.keysToEnter.push(o)}for(o in n){var a=t&&t.hasOwnProperty(o);!n[o]||a||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var i=o({},this.state.children);delete i[e],this.setState({children:i})}},render:function(){var e={};for(var t in this.state.children){var r=this.state.children[t];r&&(e[t]=i(this.props.childFactory(r),{ref:t}))}return n.createElement(this.props.component,this.props,e)}});t.exports=s},{"./Object.assign":29,"./React":31,"./ReactTransitionChildMapping":85,"./cloneWithProps":110,"./emptyFunction":118}],88:[function(e,t){"use strict";function n(){h(O.ReactReconcileTransaction&&g)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=O.ReactReconcileTransaction.getPooled()}function o(e,t,r){n(),g.batchedUpdates(e,t,r)}function i(e,t){return e._mountDepth-t._mountDepth}function a(e){var t=e.dirtyComponentsLength;h(t===m.length),m.sort(i);for(var n=0;t>n;n++){var r=m[n];if(r.isMounted()){var o=r._pendingCallbacks;if(r._pendingCallbacks=null,r.performUpdateIfNecessary(e.reconcileTransaction),o)for(var a=0;a<o.length;a++)e.callbackQueue.enqueue(o[a],r)}}}function s(e,t){return h(!t||"function"==typeof t),n(),g.isBatchingUpdates?(m.push(e),void(t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t]))):void g.batchedUpdates(s,e,t)}function u(e,t){h(g.isBatchingUpdates),v.enqueue(e,t),y=!0}var c=e("./CallbackQueue"),l=e("./PooledClass"),p=(e("./ReactCurrentOwner"),e("./ReactPerf")),d=e("./Transaction"),f=e("./Object.assign"),h=e("./invariant"),m=(e("./warning"),[]),v=c.getPooled(),y=!1,g=null,E={initialize:function(){this.dirtyComponentsLength=m.length},close:function(){this.dirtyComponentsLength!==m.length?(m.splice(0,this.dirtyComponentsLength),M()):m.length=0}},C={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},R=[E,C];f(r.prototype,d.Mixin,{getTransactionWrappers:function(){return R},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,O.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return d.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),l.addPoolingTo(r);var M=p.measure("ReactUpdates","flushBatchedUpdates",function(){for(;m.length||y;){if(m.length){var e=r.getPooled();e.perform(a,null,e),r.release(e)}if(y){y=!1;var t=v;v=c.getPooled(),t.notifyAll(),c.release(t)}}}),b={injectReconcileTransaction:function(e){h(e),O.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){h(e),h("function"==typeof e.batchedUpdates),h("boolean"==typeof e.isBatchingUpdates),g=e}},O={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:s,flushBatchedUpdates:M,injection:b,asap:u};t.exports=O},{"./CallbackQueue":7,"./Object.assign":29,"./PooledClass":30,"./ReactCurrentOwner":42,"./ReactPerf":73,"./Transaction":104,"./invariant":137,"./warning":155}],89:[function(e,t){"use strict";var n=e("./DOMProperty"),r=n.injection.MUST_USE_ATTRIBUTE,o={Properties:{cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=o},{"./DOMProperty":12}],90:[function(e,t){"use strict";function n(e){if("selectionStart"in e&&a.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e){if(!y&&null!=h&&h==u()){var t=n(h);if(!v||!p(v,t)){v=t;var r=s.getPooled(f.select,m,e);return r.type="select",r.target=h,i.accumulateTwoPhaseDispatches(r),r}}}var o=e("./EventConstants"),i=e("./EventPropagators"),a=e("./ReactInputSelection"),s=e("./SyntheticEvent"),u=e("./getActiveElement"),c=e("./isTextInputElement"),l=e("./keyOf"),p=e("./shallowEqual"),d=o.topLevelTypes,f={select:{phasedRegistrationNames:{bubbled:l({onSelect:null}),captured:l({onSelectCapture:null})},dependencies:[d.topBlur,d.topContextMenu,d.topFocus,d.topKeyDown,d.topMouseDown,d.topMouseUp,d.topSelectionChange]}},h=null,m=null,v=null,y=!1,g={eventTypes:f,extractEvents:function(e,t,n,o){switch(e){case d.topFocus:(c(t)||"true"===t.contentEditable)&&(h=t,m=n,v=null);break;case d.topBlur:h=null,m=null,v=null;break;case d.topMouseDown:y=!0;break;case d.topContextMenu:case d.topMouseUp:return y=!1,r(o);case d.topSelectionChange:case d.topKeyDown:case d.topKeyUp:return r(o)}}};t.exports=g},{"./EventConstants":17,"./EventPropagators":22,"./ReactInputSelection":63,"./SyntheticEvent":96,"./getActiveElement":124,"./isTextInputElement":140,"./keyOf":144,"./shallowEqual":150}],91:[function(e,t){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};t.exports=r},{}],92:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./EventPluginUtils"),o=e("./EventPropagators"),i=e("./SyntheticClipboardEvent"),a=e("./SyntheticEvent"),s=e("./SyntheticFocusEvent"),u=e("./SyntheticKeyboardEvent"),c=e("./SyntheticMouseEvent"),l=e("./SyntheticDragEvent"),p=e("./SyntheticTouchEvent"),d=e("./SyntheticUIEvent"),f=e("./SyntheticWheelEvent"),h=e("./getEventCharCode"),m=e("./invariant"),v=e("./keyOf"),y=(e("./warning"),n.topLevelTypes),g={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},E={topBlur:g.blur,topClick:g.click,topContextMenu:g.contextMenu,topCopy:g.copy,topCut:g.cut,topDoubleClick:g.doubleClick,topDrag:g.drag,topDragEnd:g.dragEnd,topDragEnter:g.dragEnter,topDragExit:g.dragExit,topDragLeave:g.dragLeave,topDragOver:g.dragOver,topDragStart:g.dragStart,topDrop:g.drop,topError:g.error,topFocus:g.focus,topInput:g.input,topKeyDown:g.keyDown,topKeyPress:g.keyPress,topKeyUp:g.keyUp,topLoad:g.load,topMouseDown:g.mouseDown,topMouseMove:g.mouseMove,topMouseOut:g.mouseOut,topMouseOver:g.mouseOver,topMouseUp:g.mouseUp,topPaste:g.paste,topReset:g.reset,topScroll:g.scroll,topSubmit:g.submit,topTouchCancel:g.touchCancel,topTouchEnd:g.touchEnd,topTouchMove:g.touchMove,topTouchStart:g.touchStart,topWheel:g.wheel};for(var C in E)E[C].dependencies=[C];var R={eventTypes:g,executeDispatch:function(e,t,n){var o=r.executeDispatch(e,t,n);o===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var v=E[e];if(!v)return null;var g;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:g=a;break;case y.topKeyPress:if(0===h(r))return null;case y.topKeyDown:case y.topKeyUp:g=u;break;case y.topBlur:case y.topFocus:g=s;break;case y.topClick:if(2===r.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:g=c;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:g=l;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:g=p;break;case y.topScroll:g=d;break;case y.topWheel:g=f;break;case y.topCopy:case y.topCut:case y.topPaste:g=i}m(g);var C=g.getPooled(v,n,r);return o.accumulateTwoPhaseDispatches(C),C}};t.exports=R},{"./EventConstants":17,"./EventPluginUtils":21,"./EventPropagators":22,"./SyntheticClipboardEvent":93,"./SyntheticDragEvent":95,"./SyntheticEvent":96,"./SyntheticFocusEvent":97,"./SyntheticKeyboardEvent":99,"./SyntheticMouseEvent":100,"./SyntheticTouchEvent":101,"./SyntheticUIEvent":102,"./SyntheticWheelEvent":103,"./getEventCharCode":125,"./invariant":137,"./keyOf":144,"./warning":155}],93:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(n,o),t.exports=n},{"./SyntheticEvent":96}],94:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),o={data:null};r.augmentClass(n,o),t.exports=n},{"./SyntheticEvent":96}],95:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),o={dataTransfer:null};r.augmentClass(n,o),t.exports=n},{"./SyntheticMouseEvent":100}],96:[function(e,t){"use strict";function n(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];this[o]=a?a(n):n[o]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=s?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var r=e("./PooledClass"),o=e("./Object.assign"),i=e("./emptyFunction"),a=e("./getEventTarget"),s={type:null,target:a,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=s,n.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);o(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(n,r.threeArgumentPooler),t.exports=n},{"./Object.assign":29,"./PooledClass":30,"./emptyFunction":118,"./getEventTarget":128}],97:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),o={relatedTarget:null};r.augmentClass(n,o),t.exports=n},{"./SyntheticUIEvent":102}],98:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),o={data:null};r.augmentClass(n,o),t.exports=n},{"./SyntheticEvent":96}],99:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),o=e("./getEventCharCode"),i=e("./getEventKey"),a=e("./getEventModifierState"),s={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(n,s),t.exports=n},{"./SyntheticUIEvent":102,"./getEventCharCode":125,"./getEventKey":126,"./getEventModifierState":127}],100:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),o=e("./ViewportMetrics"),i=e("./getEventModifierState"),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:i,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};r.augmentClass(n,a),t.exports=n},{"./SyntheticUIEvent":102,"./ViewportMetrics":105,"./getEventModifierState":127}],101:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),o=e("./getEventModifierState"),i={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};r.augmentClass(n,i),t.exports=n},{"./SyntheticUIEvent":102,"./getEventModifierState":127}],102:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),o=e("./getEventTarget"),i={view:function(e){if(e.view)return e.view;var t=o(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":96,"./getEventTarget":128}],103:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,o),t.exports=n},{"./SyntheticMouseEvent":100}],104:[function(e,t){"use strict";var n=e("./invariant"),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,r,o,i,a,s,u){n(!this.isInTransaction());var c,l;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),l=e.call(t,r,o,i,a,s,u),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){n(this.isInTransaction());for(var t=this.transactionWrappers,r=e;r<t.length;r++){var i,a=t[r],s=this.wrapperInitData[r];try{i=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(r+1)}catch(u){}}}this.wrapperInitData.length=0}},o={Mixin:r,OBSERVED_ERROR:{}};t.exports=o},{"./invariant":137}],105:[function(e,t){"use strict";var n=e("./getUnboundedScrollPosition"),r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=n(window);r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{"./getUnboundedScrollPosition":133}],106:[function(e,t){"use strict";function n(e,t){if(r(null!=t),null==e)return t;var n=Array.isArray(e),o=Array.isArray(t);return n&&o?(e.push.apply(e,t),e):n?(e.push(t),e):o?[e].concat(t):[e,t]}var r=e("./invariant");t.exports=n},{"./invariant":137}],107:[function(e,t){"use strict";function n(e){for(var t=1,n=0,o=0;o<e.length;o++)t=(t+e.charCodeAt(o))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=n},{}],108:[function(e,t){function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;t.exports=n},{}],109:[function(e,t){"use strict";function n(e){return r(e.replace(o,"ms-"))}var r=e("./camelize"),o=/^-ms-/;t.exports=n},{"./camelize":108}],110:[function(e,t){"use strict";function n(e,t){var n=o.mergeProps(t,e.props);return!n.hasOwnProperty(a)&&e.props.hasOwnProperty(a)&&(n.children=e.props.children),r.createElement(e.type,n)}var r=e("./ReactElement"),o=e("./ReactPropTransferer"),i=e("./keyOf"),a=(e("./warning"),i({children:null}));t.exports=n},{"./ReactElement":56,"./ReactPropTransferer":74,"./keyOf":144,"./warning":155}],111:[function(e,t){function n(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?n(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=e("./isTextNode");t.exports=n},{"./isTextNode":141}],112:[function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return n(e)?Array.isArray(e)?e.slice():o(e):[e]}var o=e("./toArray");t.exports=r},{"./toArray":152}],113:[function(e,t){"use strict";function n(e){var t=o.createFactory(e),n=r.createClass({displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){i(!1)},render:function(){return t(this.props)}});return n}var r=e("./ReactCompositeComponent"),o=e("./ReactElement"),i=e("./invariant");t.exports=n},{"./ReactCompositeComponent":40,"./ReactElement":56,"./invariant":137}],114:[function(e,t){function n(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var r=u;s(!!u);var o=n(e),c=o&&a(o);if(c){r.innerHTML=c[1]+e+c[2];for(var l=c[0];l--;)r=r.lastChild}else r.innerHTML=e;var p=r.getElementsByTagName("script");p.length&&(s(t),i(p).forEach(t));for(var d=i(r.childNodes);r.lastChild;)r.removeChild(r.lastChild);return d}var o=e("./ExecutionEnvironment"),i=e("./createArrayFrom"),a=e("./getMarkupWrap"),s=e("./invariant"),u=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=r},{"./ExecutionEnvironment":23,"./createArrayFrom":112,"./getMarkupWrap":129,"./invariant":137}],115:[function(e,t){function n(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}t.exports=n},{}],116:[function(e,t){"use strict";function n(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||o.hasOwnProperty(e)&&o[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")
}var r=e("./CSSProperty"),o=r.isUnitlessNumber;t.exports=n},{"./CSSProperty":5}],117:[function(e,t){function n(e,t,n,r,o){return o}e("./Object.assign"),e("./warning"),t.exports=n},{"./Object.assign":29,"./warning":155}],118:[function(e,t){function n(e){return function(){return e}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},t.exports=r},{}],119:[function(e,t){"use strict";var n={};t.exports=n},{}],120:[function(e,t){"use strict";function n(e){return o[e]}function r(e){return(""+e).replace(i,n)}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;t.exports=r},{}],121:[function(e,t){"use strict";function n(e,t,n){var r=e,i=!r.hasOwnProperty(n);if(i&&null!=t){var a,s=typeof t;a="string"===s?o(t):"number"===s?o(""+t):t,r[n]=a}}function r(e){if(null==e)return e;var t={};return i(e,n,t),t}var o=e("./ReactTextComponent"),i=e("./traverseAllChildren");e("./warning"),t.exports=r},{"./ReactTextComponent":84,"./traverseAllChildren":153,"./warning":155}],122:[function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}t.exports=n},{}],123:[function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=n},{}],124:[function(e,t){function n(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=n},{}],125:[function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=n},{}],126:[function(e,t){"use strict";function n(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?i[e.keyCode]||"Unidentified":""}var r=e("./getEventCharCode"),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=n},{"./getEventCharCode":125}],127:[function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=o[e];return r?!!n[r]:!1}function r(){return n}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},{}],128:[function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=n},{}],129:[function(e,t){function n(e){return o(!!i),p.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||(i.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",a[e]=!i.firstChild),a[e]?p[e]:null}var r=e("./ExecutionEnvironment"),o=e("./invariant"),i=r.canUseDOM?document.createElement("div"):null,a={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},s=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:s,option:s,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c,circle:l,defs:l,ellipse:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};t.exports=n},{"./ExecutionEnvironment":23,"./invariant":137}],130:[function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var o=n(e),i=0,a=0;o;){if(3==o.nodeType){if(a=i+o.textContent.length,t>=i&&a>=t)return{node:o,offset:t-i};i=a}o=n(r(o))}}t.exports=o},{}],131:[function(e,t){"use strict";function n(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=n},{}],132:[function(e,t){"use strict";function n(){return!o&&r.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var r=e("./ExecutionEnvironment"),o=null;t.exports=n},{"./ExecutionEnvironment":23}],133:[function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=n},{}],134:[function(e,t){function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},{}],135:[function(e,t){"use strict";function n(e){return r(e).replace(o,"-ms-")}var r=e("./hyphenate"),o=/^ms-/;t.exports=n},{"./hyphenate":134}],136:[function(e,t){"use strict";function n(e,t){var n;return n="string"==typeof e.type?r.createInstanceForTag(e.type,e.props,t):new e.type(e.props),n.construct(e),n}var r=(e("./warning"),e("./ReactElement"),e("./ReactLegacyElement"),e("./ReactNativeComponent"));e("./ReactEmptyComponent"),t.exports=n},{"./ReactElement":56,"./ReactEmptyComponent":58,"./ReactLegacyElement":65,"./ReactNativeComponent":71,"./warning":155}],137:[function(e,t){"use strict";var n=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;u=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[l++]}))}throw u.framesToPop=1,u}};t.exports=n},{}],138:[function(e,t){"use strict";function n(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,o=e("./ExecutionEnvironment");o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},{"./ExecutionEnvironment":23}],139:[function(e,t){function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=n},{}],140:[function(e,t){"use strict";function n(e){return e&&("INPUT"===e.nodeName&&r[e.type]||"TEXTAREA"===e.nodeName)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},{}],141:[function(e,t){function n(e){return r(e)&&3==e.nodeType}var r=e("./isNode");t.exports=n},{"./isNode":139}],142:[function(e,t){"use strict";function n(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;n>r;r++)t=arguments[r],t&&(e=(e?e+" ":"")+t);return e}t.exports=n},{}],143:[function(e,t){"use strict";var n=e("./invariant"),r=function(e){var t,r={};n(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(r[t]=t);return r};t.exports=r},{"./invariant":137}],144:[function(e,t){var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=n},{}],145:[function(e,t){"use strict";function n(e,t,n){if(!e)return null;var o={};for(var i in e)r.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o}var r=Object.prototype.hasOwnProperty;t.exports=n},{}],146:[function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=n},{}],147:[function(e,t){"use strict";function n(e){r(e&&!/[^a-z0-9_]/.test(e))}var r=e("./invariant");t.exports=n},{"./invariant":137}],148:[function(e,t){"use strict";function n(e){return o(r.isValidElement(e)),e}var r=e("./ReactElement"),o=e("./invariant");t.exports=n},{"./ReactElement":56,"./invariant":137}],149:[function(e,t){"use strict";var n=e("./ExecutionEnvironment"),r=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,i=function(e,t){e.innerHTML=t};if(n.canUseDOM){var a=document.createElement("div");a.innerHTML=" ",""===a.innerHTML&&(i=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),r.test(t)||"<"===t[0]&&o.test(t)){e.innerHTML=""+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=i},{"./ExecutionEnvironment":23}],150:[function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=n},{}],151:[function(e,t){"use strict";function n(e,t){return e&&t&&e.type===t.type&&e.key===t.key&&e._owner===t._owner?!0:!1}t.exports=n},{}],152:[function(e,t){function n(e){var t=e.length;if(r(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),r("number"==typeof t),r(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var o=Array(t),i=0;t>i;i++)o[i]=e[i];return o}var r=e("./invariant");t.exports=n},{"./invariant":137}],153:[function(e,t){"use strict";function n(e){return d[e]}function r(e,t){return e&&null!=e.key?i(e.key):t.toString(36)}function o(e){return(""+e).replace(f,n)}function i(e){return"$"+o(e)}function a(e,t,n){return null==e?0:h(e,"",0,t,n)}var s=e("./ReactElement"),u=e("./ReactInstanceHandles"),c=e("./invariant"),l=u.SEPARATOR,p=":",d={"=":"=0",".":"=1",":":"=2"},f=/[=.:]/g,h=function(e,t,n,o,a){var u,d,f=0;if(Array.isArray(e))for(var m=0;m<e.length;m++){var v=e[m];u=t+(t?p:l)+r(v,m),d=n+f,f+=h(v,u,d,o,a)}else{var y=typeof e,g=""===t,E=g?l+r(e,0):t;if(null==e||"boolean"===y)o(a,null,E,n),f=1;else if("string"===y||"number"===y||s.isValidElement(e))o(a,e,E,n),f=1;else if("object"===y){c(!e||1!==e.nodeType);for(var C in e)e.hasOwnProperty(C)&&(u=t+(t?p:l)+i(C)+p+r(e[C],0),d=n+f,f+=h(e[C],u,d,o,a))}}return f};t.exports=a},{"./ReactElement":56,"./ReactInstanceHandles":64,"./invariant":137}],154:[function(e,t){"use strict";function n(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?i(new e.constructor,e):e}function r(e,t,n){s(Array.isArray(e));var r=t[n];s(Array.isArray(r))}function o(e,t){if(s("object"==typeof t),t.hasOwnProperty(p))return s(1===Object.keys(t).length),t[p];var a=n(e);if(t.hasOwnProperty(d)){var h=t[d];s(h&&"object"==typeof h),s(a&&"object"==typeof a),i(a,t[d])}t.hasOwnProperty(u)&&(r(e,t,u),t[u].forEach(function(e){a.push(e)})),t.hasOwnProperty(c)&&(r(e,t,c),t[c].forEach(function(e){a.unshift(e)})),t.hasOwnProperty(l)&&(s(Array.isArray(e)),s(Array.isArray(t[l])),t[l].forEach(function(e){s(Array.isArray(e)),a.splice.apply(a,e)})),t.hasOwnProperty(f)&&(s("function"==typeof t[f]),a=t[f](a));for(var v in t)m.hasOwnProperty(v)&&m[v]||(a[v]=o(e[v],t[v]));return a}var i=e("./Object.assign"),a=e("./keyOf"),s=e("./invariant"),u=a({$push:null}),c=a({$unshift:null}),l=a({$splice:null}),p=a({$set:null}),d=a({$merge:null}),f=a({$apply:null}),h=[u,c,l,p,d,f],m={};h.forEach(function(e){m[e]=!0}),t.exports=o},{"./Object.assign":29,"./invariant":137,"./keyOf":144}],155:[function(e,t){"use strict";var n=e("./emptyFunction"),r=n;t.exports=r},{"./emptyFunction":118}]},{},[1])(1)}),window.React=n.exports});

Requireify.register("react-router",function(t,e,n,o){!function(t){if("object"==typeof o&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.ReactRouter=t()}}(function(){var e;return function n(e,o,r){function i(s,u){if(!o[s]){if(!e[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return i(n?n:t)},p,p.exports,n,e,o,r)}return o[s].exports}for(var a="function"==typeof t&&t,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e){var n={PUSH:"push",REPLACE:"replace",POP:"pop"};e.exports=n},{}],2:[function(t,e){var n=t("../actions/LocationActions"),o={updateScrollPosition:function(t,e){switch(e){case n.PUSH:case n.REPLACE:window.scrollTo(0,0);break;case n.POP:t?window.scrollTo(t.x,t.y):window.scrollTo(0,0)}}};e.exports=o},{"../actions/LocationActions":1}],3:[function(t,e){var n={updateScrollPosition:function(){window.scrollTo(0,0)}};e.exports=n},{}],4:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o=t("../mixins/FakeNode"),r=t("../utils/PropTypes"),i=n.createClass({displayName:"DefaultRoute",mixins:[o],propTypes:{name:n.PropTypes.string,path:r.falsy,handler:n.PropTypes.func.isRequired}});e.exports=i},{"../mixins/FakeNode":14,"../utils/PropTypes":25}],5:[function(t,e){function n(t){return 0===t.button}function o(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var r="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,i=t("react/lib/cx"),a=t("react/lib/Object.assign"),s=t("../mixins/Navigation"),u=t("../mixins/State"),c=r.createClass({displayName:"Link",mixins:[s,u],propTypes:{activeClassName:r.PropTypes.string.isRequired,to:r.PropTypes.string.isRequired,params:r.PropTypes.object,query:r.PropTypes.object,onClick:r.PropTypes.func},getDefaultProps:function(){return{activeClassName:"active"}},handleClick:function(t){var e,r=!0;this.props.onClick&&(e=this.props.onClick(t)),!o(t)&&n(t)&&((e===!1||t.defaultPrevented===!0)&&(r=!1),t.preventDefault(),r&&this.transitionTo(this.props.to,this.props.params,this.props.query))},getHref:function(){return this.makeHref(this.props.to,this.props.params,this.props.query)},getClassName:function(){var t={};return this.props.className&&(t[this.props.className]=!0),this.isActive(this.props.to,this.props.params,this.props.query)&&(t[this.props.activeClassName]=!0),i(t)},render:function(){var t=a({},this.props,{href:this.getHref(),className:this.getClassName(),onClick:this.handleClick});return r.DOM.a(t,this.props.children)}});e.exports=c},{"../mixins/Navigation":15,"../mixins/State":19,"react/lib/Object.assign":40,"react/lib/cx":41}],6:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o=t("../mixins/FakeNode"),r=t("../utils/PropTypes"),i=n.createClass({displayName:"NotFoundRoute",mixins:[o],propTypes:{name:n.PropTypes.string,path:r.falsy,handler:n.PropTypes.func.isRequired}});e.exports=i},{"../mixins/FakeNode":14,"../utils/PropTypes":25}],7:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o=t("../mixins/FakeNode"),r=t("../utils/PropTypes"),i=n.createClass({displayName:"Redirect",mixins:[o],propTypes:{path:n.PropTypes.string,from:n.PropTypes.string,to:n.PropTypes.string,handler:r.falsy}});e.exports=i},{"../mixins/FakeNode":14,"../utils/PropTypes":25}],8:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o=t("../mixins/FakeNode"),r=n.createClass({displayName:"Route",mixins:[o],propTypes:{name:n.PropTypes.string,path:n.PropTypes.string,handler:n.PropTypes.func.isRequired,ignoreScrollBehavior:n.PropTypes.bool}});e.exports=r},{"../mixins/FakeNode":14}],9:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o=t("../mixins/RouteHandler"),r=n.createClass({displayName:"RouteHandler",mixins:[o],getDefaultProps:function(){return{ref:"__routeHandler__"}},render:function(){return this.getRouteHandler()}});e.exports=r},{"../mixins/RouteHandler":17}],10:[function(t,e,n){n.DefaultRoute=t("./components/DefaultRoute"),n.Link=t("./components/Link"),n.NotFoundRoute=t("./components/NotFoundRoute"),n.Redirect=t("./components/Redirect"),n.Route=t("./components/Route"),n.RouteHandler=t("./components/RouteHandler"),n.HashLocation=t("./locations/HashLocation"),n.HistoryLocation=t("./locations/HistoryLocation"),n.RefreshLocation=t("./locations/RefreshLocation"),n.ImitateBrowserBehavior=t("./behaviors/ImitateBrowserBehavior"),n.ScrollToTopBehavior=t("./behaviors/ScrollToTopBehavior"),n.Navigation=t("./mixins/Navigation"),n.State=t("./mixins/State"),n.create=t("./utils/createRouter"),n.run=t("./utils/runRouter"),n.History=t("./utils/History")},{"./behaviors/ImitateBrowserBehavior":2,"./behaviors/ScrollToTopBehavior":3,"./components/DefaultRoute":4,"./components/Link":5,"./components/NotFoundRoute":6,"./components/Redirect":7,"./components/Route":8,"./components/RouteHandler":9,"./locations/HashLocation":11,"./locations/HistoryLocation":12,"./locations/RefreshLocation":13,"./mixins/Navigation":15,"./mixins/State":19,"./utils/History":22,"./utils/createRouter":28,"./utils/runRouter":32}],11:[function(t,e){function n(){return c.decode(window.location.href.split("#")[1]||"")}function o(){var t=n();return"/"===t.charAt(0)?!0:(l.replace("/"+t),!1)}function r(t){t===s.PUSH&&(u.length+=1);var e={path:n(),type:t};p.forEach(function(t){t(e)})}function i(){o()&&(r(a||s.POP),a=null)}var a,s=t("../actions/LocationActions"),u=t("../utils/History"),c=t("../utils/Path"),p=[],f=!1,l={addChangeListener:function(t){p.push(t),o(),f||(window.addEventListener?window.addEventListener("hashchange",i,!1):window.attachEvent("onhashchange",i),f=!0)},removeChangeListener:function(t){for(var e=0,n=p.length;n>e;e++)if(p[e]===t){p.splice(e,1);break}window.removeEventListener?window.removeEventListener("hashchange",i,!1):window.removeEvent("onhashchange",i),0===p.length&&(f=!1)},push:function(t){a=s.PUSH,window.location.hash=c.encode(t)},replace:function(t){a=s.REPLACE,window.location.replace(window.location.pathname+"#"+c.encode(t))},pop:function(){a=s.POP,u.back()},getCurrentPath:n,toString:function(){return"<HashLocation>"}};e.exports=l},{"../actions/LocationActions":1,"../utils/History":22,"../utils/Path":23}],12:[function(t,e){function n(){return s.decode(window.location.pathname+window.location.search)}function o(t){var e={path:n(),type:t};u.forEach(function(t){t(e)})}function r(){o(i.POP)}var i=t("../actions/LocationActions"),a=t("../utils/History"),s=t("../utils/Path"),u=[],c=!1,p={addChangeListener:function(t){u.push(t),c||(window.addEventListener?window.addEventListener("popstate",r,!1):window.attachEvent("popstate",r),c=!0)},removeChangeListener:function(t){for(var e=0,n=u.length;n>e;e++)if(u[e]===t){u.splice(e,1);break}window.addEventListener?window.removeEventListener("popstate",r):window.removeEvent("popstate",r),0===u.length&&(c=!1)},push:function(t){window.history.pushState({path:t},"",s.encode(t)),a.length+=1,o(i.PUSH)},replace:function(t){window.history.replaceState({path:t},"",s.encode(t)),o(i.REPLACE)},pop:a.back,getCurrentPath:n,toString:function(){return"<HistoryLocation>"}};e.exports=p},{"../actions/LocationActions":1,"../utils/History":22,"../utils/Path":23}],13:[function(t,e){var n=t("./HistoryLocation"),o=t("../utils/History"),r=t("../utils/Path"),i={push:function(t){window.location=r.encode(t)},replace:function(t){window.location.replace(r.encode(t))},pop:o.back,getCurrentPath:n.getCurrentPath,toString:function(){return"<RefreshLocation>"}};e.exports=i},{"../utils/History":22,"../utils/Path":23,"./HistoryLocation":12}],14:[function(t,e){var n=t("react/lib/invariant"),o={render:function(){n(!1,"%s elements should not be rendered",this.constructor.displayName)}};e.exports=o},{"react/lib/invariant":43}],15:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o={contextTypes:{makePath:n.PropTypes.func.isRequired,makeHref:n.PropTypes.func.isRequired,transitionTo:n.PropTypes.func.isRequired,replaceWith:n.PropTypes.func.isRequired,goBack:n.PropTypes.func.isRequired},makePath:function(t,e,n){return this.context.makePath(t,e,n)},makeHref:function(t,e,n){return this.context.makeHref(t,e,n)},transitionTo:function(t,e,n){this.context.transitionTo(t,e,n)},replaceWith:function(t,e,n){this.context.replaceWith(t,e,n)},goBack:function(){this.context.goBack()}};e.exports=o},{}],16:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o={childContextTypes:{makePath:n.PropTypes.func.isRequired,makeHref:n.PropTypes.func.isRequired,transitionTo:n.PropTypes.func.isRequired,replaceWith:n.PropTypes.func.isRequired,goBack:n.PropTypes.func.isRequired},getChildContext:function(){return{makePath:this.constructor.makePath,makeHref:this.constructor.makeHref,transitionTo:this.constructor.transitionTo,replaceWith:this.constructor.replaceWith,goBack:this.constructor.goBack}}};e.exports=o},{}],17:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null;e.exports={contextTypes:{getRouteAtDepth:n.PropTypes.func.isRequired,getRouteComponents:n.PropTypes.func.isRequired,routeHandlers:n.PropTypes.array.isRequired},childContextTypes:{routeHandlers:n.PropTypes.array.isRequired},getChildContext:function(){return{routeHandlers:this.context.routeHandlers.concat([this])}},getRouteDepth:function(){return this.context.routeHandlers.length-1},componentDidMount:function(){this._updateRouteComponent()},componentDidUpdate:function(){this._updateRouteComponent()},_updateRouteComponent:function(){var t=this.getRouteDepth(),e=this.context.getRouteComponents();e[t]=this.refs[this.props.ref||"__routeHandler__"]},getRouteHandler:function(t){var e=this.context.getRouteAtDepth(this.getRouteDepth());return e?n.createElement(e.handler,t||this.props):null}}},{}],18:[function(t,e){function n(t,e){if(!e)return!0;if(t.pathname===e.pathname)return!1;var n=t.routes,o=e.routes,r=n.filter(function(t){return-1!==o.indexOf(t)});return!r.some(function(t){return t.ignoreScrollBehavior})}var o=t("react/lib/invariant"),r=t("react/lib/ExecutionEnvironment").canUseDOM,i=t("../utils/getWindowScrollPosition"),a={statics:{recordScrollPosition:function(t){this.scrollHistory||(this.scrollHistory={}),this.scrollHistory[t]=i()},getScrollPosition:function(t){return this.scrollHistory||(this.scrollHistory={}),this.scrollHistory[t]||null}},componentWillMount:function(){o(null==this.getScrollBehavior()||r,"Cannot use scroll behavior without a DOM")},componentDidMount:function(){this._updateScroll()},componentDidUpdate:function(t,e){this._updateScroll(e)},_updateScroll:function(t){if(n(this.state,t)){var e=this.getScrollBehavior();e&&e.updateScrollPosition(this.constructor.getScrollPosition(this.state.path),this.state.action)}}};e.exports=a},{"../utils/getWindowScrollPosition":30,"react/lib/ExecutionEnvironment":39,"react/lib/invariant":43}],19:[function(t,e){var n="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,o={contextTypes:{getCurrentPath:n.PropTypes.func.isRequired,getCurrentRoutes:n.PropTypes.func.isRequired,getCurrentPathname:n.PropTypes.func.isRequired,getCurrentParams:n.PropTypes.func.isRequired,getCurrentQuery:n.PropTypes.func.isRequired,isActive:n.PropTypes.func.isRequired},getPath:function(){return this.context.getCurrentPath()},getRoutes:function(){return this.context.getCurrentRoutes()},getPathname:function(){return this.context.getCurrentPathname()},getParams:function(){return this.context.getCurrentParams()},getQuery:function(){return this.context.getCurrentQuery()},isActive:function(t,e,n){return this.context.isActive(t,e,n)}};e.exports=o},{}],20:[function(t,e){function n(t,e){return t.some(function(t){return t.name===e})}function o(t,e){for(var n in e)if(String(t[n])!==String(e[n]))return!1;return!0}function r(t,e){for(var n in e)if(String(t[n])!==String(e[n]))return!1;return!0}var i="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,a=t("react/lib/Object.assign"),s=t("../utils/Path"),u={getCurrentPath:function(){return this.state.path},getCurrentRoutes:function(){return this.state.routes.slice(0)},getCurrentPathname:function(){return this.state.pathname},getCurrentParams:function(){return a({},this.state.params)},getCurrentQuery:function(){return a({},this.state.query)},isActive:function(t,e,i){return s.isAbsolute(t)?t===this.state.path:n(this.state.routes,t)&&o(this.state.params,e)&&(null==i||r(this.state.query,i))},childContextTypes:{getCurrentPath:i.PropTypes.func.isRequired,getCurrentRoutes:i.PropTypes.func.isRequired,getCurrentPathname:i.PropTypes.func.isRequired,getCurrentParams:i.PropTypes.func.isRequired,getCurrentQuery:i.PropTypes.func.isRequired,isActive:i.PropTypes.func.isRequired},getChildContext:function(){return{getCurrentPath:this.getCurrentPath,getCurrentRoutes:this.getCurrentRoutes,getCurrentPathname:this.getCurrentPathname,getCurrentParams:this.getCurrentParams,getCurrentQuery:this.getCurrentQuery,isActive:this.isActive}}};e.exports=u},{"../utils/Path":23,"react/lib/Object.assign":40}],21:[function(t,e){function n(){}e.exports=n},{}],22:[function(t,e){var n=t("react/lib/invariant"),o=t("react/lib/ExecutionEnvironment").canUseDOM,r={back:function(){n(o,"Cannot use History.back without a DOM"),r.length-=1,window.history.back()},length:1};e.exports=r},{"react/lib/ExecutionEnvironment":39,"react/lib/invariant":43}],23:[function(t,e){function n(t){if(!(t in p)){var e=[],n=t.replace(a,function(t,n){return n?(e.push(n),"([^/?#]+)"):"*"===t?(e.push("splat"),"(.*?)"):"\\"+t});p[t]={matcher:new RegExp("^"+n+"$","i"),paramNames:e}}return p[t]}var o=t("react/lib/invariant"),r=t("qs/lib/utils").merge,i=t("qs"),a=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\[\]\\+|{}^$]/g,s=/:([a-zA-Z_$][a-zA-Z0-9_$?]*[?]?)|[*]/g,u=/\/\/\?|\/\?/g,c=/\?(.+)/,p={},f={decode:function(t){return decodeURI(t.replace(/\+/g," "))},encode:function(t){return encodeURI(t).replace(/%20/g,"+")},extractParamNames:function(t){return n(t).paramNames},extractParams:function(t,e){var o=n(t),r=e.match(o.matcher);if(!r)return null;var i={};return o.paramNames.forEach(function(t,e){i[t]=r[e+1]}),i},injectParams:function(t,e){e=e||{};var n=0;return t.replace(s,function(r,i){if(i=i||"splat","?"!==i.slice(-1))o(null!=e[i],'Missing "'+i+'" parameter for path "'+t+'"');else if(i=i.slice(0,-1),null==e[i])return"";var a;return"splat"===i&&Array.isArray(e[i])?(a=e[i][n++],o(null!=a,"Missing splat # "+n+' for path "'+t+'"')):a=e[i],a}).replace(u,"/")},extractQuery:function(t){var e=t.match(c);return e&&i.parse(e[1])},withoutQuery:function(t){return t.replace(c,"")},withQuery:function(t,e){var n=f.extractQuery(t);n&&(e=e?r(n,e):n);var o=e&&i.stringify(e);return o?f.withoutQuery(t)+"?"+o:t},isAbsolute:function(t){return"/"===t.charAt(0)},normalize:function(t){return t.replace(/^\/*/,"/")},join:function(t,e){return t.replace(/\/*$/,"/")+e}};e.exports=f},{qs:34,"qs/lib/utils":38,"react/lib/invariant":43}],24:[function(t,e){var n=t("when/lib/Promise");e.exports=n},{"when/lib/Promise":45}],25:[function(t,e){var n={falsy:function(t,e,n){return t[e]?new Error("<"+n+'> may not have a "'+e+'" prop'):void 0}};e.exports=n},{}],26:[function(t,e){function n(t,e,n){this.to=t,this.params=e,this.query=n}e.exports=n},{}],27:[function(t,e){function n(t,e){var n;try{n=t.reduce(function(t,e){return t?t.then(e):e()},null)}catch(o){return e(o)}n?n.then(function(){setTimeout(e)},function(t){setTimeout(function(){e(t)})}):e()}function o(t,e,o,r){o=s(o);var i=s(e).map(function(e,n){return function(){var r=e.handler;if(!t.isAborted&&r.willTransitionFrom)return r.willTransitionFrom(t,o[n]);var i=t._promise;return t._promise=null,i}});n(i,r)}function r(t,e,o,r,i){var a=e.map(function(e){return function(){var n=e.handler;!t.isAborted&&n.willTransitionTo&&n.willTransitionTo(t,o,r);var i=t._promise;return t._promise=null,i}});n(a,i)}function i(t,e){this.path=t,this.abortReason=null,this.isAborted=!1,this.retry=e.bind(this),this._promise=null}var a=t("react/lib/Object.assign"),s=t("./reversedArray"),u=t("./Redirect"),c=t("./Promise");a(i.prototype,{abort:function(t){this.isAborted||(this.abortReason=t,this.isAborted=!0)},redirect:function(t,e,n){this.abort(new u(t,e,n))},wait:function(t){this._promise=c.resolve(t)},from:function(t,e,n){return o(this,t,e,n)},to:function(t,e,n,o){return r(this,t,e,n,o)}}),e.exports=i},{"./Promise":24,"./Redirect":26,"./reversedArray":31,"react/lib/Object.assign":40}],28:[function(t,e){function n(t){throw t}function o(t,e){if("string"==typeof e)throw new Error("Unhandled aborted transition! Reason: "+t);t instanceof L||(t instanceof j?e.replace(this.makePath(t.to,t.params,t.query)):e.pop())}function r(t,e,n,o){for(var a,s,u,c=0,p=e.length;p>c;++c){if(s=e[c],a=r(t,s.childRoutes,s.defaultRoute,s.notFoundRoute),null!=a)return a.routes.unshift(s),a;if(u=O.extractParams(s.path,t))return i(s,u)}return n&&(u=O.extractParams(n.path,t))?i(n,u):o&&(u=O.extractParams(o.path,t))?i(o,u):a}function i(t,e){return{routes:[t],params:e}}function a(t,e){for(var n in e)if(e.hasOwnProperty(n)&&t[n]!==e[n])return!1;return!0}function s(t,e,n,o,r,i){return t.some(function(t){if(t!==e)return!1;for(var s,u=e.paramNames,c=0,p=u.length;p>c;++c)if(s=u[c],o[s]!==n[s])return!1;return a(r,i)&&a(i,r)})}function u(t){function e(){q=S,S={}}t=t||{},"function"==typeof t?t={routes:t}:Array.isArray(t)&&(t={routes:t});var i=[],a={},u=[],h=t.location||k,j=t.scrollBehavior||A,H=t.onError||n,E=t.onAbort||o,q={},S={},N=null;"string"==typeof h?p(!l||!1,"You should not use a static location in a DOM environment because the router will not be kept in sync with the current URL"):f(l,"You cannot use %s without a DOM",h),h!==v||P()||(h=g);var D=c.createClass({displayName:"Router",mixins:[w,R,b],statics:{defaultRoute:null,notFoundRoute:null,addRoutes:function(t){i.push.apply(i,x(t,this,a))},makePath:function(t,e,n){var o;if(O.isAbsolute(t))o=O.normalize(t);else{var r=a[t];f(r,'Unable to find <Route name="%s">',t),o=r.path}return O.withQuery(O.injectParams(o,e),n)},makeHref:function(t,e,n){var o=this.makePath(t,e,n);return h===m?"#"+o:o},transitionTo:function(t,e,n){f("string"!=typeof h,"You cannot use transitionTo with a static location");var o=this.makePath(t,e,n);N?h.replace(o):h.push(o)},replaceWith:function(t,e,n){f("string"!=typeof h,"You cannot use replaceWith with a static location"),h.replace(this.makePath(t,e,n))},goBack:function(){return f("string"!=typeof h,"You cannot use goBack with a static location"),_.length>1||h===g?(h.pop(),!0):(p(!1,"goBack() was ignored because there is no router history"),!1)},match:function(t){return r(t,i,this.defaultRoute,this.notFoundRoute)||null},dispatch:function(t,e,n){N&&(N.abort(new L),N=null);var o=q.path;if(o!==t){o&&e!==y.REPLACE&&this.recordScrollPosition(o);var r=O.withoutQuery(t),i=this.match(r);p(null!=i,'No route matches path "%s". Make sure you have <Route path="%s"> somewhere in your routes',t,t),null==i&&(i={});var a,c,f=q.routes||[],l=q.params||{},h=q.query||{},d=i.routes||[],m=i.params||{},v=O.extractQuery(t)||{};f.length?(a=f.filter(function(t){return!s(d,t,l,m,h,v)}),c=d.filter(function(t){return!s(f,t,l,m,h,v)})):(a=[],c=d);var g=new C(t,this.replaceWith.bind(this,t));N=g,g.from(a,u,function(o){return o||g.isAborted?n.call(D,o,g):void g.to(c,m,v,function(o){return o||g.isAborted?n.call(D,o,g):(S.path=t,S.action=e,S.pathname=r,S.routes=d,S.params=m,S.query=v,void n.call(D,null,g))})})}},run:function(t){var e=function(e,n){N=null,e?H.call(D,e):n.isAborted?E.call(D,n.abortReason,h):t.call(D,D,S)};if("string"==typeof h)D.dispatch(h,null,e);else{var n=function(t){D.dispatch(t.path,t.type,e)};h.addChangeListener&&h.addChangeListener(n),D.dispatch(h.getCurrentPath(),null,e)}},teardown:function(){h.removeChangeListener(this.changeListener)}},propTypes:{children:T.falsy},getLocation:function(){return h},getScrollBehavior:function(){return j},getRouteAtDepth:function(t){var e=this.state.routes;return e&&e[t]},getRouteComponents:function(){return u},getInitialState:function(){return e(),q},componentWillReceiveProps:function(){e(),this.setState(q)},componentWillUnmount:function(){D.teardown()},render:function(){return this.getRouteAtDepth(0)?c.createElement(d,this.props):null},childContextTypes:{getRouteAtDepth:c.PropTypes.func.isRequired,getRouteComponents:c.PropTypes.func.isRequired,routeHandlers:c.PropTypes.array.isRequired},getChildContext:function(){return{getRouteComponents:this.getRouteComponents,getRouteAtDepth:this.getRouteAtDepth,routeHandlers:[this]}}});return t.routes&&D.addRoutes(t.routes),D}var c="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,p=t("react/lib/warning"),f=t("react/lib/invariant"),l=t("react/lib/ExecutionEnvironment").canUseDOM,h=t("../behaviors/ImitateBrowserBehavior"),d=t("../components/RouteHandler"),y=t("../actions/LocationActions"),m=t("../locations/HashLocation"),v=t("../locations/HistoryLocation"),g=t("../locations/RefreshLocation"),w=t("../mixins/NavigationContext"),R=t("../mixins/StateContext"),b=t("../mixins/Scrolling"),x=t("./createRoutesFromChildren"),P=t("./supportsHistory"),C=t("./Transition"),T=t("./PropTypes"),j=t("./Redirect"),_=t("./History"),L=t("./Cancellation"),O=t("./Path"),k=l?m:"/",A=l?h:null;e.exports=u},{"../actions/LocationActions":1,"../behaviors/ImitateBrowserBehavior":2,"../components/RouteHandler":9,"../locations/HashLocation":11,"../locations/HistoryLocation":12,"../locations/RefreshLocation":13,"../mixins/NavigationContext":16,"../mixins/Scrolling":18,"../mixins/StateContext":20,"./Cancellation":21,"./History":22,"./Path":23,"./PropTypes":25,"./Redirect":26,"./Transition":27,"./createRoutesFromChildren":29,"./supportsHistory":33,"react/lib/ExecutionEnvironment":39,"react/lib/invariant":43,"react/lib/warning":44}],29:[function(t,e){function n(t,e,n){return a.createClass({statics:{willTransitionTo:function(o,r,i){o.redirect(t,e||r,n||i)}},render:function(){return null}})}function o(t,e,n){for(var o in e)if(e.hasOwnProperty(o)){var r=e[o](n,o,t);r instanceof Error&&s(!1,r.message)}}function r(t,e,r){var a=t.type,s=t.props,l=a&&a.displayName||"UnknownComponent";u(-1!==d.indexOf(a),'Unrecognized route configuration element "<%s>"',l),a.propTypes&&o(l,a.propTypes,s);var y={name:s.name};s.ignoreScrollBehavior&&(y.ignoreScrollBehavior=!0),a===f.type?(y.handler=n(s.to,s.params,s.query),s.path=s.path||s.from||"*"):y.handler=s.handler;var m=e&&e.path||"/";if((s.path||s.name)&&a!==c.type&&a!==p.type){var v=s.path||s.name;h.isAbsolute(v)||(v=h.join(m,v)),y.path=h.normalize(v)}else y.path=m,a===p.type&&(y.path+="*");return y.paramNames=h.extractParamNames(y.path),e&&Array.isArray(e.paramNames)&&e.paramNames.forEach(function(t){u(-1!==y.paramNames.indexOf(t),'The nested route path "%s" is missing the "%s" parameter of its parent path "%s"',y.path,t,e.path)}),s.name&&(u(null==r[s.name],'You cannot use the name "%s" for more than one route',s.name),r[s.name]=y),a===p.type?(u(e,"<NotFoundRoute> must have a parent <Route>"),u(null==e.notFoundRoute,"You may not have more than one <NotFoundRoute> per <Route>"),e.notFoundRoute=y,null):a===c.type?(u(e,"<DefaultRoute> must have a parent <Route>"),u(null==e.defaultRoute,"You may not have more than one <DefaultRoute> per <Route>"),e.defaultRoute=y,null):(y.childRoutes=i(s.children,y,r),y)}function i(t,e,n){var o=[];return a.Children.forEach(t,function(t){(t=r(t,e,n))&&o.push(t)}),o}var a="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,s=t("react/lib/warning"),u=t("react/lib/invariant"),c=t("../components/DefaultRoute"),p=t("../components/NotFoundRoute"),f=t("../components/Redirect"),l=t("../components/Route"),h=t("./Path"),d=[c.type,p.type,f.type,l.type];e.exports=i},{"../components/DefaultRoute":4,"../components/NotFoundRoute":6,"../components/Redirect":7,"../components/Route":8,"./Path":23,"react/lib/invariant":43,"react/lib/warning":44}],30:[function(t,e){function n(){return o(r,"Cannot get current scroll position without a DOM"),{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}var o=t("react/lib/invariant"),r=t("react/lib/ExecutionEnvironment").canUseDOM;e.exports=n},{"react/lib/ExecutionEnvironment":39,"react/lib/invariant":43}],31:[function(t,e){function n(t){return t.slice(0).reverse()}e.exports=n},{}],32:[function(t,e){function n(t,e,n){"function"==typeof e&&(n=e,e=null);var r=o({routes:t,location:e});return r.run(n),r}var o=t("./createRouter");e.exports=n},{"./createRouter":28}],33:[function(t,e){function n(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1}e.exports=n},{}],34:[function(t,e){e.exports=t("./lib")},{"./lib":35}],35:[function(t,e){var n=t("./stringify"),o=t("./parse");e.exports={stringify:n,parse:o}},{"./parse":36,"./stringify":37}],36:[function(t,e){var n=t("./utils"),o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};o.parseValues=function(t,e){for(var o={},r=t.split(e.delimiter,1/0===e.parameterLimit?void 0:e.parameterLimit),i=0,a=r.length;a>i;++i){var s=r[i],u=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;if(-1===u)o[n.decode(s)]="";else{var c=n.decode(s.slice(0,u)),p=n.decode(s.slice(u+1));o[c]=o[c]?[].concat(o[c]).concat(p):p}}return o},o.parseObject=function(t,e,n){if(!t.length)return e;var r=t.shift(),i={};if("[]"===r)i=[],i=i.concat(o.parseObject(t,e,n));else{var a="["===r[0]&&"]"===r[r.length-1]?r.slice(1,r.length-1):r,s=parseInt(a,10);!isNaN(s)&&r!==a&&s<=n.arrayLimit?(i=[],i[s]=o.parseObject(t,e,n)):i[a]=o.parseObject(t,e,n)}return i},o.parseKeys=function(t,e,n){if(t){var r=/^([^\[\]]*)/,i=/(\[[^\[\]]*\])/g,a=r.exec(t);if(!Object.prototype.hasOwnProperty(a[1])){var s=[];a[1]&&s.push(a[1]);for(var u=0;null!==(a=i.exec(t))&&u<n.depth;)++u,Object.prototype.hasOwnProperty(a[1].replace(/\[|\]/g,""))||s.push(a[1]);return a&&s.push("["+t.slice(a.index)+"]"),o.parseObject(s,e,n)}}},e.exports=function(t,e){if(""===t||null===t||"undefined"==typeof t)return{};e=e||{},e.delimiter="string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:o.delimiter,e.depth="number"==typeof e.depth?e.depth:o.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit;for(var r="string"==typeof t?o.parseValues(t,e):t,i={},a=Object.keys(r),s=0,u=a.length;u>s;++s){var c=a[s],p=o.parseKeys(c,r[c],e);i=n.merge(i,p)}return n.compact(i)}},{"./utils":38}],37:[function(t,e){var n=t("./utils"),o={delimiter:"&"};o.stringify=function(t,e){if(n.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(e)+"="+encodeURIComponent(t)];var r=[];for(var i in t)t.hasOwnProperty(i)&&(r=r.concat(o.stringify(t[i],e+"["+i+"]")));return r},e.exports=function(t,e){e=e||{};var n="undefined"==typeof e.delimiter?o.delimiter:e.delimiter,r=[];for(var i in t)t.hasOwnProperty(i)&&(r=r.concat(o.stringify(t[i],i)));return r.join(n)}},{"./utils":38}],38:[function(t,e,n){n.arrayToObject=function(t){for(var e={},n=0,o=t.length;o>n;++n)"undefined"!=typeof t[n]&&(e[n]=t[n]);return e},n.merge=function(t,e){if(!e)return t;if(Array.isArray(e)){for(var o=0,r=e.length;r>o;++o)"undefined"!=typeof e[o]&&(t[o]="object"==typeof t[o]?n.merge(t[o],e[o]):e[o]);return t}if(Array.isArray(t)){if("object"!=typeof e)return t.push(e),t;t=n.arrayToObject(t)}for(var i=Object.keys(e),a=0,s=i.length;s>a;++a){var u=i[a],c=e[u];t[u]=c&&"object"==typeof c&&t[u]?n.merge(t[u],c):c}return t},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.compact=function(t,e){if("object"!=typeof t||null===t)return t;e=e||[];var o=e.indexOf(t);if(-1!==o)return e[o];if(e.push(t),Array.isArray(t)){for(var r=[],i=0,a=t.length;a>i;++i)"undefined"!=typeof t[i]&&r.push(t[i]);return r}for(var s=Object.keys(t),i=0,u=s.length;u>i;++i){var c=s[i];t[c]=n.compact(t[c],e)}return t},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return"undefined"!=typeof Buffer?Buffer.isBuffer(t):!1}},{}],39:[function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=o},{}],40:[function(t,e){function n(t){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var e=Object(t),n=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r){var i=Object(r);for(var a in i)n.call(i,a)&&(e[a]=i[a])}}return e}e.exports=n},{}],41:[function(t,e){function n(t){return"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}).join(" "):Array.prototype.join.call(arguments," ")}e.exports=n},{}],42:[function(t,e){function n(t){return function(){return t}}function o(){}o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},e.exports=o},{}],43:[function(t,e){"use strict";var n=function(t,e,n,o,r,i,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,i,a,s],p=0;u=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return c[p++]}))}throw u.framesToPop=1,u}};e.exports=n},{}],44:[function(t,e){"use strict";var n=t("./emptyFunction"),o=n;e.exports=o},{"./emptyFunction":42}],45:[function(t,n){!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),o=t("./async");return e({scheduler:new n(o)})})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{"./Scheduler":47,"./async":48,"./makePromise":49}],46:[function(t,n){!function(t){"use strict";t(function(){function t(t){this.head=this.tail=this.length=0,this.buffer=new Array(1<<t)}return t.prototype.push=function(t){return this.length===this.buffer.length&&this._ensureCapacity(2*this.length),this.buffer[this.tail]=t,this.tail=this.tail+1&this.buffer.length-1,++this.length,this.length},t.prototype.shift=function(){var t=this.buffer[this.head];return this.buffer[this.head]=void 0,this.head=this.head+1&this.buffer.length-1,--this.length,t},t.prototype._ensureCapacity=function(t){var e,n=this.head,o=this.buffer,r=new Array(t),i=0;if(0===n)for(e=this.length;e>i;++i)r[i]=o[i];else{for(t=o.length,e=this.tail;t>n;++i,++n)r[i]=o[n];for(n=0;e>n;++i,++n)r[i]=o[n]}this.buffer=r,this.head=0,this.tail=this.length},t})}("function"==typeof e&&e.amd?e:function(t){n.exports=t()})},{}],47:[function(t,n){!function(t){"use strict";t(function(t){function e(t){this._async=t,this._queue=new o(15),this._afterQueue=new o(5),this._running=!1;var e=this;this.drain=function(){e._drain()}}function n(t){for(;t.length>0;)t.shift().run()}var o=t("./Queue");return e.prototype.enqueue=function(t){this._add(this._queue,t)},e.prototype.afterQueue=function(t){this._add(this._afterQueue,t)},e.prototype._drain=function(){n(this._queue),this._running=!1,n(this._afterQueue)},e.prototype._add=function(t,e){t.push(e),this._running||(this._running=!0,this._async(this.drain))
},e})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{"./Queue":46}],48:[function(t,n){!function(t){"use strict";t(function(t){var e,n;return e="undefined"!=typeof process&&null!==process&&"function"==typeof process.nextTick?function(t){process.nextTick(t)}:(n="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver)?function(t,e){function n(){var t=o;o=void 0,t()}var o,r=t.createElement("div"),i=new e(n);return i.observe(r,{attributes:!0}),function(t){o=t,r.setAttribute("class","x")}}(document,n):function(t){var e;try{e=t("vertx")}catch(n){}if(e){if("function"==typeof e.runOnLoop)return e.runOnLoop;if("function"==typeof e.runOnContext)return e.runOnContext}var o=setTimeout;return function(t){o(t,0)}}(t)})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{}],49:[function(t,n){!function(t){"use strict";t(function(){return function(t){function e(t,e){this._handler=t===h?e:n(t)}function n(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function o(t){r.notify(t)}var r=new y;try{t(e,n,o)}catch(i){n(i)}return r}function o(t){return _(t)?t:new e(h,new m(p(t)))}function r(t){return new e(h,new m(new w(t)))}function i(){return Q}function a(){return new e(h,new y)}function s(t){function n(t,e,n){this[t]=e,0===--c&&n.become(new g(this))}var o,r,i,a,s=new y,c=t.length>>>0,p=new Array(c);for(o=0;o<t.length;++o)if(i=t[o],void 0!==i||o in t)if(L(i))if(r=f(i),a=r.state(),0===a)r.fold(n,o,p,s);else{if(!(a>0)){u(t,o+1,r),s.become(r);break}p[o]=r.value,--c}else p[o]=i,--c;else--c;return 0===c&&s.become(new g(p)),new e(h,s)}function u(t,e,n){var o,r,i;for(o=e;o<t.length;++o)i=t[o],L(i)&&(r=f(i),r!==n&&r.visit(r,void 0,r._unreport))}function c(t){if(Object(t)===t&&0===t.length)return i();var n,o,r=new y;for(n=0;n<t.length;++n)o=t[n],void 0!==o&&n in t&&p(o).visit(r,r.resolve,r.reject);return new e(h,r)}function p(t){return _(t)?t._handler.join():L(t)?l(t):new g(t)}function f(t){return _(t)?t._handler.join():l(t)}function l(t){try{var e=t.then;return"function"==typeof e?new v(e,t):new g(t)}catch(n){return new w(n)}}function h(){}function d(){}function y(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function m(t){this.handler=t}function v(t,e){y.call(this),D.enqueue(new T(t,e,this))}function g(t){e.createContext(this),this.value=t}function w(t){e.createContext(this),this.id=++U,this.value=t,this.handled=!1,this.reported=!1,this._report()}function R(t,e){this.rejection=t,this.context=e}function b(t){this.rejection=t}function x(){return new w(new TypeError("Promise cycle"))}function P(t,e){this.continuation=t,this.handler=e}function C(t,e){this.handler=e,this.value=t}function T(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function j(t,e,n,o,r){try{t.call(e,n,o,r)}catch(i){o(i)}}function _(t){return t instanceof e}function L(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function O(t,n,o,r){return"function"!=typeof t?r.become(n):(e.enterContext(n),H(t,n.value,o,r),void e.exitContext())}function k(t,n,o,r,i){return"function"!=typeof t?i.become(o):(e.enterContext(o),E(t,n,o.value,r,i),void e.exitContext())}function A(t,n,o,r,i){return"function"!=typeof t?i.notify(n):(e.enterContext(o),q(t,n,r,i),void e.exitContext())}function H(t,e,n,o){try{o.become(p(t.call(n,e)))}catch(r){o.become(new w(r))}}function E(t,e,n,o,r){try{t.call(o,e,n,r)}catch(i){r.become(new w(i))}}function q(t,e,n,o){try{o.notify(t.call(n,e))}catch(r){o.notify(r)}}function S(t,e){e.prototype=B(t.prototype),e.prototype.constructor=e}function N(){}var D=t.scheduler,B=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=o,e.reject=r,e.never=i,e._defer=a,e._handler=p,e.prototype.then=function(t,e){var n=this._handler,o=n.join().state();if("function"!=typeof t&&o>0||"function"!=typeof e&&0>o)return new this.constructor(h,n);var r=this._beget(),i=r._handler;return n.chain(i,n.receiver,t,e,arguments.length>2?arguments[2]:void 0),r},e.prototype["catch"]=function(t){return this.then(void 0,t)},e.prototype._beget=function(){var t=this._handler,e=new y(t.receiver,t.join().context);return new this.constructor(h,e)},e.all=s,e.race=c,h.prototype.when=h.prototype.become=h.prototype.notify=h.prototype.fail=h.prototype._unreport=h.prototype._report=N,h.prototype._state=0,h.prototype.state=function(){return this._state},h.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},h.prototype.chain=function(t,e,n,o,r){this.when({resolver:t,receiver:e,fulfilled:n,rejected:o,progress:r})},h.prototype.visit=function(t,e,n,o){this.chain(F,t,e,n,o)},h.prototype.fold=function(t,e,n,o){this.visit(o,function(o){t.call(n,e,o,this)},o.reject,o.notify)},S(h,d),d.prototype.become=function(t){t.fail()};var F=new d;S(h,y),y.prototype._state=0,y.prototype.resolve=function(t){this.become(p(t))},y.prototype.reject=function(t){this.resolved||this.become(new w(t))},y.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=x();return t},y.prototype.run=function(){var t=this.consumers,e=this.join();this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},y.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&D.enqueue(this),void 0!==this.context&&t._report(this.context))},y.prototype.when=function(t){this.resolved?D.enqueue(new P(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},y.prototype.notify=function(t){this.resolved||D.enqueue(new C(t,this))},y.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},y.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},y.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},S(h,m),m.prototype.when=function(t){D.enqueue(new P(t,this))},m.prototype._report=function(t){this.join()._report(t)},m.prototype._unreport=function(){this.join()._unreport()},S(y,v),S(h,g),g.prototype._state=1,g.prototype.fold=function(t,e,n,o){k(t,e,this,n,o)},g.prototype.when=function(t){O(t.fulfilled,this,t.receiver,t.resolver)};var U=0;S(h,w),w.prototype._state=-1,w.prototype.fold=function(t,e,n,o){o.become(this)},w.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),O(t.rejected,this,t.receiver,t.resolver)},w.prototype._report=function(t){D.afterQueue(new R(this,t))},w.prototype._unreport=function(){this.handled=!0,D.afterQueue(new b(this))},w.prototype.fail=function(t){e.onFatalRejection(this,void 0===t?this.context:t)},R.prototype.run=function(){this.rejection.handled||(this.rejection.reported=!0,e.onPotentiallyUnhandledRejection(this.rejection,this.context))},b.prototype.run=function(){this.rejection.reported&&e.onPotentiallyUnhandledRejectionHandled(this.rejection)},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=N;var M=new h,Q=new e(h,M);return P.prototype.run=function(){this.handler.join().when(this.continuation)},C.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],A(e.progress,this.value,this.handler,e.receiver,e.resolver)},T.prototype.run=function(){function t(t){o.resolve(t)}function e(t){o.reject(t)}function n(t){o.notify(t)}var o=this.resolver;j(this._then,this.thenable,t,e,n)},e}})}("function"==typeof e&&e.amd?e:function(t){n.exports=t()})},{}]},{},[10])(10)})});

Requireify.register("URIjs",function(e,t,r,o){!function(e){if("object"==typeof o&&"undefined"!=typeof r)r.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.URIjs=e()}}(function(){var t;return function r(t,o,n){function i(a,u){if(!o[a]){if(!t[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){var r=t[a][1][e];return i(r?r:e)},p,p.exports,r,t,o,n)}return o[a].exports}for(var s="function"==typeof e&&e,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,r,o){!function(e,n){"use strict";"object"==typeof o?r.exports=n():"function"==typeof t&&t.amd?t(n):e.IPv6=n(e)}(this,function(e){"use strict";function t(e){var t=e.toLowerCase(),r=t.split(":"),o=r.length,n=8;""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[o-1]&&""===r[o-2]&&r.pop(),o=r.length,-1!==r[o-1].indexOf(".")&&(n=7);var i;for(i=0;o>i&&""!==r[i];i++);if(n>i){for(r.splice(i,1,"0000");r.length<n;)r.splice(i,0,"0000");o=r.length}for(var s,a=0;n>a;a++){s=r[a].split("");for(var u=0;3>u&&("0"===s[0]&&s.length>1);u++)s.splice(0,1);r[a]=s.join("")}var c=-1,h=0,p=0,l=-1,d=!1;for(a=0;n>a;a++)d?"0"===r[a]?p+=1:(d=!1,p>h&&(c=l,h=p)):"0"===r[a]&&(d=!0,l=a,p=1);p>h&&(c=l,h=p),h>1&&r.splice(c,h,""),o=r.length;var g="";for(""===r[0]&&(g=":"),a=0;o>a&&(g+=r[a],a!==o-1);a++)g+=":";return""===r[o-1]&&(g+=":"),g}function r(){return e.IPv6===this&&(e.IPv6=o),this}var o=e&&e.IPv6;return{best:t,noConflict:r}})},{}],2:[function(e,r,o){!function(e,n){"use strict";"object"==typeof o?r.exports=n():"function"==typeof t&&t.amd?t(n):e.SecondLevelDomains=n(e)}(this,function(e){"use strict";var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var o=e.lastIndexOf(".",t-1);if(0>=o||o>=t-1)return!1;var n=r.list[e.slice(t+1)];return n?n.indexOf(" "+e.slice(o+1,t)+" ")>=0:!1},is:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return!1;var o=e.lastIndexOf(".",t-1);if(o>=0)return!1;var n=r.list[e.slice(t+1)];return n?n.indexOf(" "+e.slice(0,t)+" ")>=0:!1},get:function(e){var t=e.lastIndexOf(".");if(0>=t||t>=e.length-1)return null;var o=e.lastIndexOf(".",t-1);if(0>=o||o>=t-1)return null;var n=r.list[e.slice(t+1)];return n?n.indexOf(" "+e.slice(o+1,t)+" ")<0?null:e.slice(o+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r})},{}],3:[function(e,r,o){(function(e){!function(n){function i(e){throw RangeError(C[e])}function s(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function a(e,t){return s(e.split(R),t).join(".")}function u(e){for(var t,r,o=[],n=0,i=e.length;i>n;)t=e.charCodeAt(n++),t>=55296&&56319>=t&&i>n?(r=e.charCodeAt(n++),56320==(64512&r)?o.push(((1023&t)<<10)+(1023&r)+65536):(o.push(t),n--)):o.push(t);return o}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=E(e>>>10&1023|55296),e=56320|1023&e),t+=E(e)}).join("")}function h(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:z}function p(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function l(e,t,r){var o=0;for(e=r?O(e/I):e>>1,e+=O(e/t);e>F*Q>>1;o+=z)e=O(e/F);return O(o+(F+1)*e/(e+A))}function d(e){var t,r,o,n,s,a,u,p,d,g,m=[],f=e.length,v=0,y=S,b=P;for(r=e.lastIndexOf(j),0>r&&(r=0),o=0;r>o;++o)e.charCodeAt(o)>=128&&i("not-basic"),m.push(e.charCodeAt(o));for(n=r>0?r+1:0;f>n;){for(s=v,a=1,u=z;n>=f&&i("invalid-input"),p=h(e.charCodeAt(n++)),(p>=z||p>O((k-v)/a))&&i("overflow"),v+=p*a,d=b>=u?x:u>=b+Q?Q:u-b,!(d>p);u+=z)g=z-d,a>O(k/g)&&i("overflow"),a*=g;t=m.length+1,b=l(v-s,t,0==s),O(v/t)>k-y&&i("overflow"),y+=O(v/t),v%=t,m.splice(v++,0,y)}return c(m)}function g(e){var t,r,o,n,s,a,c,h,d,g,m,f,v,y,b,_=[];for(e=u(e),f=e.length,t=S,r=0,s=P,a=0;f>a;++a)m=e[a],128>m&&_.push(E(m));for(o=n=_.length,n&&_.push(j);f>o;){for(c=k,a=0;f>a;++a)m=e[a],m>=t&&c>m&&(c=m);for(v=o+1,c-t>O((k-r)/v)&&i("overflow"),r+=(c-t)*v,t=c,a=0;f>a;++a)if(m=e[a],t>m&&++r>k&&i("overflow"),m==t){for(h=r,d=z;g=s>=d?x:d>=s+Q?Q:d-s,!(g>h);d+=z)b=h-g,y=z-g,_.push(E(p(g+b%y,0))),h=O(b/y);_.push(E(p(h,0))),s=l(r,v,o==n),r=0,++o}++r,++t}return _.join("")}function m(e){return a(e,function(e){return q.test(e)?d(e.slice(4).toLowerCase()):e})}function f(e){return a(e,function(e){return U.test(e)?"xn--"+g(e):e})}var v="object"==typeof o&&o,y="object"==typeof r&&r&&r.exports==v&&r,b="object"==typeof e&&e;(b.global===b||b.window===b)&&(n=b);var _,w,k=2147483647,z=36,x=1,Q=26,A=38,I=700,P=72,S=128,j="-",q=/^xn--/,U=/[^ -~]/,R=/\x2E|\u3002|\uFF0E|\uFF61/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=z-x,O=Math.floor,E=String.fromCharCode;if(_={version:"1.2.3",ucs2:{decode:u,encode:c},decode:d,encode:g,toASCII:f,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t(function(){return _});else if(v&&!v.nodeType)if(y)y.exports=_;else for(w in _)_.hasOwnProperty(w)&&(v[w]=_[w]);else n.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],URIjs:[function(e,r,o){!function(n,i){"use strict";"object"==typeof o?r.exports=i(e("./punycode"),e("./IPv6"),e("./SecondLevelDomains")):"function"==typeof t&&t.amd?t(["./punycode","./IPv6","./SecondLevelDomains"],i):n.URI=i(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(e,t,r,o){"use strict";function n(e,t){return this instanceof n?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new n(e,t)}function i(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function a(e){return"Array"===s(e)}function u(e,t){var r,o,n={};if(a(t))for(r=0,o=t.length;o>r;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,o=e.length;o>r;r++)void 0!==n[e[r]]&&(e.splice(r,1),o--,r--);return e}function c(e,t){var r,o;if(a(t)){for(r=0,o=t.length;o>r;r++)if(!c(e,t[r]))return!1;return!0}var n=s(t);for(r=0,o=e.length;o>r;r++)if("RegExp"===n){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function h(e,t){if(!a(e)||!a(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,o=e.length;o>r;r++)if(e[r]!==t[r])return!1;return!0}function p(e){return escape(e)}function l(e){return encodeURIComponent(e).replace(/[!'()*]/g,p).replace(/\*/g,"%2A")}function d(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function g(e,t){return function(r,o){return void 0===r?this._parts[e]||"":(null!==r&&(r+="",r.charAt(0)===t&&(r=r.substring(1))),this._parts[e]=r,this.build(!o),this)}}var m=o&&o.URI;n.version="1.14.1";var f=n.prototype,v=Object.prototype.hasOwnProperty;n._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:n.duplicateQueryParameters,escapeQuerySpace:n.escapeQuerySpace}},n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\.-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},n.getDomAttribute=function(e){if(!e||!e.nodeName)return void 0;var t=e.nodeName.toLowerCase();return"input"===t&&"image"!==e.type?void 0:n.domAttributes[t]},n.encode=l,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=function(){n.encode=l,n.decode=decodeURIComponent},n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},n.encodeQuery=function(e,t){var r=n.encode(e+"");return void 0===t&&(t=n.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},n.decodeQuery=function(e,t){e+="",void 0===t&&(t=n.escapeQuerySpace);try{return n.decode(t?e.replace(/\+/g,"%20"):e)}catch(r){return e}},n.recodePath=function(e){for(var t=(e+"").split("/"),r=0,o=t.length;o>r;r++)t[r]=n.encodePathSegment(n.decode(t[r]));return t.join("/")},n.decodePath=function(e){for(var t=(e+"").split("/"),r=0,o=t.length;o>r;r++)t[r]=n.decodePathSegment(t[r]);return t.join("/")};var y,b={encode:"encode",decode:"decode"},_=function(e,t){return function(r){try{return n[t](r+"").replace(n.characters[e][t].expression,function(r){return n.characters[e][t].map[r]})}catch(o){return r}}};for(y in b)n[y+"PathSegment"]=_("pathname",b[y]);n.encodeReserved=_("reserved","encode"),n.parse=function(e,t){var r;return t||(t={}),r=e.indexOf("#"),r>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),r=e.indexOf("?"),r>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=n.parseAuthority(e,t)):(r=e.indexOf(":"),r>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(n.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=n.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0))),t.path=e,t},n.parseHost=function(e,t){var r,o,n=e.indexOf("/");return-1===n&&(n=e.length),"["===e.charAt(0)?(r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null,"/"===t.port&&(t.port=null)):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,n)||null,t.port=null):(o=e.substring(0,n).split(":"),t.hostname=o[0]||null,t.port=o[1]||null),t.hostname&&"/"!==e.substring(n).charAt(0)&&(n++,e="/"+e),e.substring(n)||"/"},n.parseAuthority=function(e,t){return e=n.parseUserinfo(e,t),n.parseHost(e,t)},n.parseUserinfo=function(e,t){var r,o=e.indexOf("/"),i=e.lastIndexOf("@",o>-1?o:e.length-1);return i>-1&&(-1===o||o>i)?(r=e.substring(0,i).split(":"),t.username=r[0]?n.decode(r[0]):null,r.shift(),t.password=r[0]?n.decode(r.join(":")):null,e=e.substring(i+1)):(t.username=null,t.password=null),e},n.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var r,o,i,s={},a=e.split("&"),u=a.length,c=0;u>c;c++)r=a[c].split("="),o=n.decodeQuery(r.shift(),t),i=r.length?n.decodeQuery(r.join("="),t):null,v.call(s,o)?("string"==typeof s[o]&&(s[o]=[s[o]]),s[o].push(i)):s[o]=i;return s},n.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=n.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},n.buildHost=function(e){var t="";return e.hostname?(t+=n.ip6_expression.test(e.hostname)?"["+e.hostname+"]":e.hostname,e.port&&(t+=":"+e.port),t):""},n.buildAuthority=function(e){return n.buildUserinfo(e)+n.buildHost(e)},n.buildUserinfo=function(e){var t="";return e.username&&(t+=n.encode(e.username),e.password&&(t+=":"+n.encode(e.password)),t+="@"),t},n.buildQuery=function(e,t,r){var o,i,s,u,c="";for(i in e)if(v.call(e,i)&&i)if(a(e[i]))for(o={},s=0,u=e[i].length;u>s;s++)void 0!==e[i][s]&&void 0===o[e[i][s]+""]&&(c+="&"+n.buildQueryParameter(i,e[i][s],r),t!==!0&&(o[e[i][s]+""]=!0));else void 0!==e[i]&&(c+="&"+n.buildQueryParameter(i,e[i],r));return c.substring(1)},n.buildQueryParameter=function(e,t,r){return n.encodeQuery(e,r)+(null!==t?"="+n.encodeQuery(t,r):"")},n.addQuery=function(e,t,r){if("object"==typeof t)for(var o in t)v.call(t,o)&&n.addQuery(e,o,t[o]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return e[t]=r,void 0;"string"==typeof e[t]&&(e[t]=[e[t]]),a(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},n.removeQuery=function(e,t,r){var o,i,s;if(a(t))for(o=0,i=t.length;i>o;o++)e[t[o]]=void 0;else if("object"==typeof t)for(s in t)v.call(t,s)&&n.removeQuery(e,s,t[s]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?e[t]===r?e[t]=void 0:a(e[t])&&(e[t]=u(e[t],r)):e[t]=void 0}},n.hasQuery=function(e,t,r,o){if("object"==typeof t){for(var i in t)if(v.call(t,i)&&!n.hasQuery(e,i,t[i]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(r)){case"Undefined":return t in e;case"Boolean":var u=Boolean(a(e[t])?e[t].length:e[t]);return r===u;case"Function":return!!r(e[t],t,e);case"Array":if(!a(e[t]))return!1;var p=o?c:h;return p(e[t],r);case"RegExp":return a(e[t])?o?c(e[t],r):!1:Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return a(e[t])?o?c(e[t],r):!1:e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.commonPath=function(e,t){var r,o=Math.min(e.length,t.length);for(r=0;o>r;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return 1>r?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(r)||"/"!==t.charAt(r))&&(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},n.withinString=function(e,t,r){r||(r={});var o=r.start||n.findUri.start,i=r.end||n.findUri.end,s=r.trim||n.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(o.lastIndex=0;;){var u=o.exec(e);if(!u)break;var c=u.index;if(r.ignoreHtml){var h=e.slice(Math.max(c-3,0),c);if(h&&a.test(h))continue}var p=c+e.slice(c).search(i),l=e.slice(c,p).replace(s,"");if(!r.ignore||!r.ignore.test(l)){p=c+l.length;var d=t(l,c,p,e);e=e.slice(0,c)+d+e.slice(p),o.lastIndex=c+d.length}}return o.lastIndex=0,e},n.ensureValidHostname=function(t){if(t.match(n.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.toASCII(t).match(n.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},n.noConflict=function(e){if(e){var t={URI:this.noConflict()};return o.URITemplate&&"function"==typeof o.URITemplate.noConflict&&(t.URITemplate=o.URITemplate.noConflict()),o.IPv6&&"function"==typeof o.IPv6.noConflict&&(t.IPv6=o.IPv6.noConflict()),o.SecondLevelDomains&&"function"==typeof o.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=o.SecondLevelDomains.noConflict()),t}return o.URI===this&&(o.URI=m),this},f.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=n.build(this._parts),this._deferred_build=!1),this},f.clone=function(){return new n(this)},f.valueOf=f.toString=function(){return this.build(!1)._string},f.protocol=d("protocol"),f.username=d("username"),f.password=d("password"),f.hostname=d("hostname"),f.port=d("port"),f.query=g("query","?"),f.fragment=g("fragment","#"),f.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},f.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},f.pathname=function(e,t){if(void 0===e||e===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return e?n.decodePath(r):r}return this._parts.path=e?n.recodePath(e):"/",this.build(!t),this},f.path=f.pathname,f.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=n._parts();var o=e instanceof n,i="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var s=n.getDomAttribute(e);e=e[s]||"",i=!1}if(!o&&i&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=n.parse(String(e),this._parts);else{if(!o&&!i)throw new TypeError("invalid input");var a=o?e._parts:e;for(r in a)v.call(this._parts,r)&&(this._parts[r]=a[r])}return this.build(!t),this},f.is=function(e){var t=!1,o=!1,i=!1,s=!1,a=!1,u=!1,c=!1,h=!this._parts.urn;switch(this._parts.hostname&&(h=!1,o=n.ip4_expression.test(this._parts.hostname),i=n.ip6_expression.test(this._parts.hostname),t=o||i,s=!t,a=s&&r&&r.has(this._parts.hostname),u=s&&n.idn_expression.test(this._parts.hostname),c=s&&n.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return h;case"absolute":return!h;case"domain":case"name":return s;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return o;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var w=f.protocol,k=f.port,z=f.hostname;f.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(n.protocol_expression)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return w.call(this,e,t)},f.scheme=f.protocol,f.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return k.call(this,e,t)},f.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={};n.parseHost(e,r),e=r.hostname}return z.call(this,e,t)},f.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?n.buildHost(this._parts):"":(n.parseHost(e,this._parts),this.build(!t),this)},f.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?n.buildAuthority(this._parts):"":(n.parseAuthority(e,this._parts),this.build(!t),this)},f.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var r=n.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==e[e.length-1]&&(e+="@"),n.parseUserinfo(e,this._parts),this.build(!t),this},f.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=n.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},f.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var o=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,o),a=new RegExp("^"+i(s));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&n.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},f.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var o=this._parts.hostname.length-this.tld(t).length-1;return o=this._parts.hostname.lastIndexOf(".",o-1)+1,this._parts.hostname.substring(o)||""}if(!e)throw new TypeError("cannot set domain empty");if(n.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var s=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},f.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var o=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(o+1);return t!==!0&&r&&r.list[n.toLowerCase()]?r.get(this._parts.hostname)||n:n}var s;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},f.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,o=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?n.decodePath(o):o}var s=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,s),u=new RegExp("^"+i(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=n.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},f.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),o=this._parts.path.substring(r+1);return e?n.decodePathSegment(o):o}var s=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(s=!0);var a=new RegExp(i(this.filename())+"$");return e=n.recodePath(e),this._parts.path=this._parts.path.replace(a,e),s?this.normalizePath(t):this.build(!t),this},f.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r,o,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(r=s.substring(a+1),o=/^[a-z0-9%]+$/i.test(r)?r:"",e?n.decodePathSegment(o):o)}"."===e.charAt(0)&&(e=e.substring(1));var u,c=this.suffix();if(c)u=e?new RegExp(i(c)+"$"):new RegExp(i("."+c)+"$");else{if(!e)return this;this._parts.path+="."+n.recodePath(e)}return u&&(e=n.recodePath(e),this._parts.path=this._parts.path.replace(u,e)),this.build(!t),this},f.segment=function(e,t,r){var o=this._parts.urn?":":"/",n=this.path(),i="/"===n.substring(0,1),s=n.split(o);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&s.shift(),0>e&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null===e||void 0===s[e])if(a(t)){s=[];for(var u=0,c=t.length;c>u;u++)(t[u].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(t[u]))}else(t||"string"==typeof t)&&(""===s[s.length-1]?s[s.length-1]=t:s.push(t));else t?s[e]=t:s.splice(e,1);return i&&s.unshift(""),this.path(s.join(o),r)},f.segmentCoded=function(e,t,r){var o,i,s;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(o=this.segment(e,t,r),a(o))for(i=0,s=o.length;s>i;i++)o[i]=n.decode(o[i]);else o=void 0!==o?n.decode(o):void 0;
return o}if(a(t))for(i=0,s=t.length;s>i;i++)t[i]=n.decode(t[i]);else t="string"==typeof t||t instanceof String?n.encode(t):t;return this.segment(e,t,r)};var x=f.query;return f.query=function(e,t){if(e===!0)return n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace),o=e.call(this,r);return this._parts.query=n.buildQuery(o||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=n.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):x.call(this,e,t)},f.setQuery=function(e,t,r){var o=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)o[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in e)v.call(e,i)&&(o[i]=e[i])}return this._parts.query=n.buildQuery(o,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},f.addQuery=function(e,t,r){var o=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.addQuery(o,e,void 0===t?null:t),this._parts.query=n.buildQuery(o,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},f.removeQuery=function(e,t,r){var o=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.removeQuery(o,e,t),this._parts.query=n.buildQuery(o,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},f.hasQuery=function(e,t,r){var o=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.hasQuery(o,e,t,r)},f.setSearch=f.setQuery,f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.hasSearch=f.hasQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},f.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},f.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===n.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},f.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,r,o,i=this._parts.path,s="";for("/"!==i.charAt(0)&&(t=!0,i="/"+i),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(s=i.substring(1).match(/^(\.\.\/)+/)||"",s&&(s=s[0]));;){if(r=i.indexOf("/.."),-1===r)break;0!==r?(o=i.substring(0,r).lastIndexOf("/"),-1===o&&(o=r),i=i.substring(0,o)+i.substring(r+3)):i=i.substring(3)}return t&&this.is("relative")&&(i=s+i.substring(1)),i=n.recodePath(i),this._parts.path=i,this.build(!e),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(n.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},f.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var e=n.encode,t=n.decode;return n.encode=escape,n.decode=decodeURIComponent,this.normalize(),n.encode=e,n.decode=t,this},f.unicode=function(){var e=n.encode,t=n.decode;return n.encode=l,n.decode=unescape,this.normalize(),n.encode=e,n.decode=t,this},f.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var o="",i=0,s=t._parts.query.split("&"),a=s.length;a>i;i++){var u=(s[i]||"").split("=");o+="&"+n.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(o+="="+n.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+o.substring(1)}return r+=n.decodeQuery(t.hash(),!0)},f.absoluteTo=function(e){var t,r,o,i=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof n||(e=new n(e)),i._parts.protocol||(i._parts.protocol=e._parts.protocol),this._parts.hostname)return i;for(r=0;o=s[r];r++)i._parts[o]=e._parts[o];return i._parts.path?".."===i._parts.path.substring(-2)&&(i._parts.path+="/"):(i._parts.path=e._parts.path,i._parts.query||(i._parts.query=e._parts.query)),"/"!==i.path().charAt(0)&&(t=e.directory(),i._parts.path=(t?t+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},f.relativeTo=function(e){var t,r,o,i,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new n(e).normalize(),t=a._parts,r=e._parts,i=a.path(),s=e.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return a.build();if(null!==t.protocol||null!==t.username||null!==t.password)return a.build();if(t.hostname!==r.hostname||t.port!==r.port)return a.build();if(t.hostname=null,t.port=null,i===s)return t.path="",a.build();if(o=n.commonPath(a.path(),e.path()),!o)return a.build();var u=r.path.substring(o.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=u+t.path.substring(o.length),a.build()},f.equals=function(e){var t,r,o,i=this.clone(),s=new n(e),u={},c={},p={};if(i.normalize(),s.normalize(),i.toString()===s.toString())return!0;if(t=i.query(),r=s.query(),i.query(""),s.query(""),i.toString()!==s.toString())return!1;if(t.length!==r.length)return!1;u=n.parseQuery(t,this._parts.escapeQuerySpace),c=n.parseQuery(r,this._parts.escapeQuerySpace);for(o in u)if(v.call(u,o)){if(a(u[o])){if(!h(u[o],c[o]))return!1}else if(u[o]!==c[o])return!1;p[o]=!0}for(o in c)if(v.call(c,o)&&!p[o])return!1;return!0},f.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},f.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},n})},{"./IPv6":1,"./SecondLevelDomains":2,"./punycode":3}]},{},[])("URIjs")})});

Requireify.register("lodash",function(n,t,r,e){(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||n===j&&e)return 1;if(t>n||!e||t===j&&r)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function u(n,t,r){if(t!==t)return _(n,r);for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function i(n){return"function"==typeof n||!1}function o(n){return"string"==typeof n?n:null==n?"":n+""}function a(n){return n.charCodeAt(0)}function f(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function c(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function l(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function s(t,r,e){for(var u=-1,i=t.criteria,o=r.criteria,a=i.length,f=e.length;++u<a;){var c=n(i[u],o[u]);if(c)return u>=f?c:c*(e[u]?1:-1)}return t.index-r.index}function p(n){return Mt[n]}function h(n){return Kt[n]}function v(n){return"\\"+Gt[n]}function _(n,t,r){for(var e=n.length,u=t+(r?0:-1);r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function g(n){return!!n&&"object"==typeof n}function y(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function d(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;)n[r]===t&&(n[r]=q,i[++u]=r);return i}function m(n,t){for(var r,e=-1,u=n.length,i=-1,o=[];++e<u;){var a=n[e],f=t?t(a,e,n):a;e&&r===f||(r=f,o[++i]=a)}return o}function w(n){for(var t=-1,r=n.length;++t<r&&y(n.charCodeAt(t)););return t}function b(n){for(var t=n.length;t--&&y(n.charCodeAt(t)););return t}function x(n){return Vt[n]}function A(r){function e(n){if(g(n)&&!Af(n)&&!(n instanceof nt)){if(n instanceof X)return n;if(zo.call(n,"__chain__")&&zo.call(n,"__wrapped__"))return eu(n)}return new X(n)}function y(){}function X(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function nt(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ma,this.__views__=null}function rt(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new nt(this.__wrapped__);return e.__actions__=n?nr(n):null,e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=t?nr(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?nr(r):null,e}function Mt(){if(this.__filtered__){var n=new nt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Kt(){var n=this.__wrapped__.value();if(!Af(n))return ne(n,this.__actions__);var t=this.__dir__,r=0>t,e=$e(0,n.length,this.__views__),u=e.start,i=e.end,o=i-u,a=r?i:u-1,f=ha(o,this.__takeCount__),c=this.__iteratees__,l=c?c.length:0,s=0,p=[];n:for(;o--&&f>s;){a+=t;for(var h=-1,v=n[a];++h<l;){var _=c[h],g=_.iteratee,y=_.type;if(y==B){if(_.done&&(r?a>_.index:a<_.index)&&(_.count=0,_.done=!1),_.index=a,!_.done){var d=_.limit;if(!(_.done=d>-1?_.count++>=d:!g(v)))continue n}}else{var m=g(v);if(y==D)v=m;else if(!m){if(y==z)continue n;break n}}}p[s++]=v}return p}function Vt(){this.__data__={}}function Yt(n){return this.has(n)&&delete this.__data__[n]}function Gt(n){return"__proto__"==n?j:this.__data__[n]}function Jt(n){return"__proto__"!=n&&zo.call(this.__data__,n)}function Xt(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Zt(n){var t=n?n.length:0;for(this.data={hash:ca(null),set:new ta};t--;)this.push(n[t])}function Ht(n,t){var r=n.data,e="string"==typeof t||wi(t)?r.set.has(t):r.hash[t];return e?0:-1}function Qt(n){var t=this.data;"string"==typeof n||wi(n)?t.set.add(n):t.hash[n]=!0}function nr(n,t){var r=-1,e=n.length;for(t||(t=Oo(e));++r<e;)t[r]=n[r];return t}function er(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function ur(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function ir(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function or(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[++u]=o)}return i}function ar(n,t){for(var r=-1,e=n.length,u=Oo(e);++r<e;)u[r]=t(n[r],r,n);return u}function fr(n){for(var t=-1,r=n.length,e=da;++t<r;){var u=n[t];u>e&&(e=u)}return e}function cr(n){for(var t=-1,r=n.length,e=ma;++t<r;){var u=n[t];e>u&&(e=u)}return e}function lr(n,t,r,e){var u=-1,i=n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function sr(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function pr(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function hr(n){for(var t=n.length,r=0;t--;)r+=+n[t]||0;return r}function vr(n,t){return n===j?t:n}function _r(n,t,r,e){return n!==j&&zo.call(e,r)?n:t}function gr(n,t,r){var e=Nf(t);Ho.apply(e,Ba(t));for(var u=-1,i=e.length;++u<i;){var o=e[u],a=n[o],f=r(a,t[o],o,n,t);(f===f?f===a:a!==a)&&(a!==j||o in n)||(n[o]=f)}return n}function yr(n,t){for(var r=-1,e=n.length,u=Ve(e),i=t.length,o=Oo(i);++r<i;){var a=t[r];o[r]=u?Pe(a,e)?n[a]:j:n[a]}return o}function dr(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var i=t[e];r[i]=n[i]}return r}function mr(n,t,r){var e=typeof n;return"function"==e?t===j?n:ee(n,t,r):null==n?so:"object"==e?$r(n):t===j?yo(n):Lr(n,t)}function wr(n,t,r,e,u,i,o){var a;if(r&&(a=u?r(n,e,u):r(n)),a!==j)return a;if(!wi(n))return n;var f=Af(n);if(f){if(a=Le(n),!t)return nr(n,a)}else{var c=Po.call(n),l=c==J;if(c!=H&&c!=M&&(!l||u))return Pt[c]?ze(n,c,t):u?n:{};if(a=Be(l?{}:n),!t)return Ia(a,n)}i||(i=[]),o||(o=[]);for(var s=i.length;s--;)if(i[s]==n)return o[s];return i.push(n),o.push(a),(f?er:kr)(n,function(e,u){a[u]=wr(e,t,r,u,n,i,o)}),a}function br(n,t,r){if("function"!=typeof n)throw new Wo(P);return ra(function(){n.apply(j,r)},t)}function xr(n,t){var r=n?n.length:0,e=[];if(!r)return e;var i=-1,o=Fe(),a=o==u,f=a&&t.length>=200?Na(t):null,c=t.length;f&&(o=Ht,a=!1,t=f);n:for(;++i<r;){var l=n[i];if(a&&l===l){for(var s=c;s--;)if(t[s]===l)continue n;e.push(l)}else o(t,l,0)<0&&e.push(l)}return e}function Ar(n,t){var r=!0;return Ca(n,function(n,e,u){return r=!!t(n,e,u)}),r}function jr(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=e===j||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n}function Or(n,t){var r=[];return Ca(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Er(n,t,r,e){var u;return r(n,function(n,r,i){return t(n,r,i)?(u=e?r:n,!1):void 0}),u}function Rr(n,t,r){for(var e=-1,u=n.length,i=-1,o=[];++e<u;){var a=n[e];if(g(a)&&Ve(a.length)&&(Af(a)||hi(a))){t&&(a=Rr(a,t,r));var f=-1,c=a.length;for(o.length+=c;++f<c;)o[++i]=a[f]}else r||(o[++i]=a)}return o}function Ir(n,t){return Ta(n,t,$i)}function kr(n,t){return Ta(n,t,Nf)}function Cr(n,t){return Ua(n,t,Nf)}function Sr(n,t){for(var r=-1,e=t.length,u=-1,i=[];++r<e;){var o=t[r];Of(n[o])&&(i[++u]=o)}return i}function Tr(n,t,r){if(null!=n){r!==j&&r in tu(n)&&(t=[r]);for(var e=-1,u=t.length;null!=n&&++e<u;)var i=n=n[t[e]];return i}}function Ur(n,t,r,e,u,i){if(n===t)return 0!==n||1/n==1/t;var o=typeof n,a=typeof t;return"function"!=o&&"object"!=o&&"function"!=a&&"object"!=a||null==n||null==t?n!==n&&t!==t:Wr(n,t,Ur,r,e,u,i)}function Wr(n,t,r,e,u,i,o){var a=Af(n),f=Af(t),c=K,l=K;a||(c=Po.call(n),c==M?c=H:c!=H&&(a=Ii(n))),f||(l=Po.call(t),l==M?l=H:l!=H&&(f=Ii(t)));var s=c==H,p=l==H,h=c==l;if(h&&!a&&!s)return Te(n,t,c);if(!u){var v=s&&zo.call(n,"__wrapped__"),_=p&&zo.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,i,o)}if(!h)return!1;i||(i=[]),o||(o=[]);for(var g=i.length;g--;)if(i[g]==n)return o[g]==t;i.push(n),o.push(t);var y=(a?Se:Ue)(n,t,r,e,u,i,o);return i.pop(),o.pop(),y}function Nr(n,t,r,e,u){for(var i=-1,o=t.length,a=!u;++i<o;)if(a&&e[i]?r[i]!==n[t[i]]:!(t[i]in n))return!1;for(i=-1;++i<o;){var f=t[i],c=n[f],l=r[i];if(a&&e[i])var s=c!==j||f in n;else s=u?u(c,l,f):j,s===j&&(s=Ur(l,c,u,!0));if(!s)return!1}return!0}function Fr(n,t){var r=-1,e=La(n),u=Ve(e)?Oo(e):[];return Ca(n,function(n,e,i){u[++r]=t(n,e,i)}),u}function $r(n){var t=Nf(n),r=t.length;if(!r)return lo(!0);if(1==r){var e=t[0],u=n[e];if(Ye(u))return function(n){return null==n?!1:n[e]===u&&(u!==j||e in tu(n))}}for(var i=Oo(r),o=Oo(r);r--;)u=n[t[r]],i[r]=u,o[r]=Ye(u);return function(n){return null!=n&&Nr(tu(n),t,i,o)}}function Lr(n,t){var r=Af(n),e=Me(n)&&Ye(t),u=n+"";return n=ru(n),function(i){if(null==i)return!1;var o=u;if(i=tu(i),!(!r&&e||o in i)){if(i=1==n.length?i:Tr(i,Vr(n,0,-1)),null==i)return!1;o=yu(n),i=tu(i)}return i[o]===t?t!==j||o in i:Ur(t,i[o],null,!0)}}function Br(n,t,r,e,u){if(!wi(n))return n;var i=Ve(t.length)&&(Af(t)||Ii(t));if(!i){var o=Nf(t);Ho.apply(o,Ba(t))}return er(o||t,function(a,f){if(o&&(f=a,a=t[f]),g(a))e||(e=[]),u||(u=[]),zr(n,t,f,Br,r,e,u);else{var c=n[f],l=r?r(c,a,f,n,t):j,s=l===j;s&&(l=a),!i&&l===j||!s&&(l===l?l===c:c!==c)||(n[f]=l)}}),n}function zr(n,t,r,e,u,i,o){for(var a=i.length,f=t[r];a--;)if(i[a]==f)return n[r]=o[a],void 0;var c=n[r],l=u?u(c,f,r,n,t):j,s=l===j;s&&(l=f,Ve(f.length)&&(Af(f)||Ii(f))?l=Af(c)?c:La(c)?nr(c):[]:Ef(f)||hi(f)?l=hi(c)?Si(c):Ef(c)?c:{}:s=!1),i.push(f),o.push(l),s?n[r]=e(l,f,u,i,o):(l===l?l!==c:c===c)&&(n[r]=l)}function Dr(n){return function(t){return null==t?j:t[n]}}function Pr(n){var t=n+"";return n=ru(n),function(r){return Tr(r,n,t)}}function qr(n,t){for(var r=t.length;r--;){var e=parseFloat(t[r]);if(e!=u&&Pe(e)){var u=e;ea.call(n,e,1)}}return n}function Mr(n,t){return n+Jo(ya()*(t-n+1))}function Kr(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function Vr(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=r===j||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Oo(u);++e<u;)i[e]=n[e+t];return i}function Yr(n,t){var r;return Ca(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Gr(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function Jr(n,t,r){var e=Ne(),u=-1;t=ar(t,function(n){return e(n)});var i=Fr(n,function(n){var r=ar(t,function(t){return t(n)});return{criteria:r,index:++u,value:n}});return Gr(i,function(n,t){return s(n,t,r)})}function Xr(n,t){var r=0;return Ca(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function Zr(n,t){var r=-1,e=Fe(),i=n.length,o=e==u,a=o&&i>=200,f=a?Na():null,c=[];f?(e=Ht,o=!1):(a=!1,f=t?[]:c);n:for(;++r<i;){var l=n[r],s=t?t(l,r,n):l;if(o&&l===l){for(var p=f.length;p--;)if(f[p]===s)continue n;t&&f.push(s),c.push(l)}else e(f,s,0)<0&&((t||a)&&f.push(s),c.push(l))}return c}function Hr(n,t){for(var r=-1,e=t.length,u=Oo(e);++r<e;)u[r]=n[t[r]];return u}function Qr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Vr(n,e?0:i,e?i+1:u):Vr(n,e?i+1:0,e?u:i)}function ne(n,t){var r=n;r instanceof nt&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var i=[r],o=t[e];Ho.apply(i,o.args),r=o.func.apply(o.thisArg,i)}return r}function te(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&xa>=u){for(;u>e;){var i=e+u>>>1,o=n[i];(r?t>=o:t>o)?e=i+1:u=i}return u}return re(n,t,so,r)}function re(n,t,r,e){t=r(t);for(var u=0,i=n?n.length:0,o=t!==t,a=t===j;i>u;){var f=Jo((u+i)/2),c=r(n[f]),l=c===c;if(o)var s=l||e;else s=a?l&&(e||c!==j):e?t>=c:t>c;s?u=f+1:i=f}return ha(i,ba)}function ee(n,t,r){if("function"!=typeof n)return so;if(t===j)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)};case 5:return function(r,e,u,i,o){return n.call(t,r,e,u,i,o)}}return function(){return n.apply(t,arguments)}}function ue(n){return Vo.call(n,0)}function ie(n,t,r){for(var e=r.length,u=-1,i=pa(n.length-e,0),o=-1,a=t.length,f=Oo(i+a);++o<a;)f[o]=t[o];for(;++u<e;)f[r[u]]=n[u];for(;i--;)f[o++]=n[u++];return f}function oe(n,t,r){for(var e=-1,u=r.length,i=-1,o=pa(n.length-u,0),a=-1,f=t.length,c=Oo(o+f);++i<o;)c[i]=n[i];for(var l=i;++a<f;)c[l+a]=t[a];for(;++e<u;)c[l+r[e]]=n[i++];return c}function ae(n,t){return function(r,e,u){var i=t?t():{};if(e=Ne(e,u,3),Af(r))for(var o=-1,a=r.length;++o<a;){var f=r[o];n(i,f,e(f,o,r),r)}else Ca(r,function(t,r,u){n(i,t,e(t,r,u),u)});return i}}function fe(n){return ai(function(t,r){var e=-1,u=null==t?0:r.length,i=u>2&&r[u-2],o=u>2&&r[2],a=u>1&&r[u-1];for("function"==typeof i?(i=ee(i,a,5),u-=2):(i="function"==typeof a?a:null,u-=i?1:0),o&&qe(r[0],r[1],o)&&(i=3>u?null:i,u=1);++e<u;){var f=r[e];f&&n(t,f,i)}return t})}function ce(n,t){return function(r,e){var u=r?La(r):0;if(!Ve(u))return n(r,e);for(var i=t?u:-1,o=tu(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function le(n){return function(t,r,e){for(var u=tu(t),i=e(t),o=i.length,a=n?o:-1;n?a--:++a<o;){var f=i[a];if(r(u[f],f,u)===!1)break}return t}}function se(n,t){function r(){var u=this&&this!==tr&&this instanceof r?e:n;return u.apply(t,arguments)}var e=he(n);return r}function pe(n){return function(t){for(var r=-1,e=fo(Gi(t)),u=e.length,i="";++r<u;)i=n(i,e[r],r);return i}}function he(n){return function(){var t=ka(n.prototype),r=n.apply(t,arguments);return wi(r)?r:t}}function ve(n){function t(r,e,u){u&&qe(r,e,u)&&(e=null);var i=Ce(r,n,null,null,null,null,null,e);return i.placeholder=t.placeholder,i}return t}function _e(n,t){return function(r,e,u){u&&qe(r,e,u)&&(e=null);var i=Ne(),o=null==e;if(i===mr&&o||(o=!1,e=i(e,u,3)),o){var f=Af(r);if(f||!Ri(r))return n(f?r:nu(r));e=a}return We(r,e,t)}}function ge(n,r){return function(e,u,i){if(u=Ne(u,i,3),Af(e)){var o=t(e,u,r);return o>-1?e[o]:j}return Er(e,u,n)}}function ye(n){return function(r,e,u){return r&&r.length?(e=Ne(e,u,3),t(r,e,n)):-1}}function de(n){return function(t,r,e){return r=Ne(r,e,3),Er(t,r,n,!0)}}function me(n){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var r,e=n?t:-1,u=0,i=Oo(t);n?e--:++e<t;){var o=i[u++]=arguments[e];if("function"!=typeof o)throw new Wo(P);var a=r?"":$a(o);r="wrapper"==a?new X([]):r}for(e=r?-1:t;++e<t;){o=i[e],a=$a(o);var f="wrapper"==a?Fa(o):null;r=f&&Ke(f[0])?r[$a(f[0])].apply(r,f[3]):1==o.length&&Ke(o)?r[a]():r.thru(o)}return function(){var n=arguments;if(r&&1==n.length&&Af(n[0]))return r.plant(n[0]).value();for(var e=0,u=i[e].apply(this,n);++e<t;)u=i[e].call(this,u);return u}}}function we(n,t){return function(r,e,u){return"function"==typeof e&&u===j&&Af(r)?n(r,e):t(r,ee(e,u,3))}}function be(n){return function(t,r,e){return("function"!=typeof r||e!==j)&&(r=ee(r,e,3)),n(t,r,$i)}}function xe(n){return function(t,r,e){return("function"!=typeof r||e!==j)&&(r=ee(r,e,3)),n(t,r)}}function Ae(n){return function(t,r,e){return t=o(t),t&&(n?t:"")+Re(t,r,e)+(n?"":t)}}function je(n){var t=ai(function(r,e){var u=d(e,t.placeholder);return Ce(r,n,null,e,u)});return t}function Oe(n,t){return function(r,e,u,i){var o=arguments.length<3;return"function"==typeof e&&i===j&&Af(r)?n(r,e,u,o):Kr(r,Ne(e,i,4),u,o,t)}}function Ee(n,t,r,e,u,i,o,a,f,c){function l(){for(var w=arguments.length,b=w,x=Oo(w);b--;)x[b]=arguments[b];if(e&&(x=ie(x,e,u)),i&&(x=oe(x,i,o)),v||g){var A=l.placeholder,O=d(x,A);if(w-=O.length,c>w){var I=a?nr(a):null,k=pa(c-w,0),C=v?O:null,U=v?null:O,W=v?x:null,N=v?null:x;t|=v?S:T,t&=~(v?T:S),_||(t&=~(E|R));var F=[n,t,r,W,C,N,U,I,f,k],$=Ee.apply(j,F);return Ke(n)&&za($,F),$.placeholder=A,$}}var L=p?r:this;h&&(n=L[m]),a&&(x=Ze(x,a)),s&&f<x.length&&(x.length=f);var B=this&&this!==tr&&this instanceof l?y||he(n):n;return B.apply(L,x)}var s=t&U,p=t&E,h=t&R,v=t&k,_=t&I,g=t&C,y=!h&&he(n),m=n;return l}function Re(n,t,r){var e=n.length;if(t=+t,e>=t||!la(t))return"";var u=t-e;return r=null==r?" ":r+"",no(r,Yo(u/r.length)).slice(0,u)}function Ie(n,t,r,e){function u(){for(var t=-1,a=arguments.length,f=-1,c=e.length,l=Oo(a+c);++f<c;)l[f]=e[f];for(;a--;)l[f++]=arguments[++t];var s=this&&this!==tr&&this instanceof u?o:n;return s.apply(i?r:this,l)}var i=t&E,o=he(n);return u}function ke(n){return function(t,r,e,u){var i=Ne(e);return i===mr&&null==e?te(t,r,n):re(t,r,i(e,u,1),n)}}function Ce(n,t,r,e,u,i,o,a){var f=t&R;if(!f&&"function"!=typeof n)throw new Wo(P);var c=e?e.length:0;if(c||(t&=~(S|T),e=u=null),c-=u?u.length:0,t&T){var l=e,s=u;e=u=null}var p=f?null:Fa(n),h=[n,t,r,e,u,l,s,i,o,a];if(p&&(Ge(h,p),t=h[1],a=h[9]),h[9]=null==a?f?0:n.length:pa(a-c,0)||0,t==E)var v=se(h[0],h[2]);else v=t!=S&&t!=(E|S)||h[4].length?Ee.apply(j,h):Ie.apply(j,h);var _=p?Wa:za;return _(v,h)}function Se(n,t,r,e,u,i,o){var a=-1,f=n.length,c=t.length,l=!0;if(f!=c&&!(u&&c>f))return!1;for(;l&&++a<f;){var s=n[a],p=t[a];if(l=j,e&&(l=u?e(p,s,a):e(s,p,a)),l===j)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,i,o))););else l=s&&s===p||r(s,p,e,u,i,o)}return!!l}function Te(n,t,r){switch(r){case V:case Y:return+n==+t;case G:return n.name==t.name&&n.message==t.message;case Z:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Q:case tt:return n==t+""}return!1}function Ue(n,t,r,e,u,i,o){var a=Nf(n),f=a.length,c=Nf(t),l=c.length;if(f!=l&&!u)return!1;for(var s=u,p=-1;++p<f;){var h=a[p],v=u?h in t:zo.call(t,h);if(v){var _=n[h],g=t[h];v=j,e&&(v=u?e(g,_,h):e(_,g,h)),v===j&&(v=_&&_===g||r(_,g,e,u,i,o))}if(!v)return!1;s||(s="constructor"==h)}if(!s){var y=n.constructor,d=t.constructor;if(y!=d&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof d&&d instanceof d))return!1}return!0}function We(n,t,r){var e=r?ma:da,u=e,i=u;return Ca(n,function(n,o,a){var f=t(n,o,a);((r?u>f:f>u)||f===e&&f===i)&&(u=f,i=n)}),i}function Ne(n,t,r){var u=e.callback||co;return u=u===co?mr:u,r?u(n,t,r):u}function Fe(n,t,r){var i=e.indexOf||vu;return i=i===vu?u:i,n?i(n,t,r):i}function $e(n,t,r){for(var e=-1,u=r?r.length:0;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=ha(t,n+o);break;case"takeRight":n=pa(n,t-o)}}return{start:n,end:t}}function Le(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&zo.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Be(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=So),new t}function ze(n,t,r){var e=n.constructor;switch(t){case et:return ue(n);case V:case Y:return new e(+n);case ut:case it:case ot:case at:case ft:case ct:case lt:case st:case pt:var u=n.buffer;return new e(r?ue(u):u,n.byteOffset,n.length);case Z:case tt:return new e(n);case Q:var i=new e(n.source,St.exec(n));i.lastIndex=n.lastIndex}return i}function De(n,t,r){null==n||Me(t,n)||(t=ru(t),n=1==t.length?n:Tr(n,Vr(t,0,-1)),t=yu(t));var e=null==n?n:n[t];return null==e?j:e.apply(n,r)}function Pe(n,t){return n=+n,t=null==t?ja:t,n>-1&&n%1==0&&t>n}function qe(n,t,r){if(!wi(r))return!1;var e=typeof t;if("number"==e)var u=La(r),i=Ve(u)&&Pe(t,u);else i="string"==e&&t in r;if(i){var o=r[t];return n===n?n===o:o!==o}return!1}function Me(n,t){var r=typeof n;if("string"==r&&jt.test(n)||"number"==r)return!0;if(Af(n))return!1;var e=!At.test(n);return e||null!=t&&n in tu(t)}function Ke(n){var t=$a(n);return!!t&&n===e[t]&&t in nt.prototype}function Ve(n){return"number"==typeof n&&n>-1&&n%1==0&&ja>=n}function Ye(n){return n===n&&(0===n?1/n>0:!wi(n))}function Ge(n,t){var r=n[1],e=t[1],u=r|e,i=U>u,o=e==U&&r==k||e==U&&r==W&&n[7].length<=t[8]||e==(U|W)&&r==k;if(!i&&!o)return n;e&E&&(n[2]=t[2],u|=r&E?0:I);var a=t[3];if(a){var f=n[3];n[3]=f?ie(f,a,t[4]):nr(a),n[4]=f?d(n[3],q):nr(t[4])}return a=t[5],a&&(f=n[5],n[5]=f?oe(f,a,t[6]):nr(a),n[6]=f?d(n[5],q):nr(t[6])),a=t[7],a&&(n[7]=nr(a)),e&U&&(n[8]=null==n[8]?t[8]:ha(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Je(n,t){n=tu(n);for(var r=-1,e=t.length,u={};++r<e;){var i=t[r];i in n&&(u[i]=n[i])}return u}function Xe(n,t){var r={};return Ir(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Ze(n,t){for(var r=n.length,e=ha(t.length,r),u=nr(n);e--;){var i=t[e];n[e]=Pe(i,r)?u[i]:j}return n}function He(n){{var t;e.support}if(!g(n)||Po.call(n)!=H||!zo.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return Ir(n,function(n,t){r=t}),r===j||zo.call(n,r)}function Qe(n){for(var t=$i(n),r=t.length,u=r&&n.length,i=e.support,o=u&&Ve(u)&&(Af(n)||i.nonEnumArgs&&hi(n)),a=-1,f=[];++a<r;){var c=t[a];(o&&Pe(c,u)||zo.call(n,c))&&f.push(c)}return f}function nu(n){return null==n?[]:Ve(La(n))?wi(n)?n:So(n):qi(n)}function tu(n){return wi(n)?n:So(n)}function ru(n){if(Af(n))return n;var t=[];return o(n).replace(Ot,function(n,r,e,u){t.push(e?u.replace(kt,"$1"):r||n)}),t}function eu(n){return n instanceof nt?n.clone():new X(n.__wrapped__,n.__chain__,nr(n.__actions__))}function uu(n,t,r){t=(r?qe(n,t,r):null==t)?1:pa(+t||1,1);for(var e=0,u=n?n.length:0,i=-1,o=Oo(Yo(u/t));u>e;)o[++i]=Vr(n,e,e+=t);return o}function iu(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var i=n[t];i&&(u[++e]=i)}return u}function ou(n,t,r){var e=n?n.length:0;return e?((r?qe(n,t,r):null==t)&&(t=1),Vr(n,0>t?0:t)):[]}function au(n,t,r){var e=n?n.length:0;return e?((r?qe(n,t,r):null==t)&&(t=1),t=e-(+t||0),Vr(n,0,0>t?0:t)):[]}function fu(n,t,r){return n&&n.length?Qr(n,Ne(t,r,3),!0,!0):[]}function cu(n,t,r){return n&&n.length?Qr(n,Ne(t,r,3),!0):[]}function lu(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&qe(n,t,r)&&(r=0,e=u),jr(n,t,r,e)):[]}function su(n){return n?n[0]:j}function pu(n,t,r){var e=n?n.length:0;return r&&qe(n,t,r)&&(t=!1),e?Rr(n,t):[]}function hu(n){var t=n?n.length:0;return t?Rr(n,!0):[]}function vu(n,t,r){var e=n?n.length:0;if(!e)return-1;if("number"==typeof r)r=0>r?pa(e+r,0):r;else if(r){var i=te(n,t),o=n[i];return(t===t?t===o:o!==o)?i:-1}return u(n,t,r||0)}function _u(n){return au(n,1)}function gu(){for(var n=[],t=-1,r=arguments.length,e=[],i=Fe(),o=i==u,a=[];++t<r;){var f=arguments[t];(Af(f)||hi(f))&&(n.push(f),e.push(o&&f.length>=120?Na(t&&f):null))}if(r=n.length,2>r)return a;var c=n[0],l=-1,s=c?c.length:0,p=e[0];n:for(;++l<s;)if(f=c[l],(p?Ht(p,f):i(a,f,0))<0){for(t=r;--t;){var h=e[t];if((h?Ht(h,f):i(n[t],f,0))<0)continue n}p&&p.push(f),a.push(f)}return a}function yu(n){var t=n?n.length:0;return t?n[t-1]:j}function du(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?pa(e+r,0):ha(r||0,e-1))+1;else if(r){u=te(n,t,!0)-1;var i=n[u];return(t===t?t===i:i!==i)?u:-1}if(t!==t)return _(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function mu(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=Fe(),u=n.length;++r<u;)for(var i=0,o=n[r];(i=e(t,o,i))>-1;)ea.call(t,i,1);return t}function wu(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,i=[],o=n.length;for(t=Ne(t,r,3);++u<o;){var a=n[u];t(a,u,n)&&(e.push(a),i.push(u))}return qr(n,i),e}function bu(n){return ou(n,1)}function xu(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&qe(n,t,r)&&(t=0,r=e),Vr(n,t,r)):[]}function Au(n,t,r){var e=n?n.length:0;return e?((r?qe(n,t,r):null==t)&&(t=1),Vr(n,0,0>t?0:t)):[]}function ju(n,t,r){var e=n?n.length:0;return e?((r?qe(n,t,r):null==t)&&(t=1),t=e-(+t||0),Vr(n,0>t?0:t)):[]}function Ou(n,t,r){return n&&n.length?Qr(n,Ne(t,r,3),!1,!0):[]}function Eu(n,t,r){return n&&n.length?Qr(n,Ne(t,r,3)):[]}function Ru(n,t,r,e){var i=n?n.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(e=r,r=qe(n,t,e)?null:t,t=!1);var o=Ne();return(o!==mr||null!=r)&&(r=o(r,e,3)),t&&Fe()==u?m(n,r):Zr(n,r)}function Iu(n){for(var t=-1,r=(n&&n.length&&fr(ar(n,La)))>>>0,e=Oo(r);++t<r;)e[t]=ar(n,Dr(t));return e}function ku(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Af(r)||hi(r))var e=e?xr(e,r).concat(xr(r,e)):r}return e?Zr(e):[]}function Cu(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Af(n[0])||(t=[]);++r<e;){var i=n[r];t?u[i]=t[r]:i&&(u[i[0]]=i[1])}return u}function Su(n){var t=e(n);return t.__chain__=!0,t}function Tu(n,t,r){return t.call(r,n),n}function Uu(n,t,r){return t.call(r,n)}function Wu(){return Su(this)}function Nu(){return new X(this.value(),this.__chain__)}function Fu(n){for(var t,r=this;r instanceof y;){var e=eu(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function $u(){var n=this.__wrapped__;return n instanceof nt?(this.__actions__.length&&(n=new nt(this)),new X(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})}function Lu(){return this.value()+""}function Bu(){return ne(this.__wrapped__,this.__actions__)}function zu(n,t,r){var e=Af(n)?ir:Ar;return r&&qe(n,t,r)&&(t=null),("function"!=typeof t||r!==j)&&(t=Ne(t,r,3)),e(n,t)}function Du(n,t,r){var e=Af(n)?or:Or;return t=Ne(t,r,3),e(n,t)}function Pu(n,t){return Ha(n,$r(t))}function qu(n,t,r,e){var u=n?La(n):0;return Ve(u)||(n=qi(n),u=n.length),u?(r="number"!=typeof r||e&&qe(t,r,e)?0:0>r?pa(u+r,0):r||0,"string"==typeof n||!Af(n)&&Ri(n)?u>r&&n.indexOf(t,r)>-1:Fe(n,t,r)>-1):!1}function Mu(n,t,r){var e=Af(n)?ar:Fr;return t=Ne(t,r,3),e(n,t)}function Ku(n,t){return Mu(n,yo(t))}function Vu(n,t,r){var e=Af(n)?or:Or;return t=Ne(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function Yu(n,t,r){if(r?qe(n,t,r):null==t){n=nu(n);var e=n.length;return e>0?n[Mr(0,e-1)]:j}var u=Gu(n);return u.length=ha(0>t?0:+t||0,u.length),u}function Gu(n){n=nu(n);for(var t=-1,r=n.length,e=Oo(r);++t<r;){var u=Mr(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Ju(n){var t=n?La(n):0;return Ve(t)?t:Nf(n).length}function Xu(n,t,r){var e=Af(n)?pr:Yr;return r&&qe(n,t,r)&&(t=null),("function"!=typeof t||r!==j)&&(t=Ne(t,r,3)),e(n,t)}function Zu(n,t,r){if(null==n)return[];r&&qe(n,t,r)&&(t=null);var e=-1;t=Ne(t,r,3);var u=Fr(n,function(n,r,u){return{criteria:t(n,r,u),index:++e,value:n}});return Gr(u,l)}function Hu(n,t,r,e){return null==n?[]:(e&&qe(t,r,e)&&(r=null),Af(t)||(t=null==t?[]:[t]),Af(r)||(r=null==r?[]:[r]),Jr(n,t,r))}function Qu(n,t){return Du(n,$r(t))}function ni(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Wo(P);var r=n;n=t,t=r}return n=la(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function ti(n,t,r){return r&&qe(n,t,r)&&(t=null),t=n&&null==t?n.length:pa(+t||0,0),Ce(n,U,null,null,null,null,t)}function ri(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Wo(P);var e=n;n=t,t=e}return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}}function ei(n,t,r){function e(){p&&Go(p),f&&Go(f),f=p=h=j}function u(){var r=t-(lf()-l);if(0>=r||r>t){f&&Go(f);var e=h;f=p=h=j,e&&(v=lf(),c=n.apply(s,a),p||f||(a=s=null))}else p=ra(u,r)}function i(){p&&Go(p),f=p=h=j,(g||_!==t)&&(v=lf(),c=n.apply(s,a),p||f||(a=s=null))}function o(){if(a=arguments,l=lf(),s=this,h=g&&(p||!y),_===!1)var r=y&&!p;else{f||y||(v=l);var e=_-(l-v),o=0>=e||e>_;o?(f&&(f=Go(f)),v=l,c=n.apply(s,a)):f||(f=ra(i,e))}return o&&p?p=Go(p):p||t===_||(p=ra(u,t)),r&&(o=!0,c=n.apply(s,a)),!o||p||f||(a=s=null),c}var a,f,c,l,s,p,h,v=0,_=!1,g=!0;if("function"!=typeof n)throw new Wo(P);if(t=0>t?0:+t||0,r===!0){var y=!0;g=!1}else wi(r)&&(y=r.leading,_="maxWait"in r&&pa(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=e,o}function ui(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Wo(P);var r=function(){var e=arguments,u=r.cache,i=t?t.apply(this,e):e[0];if(u.has(i))return u.get(i);var o=n.apply(this,e);return u.set(i,o),o};return r.cache=new ui.Cache,r}function ii(n){if("function"!=typeof n)throw new Wo(P);return function(){return!n.apply(this,arguments)}}function oi(n){return ri(2,n)}function ai(n,t){if("function"!=typeof n)throw new Wo(P);return t=pa(t===j?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=pa(r.length-t,0),i=Oo(u);++e<u;)i[e]=r[t+e];switch(t){case 0:return n.call(this,i);case 1:return n.call(this,r[0],i);case 2:return n.call(this,r[0],r[1],i)}var o=Oo(t+1);for(e=-1;++e<t;)o[e]=r[e];return o[t]=i,n.apply(this,o)}}function fi(n){if("function"!=typeof n)throw new Wo(P);return function(t){return n.apply(this,t)}}function ci(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Wo(P);return r===!1?e=!1:wi(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),qt.leading=e,qt.maxWait=+t,qt.trailing=u,ei(n,t,qt)}function li(n,t){return t=null==t?so:t,Ce(t,S,null,[n],[])}function si(n,t,r,e){return t&&"boolean"!=typeof t&&qe(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),r="function"==typeof r&&ee(r,e,1),wr(n,t,r)}function pi(n,t,r){return t="function"==typeof t&&ee(t,r,1),wr(n,!0,t)}function hi(n){var t=g(n)?n.length:j;return Ve(t)&&Po.call(n)==M}function vi(n){return n===!0||n===!1||g(n)&&Po.call(n)==V}function _i(n){return g(n)&&Po.call(n)==Y}function gi(n){return!!n&&1===n.nodeType&&g(n)&&Po.call(n).indexOf("Element")>-1}function yi(n){if(null==n)return!0;var t=La(n);return Ve(t)&&(Af(n)||Ri(n)||hi(n)||g(n)&&Of(n.splice))?!t:!Nf(n).length}function di(n,t,r,e){if(r="function"==typeof r&&ee(r,e,3),!r&&Ye(n)&&Ye(t))return n===t;var u=r?r(n,t):j;return u===j?Ur(n,t,r):!!u}function mi(n){return g(n)&&"string"==typeof n.message&&Po.call(n)==G}function wi(n){var t=typeof n;return"function"==t||!!n&&"object"==t}function bi(n,t,r,e){var u=Nf(t),i=u.length;if(!i)return!0;if(null==n)return!1;if(r="function"==typeof r&&ee(r,e,3),n=tu(n),!r&&1==i){var o=u[0],a=t[o];if(Ye(a))return a===n[o]&&(a!==j||o in n)}for(var f=Oo(i),c=Oo(i);i--;)a=f[i]=t[u[i]],c[i]=Ye(a);return Nr(n,u,f,c,r)}function xi(n){return Oi(n)&&n!=+n}function Ai(n){return null==n?!1:Po.call(n)==J?Mo.test(Bo.call(n)):g(n)&&Ut.test(n)}function ji(n){return null===n}function Oi(n){return"number"==typeof n||g(n)&&Po.call(n)==Z}function Ei(n){return g(n)&&Po.call(n)==Q||!1}function Ri(n){return"string"==typeof n||g(n)&&Po.call(n)==tt}function Ii(n){return g(n)&&Ve(n.length)&&!!Dt[Po.call(n)]}function ki(n){return n===j}function Ci(n){var t=n?La(n):0;return Ve(t)?t?nr(n):[]:qi(n)}function Si(n){return dr(n,$i(n))}function Ti(n,t,r){var e=ka(n);return r&&qe(n,t,r)&&(t=null),t?Ia(e,t):e}function Ui(n){return Sr(n,$i(n))}function Wi(n,t,r){var e=null==n?j:Tr(n,ru(t),t+"");return e===j?r:e}function Ni(n,t){if(null==n)return!1;var r=zo.call(n,t);return r||Me(t)||(t=ru(t),n=1==t.length?n:Tr(n,Vr(t,0,-1)),t=yu(t),r=null!=n&&zo.call(n,t)),r}function Fi(n,t,r){r&&qe(n,t,r)&&(t=null);for(var e=-1,u=Nf(n),i=u.length,o={};++e<i;){var a=u[e],f=n[a];t?zo.call(o,f)?o[f].push(a):o[f]=[a]:o[f]=a}return o}function $i(n){if(null==n)return[];wi(n)||(n=So(n));var t=n.length;t=t&&Ve(t)&&(Af(n)||Ra.nonEnumArgs&&hi(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,i=Oo(t),o=t>0;++e<t;)i[e]=e+"";for(var a in n)o&&Pe(a,t)||"constructor"==a&&(u||!zo.call(n,a))||i.push(a);return i}function Li(n,t,r){var e={};return t=Ne(t,r,3),kr(n,function(n,r,u){e[r]=t(n,r,u)}),e}function Bi(n){for(var t=-1,r=Nf(n),e=r.length,u=Oo(e);++t<e;){var i=r[t];u[t]=[i,n[i]]}return u}function zi(n,t,r){var e=null==n?j:n[t];return e===j&&(null==n||Me(t,n)||(t=ru(t),n=1==t.length?n:Tr(n,Vr(t,0,-1)),e=null==n?j:n[yu(t)]),e=e===j?r:e),Of(e)?e.call(n):e}function Di(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||Me(t,n)?[e]:ru(t);for(var u=-1,i=t.length,o=i-1,a=n;null!=a&&++u<i;){var f=t[u];wi(a)&&(u==o?a[f]=r:null==a[f]&&(a[f]=Pe(t[u+1])?[]:{})),a=a[f]}return n}function Pi(n,t,r,e){var u=Af(n)||Ii(n);if(t=Ne(t,e,4),null==r)if(u||wi(n)){var i=n.constructor;r=u?Af(n)?new i:[]:ka(Of(i)&&i.prototype)}else r={};return(u?er:kr)(n,function(n,e,u){return t(r,n,e,u)}),r}function qi(n){return Hr(n,Nf(n))}function Mi(n){return Hr(n,$i(n))}function Ki(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=ha(t,r)&&n<pa(t,r)}function Vi(n,t,r){r&&qe(n,t,r)&&(t=r=null);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var i=ya();return ha(n+i*(t-n+parseFloat("1e-"+((i+"").length-1))),t)}return Mr(n,t)}function Yi(n){return n=o(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function Gi(n){return n=o(n),n&&n.replace(Wt,p).replace(It,"")}function Ji(n,t,r){n=o(n),t+="";var e=n.length;return r=r===j?e:ha(0>r?0:+r||0,e),r-=t.length,r>=0&&n.indexOf(t,r)==r}function Xi(n){return n=o(n),n&&mt.test(n)?n.replace(yt,h):n}function Zi(n){return n=o(n),n&&Rt.test(n)?n.replace(Et,"\\$&"):n}function Hi(n,t,r){n=o(n),t=+t;var e=n.length;if(e>=t||!la(t))return n;var u=(t-e)/2,i=Jo(u),a=Yo(u);return r=Re("",a,r),r.slice(0,i)+n+r}function Qi(n,t,r){return r&&qe(n,t,r)&&(t=0),ga(n,t)}function no(n,t){var r="";if(n=o(n),t=+t,1>t||!n||!la(t))return r;do t%2&&(r+=n),t=Jo(t/2),n+=n;while(t);return r}function to(n,t,r){return n=o(n),r=null==r?0:ha(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r
}function ro(n,t,r){var u=e.templateSettings;r&&qe(n,t,r)&&(t=r=null),n=o(n),t=gr(Ia({},r||t),u,_r);var i,a,f=gr(Ia({},t.imports),u.imports,_r),c=Nf(f),l=Hr(f,c),s=0,p=t.interpolate||Nt,h="__p += '",_=To((t.escape||Nt).source+"|"+p.source+"|"+(p===xt?Ct:Nt).source+"|"+(t.evaluate||Nt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++zt+"]")+"\n";n.replace(_,function(t,r,e,u,o,f){return e||(e=u),h+=n.slice(s,f).replace(Ft,v),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),o&&(a=!0,h+="';\n"+o+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),s=f+t.length,t}),h+="';\n";var y=t.variable;y||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(ht,""):h).replace(vt,"$1").replace(_t,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var d=Kf(function(){return Io(c,g+"return "+h).apply(j,l)});if(d.source=h,mi(d))throw d;return d}function eo(n,t,r){var e=n;return(n=o(n))?(r?qe(e,t,r):null==t)?n.slice(w(n),b(n)+1):(t+="",n.slice(f(n,t),c(n,t)+1)):n}function uo(n,t,r){var e=n;return n=o(n),n?(r?qe(e,t,r):null==t)?n.slice(w(n)):n.slice(f(n,t+"")):n}function io(n,t,r){var e=n;return n=o(n),n?(r?qe(e,t,r):null==t)?n.slice(0,b(n)+1):n.slice(0,c(n,t+"")+1):n}function oo(n,t,r){r&&qe(n,t,r)&&(t=null);var e=N,u=F;if(null!=t)if(wi(t)){var i="separator"in t?t.separator:i;e="length"in t?+t.length||0:e,u="omission"in t?o(t.omission):u}else e=+t||0;if(n=o(n),e>=n.length)return n;var a=e-u.length;if(1>a)return u;var f=n.slice(0,a);if(null==i)return f+u;if(Ei(i)){if(n.slice(a).search(i)){var c,l,s=n.slice(0,a);for(i.global||(i=To(i.source,(St.exec(i)||"")+"g")),i.lastIndex=0;c=i.exec(s);)l=c.index;f=f.slice(0,null==l?a:l)}}else if(n.indexOf(i,a)!=a){var p=f.lastIndexOf(i);p>-1&&(f=f.slice(0,p))}return f+u}function ao(n){return n=o(n),n&&dt.test(n)?n.replace(gt,x):n}function fo(n,t,r){return r&&qe(n,t,r)&&(t=null),n=o(n),n.match(t||$t)||[]}function co(n,t,r){return r&&qe(n,t,r)&&(t=null),mr(n,t)}function lo(n){return function(){return n}}function so(n){return n}function po(n){return $r(wr(n,!0))}function ho(n,t){return Lr(n,wr(t,!0))}function vo(n,t,r){if(null==r){var e=wi(t),u=e&&Nf(t),i=u&&u.length&&Sr(t,u);(i?i.length:e)||(i=!1,r=t,t=n,n=this)}i||(i=Sr(t,Nf(t)));var o=!0,a=-1,f=Of(n),c=i.length;r===!1?o=!1:wi(r)&&"chain"in r&&(o=r.chain);for(;++a<c;){var l=i[a],s=t[l];n[l]=s,f&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__),u=e.__actions__=nr(this.__actions__);return u.push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}var i=[this.value()];return Ho.apply(i,arguments),t.apply(n,i)}}(s))}return n}function _o(){return r._=qo,this}function go(){}function yo(n){return Me(n)?Dr(n):Pr(n)}function mo(n){return function(t){return Tr(n,ru(t),t+"")}}function wo(n,t,r){r&&qe(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=pa(Yo((t-n)/(r||1)),0),i=Oo(u);++e<u;)i[e]=n,n+=r;return i}function bo(n,t,r){if(n=Jo(n),1>n||!la(n))return[];var e=-1,u=Oo(ha(n,wa));for(t=ee(t,r,1);++e<n;)wa>e?u[e]=t(e):t(e);return u}function xo(n){var t=++Do;return o(n)+t}function Ao(n,t){return(+n||0)+(+t||0)}function jo(n,t,r){r&&qe(n,t,r)&&(t=null);var e=Ne(),u=null==t;return e===mr&&u||(u=!1,t=e(t,r,3)),u?hr(Af(n)?n:nu(n)):Xr(n,t)}r=r?rr.defaults(tr.Object(),r,rr.pick(tr,Bt)):tr;var Oo=r.Array,Eo=r.Date,Ro=r.Error,Io=r.Function,ko=r.Math,Co=r.Number,So=r.Object,To=r.RegExp,Uo=r.String,Wo=r.TypeError,No=Oo.prototype,Fo=So.prototype,$o=Uo.prototype,Lo=(Lo=r.window)&&Lo.document,Bo=Io.prototype.toString,zo=Fo.hasOwnProperty,Do=0,Po=Fo.toString,qo=r._,Mo=To("^"+Zi(Po).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ko=Ai(Ko=r.ArrayBuffer)&&Ko,Vo=Ai(Vo=Ko&&new Ko(0).slice)&&Vo,Yo=ko.ceil,Go=r.clearTimeout,Jo=ko.floor,Xo=Ai(Xo=So.getOwnPropertySymbols)&&Xo,Zo=Ai(Zo=So.getPrototypeOf)&&Zo,Ho=No.push,Qo=Ai(So.preventExtensions=So.preventExtensions)&&Qo,na=Fo.propertyIsEnumerable,ta=Ai(ta=r.Set)&&ta,ra=r.setTimeout,ea=No.splice,ua=Ai(ua=r.Uint8Array)&&ua,ia=Ai(ia=r.WeakMap)&&ia,oa=function(){try{var n=Ai(n=r.Float64Array)&&n,t=new n(new Ko(10),0,1)&&n}catch(e){}return t}(),aa=function(){var n={1:0},t=Qo&&Ai(t=So.assign)&&t;try{t(Qo(n),"xo")}catch(r){}return!n[1]&&t}(),fa=Ai(fa=Oo.isArray)&&fa,ca=Ai(ca=So.create)&&ca,la=r.isFinite,sa=Ai(sa=So.keys)&&sa,pa=ko.max,ha=ko.min,va=Ai(va=Eo.now)&&va,_a=Ai(_a=Co.isFinite)&&_a,ga=r.parseInt,ya=ko.random,da=Co.NEGATIVE_INFINITY,ma=Co.POSITIVE_INFINITY,wa=ko.pow(2,32)-1,ba=wa-1,xa=wa>>>1,Aa=oa?oa.BYTES_PER_ELEMENT:0,ja=ko.pow(2,53)-1,Oa=ia&&new ia,Ea={},Ra=e.support={};!function(n){var t=function(){this.x=n},r=[];t.prototype={valueOf:n,y:n};for(var e in new t)r.push(e);Ra.funcDecomp=/\bthis\b/.test(function(){return this}),Ra.funcNames="string"==typeof Io.name;try{Ra.dom=11===Lo.createDocumentFragment().nodeType}catch(u){Ra.dom=!1}try{Ra.nonEnumArgs=!na.call(arguments,1)}catch(u){Ra.nonEnumArgs=!0}}(1,0),e.templateSettings={escape:wt,evaluate:bt,interpolate:xt,variable:"",imports:{_:e}};var Ia=aa||function(n,t){return null==t?n:dr(t,Ba(t),dr(t,Nf(t),n))},ka=function(){function n(){}return function(t){if(wi(t)){n.prototype=t;var e=new n;n.prototype=null}return e||r.Object()}}(),Ca=ce(kr),Sa=ce(Cr,!0),Ta=le(),Ua=le(!0),Wa=Oa?function(n,t){return Oa.set(n,t),n}:so;Vo||(ue=Ko&&ua?function(n){var t=n.byteLength,r=oa?Jo(t/Aa):0,e=r*Aa,u=new Ko(t);if(r){var i=new oa(u,0,r);i.set(new oa(n,0,r))}return t!=e&&(i=new ua(u,e),i.set(new ua(n,e))),u}:lo(null));var Na=ca&&ta?function(n){return new Zt(n)}:lo(null),Fa=Oa?function(n){return Oa.get(n)}:go,$a=function(){return Ra.funcNames?"constant"==lo.name?Dr("name"):function(n){for(var t=n.name,r=Ea[t],e=r?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}:lo("")}(),La=Dr("length"),Ba=Xo?function(n){return Xo(tu(n))}:lo([]),za=function(){var n=0,t=0;return function(r,e){var u=lf(),i=L-(u-t);if(t=u,i>0){if(++n>=$)return r}else n=0;return Wa(r,e)}}(),Da=ai(function(n,t){return Af(n)||hi(n)?xr(n,Rr(t,!1,!0)):[]}),Pa=ye(),qa=ye(!0),Ma=ai(function(t,r){t||(t=[]),r=Rr(r);var e=yr(t,r);return qr(t,r.sort(n)),e}),Ka=ke(),Va=ke(!0),Ya=ai(function(n){return Zr(Rr(n,!1,!0))}),Ga=ai(function(n,t){return Af(n)||hi(n)?xr(n,t):[]}),Ja=ai(Iu),Xa=ai(function(n,t){var r=n?La(n):0;return Ve(r)&&(n=nu(n)),yr(n,Rr(t))}),Za=ae(function(n,t,r){zo.call(n,r)?++n[r]:n[r]=1}),Ha=ge(Ca),Qa=ge(Sa,!0),nf=we(er,Ca),tf=we(ur,Sa),rf=ae(function(n,t,r){zo.call(n,r)?n[r].push(t):n[r]=[t]}),ef=ae(function(n,t,r){n[r]=t}),uf=ai(function(n,t,r){var e=-1,u="function"==typeof t,i=Me(t),o=La(n),a=Ve(o)?Oo(o):[];return Ca(n,function(n){var o=u?t:i&&null!=n&&n[t];a[++e]=o?o.apply(n,r):De(n,t,r)}),a}),of=ae(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),af=Oe(lr,Ca),ff=Oe(sr,Sa),cf=ai(function(n,t){if(null==n)return[];var r=t[2];return r&&qe(t[0],t[1],r)&&(t.length=1),Jr(n,Rr(t),[])}),lf=va||function(){return(new Eo).getTime()},sf=ai(function(n,t,r){var e=E;if(r.length){var u=d(r,sf.placeholder);e|=S}return Ce(n,e,t,r,u)}),pf=ai(function(n,t){t=t.length?Rr(t):Ui(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=Ce(n[u],E,n)}return n}),hf=ai(function(n,t,r){var e=E|R;if(r.length){var u=d(r,hf.placeholder);e|=S}return Ce(t,e,n,r,u)}),vf=ve(k),_f=ve(C),gf=ai(function(n,t){return br(n,1,t)}),yf=ai(function(n,t,r){return br(n,t,r)}),df=me(),mf=me(!0),wf=je(S),bf=je(T),xf=ai(function(n,t){return Ce(n,W,null,null,null,Rr(t))}),Af=fa||function(n){return g(n)&&Ve(n.length)&&Po.call(n)==K};Ra.dom||(gi=function(n){return!!n&&1===n.nodeType&&g(n)&&!Ef(n)});var jf=_a||function(n){return"number"==typeof n&&la(n)},Of=i(/x/)||ua&&!i(ua)?function(n){return Po.call(n)==J}:i,Ef=Zo?function(n){if(!n||Po.call(n)!=H)return!1;var t=n.valueOf,r=Ai(t)&&(r=Zo(t))&&Zo(r);return r?n==r||Zo(n)==r:He(n)}:He,Rf=fe(function(n,t,r){return r?gr(n,t,r):Ia(n,t)}),If=ai(function(n){var t=n[0];return null==t?t:(n.push(vr),Rf.apply(j,n))}),kf=de(kr),Cf=de(Cr),Sf=be(Ta),Tf=be(Ua),Uf=xe(kr),Wf=xe(Cr),Nf=sa?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Ve(r)?Qe(n):wi(n)?sa(n):[]}:Qe,Ff=fe(Br),$f=ai(function(n,t){if(null==n)return{};if("function"!=typeof t[0]){var t=ar(Rr(t),Uo);return Je(n,xr($i(n),t))}var r=ee(t[0],t[1],3);return Xe(n,function(n,t,e){return!r(n,t,e)})}),Lf=ai(function(n,t){return null==n?{}:"function"==typeof t[0]?Xe(n,ee(t[0],t[1],3)):Je(n,Rr(t))}),Bf=pe(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),zf=pe(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Df=Ae(),Pf=Ae(!0);8!=ga(Lt+"08")&&(Qi=function(n,t,r){return(r?qe(n,t,r):null==t)?t=0:t&&(t=+t),n=eo(n),ga(n,t||(Tt.test(n)?16:10))});var qf=pe(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Mf=pe(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Kf=ai(function(n,t){try{return n.apply(j,t)}catch(r){return mi(r)?r:new Ro(r)}}),Vf=ai(function(n,t){return function(r){return De(r,n,t)}}),Yf=ai(function(n,t){return function(r){return De(n,r,t)}}),Gf=_e(fr),Jf=_e(cr,!0);return e.prototype=y.prototype,X.prototype=ka(y.prototype),X.prototype.constructor=X,nt.prototype=ka(y.prototype),nt.prototype.constructor=nt,Vt.prototype["delete"]=Yt,Vt.prototype.get=Gt,Vt.prototype.has=Jt,Vt.prototype.set=Xt,Zt.prototype.push=Qt,ui.Cache=Vt,e.after=ni,e.ary=ti,e.assign=Rf,e.at=Xa,e.before=ri,e.bind=sf,e.bindAll=pf,e.bindKey=hf,e.callback=co,e.chain=Su,e.chunk=uu,e.compact=iu,e.constant=lo,e.countBy=Za,e.create=Ti,e.curry=vf,e.curryRight=_f,e.debounce=ei,e.defaults=If,e.defer=gf,e.delay=yf,e.difference=Da,e.drop=ou,e.dropRight=au,e.dropRightWhile=fu,e.dropWhile=cu,e.fill=lu,e.filter=Du,e.flatten=pu,e.flattenDeep=hu,e.flow=df,e.flowRight=mf,e.forEach=nf,e.forEachRight=tf,e.forIn=Sf,e.forInRight=Tf,e.forOwn=Uf,e.forOwnRight=Wf,e.functions=Ui,e.groupBy=rf,e.indexBy=ef,e.initial=_u,e.intersection=gu,e.invert=Fi,e.invoke=uf,e.keys=Nf,e.keysIn=$i,e.map=Mu,e.mapValues=Li,e.matches=po,e.matchesProperty=ho,e.memoize=ui,e.merge=Ff,e.method=Vf,e.methodOf=Yf,e.mixin=vo,e.negate=ii,e.omit=$f,e.once=oi,e.pairs=Bi,e.partial=wf,e.partialRight=bf,e.partition=of,e.pick=Lf,e.pluck=Ku,e.property=yo,e.propertyOf=mo,e.pull=mu,e.pullAt=Ma,e.range=wo,e.rearg=xf,e.reject=Vu,e.remove=wu,e.rest=bu,e.restParam=ai,e.set=Di,e.shuffle=Gu,e.slice=xu,e.sortBy=Zu,e.sortByAll=cf,e.sortByOrder=Hu,e.spread=fi,e.take=Au,e.takeRight=ju,e.takeRightWhile=Ou,e.takeWhile=Eu,e.tap=Tu,e.throttle=ci,e.thru=Uu,e.times=bo,e.toArray=Ci,e.toPlainObject=Si,e.transform=Pi,e.union=Ya,e.uniq=Ru,e.unzip=Iu,e.values=qi,e.valuesIn=Mi,e.where=Qu,e.without=Ga,e.wrap=li,e.xor=ku,e.zip=Ja,e.zipObject=Cu,e.backflow=mf,e.collect=Mu,e.compose=mf,e.each=nf,e.eachRight=tf,e.extend=Rf,e.iteratee=co,e.methods=Ui,e.object=Cu,e.select=Du,e.tail=bu,e.unique=Ru,vo(e,e),e.add=Ao,e.attempt=Kf,e.camelCase=Bf,e.capitalize=Yi,e.clone=si,e.cloneDeep=pi,e.deburr=Gi,e.endsWith=Ji,e.escape=Xi,e.escapeRegExp=Zi,e.every=zu,e.find=Ha,e.findIndex=Pa,e.findKey=kf,e.findLast=Qa,e.findLastIndex=qa,e.findLastKey=Cf,e.findWhere=Pu,e.first=su,e.get=Wi,e.has=Ni,e.identity=so,e.includes=qu,e.indexOf=vu,e.inRange=Ki,e.isArguments=hi,e.isArray=Af,e.isBoolean=vi,e.isDate=_i,e.isElement=gi,e.isEmpty=yi,e.isEqual=di,e.isError=mi,e.isFinite=jf,e.isFunction=Of,e.isMatch=bi,e.isNaN=xi,e.isNative=Ai,e.isNull=ji,e.isNumber=Oi,e.isObject=wi,e.isPlainObject=Ef,e.isRegExp=Ei,e.isString=Ri,e.isTypedArray=Ii,e.isUndefined=ki,e.kebabCase=zf,e.last=yu,e.lastIndexOf=du,e.max=Gf,e.min=Jf,e.noConflict=_o,e.noop=go,e.now=lf,e.pad=Hi,e.padLeft=Df,e.padRight=Pf,e.parseInt=Qi,e.random=Vi,e.reduce=af,e.reduceRight=ff,e.repeat=no,e.result=zi,e.runInContext=A,e.size=Ju,e.snakeCase=qf,e.some=Xu,e.sortedIndex=Ka,e.sortedLastIndex=Va,e.startCase=Mf,e.startsWith=to,e.sum=jo,e.template=ro,e.trim=eo,e.trimLeft=uo,e.trimRight=io,e.trunc=oo,e.unescape=ao,e.uniqueId=xo,e.words=fo,e.all=zu,e.any=Xu,e.contains=qu,e.detect=Ha,e.foldl=af,e.foldr=ff,e.head=su,e.include=qu,e.inject=af,vo(e,function(){var n={};return kr(e,function(t,r){e.prototype[r]||(n[r]=t)}),n}(),!1),e.sample=Yu,e.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Yu(t,n)}):Yu(this.value())},e.VERSION=O,er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){e[n].placeholder=e}),er(["dropWhile","filter","map","takeWhile"],function(n,t){var r=t!=D,e=t==B;nt.prototype[n]=function(n,u){var i=this.__filtered__,o=i&&e?new nt(this):this.clone(),a=o.__iteratees__||(o.__iteratees__=[]);return a.push({done:!1,count:0,index:0,iteratee:Ne(n,u,1),limit:-1,type:t}),o.__filtered__=i||r,o}}),er(["drop","take"],function(n,t){var r=n+"While";nt.prototype[n]=function(r){var e=this.__filtered__,u=e&&!t?this.dropWhile():this.clone();if(r=null==r?1:pa(Jo(r)||0,0),e)t?u.__takeCount__=ha(u.__takeCount__,r):yu(u.__iteratees__).limit=r;else{var i=u.__views__||(u.__views__=[]);i.push({size:r,type:n+(u.__dir__<0?"Right":"")})}return u},nt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},nt.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[r](n,t).reverse()}}),er(["first","last"],function(n,t){var r="take"+(t?"Right":"");nt.prototype[n]=function(){return this[r](1).value()[0]}}),er(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");nt.prototype[n]=function(){return this[r](1)}}),er(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?$r:yo;nt.prototype[n]=function(n){return this[r](e(n))}}),nt.prototype.compact=function(){return this.filter(so)},nt.prototype.reject=function(n,t){return n=Ne(n,t,1),this.filter(function(t){return!n(t)})},nt.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);return t!==j&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},nt.prototype.toArray=function(){return this.drop(0)},kr(nt.prototype,function(n,t){var r=e[t];if(r){var u=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);e.prototype[t]=function(){var t=arguments,o=(t.length,this.__chain__),a=this.__wrapped__,f=!!this.__actions__.length,c=a instanceof nt,l=t[0],s=c||Af(a);s&&u&&"function"==typeof l&&1!=l.length&&(c=s=!1);var p=c&&!f;if(i&&!o)return p?n.call(a):r.call(e,this.value());var h=function(n){var u=[n];return Ho.apply(u,t),r.apply(e,u)};if(s){var v=p?a:new nt(this),_=n.apply(v,t);if(!i&&(f||_.__actions__)){var g=_.__actions__||(_.__actions__=[]);g.push({func:Uu,args:[h],thisArg:e})}return new X(_,o)}return this.thru(h)}}}),er(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(n){var t=(/^(?:replace|split)$/.test(n)?$o:No)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",u=/^(?:join|pop|replace|shift)$/.test(n);e.prototype[n]=function(){var n=arguments;return u&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),kr(nt.prototype,function(n,t){var r=e[t];if(r){var u=r.name,i=Ea[u]||(Ea[u]=[]);i.push({name:t,func:r})}}),Ea[Ee(null,R).name]=[{name:"wrapper",func:null}],nt.prototype.clone=rt,nt.prototype.reverse=Mt,nt.prototype.value=Kt,e.prototype.chain=Wu,e.prototype.commit=Nu,e.prototype.plant=Fu,e.prototype.reverse=$u,e.prototype.toString=Lu,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Bu,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var j,O="3.7.0",E=1,R=2,I=4,k=8,C=16,S=32,T=64,U=128,W=256,N=30,F="...",$=150,L=16,B=0,z=1,D=2,P="Expected a function",q="__lodash_placeholder__",M="[object Arguments]",K="[object Array]",V="[object Boolean]",Y="[object Date]",G="[object Error]",J="[object Function]",X="[object Map]",Z="[object Number]",H="[object Object]",Q="[object RegExp]",nt="[object Set]",tt="[object String]",rt="[object WeakMap]",et="[object ArrayBuffer]",ut="[object Float32Array]",it="[object Float64Array]",ot="[object Int8Array]",at="[object Int16Array]",ft="[object Int32Array]",ct="[object Uint8Array]",lt="[object Uint8ClampedArray]",st="[object Uint16Array]",pt="[object Uint32Array]",ht=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gt=/&(?:amp|lt|gt|quot|#39|#96);/g,yt=/[&<>"'`]/g,dt=RegExp(gt.source),mt=RegExp(yt.source),wt=/<%-([\s\S]+?)%>/g,bt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,jt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Et=/[.*+?^${}()|[\]\/\\]/g,Rt=RegExp(Et.source),It=/[\u0300-\u036f\ufe20-\ufe23]/g,kt=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,St=/\w*$/,Tt=/^0[xX]/,Ut=/^\[object .+?Constructor\]$/,Wt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Nt=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,$t=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Lt=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Bt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],zt=-1,Dt={};Dt[ut]=Dt[it]=Dt[ot]=Dt[at]=Dt[ft]=Dt[ct]=Dt[lt]=Dt[st]=Dt[pt]=!0,Dt[M]=Dt[K]=Dt[et]=Dt[V]=Dt[Y]=Dt[G]=Dt[J]=Dt[X]=Dt[Z]=Dt[H]=Dt[Q]=Dt[nt]=Dt[tt]=Dt[rt]=!1;var Pt={};Pt[M]=Pt[K]=Pt[et]=Pt[V]=Pt[Y]=Pt[ut]=Pt[it]=Pt[ot]=Pt[at]=Pt[ft]=Pt[Z]=Pt[H]=Pt[Q]=Pt[tt]=Pt[ct]=Pt[lt]=Pt[st]=Pt[pt]=!0,Pt[G]=Pt[J]=Pt[X]=Pt[nt]=Pt[rt]=!1;var qt={leading:!1,maxWait:0,trailing:!1},Mt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss"},Kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Yt={"function":!0,object:!0},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jt=Yt[typeof e]&&e&&!e.nodeType&&e,Xt=Yt[typeof r]&&r&&!r.nodeType&&r,Zt=Jt&&Xt&&"object"==typeof global&&global&&global.Object&&global,Ht=Yt[typeof self]&&self&&self.Object&&self,Qt=Yt[typeof window]&&window&&window.Object&&window,nr=Xt&&Xt.exports===Jt&&Jt,tr=Zt||Qt!==(this&&this.window)&&Qt||Ht||this,rr=A();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(tr._=rr,define(function(){return rr})):Jt&&Xt?nr?(Xt.exports=rr)._=rr:Jt._=rr:tr._=rr}).call(this)});

Requireify.register('js/common/nfNamespace.js', function(require, requireAsync, module, exports) {


"use strict";var root,inBrowser=!1;"undefined"!=typeof window?(root=window,inBrowser=!0):root=global;try{root.netflix||(root.netflix={i18n:{},contextData:{}}),root.netflix.namespace=function(e){var t,o,n=root.netflix,r=null,a=e.split(".");for("netflix"===a[0]&&a.shift(),o=a.length,t=0;o>t;++t)r=a[t].toString(),r&&(n=n[r]=n[r]||{});return n},root.name="_nflx"}catch(e){if(inBrowser){var beacon=new Image,page=document.getElementsByTagName("body")[0].id;beacon.src="/beacons?js_exp=nflib_namespace&js_exp_err="+e.message+"&tstamp="+(new Date).getTime()+"&page="+page}}module.exports=root.netflix;


});


Requireify.register('js/utils/contextData.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),nf=require("../common/nfNamespace"),json=nf.contextData,CHUNK_PROCESS_LIMIT_MS=100,CHUNK_PROCESS_DELAY_MS=10,ensure=require;module.exports={getString:function(t,n){return t&&n&&json&&json.hasOwnProperty(t)&&json[t].hasOwnProperty("strings")?json[t].strings[n]:null},getUrl:function(t,n){return t&&n&&json&&json.hasOwnProperty(t)&&json[t].hasOwnProperty("urls")?json[t].urls[n]:null},get:function(t,n){return t&&n&&json&&json.hasOwnProperty(t)&&json[t].hasOwnProperty("data")?json[t].data[n]:null},getData:function(t,n){return this.get(t,n)},getI18nStrings:function(){return nf.i18n},registerTemplate:function(t){ensure(["dustjs-linkedin"],function(n){if(n=n["default"],t)try{n.loadSource(t)}catch(e){throw new Error("[contextData] registerTemplate2(): error registering dust template")}})},getTestAttributes:function(t){var n=this.get("TestAttributes",t)||{};return{get:function(t){return null===n[t]?!1:n[t]}}},getFeature:function(t){return t&&json&&json.hasOwnProperty(t)?json[t]:null},getFeatureData:function(t){return t&&json&&json.hasOwnProperty(t)?json[t].data:null},getFeatureDataFromContext:function(t,n){return n&&t&&t.hasOwnProperty(n)?t[n].data?t[n].data:t[n]:null},getContext:function(){return json},_isPrimitive:function(t){var n=typeof t;return"boolean"===n||"number"===n||"string"===n},clearData:function(t,n){var e=this.getData(t,n);e&&(_.isArray(e)?json[t].data[n]=[]:_.isPlainObject(e)&&(json[t].data[n]={}))},chunkProcess:function(t){var n=t.items.concat(),e=t.processArgs||null,r=t.limitMs||CHUNK_PROCESS_LIMIT_MS,s=t.delayMs||CHUNK_PROCESS_DELAY_MS,o=t.context||this,a=t.callback,u=function(){var i=+new Date;if(0>r){do t.process.call(o,n.shift(),e);while(n.length>0)}else do t.process.call(o,n.shift(),e);while(n.length>0&&+new Date-i<r);n.length>0?setTimeout(u,s):a&&"function"==typeof a&&a()};u()}};


});


Requireify.register('js/utils/urls.js', function(require, requireAsync, module, exports) {


"use strict";var URI=require("URIjs"),ctx=require("./contextData"),serverDefs=ctx.getFeatureData("serverDefs"),ROOT="",env=serverDefs&&serverDefs.production?"prod":"test",paths={app:"/browse",genre:"/browse/genre",similars:"/browse/similars",genrenewrelease:"/browse/genre-new-release",hd:"/browse/hd",person:"/browse/person",mylist:"/browse/my-list",watchagain:"/browse/watch-again",recentlyadded:"/browse/recently-added",newarrivals:"/browse/new-arrivals",newrelease:"/browse/new-release",newreleases:"/browse/new-releases",play:"/playback",watch:"/watch",watchCharacter:"/watch/character",title:"/title",addToMyList:"/add",subtitle:"/browse/subtitle",subtitles:"/browse/subtitles",search:"/search",audioDescription:"/browse/audio-description",densityAudioDescription:"/audio-description"},urls={paths:paths,page:{app:ROOT+paths.app,genre:ROOT+paths.genre,similars:ROOT+paths.similars,genrenewrelease:ROOT+paths.genrenewrelease,hd:ROOT+paths.hd,person:ROOT+paths.person,mylist:ROOT+paths.mylist,watchagain:ROOT+paths.watchagain,recentlyadded:ROOT+paths.recentlyadded,newrelease:ROOT+paths.newrelease,newreleases:ROOT+paths.newreleases,newarrivals:ROOT+paths.newarrivals,play:ROOT+paths.play,watch:ROOT+paths.watch,watchCharacter:ROOT+paths.watchCharacter,title:ROOT+paths.title,addToMyList:ROOT+paths.addToMyList,subtitle:ROOT+paths.subtitle,subtitles:ROOT+paths.subtitles,search:ROOT+paths.search,audioDescription:ROOT+paths.audioDescription,densityAudioDesc:ROOT+paths.densityAudioDescription,doNotTest:"/DoNotTest",devices:"/Watch",yourAccount:"/YourAccount",affiliates:"/Affiliates",termsOfUse:"/TermsOfUse",privacyPolicy:"/PrivacyPolicy",cookiePolicy:"/Cookies",ratings:"/node/2064",signOut:"/SignOut?lnkctr=mL",merchweb:{home:"/WiHome",player:"/WiPlayer",viewingActivity:"/WiViewingActivity",editProfiles:"/EditProfiles",mdp:"/WiMovie",manualSortMyList:"/ChangeListOrderCustomer",myList:"/MyList",kidsHome:"/Kids",onRamp:"/Welcome/OnRamp",genre:"/WiGenre",profilesGate:"/ProfilesGate",role:"/RoleDisplay",subtitles:"/Subtitles",newReleases:"/NewReleases",recentAdditionsGallery:"/WiRecentAdditionsGallery",unsupportedCountry:"/Error?type=nonSupportedCountry"},test:{base:"http://www-qa.test.netflix.com"},dvdCo:{home:"//dvd.netflix.com/MemberHome?lnkctr=mhbwse",mdp:{test:"//dvd-www-test-baseline-stable.eng.dvdco.netflix.com/Movie",prod:"//dvd.netflix.com/Movie"},dvdUpsell:{test:"//dvd-www-test-baseline-stable.eng.dvdco.netflix.com/SubscriptionAdd",prod:"//dvd.netflix.com/SubscriptionAdd"},search:{test:"//dvd-www-test-baseline-stable.eng.dvdco.netflix.com/Search",prod:"//dvd.netflix.com/Search"}},external:{pr:"http://pr.netflix.com",mediaCenter:"http://pr.netflix.com",investors:"http://ir.netflix.com",help:"http://help.netflix.com",contact:"http://help.netflix.com/contactus",jobs:"http://jobs.netflix.com",support:"https://support.netflix.com",blogByRegion:{us:"http://blog.netflix.com",nl:"http://nlblog.netflix.com",br:"http://brasilblog.netflix.com",uk:"http://ukirelandblog.netflix.com",nordics:"http://nordicsblog.netflix.com",latam:"http://americalatinablog.netflix.com"}}},endpoint:{setVideoRating:"/setVideoRating"},param:{merchweb:{playerMovieId:"movieid",trackId:"trkid",uiPlayContext:"tctx",audioDescription:"ad"},dvdUpsell:{preselect:"preselect",dsrc:"dsrc",source:{search:"STRWEB_SEARCH",nav:"STRWEB_NAV"},videoid:"videoid",isShowMember:"isShowMember"}},devParam:{},appStores:{iOS:"http://itunes.com/apps/netflix",android:"https://play.google.com/store/apps/details?id=com.netflix.mediaclient"},getBlogUrl:function(){return this.page.external.blogByRegion.us},getMerchWebQueueUrl:function(){return new URI(this.page.merchweb.myList)},getMerchWebPlayerUrl:function(e,t,r,i){var s={};return s[this.param.merchweb.playerMovieId]=e,s[this.param.merchweb.trackId]=t,s[this.param.merchweb.uiPlayContext]=r,i===!0&&(s[this.param.merchweb.audioDescription]="true"),URI(this.page.merchweb.player).addQuery(s)},getMerchWebMDPUrl:function(e){return new URI(this.page.merchweb.mdp)+"/"+e},getMerchWebGenreUrl:function(e){return new URI(this.page.merchweb.genre)+"?agid="+e},getMerchWebRoleUrl:function(e){return new URI(this.page.merchweb.role)+"?personid="+e},getMerchWebSubtitlesUrl:function(e){return new URI(this.page.merchweb.subtitles)+"?sub="+e},getMerchWebRecentAdditionsGalleryUrl:function(e){return new URI(this.page.merchweb.recentAdditionsGallery)+"?nRR=arrivalDate&nRT=all&genreId="+e},getViewingActivityUrl:function(){return urls.page.merchweb.viewingActivity},getMerchWebKidsAltGenreUrl:function(e){return URI("/KidsAltGenre").addQuery({agid:e})},getDVDCoMDPURL:function(e,t){var r={};return r[this.param.merchweb.trackId]=t,URI(this.page.dvdCo.mdp[env]+"/"+e).addQuery(r)},getTitleUrl:function(e){return urls.page.title+"/"+e},getSearchPersonUrl:function(e,t){return urls.page.search+"/"+e+"/person/"+t},getSearchSuggestionUrl:function(e,t){return urls.page.search+"/"+e+"/suggestion/"+t},getRatingsUrl:function(){return this.page.external.support+this.page.ratings},getSwitchProfileUrl:function(e,t){var r=e?"":"&nextpage=/app";return"/SwitchProfile?tkn="+t+r},getSafeNextUrl:function(e){return e=e.replace(/[<\[\^>\]\*>]/g,""),!this.isNetflixUrl(e)||this.isRelativeUrl(e)?urls.page.merchweb.home:e},isNetflixUrl:function(e){return this.isRelativeUrl(e)||URI(e).hostname().match(/\.netflix\.com$/i)},isAbsoluteUrl:function(e){return URI(e).is("absolute")},isRelativeUrl:function(e){return URI(e).is("relative")},isAkiraPlayerUrl:function(e){return new RegExp(this.paths.play).test(e)},getAkiraPlayerParams:function(e){var t=URI(e),r=t.query(!0),i=t.path().match(new RegExp(this.paths.play+"/(\\d+)"))||[];return r.titleId=i[1]||0,r},makeAkiraPlayerUrl:function(e,t){return isNaN(parseInt(e,10))&&(e=0),"object"!=typeof t&&(t={}),URI(paths.watch+"/"+e).addQuery(t)},getDVDUpsellURL:function(e,t){var r={};return e&&(r[this.param.dvdUpsell.videoid]=e),r[this.param.dvdUpsell.dsrc]=t?this.param.dvdUpsell.source[t]:this.param.dvdUpsell.source.nav,r[this.param.dvdUpsell.preselect]="1u",URI(this.page.dvdCo.dvdUpsell[env]).addQuery(r)},getDVDCoSearchURL:function(e){var t={};return t.v1=e,URI({path:this.page.dvdCo.search[env],escapeQuerySpace:!1}).addQuery(t)},getIOSAppStoreURL:function(){return urls.page.appStores.iOS},getAndroidAppStoreURL:function(){return urls.page.appStores.android}};module.exports=urls;


});


Requireify.register('js/components/messageHeadline.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MessageHeadline=React.createClass({displayName:"MessageHeadline",propTypes:{children:React.PropTypes.array},render:function(){return React.createElement("h2",{className:"message-headline"},this.props.children)}});module.exports=MessageHeadline;


});


Requireify.register('js/components/nfMsgBox.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MessageHeadline=require("./messageHeadline.jsx"),MessageBox=React.createClass({displayName:"MessageBox",render:function(){var e,s=React.addons.classSet,a={message:!0},t=this.props.msgType||"warn",r=this.props.title?React.createElement(MessageHeadline,null,this.props.title):"";return a[t]=!0,e=s(a),React.createElement("article",{className:e},r,React.createElement("section",{className:"msgContent"},this.props.children))}});module.exports=MessageBox;


});


Requireify.register("classnames",function(e,n,r,t){!function(e){if("object"==typeof t&&"undefined"!=typeof r)r.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.classnames=e()}}(function(){var n;return function r(n,t,f){function o(s,u){if(!t[s]){if(!n[s]){var a="function"==typeof e&&e;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){var r=n[s][1][e];return o(r?r:e)},l,l.exports,r,n,t,f)}return t[s].exports}for(var i="function"==typeof e&&e,s=0;s<f.length;s++)o(f[s]);return o}({classnames:[function(e,r){!function(){"use strict";function e(){for(var n="",r=0;r<arguments.length;r++){var t=arguments[r];if(t){var f=typeof t;if("string"===f||"number"===f)n+=" "+t;else if(Array.isArray(t))n+=" "+e.apply(null,t);else if("object"===f)for(var o in t)t.hasOwnProperty(o)&&t[o]&&(n+=" "+o)}}return n.substr(1)}"undefined"!=typeof r&&r.exports?r.exports=e:"function"==typeof n&&"object"==typeof n.amd&&n.amd?n(function(){return e}):window.classNames=e}()},{}]},{},[])("classnames")})});

Requireify.register('js/components/buttonBar.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),classnames=require("classnames"),ButtonBar=React.createClass({displayName:"ButtonBar",propTypes:{align:React.PropTypes.string,children:React.PropTypes.oneOfType([React.PropTypes.array,React.PropTypes.object]).isRequired,className:React.PropTypes.string,topPadding:React.PropTypes.bool},render:function(){var e={"btn-bar":!0,"top-padding":this.props.topPadding,"btn-bar-left":"left"===this.props.align,"btn-bar-right":"right"===this.props.align,"btn-bar-center":"center"===this.props.align};this.props.className&&(e[this.props.className]=!0);var a=classnames(e);return React.createElement("div",{className:a},this.props.children)}});module.exports=ButtonBar;


});


Requireify.register('js/components/basicSpinner.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),BasicSpinner=React.createClass({displayName:"BasicSpinner",getDefaultProps:function(){return{width:"50px",height:"50px"}},render:function(){var e=React.addons.classSet,t={width:this.props.width,height:this.props.height},i=e({"basic-spinner":!0,isHidden:this.props.isHidden});return React.createElement("div",{className:i,style:t})}});module.exports=BasicSpinner;


});


Requireify.register('js/components/ux/UIButton.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),BasicSpinner=require("../../components/basicSpinner.jsx"),UIButton=React.createClass({displayName:"UIButton",getDefaultProps:function(){return{color:"",additionalClasses:{},size:"small",clickHandler:function(){},disabled:!1,type:"button",waiting:!1,autoComplete:"off",tabIndex:0}},propTypes:{waiting:React.PropTypes.bool,disabled:React.PropTypes.bool,color:React.PropTypes.string,id:React.PropTypes.string,size:React.PropTypes.string,type:React.PropTypes.string,additionalClasses:React.PropTypes.object,clickHandler:React.PropTypes.func,autoComplete:React.PropTypes.string,tabIndex:React.PropTypes.number,children:React.PropTypes.node},clickHandler:function(e){this.props.disabled||this.props.clickHandler(e)},render:function(){var e,t=React.addons.classSet,s=!!this.props.waiting,i=this.props.disabled||s,a=_.extend({btn:!0,waiting:s,disabled:i},this.props.additionalClasses),p=this.props.color,r=null;return s&&(r=React.createElement("div",{className:"waitIndicator"},React.createElement(BasicSpinner,{width:"25px",height:"25px"}))),p||(p="submit"===this.props.type?"submit":"plain"),a["btn-"+p]=!0,a["btn-"+this.props.size]=!0,e={className:t(a),onClick:this.clickHandler,type:this.props.type,disabled:i,autoComplete:this.props.autoComplete,tabIndex:this.props.tabIndex},this.props.id&&(e.id=this.props.id),React.createElement("button",React.__spread({},e),this.props.children,r)}});module.exports=UIButton;


});


Requireify.register('js/reactMixins/eventBus.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={_getListenerMap:function(){return this.listenerMap||(this.listenerMap={}),this.listenerMap},_addEvent:function(t,e,n){var i=this._getListenerMap(),r=i[t];r||(i[t]=[],r=i[t]),r.push({listener:e,once:n})},on:function(t,e){return this._addEvent(t,e,!1),this},once:function(t,e){return this._addEvent(t,e,!0),this},removeListener:function(t,e){var n=this._getListenerMap(),i=n[t];return i?(i=i.filter(function(t){return t.listener!==e}),n[t]=i,this):void 0},emit:function(t){var e=this._getListenerMap(),n=e[t],i=Array.prototype.slice.call(arguments),r=this;n&&(i.shift(),n.forEach(function(t){var e=t.listener;e.apply(r,i)}),n=n.filter(function(t){return!t.once}),e[t]=n)}};


});


Requireify.register('js/akira/components/timeoutTransitionGroup.jsx', function(require, requireAsync, module, exports) {


"use strict";function animationSupported(){return 0!==endEvents.length}var React=require("react"),ReactTransitionGroup=React.addons.TransitionGroup,TICK=17,EVENT_NAME_MAP={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},endEvents=[];!function(){if("undefined"!=typeof window){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete EVENT_NAME_MAP.animationend.animation,"TransitionEvent"in window||delete EVENT_NAME_MAP.transitionend.transition;for(var i in EVENT_NAME_MAP)if(EVENT_NAME_MAP.hasOwnProperty(i)){var n=EVENT_NAME_MAP[i];for(var s in n)if(s in t){endEvents.push(n[s]);break}}}}();var TimeoutTransitionGroupChild=React.createClass({displayName:"TimeoutTransitionGroupChild",transition:function(e,t){var i=this.getDOMNode(),n=this,s=this.props.name+"-"+e,o=s+"-active",a=(this.props.leaveDelayMs||0)+this.props.leaveTimeout,r=(this.props.enterDelayMs||0)+this.props.enterTimeout,u=function(){i.classList.remove(s),i.classList.remove(o),"enter"===e&&n.props.afterTransitionEnter?n.props.afterTransitionEnter(i):"leave"===e&&n.props.afterTransitionLeave&&n.props.afterTransitionLeave(i),t&&t()};animationSupported()?"enter"===e?this.animationTimeout=setTimeout(u,r):"leave"===e&&(this.animationTimeout=setTimeout(u,a)):u(),i.classList.add(s),"enter"===e&&this.props.enterDelayMs?this.transitionEnterTimeout=setTimeout(function(){n.queueClass(o)},this.props.enterDelayMs):"leave"===e&&this.props.leaveDelayMs?this.transitionLeaveTimeout=setTimeout(function(){n.queueClass(o)},this.props.leaveDelayMs):this.queueClass(o)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,TICK))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(function(e){this.getDOMNode().classList.add(e)}.bind(this)),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.animationTimeout&&clearTimeout(this.animationTimeout),this.transitionEnterTimeout&&clearTimeout(this.transitionEnterTimeout),this.transitionLeaveTimeout&&clearTimeout(this.transitionLeaveTimeout)},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return React.Children.only(this.props.children)}}),TimeoutTransitionGroup=React.createClass({displayName:"TimeoutTransitionGroup",propTypes:{enterTimeout:React.PropTypes.number.isRequired,leaveTimeout:React.PropTypes.number.isRequired,enterDelayMs:React.PropTypes.number,leaveDelayMs:React.PropTypes.number,afterTransitionEnter:React.PropTypes.func,afterTransitionLeave:React.PropTypes.func,transitionName:React.PropTypes.string.isRequired,transitionEnter:React.PropTypes.bool,transitionLeave:React.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return React.createElement(TimeoutTransitionGroupChild,{enterTimeout:this.props.enterTimeout,leaveTimeout:this.props.leaveTimeout,afterTransitionEnter:this.props.afterTransitionEnter,afterTransitionLeave:this.props.afterTransitionLeave,enterDelayMs:this.props.enterDelayMs,leaveDelayMs:this.props.leaveDelayMs,name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return React.createElement(ReactTransitionGroup,React.__spread({},this.props,{childFactory:this._wrapChild}))}});module.exports=TimeoutTransitionGroup;


});


Requireify.register('js/akira/components/modals/modalManager.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),EventBus=require("../../../reactMixins/eventBus"),TimeoutTransitionGroup=require("../../components/timeoutTransitionGroup.jsx"),EVENT_NAME_PREFIXES={CLOSE:"modal:close:",OPEN:"modal:open:",UPDATE:"modal:update:"},modalManager={node:null,modalFactory:null,currentModal:null,currentConfig:null,_init:function(){this.node||(this.node=document.createElement("div"),document.body.insertBefore(this.node,document.body.firstChild),this.modalFactory=React.createFactory(ModalElement))},open:function(e,n){this._init();var t=this;return t.currentConfig?!1:(t.currentConfig=_.assign({name:"unnamed",disableDismiss:!1,additionalClasses:[],contentProps:{}},n),React.withContext({modalDismiss:t._close,modalUpdate:t._update,modalDisableDismiss:t.currentConfig.disableDismiss,pathEvaluator:window&&window.pathEvaluator},function(){t.currentModal=React.createElement(e,t.currentConfig.contentProps),React.render(t.modalFactory({},t.currentModal),t.node)}),EventBus.emit(EVENT_NAME_PREFIXES.OPEN+t.currentConfig.name,{name:t.currentConfig.name}),void 0)}};modalManager._update=function(e){EventBus.emit(EVENT_NAME_PREFIXES.UPDATE+modalManager.currentConfig.name,e)},modalManager._close=function(e){modalManager.node&&React.unmountComponentAtNode(modalManager.node);var n=modalManager.currentConfig.name;modalManager.currentConfig=null,EventBus.emit(EVENT_NAME_PREFIXES.CLOSE+n,e)};var ModalElement=React.createClass({displayName:"ModalElement",contextTypes:{modalDismiss:React.PropTypes.func,modalUpdate:React.PropTypes.func,modalDisableDismiss:React.PropTypes.bool},getInitialState:function(){return{shown:!1}},componentDidMount:function(){this.setState({shown:!0})},onMarginClick:function(){this.context.modalDisableDismiss||this.context.modalDismiss({event:"marginDismiss",data:{}})},render:function(){var e="nf-modal "+modalManager.currentConfig.additionalClasses.join(" ");return React.createElement(TimeoutTransitionGroup,{className:e,component:"div",transitionName:"modal",enterTimeout:450,leaveTimeout:0},this.state.shown?React.createElement("div",{className:"nf-modal-background",ref:"modalBackground",onClick:this.onMarginClick,key:"modalBackground"}):null,this.state.shown?React.createElement("div",{className:"nf-modal-content",ref:"modalContent",key:"modalContent"},modalManager.currentModal):null)}});module.exports=modalManager;


});


Requireify.register('js/reactMixins/scrollLock.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),BROWSER_FUDGE=-1,limitScroll={_killScroll:function(l){var t=this._scrollLockTarget,o=t.scrollTop,e=t.scrollHeight,i=t.offsetHeight,r=l.deltaY,c=l.target;(!t.contains(c)||0>=o&&0>=r||o>=e-i+BROWSER_FUDGE&&r>=0)&&l.preventDefault()},scrollLock:function(l){var t;_.isString(l)?this.refs[l]&&(t=this.refs[l].getDOMNode()):t=this.getDOMNode(),this._scrollLockTarget=t,document.body.addEventListener("wheel",this._killScroll)},scrollUnlock:function(){document.body.removeEventListener("wheel",this._killScroll)},componentWillUnmount:function(){this.scrollUnlock()}};module.exports=limitScroll;


});


Requireify.register('js/akira/components/modals/modalContent.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ScrollLock=require("../../../reactMixins/scrollLock"),ModalContent=React.createClass({displayName:"ModalContent",getDefaultProps:function(){return{useScrollLock:!0}},contextTypes:{modalDismiss:React.PropTypes.func,modalUpdate:React.PropTypes.func,modalDisableDismiss:React.PropTypes.bool},mixins:[ScrollLock],_makeComponent:function(e,t){if(this.props[e]){var s="nf-modal-"+e;return React.createElement("div",{className:s,ref:t||null},this.props[e])}return null},_cornerDismiss:function(){this.context.modalDismiss({event:"cornerDismiss",data:{}})},componentDidMount:function(){this.props.useScrollLock&&!this.props.customBody&&this.scrollLock("modal-body")},render:function(){return React.createElement("div",{className:"nf-modal-content-wrapper"},React.createElement("div",{className:"nf-modal-dismiss"},this.context.modalDisableDismiss?null:React.createElement("button",{className:"nf-modal-dismiss-btn",onClick:this._cornerDismiss,"aria-label":"close",tabIndex:"1"},React.createElement("span",{className:"close-button icon-close"}))),this._makeComponent("header"),this.props.header?React.createElement("hr",{className:"nf-modal-hr"}):null,this.props.customBody?this.props.customBody:this._makeComponent("body","modal-body"),React.createElement("hr",{className:"nf-modal-hr"}),this._makeComponent("footer"))}});module.exports=ModalContent;


});


Requireify.register('js/akira/components/modals/brazil-price-change-overlay.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ModalContent=require("./modalContent.jsx"),BrazilPriceChangeModal=React.createClass({displayName:"BrazilPriceChangeModal",contextTypes:{modalDismiss:React.PropTypes.func,modalUpdate:React.PropTypes.func},render:function(){var e={header:React.createElement("h2",{className:"nf-modal-heading"},this.props.headerText),body:React.createElement("p",null,this.props.bodyText),footer:React.createElement("div",{className:"nf-modal-button-bar"},React.createElement("button",{className:"akira-button akira-button-red",onClick:this.context.modalDismiss},this.props.buttonText))};return React.createElement(ModalContent,React.__spread({},e))}});module.exports=BrazilPriceChangeModal;


});


Requireify.register('js/common/customEvents.js', function(require, requireAsync, module, exports) {


"use strict";var NFEvent={send:function(e,t){var n;document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):(n=document.createEventObject(),n.eventType=t),n.eventName=t,document.createEvent?e.dispatchEvent(n):e.fireEvent("on"+t,n)},listen:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(t,n)},stopListening:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent(t,n)}};module.exports=NFEvent;


});


Requireify.register('js/falkorClient/rxUltraLite.js', function(require, requireAsync, module, exports) {


var Rx={I:function(){return arguments[0]},Disposable:function(){function t(t){this.action=t}return t.create=function(e){return new t(e)},t.empty=new t(function(){}),t.prototype.dispose=function(){"function"==typeof this.action&&this.action()},t}(),Observable:function(){function t(t){this.s=t}return t.create=t.createWithDisposable=function(e){return new t(e)},t.fastCreateWithDisposable=t.create,t.fastReturnValue=function(e){return t.create(function(t){t.onNext(e),t.onCompleted()})},t.prototype.subscribe=function(t,e,n){return this.s(null!=t&&"object"==typeof t?t:Rx.Observer.create(t,e,n))},t.prototype.catchException=function(e){var n=this;return t.create(function(t){return n.subscribe(function(e){t.onNext(e)},function(n){return("function"==typeof e?e(n):e).subscribe(t)},function(){t.onCompleted()})})},t}(),Observer:function(){function t(t,e,n){this.onNext=t||Rx.I,this.onError=e||Rx.I,this.onCompleted=n||Rx.I}return t.create=function(e,n,o){return new t(e,n,o)},t}(),Subject:function(){function t(){this.observers=[]}return t.prototype.subscribe=function(t){var e=this.observers,n=e.length;return e[n]=t,{dispose:function(){e.splice(n,1)}}},t.prototype.onNext=function(t){for(var e=this.observers.concat(),n=-1,o=e.length;++n<o;)e[n].onNext(t)},t.prototype.onError=function(t){var e=this.observers.concat(),n=-1,o=e.length;for(this.observers.length=0;++n<o;)e[n].onError(t)},t.prototype.onCompleted=function(){var t=this.observers.concat(),e=-1,n=t.length;for(this.observers.length=0;++e<n;)t[e].onCompleted()},t}()};module.exports=Rx;


});


Requireify.register('js/utils/XHRConstants.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={RESPONSE_TYPES:{load:"load",error:"error",timeout:"timeout",abort:"abort"},METHODS:{get:"GET",post:"POST"},POST_TYPES:{text:"TEXT",json:"JSON"}};


});


Requireify.register('js/utils/XHR.js', function(require, requireAsync, module, exports) {


"use strict";function _authToken(e){return e.authorize&&userInfo&&userInfo.authURL||null}function _generateUrl(e,t){var r=services[e.service],o=_.assign({},r,e),n=new URI({protocol:o.protocol,hostname:o.hostname,path:(o.path?o.path.join("/"):DEFAULT_EMPTY_STRING)+e.resource}),s={},a={_:(new Date).getTime()},i={};return"api"===e.service&&browserInfo&&browserInfo.esnPrefix&&(s.esnPrefix=browserInfo.esnPrefix,s.esn="WWW"),e.method.toUpperCase()===XHRConstants.METHODS.get?(t&&(a.authURL=t),prod||(a.revision=DEVELOPER_REVISION),n.search(_.assign({},o.query||{},o.data,s,a))):(prod||(i.revision=DEVELOPER_REVISION),n.search(_.assign({},o.query||{},s,i))),n.toString()}function _massageConfiguration(e){var t=_.assign({method:XHRConstants.METHODS.get,headers:{},timeout:15e3,authorize:!1,postType:XHRConstants.POST_TYPES.json},e),r=_authToken(t);return t.method.toUpperCase()===XHRConstants.METHODS.post&&(r&&(t.data.authURL=r),t.postType.toUpperCase()!==XHRConstants.POST_TYPES.text?(t.postBody=JSON.stringify(t.data),t.headers["Content-Type"]="application/json",t.headers.Accept=["application/json","text/javascript","*/*"].join(", ")):t.postBody=_.reduce(t.data,function(e,t,r){return(e===DEFAULT_EMPTY_STRING?DEFAULT_EMPTY_STRING:e+"&")+r+"="+encodeURIComponent(t)},DEFAULT_EMPTY_STRING)),!t.url&&_.isString(t.resource)&&_.isString(t.service)&&(t.url=_generateUrl(t,r)),t}function _openXhr(e){var t=new XMLHttpRequest;return t.open(e.method.toUpperCase(),e.url),t.timeout=e.timeout,t.withCredentials=!0,t.responseType="json",_.forEach(e.headers,function(e,r){t.setRequestHeader(r,e)}),t}function request(e){return Rx.Observable.create(function(t){var r,o=_massageConfiguration(e),n=Date.now();return r=_openXhr(o),r.onload=onXhrComplete.bind(null,t,r,XHRConstants.RESPONSE_TYPES.load,n),r.onerror=onXhrComplete.bind(null,t,r,XHRConstants.RESPONSE_TYPES.error,n),r.ontimeout=onXhrComplete.bind(null,t,r,XHRConstants.RESPONSE_TYPES.timeout,n),r.onabort=onXhrComplete.bind(null,t,r,XHRConstants.RESPONSE_TYPES.abort,n),r.send(o.postBody||DEFAULT_EMPTY_STRING),function(){r.onload=null,r.onerror=null,r.ontimeout=null,r.onabort=null,r.abort(),r=null}})}function onXhrComplete(e,t,r,o){var n;t&&e&&(n=t.status,r===XHRConstants.RESPONSE_TYPES.load&&n>=200&&399>=n?_xhrComplete(e,t,r,o):_xhrError(e,t,r))}function _xhrComplete(e,t,r){var o,n=t.responseType;try{n.toUpperCase()===XHRConstants.POST_TYPES.json&&t.response?o=t.response:n.toUpperCase()===XHRConstants.POST_TYPES.text?o=JSON.parse(t.responseText||""):t.response&&!_.isObject(t.response)&&(o=JSON.parse(t.responseText||"")),e.onNext(o),e.onCompleted()}catch(s){_xhrError(e,t,r)}}function _xhrError(e,t,r){e.onError(new Error("xhr error - "+r),t,r)}var Rx=require("../falkorClient/rxUltraLite"),_=require("lodash"),URI=require("URIjs"),ctx=require("./contextData"),XHRConstants=require("./XHRConstants"),DEVELOPER_REVISION="latest",DEFAULT_EMPTY_STRING="";if("undefined"!=typeof window)var userInfo=ctx.getFeatureData("userInfo"),serverDefs=ctx.getFeatureData("serverDefs"),services=ctx.getFeatureData("services"),browserInfo=ctx.getFeatureData("browserInfo"),prod=serverDefs.production;module.exports={request:request};


});


Requireify.register('js/common/umaUpdateXHR.js', function(require, requireAsync, module, exports) {


"use strict";var XHR=require("../utils/XHR.js"),UmaUpdateXHR=function(e,s,t){XHR.request({method:"post",protocol:"https",data:e,query:{esn:"www"},resource:"/usermessages",service:"api",authorize:!0}).subscribe(s,t)};module.exports=UmaUpdateXHR;


});


Requireify.register('js/common/umaUpdate.js', function(require, requireAsync, module, exports) {


"use strict";var umaUpdateXHR=require("./umaUpdateXHR"),umaUpdateAjax=require("./umaUpdateAjax"),umaUpdate=umaUpdateAjax.stub?umaUpdateXHR:umaUpdateAjax;module.exports=function(a,e,u){umaUpdate.stub||umaUpdate(a,e,u)};


});


Requireify.register('js/components/uma.jsx', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),React=require("react"),MessageBox=require("./nfMsgBox.jsx"),MessageHeadline=require("./messageHeadline.jsx"),ButtonBar=require("./buttonBar.jsx"),Button=require("./ux/UIButton.jsx"),ModalManager=require("../akira/components/modals/modalManager.jsx"),BrazilModalContent=require("../akira/components/modals/brazil-price-change-overlay.jsx"),cl=require("nf-cons-log"),NFEvent=require("../common/customEvents"),umaUpdate=require("../common/umaUpdate"),XHR=require("../utils/XHR"),EventBus=require("../reactMixins/eventBus"),Uma=React.createClass({displayName:"Uma",tagFor:function(e){switch(e.elementType){case"NEWLINE":return React.createElement("br",null);case"EM":return React.createElement("em",null,e.content);case"BOLD":return React.createElement("b",null,e.content);case"LINK":return React.createElement("a",{href:e.href},e.content);default:return e.content}},addTag:function(e,t){return e.push(this.tagFor(t)),e},linkAction:function(e){window.location="http://"+window.location.host+"/"+e},updateUma:function(e){var t=this,a=function(a){cl.clientNotifications.notify("uma",{category:"uiAction",data:{messageType:t.props.messageName,actionType:a,updateInfo:e,messageVersion:t.props.version,locale:t.props.locale}})},s=function(){a("updateSuccess")},n=function(){a("updateFailure")};umaUpdate(e,s,n)},remindLaterAction:function(e){var t=this.props.model||this.props,a=_.get(e,"callbackParameters.impressionStatus","IMPRESSED"),s={cmd:"snooze",messageName:t.messageName,messageStatus:a};this.updateUma(s),this.props.hideUma?this.props.hideUma():(React.unmountComponentAtNode(this.getDOMNode().parentNode),NFEvent.send(document,"umaDismiss"))},seenTOU:function(){this.updateUma({cmd:"tou",verb:"seen"})},agreeTOU:function(){this.updateUma({cmd:"tou",verb:"ack"}),this.props.hideUma?this.props.hideUma():(React.unmountComponentAtNode(this.getDOMNode().parentNode),NFEvent.send(document,"umaDismiss"))},handleAction:function(e){var t,a=this.props.model||this.props;switch(e||(e="NO_ACTION"),t=_.get(a,"callbacks."+e,{}),cl.clientNotifications.notify("uma",{category:"uiAction",data:{messageType:a.messageName,actionType:e,actionData:t,messageVersion:a.version,locale:a.locale}}),e){case"TOU_AGREE":this.agreeTOU();break;case"NOT_NOW":this.remindLaterAction(t);break;case"UPDATE_EMAIL":case"UPDATE_EMAIL_ADDRESS":this.linkAction("MemberProfile?fullpage=true");break;case"WARN_UPD_PMT":case"PLAY_UPD_PMT":case"ADD_PAYMENT_INFO":case"UPDATE_PAYMENT_METHOD":this.linkAction("YourAccountPayment");break;case"RESTART_MEMBERSHIP":this.linkAction("YourAccountPayment?restartAccount=true");break;case"SEND_CODE":this.linkAction("verifyphone?resend=true")}},addAction:function(e,t){if(t){var a={"akira-button":!0};e.push(React.createElement(Button,{key:t.id,size:"medium",additionalClasses:a,clickHandler:_.bind(this.handleAction,this,t.id)},t.text))}return e},componentWillUnmount:function(){var e=this.props.model||this.props;cl.clientNotifications.notifyEnd("uma",{category:"uiView",data:{messageType:e.messageName,messageVersion:e.version,locale:e.locale}})},componentDidMount:function(){var e=this._getMessage();"modal"===e.type&&e.factory.call(this);var t=this.props.model||this.props;this.state.TOU&&this.seenTOU(),cl.clientNotifications.notifyStart("uma",{category:"uiView",data:{messageType:t.messageName,messageVersion:t.version,locale:t.locale}}),cl.clientNotifications.flushBuffer()},getInitialState:function(){var e=this.props.model||this.props;return _.extend({titleElems:e.contents.title||[],bodyElems:e.contents.body||[],actionItems:e.actions,umaPageType:e.umaPageType,messageName:e.messageName},e.presentationAttributes||{})},knownTypes:{GRANDFATHERED_PRICE_ENDING:{type:"modal",factory:function(){var e="priceChangeModal",t=function(){XHR.request({resource:"/usermessages",service:"api",method:"post",authorize:!0,query:{esn:"www"},data:{cmd:"snooze",messageName:"GRANDFATHERED_PRICE_ENDING"}}).subscribe()},a={headerText:_.get(this,"state.titleElems[0].content",""),bodyText:_.reduce(this.state.bodyElems,this.addTag,[],this),buttonText:_.get(this,"state.actionItems[0].text","OK")};ModalManager.open(BrazilModalContent,{name:e,contentProps:a,additionalClasses:["brazil-price-change"]}),EventBus.once("modal:close:"+e,t)}},DEFAULT:{type:"uma",factory:function(){var e=_.reduce(this.state.titleElems,this.addTag,[],this),t=React.createElement("p",null,_.reduce(this.state.bodyElems,this.addTag,[],this)),a=React.createElement(ButtonBar,{align:"left"},_.reduce(this.state.actionItems,this.addAction,[],this)),s=this.state.VIEW_TYPE||"info";return React.createElement(MessageBox,{msgType:s},React.createElement(MessageHeadline,null,e),t,a)}}},_getMessage:function(){var e=this.knownTypes.hasOwnProperty(this.state.messageName)?this.state.messageName:"DEFAULT";return this.knownTypes[e]},render:function(){var e=this._getMessage();return"uma"===e.type?e.factory.call(this):null}});module.exports=Uma;


});


Requireify.register('js/reactMixins/cssAnimation.jsx', function(require, requireAsync, module, exports) {


"use strict";var isClientContext="undefined"!=typeof window,NON_CSS_PROPERTIES,CSS_PROPERTIES_MAP,KEYFRAMES_PROPERTIES_MAP,EASING_MAP,TRANSFORM_PROPERTY_MAP,TRANSITION_END_EVENT,TRANSITION_END_EVENTS_MAP,ANIMATION_END_EVENT,ANIMATION_END_EVENTS_MAP,VENDOR_PREFIXES,CSSAnimations,requestAnimationFrame;NON_CSS_PROPERTIES=["target","callback","animation","after","before"],CSS_PROPERTIES_MAP={translate:"transform",translateX:"transform",translateY:"transform",rotate:"transform",scale:"transform",scaleX:"transform",scaleY:"transform",skewX:"transform",skewY:"transform",translateZ:"transform",translate3d:"transform",rotateX:"transform",rotateY:"transform",scale3d:"transform",scaleZ:"transform",matrix:"transform",matrix3d:"transform",origin:"transformOrigin",perspective:"perspective",easing:"transitionTimingFunction",duration:"transitionDuration",delay:"transitionDelay"},KEYFRAMES_PROPERTIES_MAP={name:"animationName",duration:"animationDuration",delay:"animationDelay",easing:"animationTimingFunction",repeat:"animationIterationCount",direction:"animationDirection",fillMode:"animationFillMode"},EASING_MAP={ease:"ease",linear:"linear",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",stepStart:"step-start",stepEnd:"step-end",steps:"steps",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},TRANSFORM_PROPERTY_MAP={transform:"transform",WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform"},TRANSITION_END_EVENTS_MAP={WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},ANIMATION_END_EVENTS_MAP={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"},VENDOR_PREFIXES=["Webkit","Moz","O","ms"],function(){if(!isClientContext)return"";var e,n,t,i,a,r;e=document.createElement("div"),n=e.style,t="",VENDOR_PREFIXES.forEach(function(e){return e+"Transition"in n?(t=e,void 0):void 0});for(i in CSS_PROPERTIES_MAP)CSS_PROPERTIES_MAP.hasOwnProperty(i)&&(a=CSS_PROPERTIES_MAP[i],r=t+a.charAt(0).toUpperCase()+a.substr(1),r in n&&(CSS_PROPERTIES_MAP[i]=r));for(i in KEYFRAMES_PROPERTIES_MAP)CSS_PROPERTIES_MAP.hasOwnProperty(i)&&(a=KEYFRAMES_PROPERTIES_MAP[i],r=t+a.charAt(0).toUpperCase()+a.substr(1),r in n&&(KEYFRAMES_PROPERTIES_MAP[i]=r));TRANSITION_END_EVENT="TransitionEvent"in window?"transitionend":TRANSITION_END_EVENTS_MAP[t+"Transition"],ANIMATION_END_EVENT="AnimationEvent"in window?"animationend":ANIMATION_END_EVENTS_MAP[t+"Animation"]}(),requestAnimationFrame=function(){if(!isClientContext)return function(){};var e=0;return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){var t=Date.now(),i=Math.max(0,16-(t-e));return e=t+i,setTimeout(function(){n(Date.now())},i)}}(),CSSAnimations={animate:function(e){var n,t,i,a;if(!e)throw new TypeError("React Component - "+this.constructor.displayName+": 'animation' argument must be an object.");if(this.isMounted()&&(n=this._getDOMNode(e.target),n.addEventListener)){e.before&&this._applyStyle(n,e.before);var r=this;(e.callback||e.animation||"undefined"!=typeof e.opacity||e.after)&&(t=this._transitionEndCallback.bind(this,e.callback,e.animation),i=this._transitionEndHandler.bind(this,n,t,function(){e.after&&r._applyStyle(n,e.after),n.removeEventListener(TRANSITION_END_EVENT,i)}),n.addEventListener(TRANSITION_END_EVENT,i)),e.keyframes&&e.keyframes.callback&&(a=this._animationEndHandler.bind(this,n,e.keyframes.callback,function(){n.removeEventListener(ANIMATION_END_EVENT,a)}),n.addEventListener(ANIMATION_END_EVENT,a)),requestAnimationFrame(function(){r._applyStyle(n,e)})}},_getDOMNode:function(e){if(e){if("string"==typeof e){if(!this.refs[e])throw new Error("React Component - "+this.constructor.displayName+": 'animation' argument's 'target' property '"+e+"' not found in this.refs.");return this.refs[e].getDOMNode()}return e}return this.getDOMNode()},getAnimationStyle:function(e){var n,t,i,a;a={},"number"==typeof e.duration&&(e.duration+="ms"),"number"==typeof e.delay&&(e.delay+="ms"),e.keyframes&&"number"==typeof e.keyframes.duration&&(e.keyframes.duration+="ms");for(n in e)if(-1===NON_CSS_PROPERTIES.indexOf(n))if(t=CSS_PROPERTIES_MAP[n],i=e[n],t)t in TRANSFORM_PROPERTY_MAP?(a[t]||(a[t]=""),a[t]+=n+"("+i+") "):a[t]="easing"===t?EASING_MAP[i]:i;else if("keyframes"===n)for(n in i)n in KEYFRAMES_PROPERTIES_MAP&&(a[KEYFRAMES_PROPERTIES_MAP[n]]="easing"===n?EASING_MAP[i[n]]:i[n]);else a[n]=i;return a},_transitionEndCallback:function(e,n){if(e&&"function"!=typeof e)throw new Error("React Component - "+this.constructor.displayName+": 'animation' argument's 'callback' property must be a function.");e&&e.call(this),n&&this.animate(n)},_transitionEndHandler:function(e,n,t,i){i.target===e&&(t(),n())},_animationEndHandler:function(e,n,t,i){i.target===e&&(t(),n.call(this))},css:function(e){var n=this._getDOMNode(e.target);return this._applyStyle(n,e)},clearStyles:function(e){e.removeAttribute("style")},_applyStyle:function(e,n){return requestAnimationFrame(function(){n.reset&&(e.removeAttribute("style"),delete n.reset);var t=this.getAnimationStyle(n);for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}.bind(this)),e}},module.exports=CSSAnimations;


});


Requireify.register('js/reactMixins/transition.js', function(require, requireAsync, module, exports) {


"use strict";function createGhostNode(t){var i=t.cloneNode(!0);i.removeAttribute("data-reactid");for(var e=i.querySelectorAll("[data-reactid]"),n=0,a=e.length;a>n;n++)e[n].removeAttribute("data-reactid"),"VIDEO"===e[n].tagName&&e[n].pause&&e[n].pause();return t.parentNode.appendChild(i),t.style.display="none",i}var Animation=require("./cssAnimation.jsx"),BUILT_IN_TRANSITIONS={fadeIn:{before:{opacity:0},opacity:1},fadeOut:{opacity:0},fadeInHover:{before:{opacity:.35},opacity:1},crossFadeIn:{before:{zIndex:2,opacity:0},opacity:1},crossFadeOut:{before:{zIndex:1},opacity:0,duration:1}};module.exports={mixins:[Animation],componentDidMount:function(){if(this.transitions){if(this.transitions.skipFirst){var t=this.getDOMNode().parentNode;if(t&&"true"!==t.getAttribute("data-transitioned-child"))return t.setAttribute("data-transitioned-child","true"),void 0}this.runTransition("show")}},componentWillUnmount:function(){this.runTransition("hide")},runTransition:function(t,i){if(this.transitions){var e=this.getDOMNode();if(e&&e.addEventListener){var n=this.transitions[t];if("function"==typeof i&&(n.callback=i),"function"==typeof n){var a;return"hide"===t?(e=createGhostNode(e),a=function(){e.parentNode.removeChild(e)}):a=null,n.call(this,e,a)}if(n||("show"===t?this.transitions.crossFade?(n=BUILT_IN_TRANSITIONS.crossFadeIn,n.duration=this.transitions.crossFade):this.transitions.fadeIn?(n=BUILT_IN_TRANSITIONS.fadeIn,n.duration=this.transitions.fadeIn):this.transitions.fadeInHover&&(n=BUILT_IN_TRANSITIONS.fadeInHover,n.duration=this.transitions.fadeInHover):"hide"===t&&(this.transitions.crossFade?(n=BUILT_IN_TRANSITIONS.crossFadeOut,n.delay=this.transitions.crossFade):this.transitions.fadeOut&&(n=BUILT_IN_TRANSITIONS.fadeOut,n.duration=this.transitions.fadeOut))),n){if("hide"===t){var o=createGhostNode(e),s=!1;n.target=o,n.callback=function(){s||(s=!0,o.parentNode.removeChild(o))},n.duration>0&&setTimeout(n.callback,n.duration+20)}this.animate(n)}}}}};


});


Requireify.register('js/akira/components/header/menuCaret.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition"),HeaderMenuCaret=React.createClass({displayName:"HeaderMenuCaret",mixins:[Transition],transitions:{fadeInHover:150,fadeOut:250},render:function(){return React.createElement("div",{className:"callout-arrow"})}});module.exports=HeaderMenuCaret;


});


Requireify.register('js/akira/components/controls/subMenuFunctions.js', function(require, requireAsync, module, exports) {


"use strict";var SUB_MENU_CLOSE_TIMEOUT_MS=250,SUB_MENU_OPEN_TIMEOUT_MS=400,SubMenuFunctions={closeSubMenuTimeout:null,getInitialState:function(){return{subMenuOpen:!1,subMenuSelected:!0}},openSubMenu:function(){var e=SubMenuFunctions.currentOpenMenu;e&&e.isMounted()&&e.closeSubMenu(),SubMenuFunctions.setCurrentOpenMenu(this),this.subMenuEntered(),this.setState({subMenuOpen:!0})},closeSubMenu:function(){this.setState({subMenuOpen:!1})},prepareToOpenSubMenu:function(){this.clearTimeouts(),this.state.subMenuOpen||(this.openSubMenuTimeout=setTimeout(this.openSubMenu,SUB_MENU_OPEN_TIMEOUT_MS))},prepareToCloseSubMenu:function(){this.clearTimeouts(),this.state.subMenuOpen&&(this.closeSubMenuTimeout=setTimeout(this.closeSubMenu,SUB_MENU_CLOSE_TIMEOUT_MS))},clearTimeouts:function(){clearTimeout(this.closeSubMenuTimeout),clearTimeout(this.openSubMenuTimeout)},subMenuEntered:function(){clearTimeout(this.closeSubMenuTimeout)}};SubMenuFunctions.currentOpenMenu=null,SubMenuFunctions.setCurrentOpenMenu=function(e){SubMenuFunctions.currentOpenMenu=e},module.exports=SubMenuFunctions;


});


Requireify.register('js/akira/components/controls/subMenu.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition");module.exports=React.createClass({displayName:"exports",NUM_COLS:4,getDefaultProps:function(){return{showTopBar:!0}},mixins:[Transition],transitions:{fadeInHover:150,fadeOut:250},numColumns:function(){return this.props.cols||this.NUM_COLS},renderColumn:function(e,s,t){var r,n,a=[],i=Math.ceil(s/this.numColumns());for(r=e*i;(e+1)*i>r;r++)n=t[r],n&&a.push(React.createElement("li",{className:"sub-menu-item",key:n.type+r},n));return React.createElement("ul",{className:"sub-menu-list",key:e},a)},renderSpecialColumn:function(e){var s,t,r=[];for(s=0;s<e.length;s++)t=e[s],r.push(React.createElement("li",{className:"sub-menu-item-special",key:"specialItem"+s},t));return r.length>0?React.createElement("ul",{className:"sub-menu-list-special",key:"specialItems"},r):null},handleClick:function(e){this.props.onClick&&"A"===e.target.tagName?this.props.onClick(e):e.nativeEvent.stopImmediatePropagation()},render:function(){var e,s,t=[],r=this.numColumns();if(!this.props.items)return null;if(this.props.specialItems&&t.push(this.renderSpecialColumn(this.props.specialItems)),s=this.props.items.length,s>0)for(e=0;r>e;e++){var n=this.renderColumn(e,s,this.props.items);t.push(n)}return React.createElement("div",{className:"sub-menu "+(this.props.styleClass||""),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.handleClick},this.props.showTopBar&&this.props.showCalloutArrow?React.createElement("div",{className:"callout-arrow"}):null,this.props.showTopBar?React.createElement("div",{className:"topbar"}):null,t)}});


});


Requireify.register('js/reactMixins/nodecontext.js', function(require, requireAsync, module, exports) {


"use strict";var React=require("react");module.exports={contextTypes:{node:React.PropTypes.object},inNode:function(){return!!this.nodeRequest()},nodeRequest:function(){return this.props&&this.props.model&&this.props.model.node&&this.props.model.node.req||this.context.node&&this.context.node.req},requestContext:function(){var e=this.nodeRequest();return e?e.context:null},_require_:function(e){if(this.inNode()){var t=require;return t(e)}return null}};


});


Requireify.register('js/reactMixins/isomorphicContext.js', function(require, requireAsync, module, exports) {


"use strict";var contextData=require("../utils/contextData");module.exports={getFeatureData:function(t){return this.inNode()?this._require_("nf-browser-context").getFeature(this.nodeRequest(),t).data:contextData.getFeatureData(t)},getI18nStrings:function(){return this.inNode()?this._require_("nf-browser-context").getI18nStrings(this.nodeRequest()):contextData.getI18nStrings()},getFastProperty:function(t){return this.inNode()?this._require_("nf-browser-context").getFeature(this.nodeRequest(),"fastProps").data[t]:contextData.getFeatureData("fastProps")[t]},getContext:function(){return this.inNode()?this._require_("nf-browser-context").getCtx(this.nodeRequest()):contextData.getContext()}};


});


Requireify.register('js/reactMixins/isomorphicContextWithDeps.js', function(require, requireAsync, module, exports) {


"use strict";var NodeContext=require("./nodecontext"),IsomorphicContext=require("./isomorphicContext");module.exports={mixins:[NodeContext,IsomorphicContext]};


});


Requireify.register('js/reactMixins/i18n.js', function(require, requireAsync, module, exports) {


"use strict";function substituteVariables(r,t){var n=/\{(\w+)\}/g;return r?r.replace(n,function(r,n){return"undefined"!=typeof t[n]?t[n]:"{?"+n+"?}"}):""}var I18N={getString:function(r,t,n,e){if(!r)throw new Error("Missing bundle param for key="+t);var i=r.split(":",2);r=i[0];var u=i[1],s=u?u+"."+t:t;void 0===e&&(e=s);var o=this.getI18nStrings();if("undefined"==typeof o||null===o)throw new Error("Missing strings for all bundles: key="+t);if(!o||!o[r]||void 0===o[r][s])return e;var a=o[r][s];return n&&(a=substituteVariables(a,n)),a},getStrings:function(r){var t=this;return{get:function(n,e,i){return t.getString(r,n,e,i)}}}};module.exports=I18N;


});


Requireify.register('js/reactMixins/i18nWithDeps.js', function(require, requireAsync, module, exports) {


"use strict";var IsomorphicContextWithDeps=require("./isomorphicContextWithDeps"),I18N=require("./i18n");module.exports={mixins:[IsomorphicContextWithDeps,I18N]};


});


Requireify.register('js/common/keyCodes.js', function(require, requireAsync, module, exports) {


"use strict";var KEY_CODES={BACKSPACE:8,SPACE:32,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,ESC:27,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,DEL:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,MULTIPLY:106,PLUS:107,MINUS:109,DOT:110,NUMSLASH:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,EQUAL:187,COMMA:188,FSLASH:191,BSLASH:220};module.exports=KEY_CODES;


});


Requireify.register('js/utils/linkDefs.jsx', function(require, requireAsync, module, exports) {


"use strict";function queueOutboundHref(){return URLs.getMerchWebQueueUrl()}function kidsGenreHref(e){return URLs.getMerchWebKidsAltGenreUrl(e)}function waysToWatchHref(){return URLs.page.devices}var URLs=require("../utils/urls"),LinkDefs={home:{to:"home"},genre:{to:"genre"},similars:{to:"similars"},hd:{active:!1,to:"hd"},person:{to:"person"},recentlyWatched:{getHref:URLs.getViewingActivityUrl},recentlyAdded:{to:"recentlyAdded"},watchAgain:{to:"watchAgain"},newRelease:{to:"newRelease"},genrenewrelease:{to:"genreNewRelease"},socialPopular:{active:!1},subtitle:{to:"subtitle"},tag:{to:"genre"},title:{to:"title"},searchPerson:{to:"searchPerson"},searchSuggestion:{to:"searchSuggestion"},searchDVD:{to:"searchDVD"},kidsgenre:{getHref:kidsGenreHref},waysToWatch:{getHref:waysToWatchHref},newArrivals:{to:"newArrivals"},watchNow:{to:"watchNow"},playback:{to:"playback"}};Object.defineProperty(LinkDefs,"queue",{get:function(){var e={to:"myList"};if("undefined"==typeof window)return e;var t=window.pathEvaluator.bind(["profilesList","current"]),r=t.getValueSync(["usesManualMyListSort"]);return r?{getHref:queueOutboundHref}:e}}),module.exports=LinkDefs;


});


Requireify.register('js/akira/components/controls/mainViewLink.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),LinkDefs=require("../../../utils/linkDefs.jsx"),THROTTLE_CLICK_MS=1e3,links=LinkDefs,MainViewLink=React.createClass({displayName:"MainViewLink",preventClick:!1,handleClick:function(e){return this.preventClick?!1:(this.preventClick=!0,setTimeout(function(){this.preventClick=!1}.bind(this),THROTTLE_CLICK_MS),"function"==typeof this.props.onClick?this.props.onClick(e,this.props):!0)},renderOutboundLink:function(e){return React.createElement("a",React.__spread({},this.props,{href:e.getHref(this.props.id),onClick:this.handleClick}),this.props.children)},render:function(){var e,t,i=Router.Link,r=links[this.props.type],s=this.props.params||{};if(this.props.id&&(s.id=this.props.id),r){if(r.getHref&&"function"==typeof r.getHref)return this.renderOutboundLink(r);if(e=r.to,e&&("string"==typeof e?t=e:"function"==typeof e&&(t=e()),t))return React.createElement(i,React.__spread({},this.props,{params:s,to:t,onClick:this.handleClick,before:this.handleClick}),this.props.children)}return this.props.href?React.createElement("a",React.__spread({},this.props),this.props.children):React.createElement("span",React.__spread({},this.props),this.props.children)}});module.exports=MainViewLink;


});


Requireify.register('js/akira/components/header/genreNavItem.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),HeaderMenuCaret=require("./menuCaret.jsx"),SubMenuFunctions=require("../controls/subMenuFunctions"),SubMenu=require("../controls/subMenu.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),KeyCodes=require("../../../common/keyCodes"),Link=require("../controls/mainViewLink.jsx"),MAX_SUBGENRES=24,BUNDLE="discovery/akira/Chrome",GenreNavigationItem=React.createClass({displayName:"GenreNavigationItem",mixins:[SubMenuFunctions,I18N],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["header.browse"]}]},getPaths:function(){return[["summary"],[{to:MAX_SUBGENRES},["id","menuName"]]]}},handleKeyDown:function(e){switch(e&&e.which){case KeyCodes.ENTER:this.prepareToOpenSubMenu();break;case KeyCodes.ESC:this.prepareToCloseSubMenu()}},getSubMenuItems:function(){var e=[],t=this.props.model.getValueSync(["summary"]);if(!t)return e;for(var s=0;s<Math.min(MAX_SUBGENRES,t.length);s++){var n,a,r=this.props.model.bind([s]);if(!r)break;n=r.getValueSync(["id"]),a=r.getValueSync(["menuName"]),e.push(React.createElement(Link,{className:"sub-menu-link",type:this.props.itemType,id:n},a))}return e},render:function(){var e="genreNav ",t=this.getSubMenuItems(),s=React.addons.classSet,n={active:this.props.selected,hasSubMenu:t};return n[this.props.className]=!0,this.props.specialItems&&(e+="hasSpecialItems"),React.createElement("li",{className:s(n),onMouseEnter:this.prepareToOpenSubMenu,onMouseLeave:this.prepareToCloseSubMenu,onKeyDown:this.handleKeyDown},React.createElement(Link,{type:"home"},this.getString(BUNDLE,"header.browse"),this.state.subMenuOpen?React.createElement(HeaderMenuCaret,null):null),t?React.createElement("span",{className:"caret"}):null,this.state.subMenuOpen?React.createElement(SubMenu,{onClick:this.closeSubMenu,items:t,showCalloutArrow:!1,specialItems:this.props.specialItems,styleClass:e}):null)}});module.exports=GenreNavigationItem;


});


Requireify.register('js/akira/components/search/dvdLink.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),URLs=require("../../../utils/urls"),BUNDLE="discovery/akira/Chrome",DVDLink=React.createClass({displayName:"DVDLink",mixins:[I18N],statics:{__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["dvd.link"]}]}},componentWillMount:function(){var e=this.getFeatureData("userInfo");this.setState({path:e&&e.isDVD?URLs.page.dvdCo.home:URLs.getDVDUpsellURL()})},render:function(){return React.createElement("a",{href:this.state.path},this.getString(BUNDLE,"dvd.link"))}});module.exports=DVDLink;


});


Requireify.register('js/akira/components/search/searchInput.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),Transition=require("../../../reactMixins/transition"),EventBus=require("../../../reactMixins/eventBus"),BUNDLE="discovery/akira/Search",SearchInput=React.createClass({displayName:"SearchInput",mixins:[I18N,Transition],statics:{__meta__:{strings:[{bundle:"discovery/akira/Search",ids:["search.placeholder"]}]}},transitions:{show:{before:{width:"20px",opacity:0},opacity:1,width:null,duration:300},close:{width:"20px",opacity:0,duration:200}},close:function(e){this.runTransition("close",e)},getInitialState:function(){return{placeholder:this.getString(BUNDLE,"search.placeholder")}},onNewSearchTerm:function(e){this.props.onChange(e.target.value)},onFocus:function(e){this.setState({placeholder:this.getString(BUNDLE,"search.placeholder")}),EventBus.emit("search:focus",{term:encodeURI(e.target.value),start:!0})},onBlur:function(e){this.setState({placeholder:""}),EventBus.emit("search:focus",{term:encodeURI(e.target.value)}),this.props.onBlur&&this.props.onBlur(e)},isFocused:function(){return""!==this.state.placeholder},render:function(){return React.createElement("input",{type:"text",onChange:this.onNewSearchTerm,value:this.props.term,onFocus:this.onFocus,onBlur:this.onBlur,onClick:this.props.onSearchBoxClick,ref:"searchInput",placeholder:this.state.placeholder})}});module.exports=SearchInput;


});


Requireify.register('js/common/position.js', function(require, requireAsync, module, exports) {


"use strict";var Position={getRect:function(t){return t&&t.getBoundingClientRect()},getWindowRect:function(){var t=window,e=document,i=e.documentElement,n=e.getElementsByTagName("body")[0],o=t.innerWidth||i.clientWidth||n.clientWidth,r=t.innerHeight||i.clientHeight||n.clientHeight;return{top:0,bottom:r,left:0,right:o,width:o,height:r}},isElementInViewport:function(t){return this.isElementInRegion(this.getRect(t),this.getWindowRect())},isElementInRegion:function(t,e){var i=t.left+(t.right-t.left)/2,n=t.top+(t.bottom-t.top)/2;return t.left===t.right||e.left===e.right?!1:i>=e.left&&i<=e.right&&n>=e.top&&n<=e.bottom},getScrollTop:function(){return window.pageYOffset},getDistanceToBottomOfElement:function(t){var e=this.getScrollTop(),i=this.getWindowRect(),n=this.getRect(t),o=e+i.height,r=n.top+e+n.height;return r-o}};module.exports=Position;


});


Requireify.register('js/reactMixins/browserScroll.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),Position=require("../common/position"),Animation=require("./cssAnimation.jsx"),SCROLL_THROTTLE_MS=100,SCROLL_TIMEOUT_MS=150,scrollStart=null,scrollDist=0,BasicScrollMixin={componentDidMount:function(){(this.onScroll||this.onScrollEnd||this.onScrollStart)&&(this.throttledScroll||(this.throttledScroll=_.throttle(this._onScroll,SCROLL_THROTTLE_MS)),window&&window.addEventListener("scroll",this.throttledScroll,!1))},componentWillUnmount:function(){this.throttledScroll&&window&&window.removeEventListener("scroll",this.throttledScroll,!1)}},BrowserScroll={mixins:[BasicScrollMixin],componentWillUnmount:function(){"function"==typeof this.onScrollEnd&&this.onScrollEnd(null),clearInterval(this.scrollTimeout)},_onScroll:function(o){var t=this;this.scrollTimeout?clearTimeout(this.scrollTimeout):(scrollStart=Position.getScrollTop(),"function"==typeof this.onScrollStart&&this.onScrollStart(o)),scrollDist=Position.getScrollTop()-scrollStart,"function"==typeof this.onScroll&&this.onScroll(o),this.scrollTimeout=setTimeout(function(){"function"==typeof t.onScrollEnd&&t.onScrollEnd(o),clearTimeout(t.scrollTimeout),t.scrollTimeout=null},SCROLL_TIMEOUT_MS)},getScrollDistance:function(){return scrollDist},scrollTo:function(o,t){window&&window.scrollTo(o,t)},scrollDelta:function(o){window&&window.scrollTo(0,Position.getScrollTop()+o)},scrollDeltaWithAnimation:function(o,t,l,i){var n,r=Position.getScrollTop()+t,c=250;n=Animation.getAnimationStyle({translate3d:"0, "+-1*t+"px,0",duration:l,easing:"cubic-bezier(0.5, 0, 0.1, 1)",delay:i});for(var e in n)n.hasOwnProperty(e)&&(o.style[e]=n[e]);setTimeout(function(){window.requestAnimationFrame(function(){window.scrollTo(0,r),o.removeAttribute("style")})},i+l+c)}};module.exports=BrowserScroll;


});


Requireify.register('js/reactMixins/focusUtils.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={focusElement:function(e){var t=this._getElementReference(e);if(t&&document.activeElement!==t)if(t.focus(),"number"==typeof t.selectionStart&&t.value)t.selectionStart=t.selectionEnd=t.value.length;else if(t.createTextRange&&t.value){var n=t.createTextRange();n.collapse(!1),n.select()}},blurElement:function(e){var t=this._getElementReference(e);t&&t.blur()},_getElementReference:function(e){switch(typeof e){case"string":return this.refs[e]&&this.refs[e].getDOMNode();case"object":return e;default:return this.isMounted()&&this.getDOMNode()}}};


});


Requireify.register('js/reactMixins/historyBack.js', function(require, requireAsync, module, exports) {


"use strict";var Router=require("react-router");module.exports={goBackHistory:function(r){r&&(Router.History.length<=r?this.replaceWith("home"):window.history.go(-r))}};


});


Requireify.register('js/akira/components/search/searchBox.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SearchInput=require("./searchInput.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),EventBus=require("../../../reactMixins/eventBus"),BrowserScroll=require("../../../reactMixins/browserScroll"),FocusUtils=require("../../../reactMixins/focusUtils"),HistoryBack=require("../../../reactMixins/historyBack"),BUNDLE="discovery/akira/Search",SearchBox=React.createClass({displayName:"SearchBox",mixins:[I18N,Router.Navigation,Router.State,FocusUtils,HistoryBack],statics:{__meta__:{strings:[{bundle:"discovery/akira/Search",ids:["label.search"]}]}},getInitialState:function(){return{isOpen:this.props.term.length>0}},handleSearchBoxFocus:function(){this.props.handleSearchBoxFocus(!0),this.setState({isOpen:!0})},closeSearchBox:function(){var e=this;this.refs.searchInput&&this.refs.searchInput.close(function(){e.props.handleSearchBoxFocus(!1),e.setState({isOpen:!1})})},isRailPage:function(){var e=!this.props.model.pathEvaluator.getValueSync(["search",encodeURIComponent(this.props.term),"length"]),t=this.getParams().personId||this.getParams().suggestionId||this.getParams().dvdId,s=t&&!e;return s},bodyClicked:function(){var e=this.refs.searchInput&&this.refs.searchInput.isFocused();this.props.term||e||!this.state.isOpen||this.closeSearchBox()},componentWillMount:function(){this.inNode()||document.addEventListener("click",this.bodyClicked)},componentWillUnmount:function(){document.removeEventListener("click",this.bodyClicked)},shouldComponentUpdate:function(e,t){return e.term!==this.props.term||t.isOpen!==this.state.isOpen},componentDidUpdate:function(){this.handleSearchInputFocus()},componentDidMount:function(){this.handleSearchInputFocus()},handleSearchInputFocus:function(){(this.isTermEmpty(this.props.term)||!this.isRailPage())&&this.focusElement("searchInput")},handleSearchInputBlur:function(){this.isTermEmpty(this.props.term)&&this.state.isOpen&&this.closeSearchBox()},handleClear:function(){this.props.term.length>0&&this.state.isOpen&&(this.setState({isOpen:!0}),this.returnToPrevious(1))},returnToPrevious:function(e){var t=e;return this.setState({isOpen:!0}),this.isRailPage()&&t++,this.goBackHistory(t),!1},isTermEmpty:function(e){return 0===e.length||e.match(/^\s*$/)},onSearchBoxClick:function(e){this.isRailPage()&&(this.returnToPrevious(0),e.preventDefault())},handleChange:function(e){var t=this.props.term,s=!0;if(" "!==e.charAt(0))if(EventBus.emit("search:edit",{term:e}),this.isTermEmpty(e)){if(t)return this.returnToPrevious(1)}else BrowserScroll.scrollTo(0,0),this.isTermEmpty(t)&&(s=!1),s?this.replaceWith("search",{term:encodeURIComponent(e)},{}):this.transitionTo("search",{term:encodeURIComponent(e)},{})},render:function(){var e,t=0!==this.props.term.length||this.state.isOpen,s=React.addons.classSet,r={"icon-remove":!0,empty:!this.props.term};return e=t?React.createElement("div",{className:"searchInput"},React.createElement("span",{className:"icon-search"}),React.createElement(SearchInput,{term:this.props.term,ref:"searchInput",onChange:this.handleChange,onBlur:this.handleSearchInputBlur,onSearchBoxClick:this.onSearchBoxClick}),React.createElement("span",{className:s(r),onClick:this.handleClear})):React.createElement("div",{className:"searchTab",tabIndex:0,onFocus:this.handleSearchBoxFocus,onClick:this.handleSearchBoxFocus},React.createElement("span",{className:"icon-search"}),React.createElement("span",{className:"label"},this.getString(BUNDLE,"label.search"))),React.createElement("div",{className:"searchBox"},e)}});module.exports=SearchBox;


});


Requireify.register('js/akira/components/loaders/loadingSpinner.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),CSSAnimation=require("../../../reactMixins/cssAnimation.jsx"),LoadingSpinner=React.createClass({displayName:"LoadingSpinner",render:function(){var e=this.props.delay+"s",n=this.props.delay?CSSAnimation.getAnimationStyle({keyframes:{delay:e}}):{};return React.createElement("span",{className:"icon-spinner akira-spinner",style:n})}});module.exports=LoadingSpinner;


});


Requireify.register('js/akira/components/profile/profile.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),HeaderMenuCaret=require("../header/menuCaret.jsx"),LoadingSpinner=require("../loaders/loadingSpinner.jsx"),KeyCodes=require("../../../common/keyCodes"),Profile=React.createClass({displayName:"Profile",handleProfileClick:function(){this.props.onSwitchProfile&&this.props.onSwitchProfile(this.props.model)},handleKeyDown:function(e){switch(e&&e.which){case KeyCodes.ENTER:this.handleProfileClick()}},renderAvatar:function(e,r,a){if(a&&!this.props.useDiv)return React.createElement("img",{className:r,src:a,alt:e.profileName});if(a&&this.props.useDiv){var i={backgroundImage:"url("+a+")"};return React.createElement("div",{className:r,style:i})}return null},renderProfile:function(e,r,a){return React.createElement("li",{className:"profile-link"},this.renderAvatar(e,r,a),e.profileName&&!this.props.loading?React.createElement("span",{className:"profile-name",dangerouslySetInnerHTML:{__html:e.profileName}}):null,this.props.loading?React.createElement(LoadingSpinner,null):null)},renderLinkedProfile:function(e,r,a){return React.createElement("a",{className:"profile-link",role:"link",onClick:this.handleProfileClick,onKeyDown:this.handleKeyDown,tabIndex:"0"},this.props.useHeaderCaret?React.createElement("div",{className:"avatar-wrapper"},this.renderAvatar(e,r,a),React.createElement(HeaderMenuCaret,null)):this.renderAvatar(e,r,a),React.createElement("span",{className:"profile-name",dangerouslySetInnerHTML:{__html:e.profileName}}))},render:function(){var e=this.props.model,r=e.getValueSync(["summary"]),a=e.getValueSync(["avatar","images","byWidth",this.props.avatarWidth]),i=React.addons.classSet({activeProfile:e.isActive,"profile-icon":!0,errorLoading:this.props.errorLoadingProfile});return this.props.isClickable?this.renderLinkedProfile(r,i,a):this.renderProfile(r,i,a)}});module.exports=Profile;


});


Requireify.register('js/reactMixins/falkor-fetch.js', function(require, requireAsync, module, exports) {


"use strict";var eventBus=require("./eventBus"),AUTO_FECTH_PENDING_KEY="falkor-auto-fetch-pending";module.exports={mixins:[eventBus],getInitialState:function(){return{generation:-1,key:"",dispose:null}},_getModel:function(t){return"function"==typeof this.getFalkorModel?this.getFalkorModel(t):t.model},_hasValidModel:function(t){var e=this._getModel(t);return e&&e.get&&e.set&&e.call&&e.getValueSync},_hasPQL:function(t){var e=t.pqls;return Array.isArray(e)&&e.length},_normalize:function(t){return t.length>=1&&!Array.isArray(t[0])?[t]:t},resetFalkorCache:function(t){var e=Object.keys(t._cache).filter(function(t){return"_"!==t[0]&&"$"!==t[0]}).map(function(t){return[t]});t.invalidate.apply(t,e).subscribe()},fetchData:function(t,e,i,n,r){function a(e,a){this.state[s]&&delete this.state[s],o=!0;var l=t.getBoundValue();this.state.dispose=null,l&&l.__generation&&"error"!==l.$type&&(this.state.generation=l.__generation,this.state.key=l.__key);var h=i===AUTO_FECTH_PENDING_KEY;h&&n(null,t),this.isMounted()&&"onError"===e&&this.setState({fetchDataError:a}),u&&this.isMounted()&&r&&this.forceUpdate(),this.emit("dataFetch:complete",i||null),!h&&n&&n()}var s=JSON.stringify(t._path)+" -> "+JSON.stringify(e);if(this.state[s])return!0;this.state[s]=!0,void 0===r&&(r=!0);var o=!1,u=!1;this.state.fetchDataError=null;var l=t.get.apply(t,this._normalize(e)).subscribe(function(){},a.bind(this,"onError"),a.bind(this,"onComplete"));return u=!0,o||(this.state.dispose=l),o},isLoading:function(){return!!this.state.dispose},ensureDataLoaded:function(t,e,i){var n=this._getModel(e),r=n.getBoundValue();if(!this._hasValidModel(e))throw new Error("React Component - "+this.constructor.displayName+": Must be initialized with a Falkor PathEvaluator model.");if(!this._hasPQL(e))throw new Error("React Component - "+this.constructor.displayName+": Must be initialized with PQLs with which to request data.");return r&&r.__generation&&(this.state.generation=r.__generation,this.state.key=r.__key),this.fetchData(n,e.pqls,t?AUTO_FECTH_PENDING_KEY:null,i)}};


});


Requireify.register('js/utils/doWithTimeout.js', function(require, requireAsync, module, exports) {


"use strict";function clearTheTimeout(t){t.timeout&&(clearTimeout(t.timeout),t.timeout=null)}function operationDone(t,i){clearTheTimeout(this),this.didTimeOut||this.next.call(this.thisArg||null,t,i)}function operationTimedOut(){this.didTimeOut=!0,this.timeout=null,this.next.call(this.thisArg||null,"timeout",null)}module.exports=function(t,i,e,o){var u={op:t,timeoutMS:i,didTimeOut:!1,timeout:null,next:e,thisArg:o};u.timeout=setTimeout(operationTimedOut.bind(u),i),t(function(t,i){operationDone.call(u,t,i)})};


});


Requireify.register('js/reactMixins/falkor-auto-fetch.js', function(require, requireAsync, module, exports) {


"use strict";var FalkorFetch=require("./falkor-fetch"),doWithTimeout=require("../utils/doWithTimeout"),LOAD_TIMEOUT=15e3,ClientFalkorAutoFetch={mixins:[FalkorFetch],_isAutoLoading:!1,autoLoadDone:function(t,o){this._isAutoLoading=!1,this.emit("auto-fetch-done",t,o)},startAutoLoad:function(t){var o,i=this;o=function(o){i._isAutoLoading=!0,i.ensureDataLoaded(!0,t||i.props,o)},doWithTimeout(o,LOAD_TIMEOUT,i.autoLoadDone,i)},componentWillMount:function(){"function"==typeof this.prepareForAutoFetch&&this.prepareForAutoFetch(),this.startAutoLoad()},componentWillReceiveProps:function(t){this.startAutoLoad(t)},isAutoLoading:function(){return this._isAutoLoading}},ServerFalkorAutoFetch={isLoading:function(){return!1},isAutoLoading:function(){return!1}},IN_NODE="undefined"==typeof window;module.exports=IN_NODE?ServerFalkorAutoFetch:ClientFalkorAutoFetch;


});


Requireify.register('js/akira/components/profile/profilesDropDown.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Profile=require("./profile.jsx"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),I18N=require("../../../reactMixins/i18nWithDeps"),AVATAR_WIDTH=32,MAX_PROFILE_COUNT=5,ProfilesDropDown=React.createClass({displayName:"ProfilesDropDown",mixins:[AutoFetch,I18N],statics:{getPaths:function(){return[["profilesList","summary"],["profilesList",{to:MAX_PROFILE_COUNT},"summary"],["profilesList",{to:MAX_PROFILE_COUNT},"avatar","images","byWidth",AVATAR_WIDTH]]},__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["manage.profiles"]}]}},renderProfiles:function(){var e,r=this.props.model.bind(["profilesList"]),i=r.getValueSync(["summary"]),t=[];for(e=0;e<Math.min(i.length,MAX_PROFILE_COUNT);e++){var s=r.bind([e]);if(s){var a=s.getValueSync(["summary"]);a.isActive||t.push(React.createElement("li",{className:"sub-menu-item profile",key:"profile"+e},React.createElement(Profile,{isClickable:!0,avatarWidth:AVATAR_WIDTH,model:s,onSwitchProfile:this.props.onSwitchProfile})))}}return t},render:function(){var e=this.renderProfiles();return React.createElement("ul",{className:"sub-menu-list profiles"},e,React.createElement("li",{className:"sub-menu-item profile-link"},React.createElement("a",{className:"sub-menu-link",href:"/EditProfiles"},this.getString("discovery/akira/Chrome","manage.profiles"))))}});module.exports=ProfilesDropDown;


});


Requireify.register('js/akira/components/profile/accountDropDownMenu.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition"),AccountDropDownMenu=React.createClass({displayName:"AccountDropDownMenu",mixins:[Transition],transitions:{fadeInHover:150,fadeOut:250},render:function(){return React.createElement("div",{className:"account-drop-down sub-menu"},React.createElement("div",{className:"topbar"}),this.props.children)}});module.exports=AccountDropDownMenu;


});


Requireify.register('js/akira/components/profile/accountDropDown.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ProfilesDropDown=require("../profile/profilesDropDown.jsx"),SubMenuFunctions=require("../controls/subMenuFunctions"),Profile=require("./profile.jsx"),DVDLink=require("../search/dvdLink.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),URLs=require("../../../utils/urls"),AccountDropDownMenu=require("./accountDropDownMenu.jsx"),AVATAR_WIDTH=32,BUNDLE="discovery/akira/Chrome",AccountDropDown=React.createClass({displayName:"AccountDropDown",mixins:[I18N,SubMenuFunctions],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["account.your.account","account.help.center","account.sign.out","header.kids"]}]},getPaths:function(){return ProfilesDropDown.getPaths().concat([["profilesList","current","summary"],["profilesList","current","avatar","images","byWidth",AVATAR_WIDTH]])}},getSubMenuItems:function(){var e=this.props.model,t=this.getStrings(BUNDLE),n=[React.createElement(ProfilesDropDown,{key:"profiles",model:e,pqls:ProfilesDropDown.getPaths(),onSwitchProfile:this.props.onSwitchProfile})];return n.push(React.createElement("ul",{className:"sub-menu-list responsive-links",key:"browse-account-menu"},this.props.showKidsLink?React.createElement("li",{className:"sub-menu-item kids-responsive-link"},React.createElement("a",{onClick:this.props.onKidsLinkClicked},t.get("header.kids"))):null,this.props.showDVDLink?React.createElement("li",{className:"sub-menu-item dvd-link"},React.createElement(DVDLink,null)):null)),n.push(React.createElement("ul",{key:"account",className:"account-links sub-menu-list"},React.createElement("li",{className:"sub-menu-item"},React.createElement("a",{className:"sub-menu-link",href:URLs.page.yourAccount},t.get("account.your.account"))),React.createElement("li",{className:"sub-menu-item"},React.createElement("a",{className:"sub-menu-link",href:URLs.page.external.help},t.get("account.help.center"))),React.createElement("li",{className:"sub-menu-item"},React.createElement("a",{className:"sub-menu-link",href:URLs.page.signOut},t.get("account.sign.out"))))),n},placeHolder:function(){return null},render:function(){var e,t=this.props.model,n=t.bind(["profilesList"]),s=n.bind(["current"]),a=React.addons.classSet,c=a({"account-menu-item":!0,active:this.state.subMenuOpen});return s?(e=s.getValueSync(["summary"]),e?React.createElement("div",{className:c,onMouseEnter:this.openSubMenu,onMouseLeave:this.prepareToCloseSubMenu},React.createElement("div",{className:"account-dropdown-button"},React.createElement(Profile,{isClickable:!0,avatarWidth:AVATAR_WIDTH,model:s,useHeaderCaret:this.state.subMenuOpen}),React.createElement("span",{className:"caret"})),this.state.subMenuOpen?React.createElement(AccountDropDownMenu,{onSelect:this.closeSubMenu},this.getSubMenuItems()):null):null):this.placeHolder()}});module.exports=AccountDropDown;


});


Requireify.register('js/akira/components/header/simpleNotification.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),iconTypes={success:"icon-success-inv",warning:"icon-warn-inv",error:"icon-warn-inv",info:"icon-info-inv"};module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext],render:function(){var e="simple-notification "+this.props.type+(this.props.animated?" animated":"");return React.createElement("div",{className:e},React.createElement("p",{title:this.props.title},React.createElement("span",{className:iconTypes[this.props.type]}),React.createElement("span",{className:"simple-notification-message"},this.props.message)))}});


});


Requireify.register('js/akira/components/header/networkNotification.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18n"),SimpleNotification=require("./simpleNotification.jsx"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),BUNDLE="discovery/akira/Chrome";module.exports=React.createClass({displayName:"exports",mixins:[I18N,IsomorphicContext],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["network.down.message","network.down.tooltip"]}]}},render:function(){return React.createElement(SimpleNotification,{type:"warning",animated:!0,title:this.getString(BUNDLE,"network.down.tooltip"),message:this.getString(BUNDLE,"network.down.message")})}});


});


Requireify.register('js/akira/components/header/myListNotification.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),SimpleNotification=require("./simpleNotification.jsx"),I18N=require("../../../reactMixins/i18n"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),BUNDLE="discovery/akira/Chrome";module.exports=React.createClass({displayName:"exports",mixins:[I18N,IsomorphicContext],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["system.notification.queue.add.success","system.notification.queue.add.error","system.notification.queue.add.inqueue"]}]}},getDetails:function(){var e=this.props.model.status,t=this.props.model.reason||"",i=this.props.model.title||"";return"success"===e?{type:"success",message:this.getString(BUNDLE,"system.notification.queue.add.success",{TITLE:i})}:"AlreadyInQueue"===t?{type:"info",message:this.getString(BUNDLE,"system.notification.queue.add.inqueue",{TITLE:i})}:{type:"warning",message:this.getString(BUNDLE,"system.notification.queue.add.error")}},render:function(){var e=this.getDetails();return React.createElement(SimpleNotification,{type:e.type,message:e.message,animated:!0})}});


});


Requireify.register('js/akira/components/header/systemNotifications.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),NetworkNotification=require("./networkNotification.jsx"),MyListNotification=require("./myListNotification.jsx"),EventBus=require("../../../reactMixins/eventBus"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),SHOW_NETWORK_DOWN_DELAY=1e3,SHOW_NETWORK_UP_DELAY=1,MYLIST_NOTIFICATION_DURATION=3e3;module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext],getInitialState:function(){return{activeNetwork:!0,myListNotification:{}}},handleNetworkStatusChange:function(){var t=this;setTimeout(function(){t.setState({activeNetwork:navigator.onLine})},navigator.onLine?SHOW_NETWORK_UP_DELAY:SHOW_NETWORK_DOWN_DELAY)},setMyListNotificationTimeout:function(){var t=this;setTimeout(function(){t.setState({myListNotification:{}})},MYLIST_NOTIFICATION_DURATION)},componentDidMount:function(){var t=this;navigator&&navigator.onLine&&(window.addEventListener("online",this.handleNetworkStatusChange),window.addEventListener("offline",this.handleNetworkStatusChange)),EventBus.on("myList:add:end",function(i){i.myListNotification&&(t.setState({myListNotification:i.myListNotification}),t.setMyListNotificationTimeout())})},componentWillUnmount:function(){window.removeEventListener("online",this.handleNetworkStatusChange),window.removeEventListener("offline",this.handleNetworkStatusChange)},render:function(){return this.state.activeNetwork?this.state.myListNotification.status?React.createElement(MyListNotification,{model:this.state.myListNotification}):null:React.createElement(NetworkNotification,null)}});


});


Requireify.register('js/features/userFeatures.js', function(require, requireAsync, module, exports) {


"use strict";var ContextData=require("../utils/contextData"),UserFeatures={linkToSubtitle:function(){var e,t,r=!1,a=ContextData.getFeatureData("userContext");return a&&(e=a.geo,t=e&&e.preferredLocale,t&&(r="US"===t.country)),r}};module.exports=UserFeatures;


});


Requireify.register('js/akira/components/notifications/pill.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Pill=React.createClass({displayName:"Pill",getDefaultProps:function(){return{max:9}},makeContents:function(){return this.props.number>this.props.max?this.props.overflow||this.props.max+"+":this.props.number},render:function(){return React.createElement("span",{className:"notification-pill"},this.makeContents())}});module.exports=Pill;


});


Requireify.register('js/common/nfRx.js', function(require, requireAsync, module, exports) {


"use strict";var root="undefined"!=typeof window?window:{},Rx=root.Rx||{},noop=function(){},hasjQuery=!1;Rx.Observable=Rx.Observable||{prototype:{}};try{hasjQuery=!!jQuery}catch(e){}Rx.Observable.fromEvent||(Rx.Observable.fromEvent=function(e,r){return Rx.Observable.create(function(t){function o(){t.onNext.apply(t,arguments)}if(e.addEventListener)e.addEventListener(r,o);else{if(!(hasjQuery&&e instanceof jQuery))throw new Error("Cannot attach event listener to this object.");e.on(r,o)}return function(){if(e.removeEventListener)e.removeEventListener(r,o);else{if(!(hasjQuery&&e instanceof jQuery))throw new Error("Cannot remove event listener to this object.");e.off(r,o)}}})}),Rx.Observable.prototype.filter||(Rx.Observable.prototype.filter=Rx.Observable.prototype.where),Rx.Observable.prototype.map||(Rx.Observable.prototype.map=function(e,r){return Rx.Observable.prototype.select.call(r||this,e)}),Rx.Observable.throw||(Rx.Observable.throw=Rx.Observable.throwException),Rx.Observable.flatMap||(Rx.Observable.prototype.flatMap=Rx.Observable.prototype.selectMany),Rx.Observable.return||(Rx.Observable.return=Rx.Observable.returnValue),Rx.Observable.wrap||(Rx.Observable.wrap=function(e){return 0===arguments.length?Rx.Observable.empty():e instanceof Rx.Observable?e:e instanceof Error?Rx.Observable.throw(e):Rx.Observable.create(function(r){return r.onNext(e),r.onCompleted(),noop})}),Rx.Observable.catch||(Rx.Observable.catch=Rx.Observable.catchException),Rx.Observable.prototype.catch||(Rx.Observable.prototype.catch=Rx.Observable.prototype.catchException),Rx.Observable.prototype.retryWithBackoff=function(e,r){e=e||5,r=r||1e3;var t=this,o=r,a=1,n=Rx.Observable.defer(function(){return Rx.Observable.timer(o).flatMap(function(){return o=Math.pow(2,a++)*r,t})});return this.catch(n.retry(e))},Rx.Observable.prototype.shareReplay||(Rx.Observable.prototype.shareReplay=function(e,r,t){return this.replay(null,e,r,t).refCount()}),module.exports=Rx;


});


Requireify.register('js/utils/player/playerFeatureDetection.js', function(require, requireAsync, module, exports) {


"use strict";function determineFirefoxEMESupport(){return Rx.Observable.create(function(e){function t(t){e.onNext(t),e.onCompleted()}return"function"==typeof window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess("com.adobe.primetime",[{initDataType:"cenc"}]).then(function(){t(!0)}).catch(function(){t(!1)}):t(!1),_.noop}).timeout(FIREFOX_EME_SLA,Rx.Observable.return(!1))}function determineSafariEMESupport(){return!(!window.WebKitMediaKeys||!window.WebKitMediaKeys.isTypeSupported("com.apple.fps.2_0"))}function canPlayHTML5(){var e=context.getData("player","playbackSupport")||{},t=context.getFeatureData("browserInfo")||{},r=!1;return"maybe"===e.supportsHTML5?r=t.isSafari?determineSafariEMESupport():t.isFirefox?!!t.specialFlags.isFFWin32:!0:"yes"===e.supportsHTML5&&(r=!0),r}function hasRequiredComponentsForPlayback(){var e=context.getData("player","playbackSupport")||{},t=context.getFeatureData("browserInfo")||{},r=Rx.Observable.return(!0);return"no"===e.supportsHTML5?r=Rx.Observable.return(!1):(t.isFirefox&&t.specialFlags.isFFWin32&&(r=determineFirefoxEMESupport()),t.isSafari&&(r=Rx.Observable.return(determineSafariEMESupport()))),r}var context=require("../../utils/contextData"),Rx=require("../../common/nfRx"),_=require("lodash"),FIREFOX_EME_SLA=1e3;module.exports={canPlayHTML5:canPlayHTML5,hasRequiredComponentsForPlayback:hasRequiredComponentsForPlayback};


});


Requireify.register('js/akira/components/modals/payment.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ModalContent=require("./modalContent.jsx"),i18n=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Messaging:payment",PaymentHoldModal=React.createClass({displayName:"PaymentHoldModal",mixins:[i18n],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["headline","body","action","tease"]}]}},contextTypes:{modalDismiss:React.PropTypes.func,modalUpdate:React.PropTypes.func,videoId:React.PropTypes.number},handleButtonClick:function(){document.location="/YourAccountPayment"},buildModal:function(){var e=this.getStrings(BUNDLE),t=this;return{header:React.createElement("h2",{className:"nf-modal-heading"},e.get("headline")),body:React.createElement("div",null,React.createElement("p",{className:"payment-hold-body"},e.get("body")),React.createElement("div",{className:"nf-modal-button-bar"},React.createElement("button",{className:"akira-button akira-button-red",onClick:t.handleButtonClick},e.get("action")))),footer:React.createElement("div",{className:"payment-hold-footer"},React.createElement("img",{src:"https://secure.netflix.com/ffe/siteui/akira/payments/awesome-titles.png",alt:""}),React.createElement("p",{className:"payment-hold-tease"},e.get("tease")))}},render:function(){return React.createElement(ModalContent,React.__spread({},this.buildModal()))}});module.exports=PaymentHoldModal;


});


Requireify.register('js/akira/components/messaging/paymentHold.js', function(require, requireAsync, module, exports) {


"use strict";function preventPlay(e){return!!_.get(e,"uma.presentationAttributes.PREVENT_PLAY",!1)}function modalClosedHandler(){showOptionally=!1}var _=require("lodash"),EventBus=require("../../../reactMixins/eventBus"),ModalManager=require("../modals/modalManager.jsx"),PaymentHoldModal=require("../modals/payment.jsx"),openedOnce=!1,showOptionally=!0,PaymentHold={preventPlay:preventPlay,potentiallyOpen:function(e,a){var n=e.showingProfileGate||!1;"undefined"!=typeof window&&!n&&preventPlay(e.umaData)&&(showOptionally||a)&&(openedOnce||EventBus.once("modal:close:paymentHoldModal",modalClosedHandler),ModalManager.open(PaymentHoldModal,{name:"paymentHoldModal",additionalClasses:["payment-hold-modal"]}),openedOnce=!0)}};module.exports=PaymentHold;


});


Requireify.register('js/reactMixins/appstate.js', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),root="undefined"!=typeof window?window:{};module.exports={contextTypes:{jsongDocument:React.PropTypes.object},getJSongDoc:function(){return this.context&&this.context.jsongDocument?this.context.jsongDocument:root.pathEvaluator},getAppStateModel:function(t){return this.getJSongDoc().bind(["appstate"].concat(t))}};


});


Requireify.register('js/reactMixins/akiraContext.js', function(require, requireAsync, module, exports) {


"use strict";var React=require("react");module.exports={contextTypes:{currentPage:React.PropTypes.string,columnsInRow:React.PropTypes.number.isRequired,rowNum:React.PropTypes.number,rankNum:React.PropTypes.number,requestId:React.PropTypes.string,trackId:React.PropTypes.number,jawBoneTrackId:React.PropTypes.number,jawBoneEpisodeTrackId:React.PropTypes.number,jawBoneTrailerTrackId:React.PropTypes.number,parentContext:React.PropTypes.object}};


});


Requireify.register('js/akira/components/controls/playLink.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),_=require("lodash"),Link=require("./mainViewLink.jsx"),PlayerCompatibility=require("../../../utils/player/playerFeatureDetection"),URLs=require("../../../utils/urls"),Context=require("../../../utils/contextData"),Position=require("../../../common/position"),PaymentHold=require("../messaging/paymentHold.js"),AppState=require("../../../reactMixins/appstate"),AkiraContext=require("../../../reactMixins/akiraContext"),I18N=require("../../../reactMixins/i18n"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),Animation=require("../../../reactMixins/cssAnimation.jsx"),EventBus=require("../../../reactMixins/eventBus"),BUNDLE="discovery/akira/Billboard",PlayLink=React.createClass({displayName:"PlayLink",contextTypes:{audioDescription:React.PropTypes.bool},mixins:[I18N,AppState,Animation,Router.Navigation,AkiraContext,IsomorphicContext],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["billboard.actions.watchNow"]}]}},handleClick:function(e,t){EventBus.emit("playback:requestPlay",_.assign({},this.context,this.props));var i=this.getFeatureData("umaData")||null;return PaymentHold.preventPlay(i)?(PaymentHold.potentiallyOpen({umaData:i},!0),e.preventDefault(),void 0):this.props.disableClick?!1:this.props.skipTransition?!0:this.transitionToPlayer(t)},handlerHover:function(){EventBus.emit("play:focus",this.props)},transitionToPlayer:function(e){var t=document.getElementsByClassName("bd"),i=t.length&&t[0],r=!1,a=750,n=this;if(!i)return!0;var s=Position.getScrollTop()+Math.floor(Position.getWindowRect().height/2);document.body.style.overflowX="hidden";var o=function(){r||(r=!0,document.body.style.overflowX=null,n.transitionTo("watchNow",e.params,e.query))};return setTimeout(o,a+100),this.animate({target:i,before:{origin:"50% "+s+"px"},scale:1.04,opacity:0,duration:a,easing:"easeIn",after:{reset:!0,opacity:0},callback:o}),!1},buildUIPlayContext:function(){var e=this.context.rowNum,t=this.context.rankNum,i=this.context.requestId;return e+","+t+","+i},renderMerchwebPlayerLink:function(){var e=URLs.getMerchWebPlayerUrl(this.props.episodeId||this.props.videoId,this.context.trackId,this.buildUIPlayContext(),this.context.audioDescription);return React.createElement("a",React.__spread({},this.props,{tabIndex:this.props.tabIndex,href:e}),this.props.children)},renderMobilePlayerLink:function(){var e={};e[URLs.param.merchweb.trackId]=this.context.trackId,e[URLs.param.merchweb.uiPlayContext]=this.buildUIPlayContext();var t=URLs.makeAkiraPlayerUrl(this.props.episodeId||this.props.videoId,e);return React.createElement("a",React.__spread({},this.props,{tabIndex:this.props.tabIndex,href:t}),this.props.children)},render:function(){var e=this.getFeatureData("browserInfo");if(e.isIOS||e.isAndroid)return this.renderMobilePlayerLink();if(!PlayerCompatibility.canPlayHTML5()||"merchweb"===Context.getData("player","pageType"))return this.renderMerchwebPlayerLink();var t={trackId:this.context.trackId,tctx:this.buildUIPlayContext()};this.context.audioDescription===!0&&(t.ad="true");var i=this.props.episodeId||this.props.videoId;return"undefined"!=typeof this.props.startTime&&(t.t=this.props.startTime),React.createElement(Link,React.__spread({},this.props,{type:"watchNow",params:{id:i},query:t,onClick:this.handleClick,onMouseEnter:this.handlerHover,tabIndex:this.props.tabIndex,role:"link","aria-label":this.getString(BUNDLE,"billboard.actions.watchNow")}),this.props.children)}});module.exports=PlayLink;


});


Requireify.register('js/akira/components/notifications/notification-playable.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PlayLink=require("../controls/playLink.jsx"),Link=require("../controls/mainViewLink.jsx"),Notification=React.createClass({displayName:"Notification",getDefaultProps:function(){return{rowNum:-2,rankNum:-2,trackId:2}},childContextTypes:{rowNum:React.PropTypes.number,rankNum:React.PropTypes.number,trackId:React.PropTypes.number},getChildContext:function(){return{rowNum:this.props.rowNum,rankNum:this.props.rankNum,trackId:this.props.trackId}},render:function(){var e=React.addons.classSet,t=e({notification:!0,"image-notification":!0,"is-new":this.props.isNew});return React.createElement("div",{className:t},React.createElement(PlayLink,{videoId:this.props.videoId,row:-1,className:"image-notification-image playLink"},React.createElement("img",{className:"title-card",src:this.props.imageSrc,alt:"temp image"}),React.createElement("div",{className:"play-action"},React.createElement("div",{className:"playable-icon"},React.createElement("div",{className:"playRing"},React.createElement("div",{className:"play icon-play"}))))),React.createElement(Link,{type:"title",id:this.props.videoId,className:"image-notification-text"},React.createElement("h3",{className:"notification-headline"},this.props.headline),React.createElement("h4",{className:"notification-subheadline"},this.props.subheadline),React.createElement("p",{className:"notification-age"},this.props.ageString)))}});module.exports=Notification;


});


Requireify.register('js/akira/components/notifications/notification-empty.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),EmptyNotification=React.createClass({displayName:"EmptyNotification",render:function(){var t=React.addons.classSet,e=t({notification:!0,"empty-notification":!0});return React.createElement("div",{className:e},React.createElement("div",null,this.props.message))}});module.exports=EmptyNotification;


});


Requireify.register('js/akira/components/notifications/notifications.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),I18N=require("../../../reactMixins/i18nWithDeps"),FalkorFetch=require("../../../reactMixins/falkor-fetch"),SubMenuFunctions=require("../controls/subMenuFunctions"),ScrollLock=require("../../../reactMixins/scrollLock"),Pill=require("./pill.jsx"),HeaderMenuCaret=require("../header/menuCaret.jsx"),SubMenu=require("../controls/subMenu.jsx"),PlayableNotification=require("./notification-playable.jsx"),EmptyNotification=require("./notification-empty.jsx"),BUNDLE="discovery/akira/Notifications",READ_TIME_MS=3e3,Notifications=React.createClass({displayName:"Notifications",mixins:[I18N,SubMenuFunctions,ScrollLock,FalkorFetch],statics:{getPaths:function(){return[["notifications",["fullList","unreadCount","latestTimestamp"]]]},__meta__:{strings:[{bundle:BUNDLE,all:!0}]}},getInitialState:function(){return{readTimer:null,notificationsRead:!1}},_formatTimeDiff:function(e,t){if(!_.isNumber(e)||!_.isNumber(t))return"";var i=Math.floor((t-e)/864e5);return 0>i?"":1>i?this.getString(BUNDLE,"notifications.timestamp.today"):1===i?this.getString(BUNDLE,"notifications.timestamp.dayAgo",{num:1}):7>i?this.getString(BUNDLE,"notifications.timestamp.daysAgo",{num:i}):14>i?this.getString(BUNDLE,"notifications.timestamp.weekAgo",{num:1}):29>i?this.getString(BUNDLE,"notifications.timestamp.weeksAgo",{num:Math.floor(i/7)}):57>i?this.getString(BUNDLE,"notifications.timestamp.monthAgo",{num:1}):this.getString(BUNDLE,"notifications.timestamp.monthsAgo",{num:Math.floor(i/28)})},_notificationBuilders:{empty:function(){return React.createElement(EmptyNotification,{message:this.getString(BUNDLE,"notifications.defaults.noRecentNotifications")})},NewSeasonAlert:function(e){var t=e.message,i=e.trkIds,n={headline:this.getString(BUNDLE,"notifications.newseason.header"),subheadline:this.getString(BUNDLE,["notifications.newseason",t.video.isMulti?"multiple":"single",t.video.showType.toLowerCase()].join("."),{seasonNumber:t.video.newSeasonNumber,seasonCount:t.video.seasonCount}),age:this._formatTimeDiff(t.created,(new Date).getTime())};return React.createElement(PlayableNotification,{isNew:!t.isRead,headline:n.headline,subheadline:n.subheadline,ageString:n.age,imageSrc:t.video.boxArt,trackId:i.playerTrkId,videoId:t.video.videoId})}},_generateNotificationList:function(e){var t=this,i=[];return _.forEach(e,function(e,n){e.message&&e.message.msgType&&t._notificationBuilders.hasOwnProperty(e.message.msgType)&&"function"==typeof t._notificationBuilders[e.message.msgType]&&i.push(React.createElement("li",{className:"notifications-element",key:"notification-"+n,onClick:t._closeSubMenu},t._notificationBuilders[e.message.msgType].call(t,e)))}),0===i.length&&i.push(React.createElement("li",{className:"notifications-element",key:"notification-empty",onClick:t._closeSubMenu},t._notificationBuilders.empty.call(t))),[React.createElement("ul",{ref:"notifications-scroller",className:"notifications-container"},i)]},_markNotificationsAsRead:function(){this.setState({readTimer:null});var e=this,t=this.props.model.pathEvaluator.bind(["notifications"]);t.getValueSync(["unreadCount"])&&this.props.model.pathEvaluator.call(["notifications","markRead"],[t.getValueSync(["latestTimestamp"])],[],[]).subscribe(function(){e.forceUpdate()},function(){e.forceUpdate()})},_closeSubMenu:function(){this.prepareToCloseSubMenu(),this.state.notificationsRead&&this._markNotificationsAsRead()},componentDidUpdate:function(e,t){var i=this;this.state.subMenuOpen===!0&&t.subMenuOpen===!1?i.state.readTimer||i.setState({readTimer:window.setTimeout(function(){i.setState({notificationsRead:!0}),i.forceUpdate()},READ_TIME_MS)}):this.state.subMenuOpen===!1&&t.subMenuOpen===!0&&(i.state.readTimer&&(window.clearTimeout(i.state.readTimer),i.setState({readTimer:null})),i.scrollUnlock())},render:function(){var e=this,t=e.props.model.pathEvaluator.bind(["notifications"]),i=t.getValueSync(["fullList"]),n=t.getValueSync(["unreadCount"]);return React.createElement("span",{className:"notifications",onMouseEnter:e.prepareToOpenSubMenu,onMouseLeave:e._closeSubMenu},React.createElement("button",{className:"notifications-menu"},React.createElement("span",{className:"icon-button-notification"}),n>0?React.createElement(Pill,{number:n}):null,e.state.subMenuOpen?React.createElement(HeaderMenuCaret,null):null),e.state.subMenuOpen?React.createElement(SubMenu,{cols:1,onMouseEnter:function(){e.scrollLock("notifications-scroller")},onMouseLeave:function(){e.scrollUnlock()},showCalloutArrow:!1,items:e._generateNotificationList(i)}):null)}});module.exports=Notifications;


});


Requireify.register('js/akira/components/header/appHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),GenreNavItem=require("./genreNavItem.jsx"),DVDLink=require("../search/dvdLink.jsx"),SearchBox=require("../search/searchBox.jsx"),AccountDropDown=require("../profile/accountDropDown.jsx"),SystemNotifications=require("./systemNotifications.jsx"),Link=require("../controls/mainViewLink.jsx"),BrowserScroll=require("../../../reactMixins/browserScroll"),FalkorFetch=require("../../../reactMixins/falkor-fetch"),I18N=require("../../../reactMixins/i18n"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),URLs=require("../../../utils/urls"),Position=require("../../../common/position"),UserFeatures=require("../../../features/userFeatures"),Notifications=require("../notifications/notifications.jsx"),prefetchStrategies={minimum:{headerDropDowns:!1,accountDropDown:!0},maximum:{headerDropDowns:!0,accountDropDown:!0}},defaultStrategy=prefetchStrategies.minimum,headerDropDowns=prefetchStrategies.maximum,getPaths=function(e,t){var s=[];return t||(t=defaultStrategy),t.headerDropDowns&&(s=GenreNavItem.getPaths().map(function(e){return["genreList"].concat(e)})),(t.headerDropDowns||t.accountDropDown)&&(s=s.concat(AccountDropDown.getPaths())),s=s.concat(Notifications.getPaths())},BUNDLE="discovery/akira/Chrome:navitem",Header=React.createClass({displayName:"Header",mixins:[I18N,FalkorFetch,BrowserScroll,IsomorphicContext],FADE_IN_THRESHOLD:1,multipleKidsProfiles:!1,showKids:!1,kidProfile:null,statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["home","my.list","new.arrivals","subtitles","ways.to.watch","kids"]}]},getPaths:getPaths,defaultStrategy:defaultStrategy,fullHeaderStrategy:headerDropDowns},getInitialState:function(){var e=!this.props.pinned;return{hasBackground:!1,isSearchBoxFocused:!!this.props.term,trackPinning:e,scrolling:e}},componentWillReceiveProps:function(e){var t=!e.pinned;this.state.trackPinning!==t&&this.setState({trackPinning:t,scrolling:t})},onScroll:function(){if(this.state.trackPinning){var e=this.refs.hdSpace.getDOMNode(),t=e.getBoundingClientRect().top,s=t>0;s!==this.state.scrolling&&this.setState({scrolling:s})}var i=Position.getScrollTop(),a=i>=this.FADE_IN_THRESHOLD&&!this.state.hasBackground||i<this.FADE_IN_THRESHOLD&&this.state.hasBackground;a&&this.setState({hasBackground:!this.state.hasBackground})},handleSearchBoxFocus:function(e){this.setState({isSearchBoxFocused:e})},componentDidMount:function(){var e=prefetchStrategies.maximum;this.fetchData(this.props.pathEvaluator,getPaths(this.getContext(),e,"headerMount",null,e.forceUpdate)),this.onScroll()},onKidsLinkClicked:function(){return this.multipleKidsProfiles?this.props.showProfilesGate():this.kidProfile?this.props.onSwitchProfile(this.kidProfile):this.props.showProfilesGate(),!1},determineKidsStatus:function(){var e,t,s,i=this.props.pathEvaluator.bind(["profilesList"]),a=i.getValueSync(["summary"]),r=0;if(this.multipleKidsProfiles=!1,this.showKids=!1,this.kidProfile=null,a)for(s=0;s<a.length;s++)e=i.bind([s]),e&&(t=e.getValueSync(["summary"]),t.isKids&&(this.showKids=!0,this.kidProfile=e,r>=1&&(this.multipleKidsProfiles=!0),r++))},getSpecialItems:function(){var e,t,s=[],i=this.getFeatureData("userContext"),a="en";i&&(e=i.geo,t=e&&e.preferredLocale,t&&(a=t.language));var r=this.getStrings(BUNDLE);return s=[React.createElement(Link,{className:"sub-menu-link",type:"home"},r.get("home")),React.createElement(Link,{className:"sub-menu-link",type:"queue"},r.get("my.list")),React.createElement(Link,{className:"sub-menu-link",type:"newArrivals"},r.get("new.arrivals"))],UserFeatures.linkToSubtitle()&&s.push(React.createElement(Link,{className:"sub-menu-link",type:"subtitle",id:a},r.get("subtitles"))),s.push(React.createElement(Link,{className:"sub-menu-link",type:"waysToWatch"},r.get("ways.to.watch"))),s},render:function(){var e,t=this.getStrings(BUNDLE),s=this.props.pathEvaluator,i=!1,a=this.getFeatureData("userInfo"),r=React.addons.classSet({"akira-header":!0,"head-opaque":this.state.hasBackground,"search-focused":this.state.isSearchBoxFocused,scrollingHeader:this.state.scrolling,"profile-gated":this.props.showingProfilesGate});return a&&(i="US"===a.countryOfSignup),this.getFastProperty("netflix.ui.browse.special.items.disable")||(e=this.getSpecialItems()),this.determineKidsStatus(),React.createElement("div",{className:"hdSpace",ref:"hdSpace"},React.createElement("div",{id:"hdPinTarget",className:r},React.createElement(Link,{className:"logo icon-logoUpdate",type:"home"}),this.props.showingProfilesGate?null:React.createElement("ul",null,React.createElement(GenreNavItem,{model:s.bind(["genreList"]),selected:!0,itemType:"genre",pqls:GenreNavItem.getPaths(),className:"browse",specialItems:e}),this.showKids?React.createElement("li",{className:"kids"},React.createElement(Link,{onClick:this.onKidsLinkClicked,href:URLs.page.merchweb.kidsHome},t.get("kids"))):null,i?React.createElement("li",{className:"dvd-link"},React.createElement(DVDLink,null)):null),this.props.showingProfilesGate?null:React.createElement("div",{className:"secondary-nav"},React.createElement("div",{className:"nav-element"},React.createElement(SearchBox,{term:this.props.term,model:this.props.model,ref:"searchBox",handleSearchBoxFocus:this.handleSearchBoxFocus})),React.createElement("div",{className:"nav-element"},React.createElement(Notifications,{className:"nav-element",model:this.props.model})),React.createElement("div",{className:"nav-element"},React.createElement(AccountDropDown,{className:"nav-element",model:s,showDVDLink:i,showKidsLink:this.showKids,onKidsLinkClicked:this.onKidsLinkClicked,onSwitchProfile:this.props.onSwitchProfile}))),React.createElement(SystemNotifications,{model:this.props.model})))}});module.exports=Header;


});


Requireify.register('js/akira/components/footer/appFooter.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),I18N=require("../../../reactMixins/i18n"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),Urls=require("../../../utils/urls"),XHR=require("../../../utils/XHR"),BUNDLE="discovery/akira/Chrome:footer",LINKS={membership:[{labelKey:"subtitles",url:Urls.page.subtitles},{labelKey:"testing",url:Urls.page.doNotTest},{labelKey:"audiodescription",url:Urls.page.audioDescription},{labelKey:"help",url:Urls.page.external.help}],company:[{labelKey:"about",url:Urls.page.external.pr},{labelKey:"investors",url:Urls.page.external.investors},{labelKey:"mediaCenter",url:Urls.page.external.mediaCenter},{labelKey:"jobs",url:Urls.page.external.jobs},{labelKey:"contact",url:Urls.page.external.contact},{labelKey:"blog",url:Urls.getBlogUrl()}],getStringsForSection:function(e){return this[e].map(function(e){return"link."+e.labelKey})}},FAILED_AUTH_CODE="888000",Footer=React.createClass({displayName:"Footer",mixins:[I18N,IsomorphicContext],formatAuthCode:function(e){return[e.slice(0,3),e.slice(3)].join("-")},serviceXHRSuccess:function(e){this.setState({serviceCode:this.formatAuthCode(_.get(e,"data.authCode",FAILED_AUTH_CODE))})},serviceXHRError:function(){this.setState({serviceCode:this.formatAuthCode(FAILED_AUTH_CODE)})},handleServiceClick:function(){XHR.request({method:"post",data:{},resource:"/JSON/AuthCode",service:"merchweb",authorize:!0}).subscribe(this.serviceXHRSuccess,this.serviceXHRError)},shouldShowTOUUpdated:function(){var e=this.getFastProperty("netflix.ui.footer.show_tou_updated")||{};if(_.isEmpty(e))return!1;var t=new Date(e[_.get(this.getFeatureData("geo"),"preferredLocale.country")]);return _.isDate(t)&&isFinite(t)&&Date.now()<=t.getTime()},render:function(){var e=this.getStrings(BUNDLE),t=e.get(this.shouldShowTOUUpdated()?"termsUpdated":"terms",{termsUrl:Urls.page.termsOfUse,privacyUrl:Urls.page.privacyPolicy}),r=e.get("cookies",{cookiePolicyUrl:Urls.page.cookiePolicy}),a=this.state&&this.state.serviceCode||e.get("serviceCode"),s=this.getFeatureData("serverDefs"),i=s?"("+s.instance+")":"";return React.createElement("div",{className:"global-footer"},React.createElement("div",{className:"footer-links"},this.renderLinkSection("membership",e),this.renderLinkSection("company",e)),React.createElement("div",{className:"legal-wrap"},React.createElement("div",{className:"service-code",dangerouslySetInnerHTML:{__html:a},onClick:this.handleServiceClick}),React.createElement("div",{className:"legal-text-wrap"},React.createElement("div",{dangerouslySetInnerHTML:{__html:t}}),React.createElement("div",null,React.createElement("a",{dangerouslySetInnerHTML:{__html:r},href:"/Cookies"}),React.createElement("span",{className:"instance"},i)))))},renderLinkSection:function(e,t){var r=function(e,t){return e.concat(t)},a=LINKS[e].map(function(e,r){var a=null,s=e.url;if(0!==r&&(a=React.createElement("span",{key:"separator"+r}," | ")),"subtitles"===e.labelKey){var i,l,n=this.getFeatureData("userContext"),o="en";n&&(i=n.geo,l=i&&i.preferredLocale,l&&(o=l.language)),s=s+"/"+o}return[a,React.createElement("a",{key:e.labelKey,href:s},t.get("link."+e.labelKey))]}.bind(this)).reduce(r);return React.createElement("div",{className:"link-row"},React.createElement("h3",null,t.get("heading."+e)),React.createElement("div",{className:"links"},a))}});Footer.__meta__={strings:[{bundle:BUNDLE,ids:["serviceCode","terms","termsUpdated","cookies","copyright","heading.membership","heading.company"].concat(LINKS.getStringsForSection("membership")).concat(LINKS.getStringsForSection("company"))}]},module.exports=Footer;


});


Requireify.register('js/akira/components/profile/profileChoices.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Profile=require("../profile/profile.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),EventBus=require("../../../reactMixins/eventBus"),AVATAR_WIDTH=320,MAX_PROFILE_COUNT=5,BUNDLE="discovery/akira/Chrome";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["add.profile"]}]}},renderChooseableProfiles:function(){var e,r,i=this.props.model.getValueSync(["summary"]),t=Math.min(i.length,MAX_PROFILE_COUNT),a=[];for(e=0;t>e;e++)r=this.props.model.bind([e]),r&&a.push(React.createElement("li",{className:"profile",key:"profile"+e,ref:"profile"+e},React.createElement(Profile,{useDiv:!0,isClickable:!0,avatarWidth:AVATAR_WIDTH,model:r,onSwitchProfile:this.props.onSwitchProfile})));return a},renderAddProfile:function(){return React.createElement("li",null,React.createElement("a",{onClick:this.props.onAddProfile},React.createElement("div",{className:"addProfileIcon icon-tvuiAdd"}),React.createElement("span",{className:"profile-name"},this.getString(BUNDLE,"add.profile"))))},componentWillMount:function(){this.props.profileSelectorHidden||EventBus.emit("app:pageChange",{uiView:"profilesGate"})},render:function(){var e=this.props.model.getValueSync(["summary"]),r=e.length<MAX_PROFILE_COUNT;return React.createElement("ul",{className:"choose-profile"},this.renderChooseableProfiles(),r?this.renderAddProfile():null)}});


});


Requireify.register('js/akira/components/profile/profileLoad.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Profile=require("../profile/profile.jsx"),Transition=require("../../../reactMixins/transition"),EventBus=require("../../../reactMixins/eventBus"),AVATAR_WIDTH=320;module.exports=React.createClass({displayName:"exports",mixins:[Transition],transitions:{show:{target:"loadingProfileWrapper",before:{scale:.6,opacity:0},scale:.4,opacity:1,duration:450,delay:450},hide:{target:"loadingProfileWrapper",scale:.6,opacity:0,duration:350}},componentWillMount:function(){EventBus.emit("app:pageChange",{uiView:"profileLoading"})},render:function(){var e=this.props.newProfile;return e?React.createElement("ul",{className:"loadingProfileWrapper",ref:"loadingProfileWrapper"},React.createElement(Profile,{useDiv:!0,linked:!1,loading:!0,avatarWidth:AVATAR_WIDTH,errorLoadingProfile:this.props.errorLoadingProfile,model:e})):null}});


});


Requireify.register('js/akira/components/profile/profileLoadError.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/partials/profiles_gate";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["switch.error","switch.button.tryAgain"]}]}},clickHandler:function(){this.props.onRetryProfile()},render:function(){return React.createElement("p",{className:"profile-load-error"},this.getString(BUNDLE,"switch.error"),React.createElement("span",{className:"profile-button",onClick:this.clickHandler},React.createElement("span",null,this.getString(BUNDLE,"switch.button.tryAgain"))))}});


});


Requireify.register('js/akira/components/profile/create/profileTooltip.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../../reactMixins/transition"),classes="kids-profile-tooltip",ProfileTooltip=React.createClass({displayName:"ProfileTooltip",mixins:[Transition],transitions:{show:{target:classes,before:{opacity:0},opacity:1,duration:350,delay:400},hide:{target:classes,opacity:0,duration:350,delay:100}},render:function(){return React.createElement("span",{className:classes,ref:classes},this.props.tooltipText)}});module.exports=ProfileTooltip;


});


Requireify.register('js/akira/components/loaders/loadingBox.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react");module.exports=React.createClass({displayName:"exports",render:function(){var e=React.addons.classSet,s=this.props.pulsate,a=this.props.displayWhenNotPulsing,t=this.props.boxClassNames,r=this.props.delay+"s",l=s?{WebkitAnimationDelay:r,AnimationDelay:r}:{};return t.pulsate=s&&a,t["pulsate-transparent"]=s&&!a,t["no-pulsate"]=!s&&a,React.createElement("div",{className:e(t),style:l})}});


});


Requireify.register('js/akira/components/profile/create/profileImage.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../../reactMixins/transition"),IMAGE_REF="profileImage",ProfileImage=React.createClass({displayName:"ProfileImage",mixins:[Transition],transitions:{show:{target:IMAGE_REF,before:{opacity:0,scale:.6},opacity:1,scale:1,duration:400}},render:function(){return React.createElement("img",{src:this.props.profileAvatarSrc,ref:IMAGE_REF})}});module.exports=ProfileImage;


});


Requireify.register('js/akira/components/profile/create/profileAvatar.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),LoadingBox=require("../../loaders/loadingBox.jsx"),ProfileImage=require("./profileImage.jsx"),ProfileAvatar=React.createClass({displayName:"ProfileAvatar",render:function(){var e={loadingTitle:!0};return this.props.profileAvatarSrc?React.createElement(ProfileImage,{profileAvatarSrc:this.props.profileAvatarSrc}):React.createElement(LoadingBox,{boxClassNames:e,delay:0,pulsate:!0,displayWhenNotPulsing:!0})}});module.exports=ProfileAvatar;


});


Requireify.register('js/akira/components/profile/profileCreate.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),I18N=require("../../../reactMixins/i18nWithDeps"),Transition=require("../../../reactMixins/transition"),XHR=require("../../../utils/XHR"),KeyCodes=require("../../../common/keyCodes"),ProfileTooltip=require("./create/profileTooltip.jsx"),ProfileAvatar=require("./create/profileAvatar.jsx"),AVATAR_WIDTH=320,BUNDLE="discovery/partials/profiles_gate:addProfile",DEFAULT_PROFILE_NAME_VALUE="",PROFILE_DATA_TIMEOUT=5e3;module.exports=React.createClass({displayName:"exports",mixins:[I18N,Transition],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["header","subHeader","label.kids","error.name","error.create","button.continue","button.cancel","placeholder.name","tooltip.kids"]}]}},transitions:{show:{target:"add-profile",before:{scale:1.1,opacity:0},scale:1,opacity:1,duration:450}},getInitialState:function(){return{showKidsTooltip:!1,newProfileIsForAKid:!1,newProfileName:DEFAULT_PROFILE_NAME_VALUE,newProfileRequested:!1,newProfileAvatarSrc:null,newProfileAvatarName:null,attemptedInvalidNewProfile:!1,attemptedNewProfileTimeout:!1}},getAvatarsXHRSuccess:function(e){var t,i=this,a={newProfileAvatarSrc:null,newProfileAvatarName:null},r=new Image;_.isObject(e)&&e.avatars&&(t=_.find(e.avatars,function(e){return e.isDefault}),t&&(a={newProfileAvatarSrc:t.images&&t.images[AVATAR_WIDTH],newProfileAvatarName:t.name})),a.newProfileAvatarSrc&&a.newProfileAvatarName?(r.addEventListener("load",function s(){r.removeEventListener("load",s),i.setState(a)}),r.src=a.newProfileAvatarSrc,this.setState({newProfileAvatarName:a.newProfileAvatarName})):this.setState(a)},getAvatarsXHRError:function(){var e={newProfileAvatarSrc:null,newProfileAvatarName:null};this.isMounted()&&this.setState(e)},componentWillMount:function(){XHR.request({resource:"/profiles/avatars",query:{include:"available"},service:"api"}).subscribe(this.getAvatarsXHRSuccess,this.getAvatarsXHRError)},componentDidMount:function(){this.refs["profile-name-entry"].getDOMNode().focus()},isValidData:function(){return this.state.newProfileName!==DEFAULT_PROFILE_NAME_VALUE},inputNameHandler:function(e){this.setState({newProfileName:e.target.value.trim()})},inputNameKeyUpHandler:function(e){e&&e.which===KeyCodes.ENTER&&this.clickContinueHandler()},newProfileXHRError:function(){this.isMounted()&&this.setState({attemptedNewProfileTimeout:!0})},createNewProfile:function(){this.isValidData()&&(this.state.attemptedNewProfileTimeout&&this.setState({attemptedNewProfileTimeout:!1}),XHR.request({resource:"/profiles/create",service:"api",protocol:"https",method:"post",data:{profiles:JSON.stringify([{firstName:this.state.newProfileName,avatarName:this.state.newProfileAvatarName,jfk:this.state.newProfileIsForAKid}])},timeout:PROFILE_DATA_TIMEOUT,authorize:!0}).subscribe(this.props.onSuccessAddProfile,this.newProfileXHRError))},clickContinueHandler:function(){this.isValidData()?this.createNewProfile():this.setState({attemptedInvalidNewProfile:!0})},clickCancelHandler:function(){this.props.onCancelAddProfile()},clickKidsLabelHandler:function(){this.setState({newProfileIsForAKid:!this.state.newProfileIsForAKid})},targetValidForTooltip:function(e){return this.refs["add-kids-profile"].getDOMNode().contains(e)||this.refs["add-kids-label"].getDOMNode().contains(e)||this.refs["add-kids-marker"].getDOMNode().contains(e)},mouseOverKidsLabel:function(e){this.getTooltip()&&this.targetValidForTooltip(e.target)&&(clearTimeout(this.timeoutHideKidsLabel),this.state.showKidsTooltip||this.setState({showKidsTooltip:!0}))},mouseOutKidsLabel:function(e){var t=this;this.getTooltip()&&!this.targetValidForTooltip(e.relatedTarget)&&(clearTimeout(this.timeoutHideKidsLabel),this.state.showKidsTooltip&&(this.timeoutHideKidsLabel=setTimeout(function(){t.setState({showKidsTooltip:!1})},400)))},getTooltip:function(){var e=this.getString(BUNDLE,"tooltip.kids");return e.indexOf("addProfile")<0?e:!1},render:function(){var e=this.getTooltip(),t=this.isValidData(),i=!t&&this.state.attemptedInvalidNewProfile,a=this.state.attemptedNewProfileTimeout,r=React.addons.classSet,s=this.getStrings(BUNDLE),o=r({"profile-button":!0,"preferred-action":!0,"preferred-active":t}),l=r({"name-error":i});return React.createElement("div",{className:"add-profile",ref:"add-profile"},React.createElement("h1",null,s.get("header")),React.createElement("h2",null,s.get("subHeader")),React.createElement("div",{className:"profile-metadata profile-entry"},React.createElement(ProfileAvatar,{profileAvatarSrc:this.state.newProfileAvatarSrc}),React.createElement("div",{className:"profile-entry-inputs",onMouseOver:this.mouseOverKidsLabel,onMouseOut:this.mouseOutKidsLabel},i?React.createElement("p",{className:"profile-entry-error"},s.get("error.name")):null,a?React.createElement("p",{className:"profile-entry-error"},s.get("error.create")):null,React.createElement("input",{type:"text",className:l,ref:"profile-name-entry",placeholder:s.get("placeholder.name"),onChange:this.inputNameHandler,onKeyUp:this.inputNameKeyUpHandler}),React.createElement("input",{type:"checkbox",id:"add-kids-profile",ref:"add-kids-profile",checked:this.state.newProfileIsForAKid,onChange:this.NOOP}),React.createElement("label",{htmlFor:"add-kids-profile",ref:"add-kids-label",onClick:this.clickKidsLabelHandler}),React.createElement("span",{className:"add-kids-marker",ref:"add-kids-marker",onClick:this.clickKidsLabelHandler},s.get("label.kids")),e&&this.state.showKidsTooltip?React.createElement(ProfileTooltip,{tooltipText:e}):null)),React.createElement("span",{className:o,onClick:this.clickContinueHandler},React.createElement("span",null,s.get("button.continue"))),React.createElement("span",{className:"profile-button",onClick:this.clickCancelHandler},React.createElement("span",null,s.get("button.cancel"))))}});


});


Requireify.register('js/utils/cookieUtils.js', function(require, requireAsync, module, exports) {


"use strict";var EXPIRY_ENUM={NEVER:"NEVER"},EXPIRY_TIMES={NEVER:new Date(2025,1,1),CLEAR:new Date(1970,1,1)};module.exports={EXPIRES:EXPIRY_ENUM,ROOT_PATH:"/",TOP_DOMAIN:".netflix.com",set:function(e,t,n,E,o){var i=e+"="+encodeURIComponent(t);n===EXPIRY_ENUM.NEVER?n=EXPIRY_TIMES.NEVER:n instanceof Date||(n=null),i+="; expires="+(n?n.toUTCString():null),i+="; path="+("undefined"!=typeof o?o:"/"),"undefined"!=typeof E&&(i+="; domain="+E),document.cookie=i},get:function(e){var t,n,E,o,i,R=document.cookie.split(";");for(t=0;t<R.length;t++)if(n=R[t],i=n.indexOf("="),E=n.substr(0,i),o=n.substr(i+1),E=E.replace(/^\s+|\s+$/g,""),E===e)return decodeURIComponent(o);return null},clear:function(e,t,n){this.set(e,"",EXPIRY_TIMES.CLEAR,t||this.TOP_DOMAIN,n||this.ROOT_PATH)}};


});


Requireify.register('js/reactMixins/prefetch.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={getStrategy:function(t){var e=this.getFastProperty(t);return"string"==typeof e?JSON.parse(e):"object"==typeof e?e:null}};


});


Requireify.register('js/reactMixins/prefetchWithDeps.js', function(require, requireAsync, module, exports) {


"use strict";var IsomorphicContext=require("./isomorphicContext"),Prefetch=require("./prefetch");module.exports={mixins:[Prefetch,IsomorphicContext]};


});


Requireify.register('js/reactMixins/scheduler.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={queue:function(e,u){return u=u||10,setTimeout(function(){e()},u)},cancelQueuedItem:function(e){clearTimeout(e)}};


});


Requireify.register('js/reactMixins/falkorPureRenderMixin.js', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),FalkorPureRenderMixin={setCustomModelChangeDetector:function(e){this.customModelChangeDetector=e},hasFalkorPropChanged:function(e){if(this.customModelChangeDetector)return this.customModelChangeDetector.didChange();var t=e.getBoundValue(),r=t.__generation,n=t.__key;return this.state.prevGeneration!==r||this.state.prevKey!==n},updateUniqueModelKey:function(e,t){return this.customModelChangeDetector?this.customModelChangeDetector.updateUniqueKey():(t.prevGeneration=e.getBoundValue().__generation,t.prevKey=e.getBoundValue().__key,void 0)},isFalkorProp:function(e){var t=e&&e.getBoundValue&&e.getBoundValue();return t?!!t.__generation:!1},haveChildrenChanged:function(e,t){return e&&t?e.length!==t.length:e&&!t||!e&&t},componentDidMount:function(){var e;for(e in this.props)if(this.props.hasOwnProperty(e)&&this.isFalkorProp(this.props[e]))return this.updateUniqueModelKey(this.props[e],this.state)},shouldComponentUpdate:function(e,t){var r,n,o,i,s={},a={},h=!1,u=!1,p=React.addons.PureRenderMixin;for(r in e)if(e.hasOwnProperty(r))if(this.isFalkorProp(e[r])){if(this.hasFalkorPropChanged(this.props[r]))return this.updateUniqueModelKey(this.props[r],t),!0}else if("children"===r){if(this.haveChildrenChanged(this.props.children,e.children))return!0}else if("object"==typeof e[r]&&"object"==typeof this.props[r]){o=e[r],i=this.props[r];for(n in o)if(o.hasOwnProperty(n)&&(!i.hasOwnProperty(n)||o[n]!==i[n]))return!0;for(n in i)if(i.hasOwnProperty(n)&&!o.hasOwnProperty(n))return!0}else s[r]=this.props[r],a[r]=e[r];if((Object.keys(s).length>0||Object.keys(this.state).length>0)&&(h=p.shouldComponentUpdate.bind({props:s,state:this.state})(a,t)),u&&h){for(n in t)if(t.hasOwnProperty(n)&&t[n]!==this.state[n])return!0;for(n in a)if(a.hasOwnProperty(n)&&a[n]!==s[n])return!0}return h}};module.exports=FalkorPureRenderMixin;


});


Requireify.register('js/reactMixins/modelChangeDetectors/lolomoRowChangeDetector.js', function(require, requireAsync, module, exports) {


"use strict";function LolomoRowChangeDetector(e){this.model=e,this.updateUniqueKey()}var TRANSIENT_ROWS=["continueWatching","queue"];LolomoRowChangeDetector.prototype={isTransientRow:function(){var e=this.model.getValueSync("context");return-1!==TRANSIENT_ROWS.indexOf(e)},updateUniqueKey:function(){this.prevModelLength=this.model.getValueSync("length"),this.isTransientRow()&&(this.prevUniqueKey=this.generateUniqueKey())},didChange:function(){var e=this.model.getValueSync("length");return e!==this.prevModelLength?!0:this.isTransientRow()&&this.generateUniqueKey()!==this.prevUniqueKey?!0:!1},generateUniqueKey:function(){for(var e,t=this.model.getValueSync("length"),n="",i=0;t>i;i++)e=this.model.getValueSync([i,"summary"]),e&&e.id&&(n+=e.id.toString().substr(-4));return n}},module.exports=LolomoRowChangeDetector;


});


Requireify.register('js/reactMixins/jawBoneLink.js', function(require, requireAsync, module, exports) {


"use strict";var Router=require("react-router"),Position=require("../common/position"),context=require("../utils/contextData"),BrowserScroll=require("../reactMixins/browserScroll"),SCROLL_TO_DURATION_MS=540,SCROLL_TO_DELAY_MS=50,SEARCH_PATHNAME="search",SCROLL_MARGIN=110,CLOSE_JAW_CALLBACK_DELAY_MS=500,JawBoneLink={mixins:[Router.Navigation,Router.State],openJawBoneAtRankNum:function(t,e,o){var i=!1,n=this.getQuery(),r=this.getFeatureData("umaData")||null,s=r&&r.uma?"bd":"mainView",a=document.getElementsByClassName(s)[0],l=this.getScrollToDelta(a);(n.jbv||this.shouldReplaceHistory())&&(i=!0),o&&"keydown"===o&&(n.focus=!0),n.jbv=e,n.jbp=t,void 0!==this.context.rowNum&&(n.jbr=this.context.rowNum),l&&(context.getFeatureData("browserInfo").isIE?BrowserScroll.scrollDelta(l):BrowserScroll.scrollDeltaWithAnimation(a,l,SCROLL_TO_DURATION_MS,SCROLL_TO_DELAY_MS)),i?this.replaceWith(this.getPathname(),{},n):this.transitionTo(this.getPathname(),{},n)},closeJawBone:function(t){var e=this.getQuery();delete e.jbv,delete e.jbr,delete e.jbp,delete e.focus,this.shouldReplaceHistory()?this.replaceWith(this.getPathname(),{},e):this.transitionTo(this.getPathname(),{},e),t&&setTimeout(t,CLOSE_JAW_CALLBACK_DELAY_MS)},shouldReplaceHistory:function(){return-1!==this.getPathname().indexOf(SEARCH_PATHNAME)},getScrollToDelta:function(t){var e,o,i=document.getElementById("row-"+this.context.rowNum),n=Position.getWindowRect().height,r=Position.getRect(t).height,s=document.getElementsByClassName("jawBoneContent open")[0],a=s&&s.getElementsByClassName("jawBoneContainer")[0]?Position.getRect(s.getElementsByClassName("jawBoneContainer")[0]).height:0,l=this.getQuery();return i&&parseInt(l.jbr,10)!==this.context.rowNum&&(e=Position.getRect(i).top,e-=SCROLL_MARGIN,e-=l.jbr&&l.jbr<this.context.rowNum?a:0,l.jbr||(r+=a||500),o=r-Position.getScrollTop()-e,n>o&&(e=Math.floor(e/2))),e}};module.exports=JawBoneLink;


});


Requireify.register("nf-ardbeg",function(t,e,i,n){!function(e,i){"use strict";"function"==typeof define&&define.amd?define("nf-ardbeg",["exports","lodash"],i):"object"==typeof n&&i(n,t("lodash"))}(this,function(t,e){"use strict";function i(t){return t.hasOwnProperty("_evaluatedTests")?(this._evaluatedTests=t._evaluatedTests,void 0):(this._evaluatedTests={},this._init(t),void 0)}function n(t){s.forEach(t,function(t){if(a.hasOwnProperty(t.definition.meta.id)||a.hasOwnProperty(t.definition.meta.name)||!t.definition.meta.id||!t.definition.meta.name)throw new Error("Duplicate test definitions found!");a[t.definition.meta.id]=t,a[t.definition.meta.name]=t})}function o(t){return new i(t)}var s=e["default"]||e,a={},r={attr:function(t){return t?t&&this.attrs.hasOwnProperty(t)?this.attrs[t]:!1:this.attrs},isExplicit:function(){return"undefined"!=typeof this.explicit?this.explicit:!1},isImplicit:function(){return"undefined"!=typeof this.explicit?!this.explicit:!1},"in":function(){return!!this._allocated},attrs:{}};i.prototype._evaluatedTests=null,i.prototype._init=function(t){var e=this;s.forEach(t,function(t){e._evaluate(t)})},i.prototype._evaluate=function(t){var e,i,n=a[t.testId];n?(e=n.definition.cells[t.cellId],n.evaluateFeatures&&s.assign(e,n.evaluateFeatures(e)),i={id:n.definition.meta.id,cell:t.cellId,attrs:e,explicit:t.explicit}):i={id:t.testId,cell:t.cellId,attrs:{},explicit:t.explicit},t&&t.testId&&(this._evaluatedTests[t.testId]=i),n&&n.definition&&n.definition.meta&&n.definition.meta.name&&(this._evaluatedTests[n.definition.meta.name]=i)},i.prototype.implicitlyIn=function(t,e){return this.in(t,e,!0)},i.prototype.in=function(t,e,i){var n,o,a;return a=this._evaluatedTests[t],s.isObject(a)?(e===!0&&2===arguments.length?(n=null,o=!0):(n=e,o=i),n?s.isArray(n)?this._inTestAndCells(a,n,o):this._inTestAndCell(a,n,o):this._inTest(a,o)):!1},i.prototype.inControl=function(t,e){var i=this.getEvaluatedTest(t);return s.isObject(i)?e?i.attr("control")&&i.isImplicit():i.attr("control"):!1},i.prototype.implicitlyInControl=function(t){return this.inControl(t,!0)},i.prototype._inTest=function(t,e){return e===!0?t.explicit===!1:!0},i.prototype._inTestAndCell=function(t,e,i){return i===!0?t.cell===e&&t.explicit===!1:t.cell===e},i.prototype._inTestAndCells=function(t,e){return e.length>1?s.contains(e,t.cell):!1},i.prototype.getEvaluatedTest=function(t){return s.isObject(this._evaluatedTests[t])?s.assign({_allocated:!0},r,this._evaluatedTests[t]):r},i.prototype.attr=function(t,e){var i=this._evaluatedTests[t];return i&&i.attrs.hasOwnProperty(e)?i.attrs[e]:null},i.prototype.getDefinition=function(t){var e={};return t&&a.hasOwnProperty(t)?a[t].definition:(s.forEach(a,function(t,i){e[i]={definition:t.definition}}),e)},i.prototype.toJSON=function(){return{_evaluatedTests:this._evaluatedTests}},"function"==typeof define?t.default={installDefinitions:n,evaluate:o}:(t.installDefinitions=n,t.evaluate=o)})});

Requireify.register('js/reactMixins/ab.js', function(require, requireAsync, module, exports) {


"use strict";var ardbeg=require("nf-ardbeg"),contextData=require("../utils/contextData"),cachedAB;module.exports={ab:function(){return this.inNode()?this.requestContext().ab:(cachedAB||(cachedAB=ardbeg.evaluate(contextData.getData("ab","serializedAB"))),cachedAB)}};


});


Requireify.register('js/reactMixins/abWithDeps.js', function(require, requireAsync, module, exports) {


"use strict";var NodeContext=require("./nodecontext"),ab=require("./ab");module.exports={mixins:[NodeContext,ab]};


});


Requireify.register('js/reactMixins/ab/akira.js', function(require, requireAsync, module, exports) {


"use strict";var AB=require("../abWithDeps"),akiraHelpers={hasJawBoneNavigation:function(){return!1},hasFullPushBOB:function(){return!0},hasHalfPushBOB:function(){return!1},hasNoPushBOB:function(){return!1},hasKenBurnsBOB:function(){return!1},hasMiniBOB:function(){return!1},hasNoGrowBOB:function(){return!1},hasNoSynopsisBOB:function(){return!1},hasLargeBOB:function(){return!0},hasBigHitZoneBOB:function(){return!0}};module.exports={mixins:[AB,akiraHelpers]};


});


Requireify.register('js/akira/components/slider/sliderItem.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),CLASS_NAME="slider-item",SliderItem=React.createClass({displayName:"SliderItem",getDefaultProps:function(){return{additionalClasses:{}}},statics:{className:CLASS_NAME},render:function(){var e=React.addons.classSet,t=_.extend({"slider-item":!0},this.props.additionalClasses);return React.createElement("div",{className:e(t)},this.props.children)}});module.exports=SliderItem;


});


Requireify.register('js/akira/components/slider/paginationIndicator.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PaginationIndicator=React.createClass({displayName:"PaginationIndicator",render:function(){var a,e=[],t="";for(a=0;a<this.props.totalPages;a++)t=a===this.props.activePage?"active":"",e.push(React.createElement("li",{className:t,key:"pi"+a}));return React.createElement("ul",{className:"pagination-indicator"},e)}});module.exports=PaginationIndicator;


});


Requireify.register('js/akira/components/loaders/loadingTitle.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),LoadingBox=require("./loadingBox.jsx");module.exports=React.createClass({displayName:"exports",render:function(){var e={loadingTitle:!0,"ratio-16x9":!0};return this.props.className&&(e[this.props.className]=!0),React.createElement(LoadingBox,{boxClassNames:e,delay:this.props.delay,pulsate:this.props.pulsate,displayWhenNotPulsing:this.props.displayWhenNotPulsing})}});


});


Requireify.register('js/reactMixins/scrollHorizontal.js', function(require, requireAsync, module, exports) {


"use strict";var MIN_HORZ_SWIPE_THRESHOLD_IN_PX=65,MIN_VERT_SWIPE_THRESHOLD_IN_PX=30,scrollHorizontal={MIN_HORZ_SWIPE_THRESHOLD_IN_PX:MIN_HORZ_SWIPE_THRESHOLD_IN_PX,MIN_VERT_SWIPE_THRESHOLD_IN_PX:MIN_VERT_SWIPE_THRESHOLD_IN_PX,advanceDirection:function(_){var I=null,H=_.deltaX,E=Math.abs(_.deltaY);return"wheel"===_.type&&MIN_VERT_SWIPE_THRESHOLD_IN_PX>=E&&(_.stopPropagation(),H>=MIN_HORZ_SWIPE_THRESHOLD_IN_PX?I="right":-MIN_HORZ_SWIPE_THRESHOLD_IN_PX>=H&&(I="left")),I}};module.exports=scrollHorizontal;


});


Requireify.register('js/reactMixins/syntheticMouseEvent.js', function(require, requireAsync, module, exports) {


"use strict";function _triggerSyntheticEvent(e){var t=document.createEvent("MouseEvent"),n=document.elementFromPoint(e.x,e.y);t.initMouseEvent(e.type,!0,!0,window,null,e.x,e.y,0,0,!1,!1,!1,!1,0,null),t.synthetic=!0,n.dispatchEvent(t)}var _=require("lodash"),syntheticMouseEvent={mouseOver:function(e){_triggerSyntheticEvent(_.assign({type:"mouseover"},e))}};module.exports=syntheticMouseEvent;


});


Requireify.register('js/common/presentationTracking/presentationTrackingConsts.js', function(require, requireAsync, module, exports) {


"use strict";function buildSwVersion(n){return n&&n.os?n.os.name+" "+n.os.version+", "+n.name+" "+n.version:"null"}var ctx=require("../../utils/contextData"),presentationTrackingConsts={IN_NODE:"undefined"==typeof window,DEFAULT_TRACKING_VALUES:{NUMBER:-99,OBJECT:{},ARRAY:[],STRING:"unknown",BOOLEAN:!1},FAST_PROPS:{SEND_INTERVAL_MS:"ui.presTracking.sendIntervalMs",ACTIVE:"ui.presTracking.isActive",DEBOUNCE_MS:"ui.presTracking.scanDebounceMs"},TRANSPORT:{MAX_SEND_ERROR:10,MAX_CONCURRENT_ATTEMPTS:4,ENDPOINT:"/uitracking/users/presentationtracking"},STORAGE:{NAMESPACE:"nfpt",MAX_ITEMS:250,DEFAULT_DATASTORE:{totalContentLength:0,values:[]}},GLOBAL_HEADER_SELECTOR:"#hdPinTarget",CONTAINER_SELECTOR_CLASS:"ptrack-container",ELEMENT_SELECTOR_CLASS:"ptrack-content",DEBUG_ENTERING_CLASS:"ptdebug-entering",DEBUG_CURRENT_CLASS:"ptdebug-current",GEO:ctx.getFeatureData("geo"),BROWSERINFO:ctx.getFeatureData("browserInfo"),FULL_SCAN:"pt:fullscan",SCAN_EVENTS:{INIT:"init",SCROLL:"scroll",RESIZE:"resize"}};presentationTrackingConsts.TRANSPORT.IMPRESSION_SEND_INTERVAL_MS_START=presentationTrackingConsts.IN_NODE?void 0:ctx.get("fastProps",presentationTrackingConsts.FAST_PROPS.SEND_INTERVAL_MS),presentationTrackingConsts.DEBUG=!presentationTrackingConsts.IN_NODE&&!!window.location.search.match(/ptdebug=1/),presentationTrackingConsts.TIMING=!presentationTrackingConsts.IN_NODE&&!!window.location.search.match(/pttiming=1/),presentationTrackingConsts.TRANSPORT.REQUEST_DEFAULTS={country:presentationTrackingConsts.GEO&&presentationTrackingConsts.GEO.preferredLocale?presentationTrackingConsts.GEO.preferredLocale.country:"null",application_name:"AKIRA",application_v:ctx.get("serverDefs","BUILD_IDENTIFIER"),sw_version:buildSwVersion(presentationTrackingConsts.BROWSERINFO)},module.exports=presentationTrackingConsts;


});


Requireify.register('js/common/presentationTracking/presentationTrackingStorage.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),CONSTS=require("./presentationTrackingConsts"),presentationTrackingStorage={_initialized:!1,_inMemoryCache:null,_writeOutLocalStorage:function(){try{return localStorage.setItem(CONSTS.STORAGE.NAMESPACE,JSON.stringify(this._inMemoryCache)),!0}catch(e){return!1}},_loadFromStorage:function(){var e;try{e=JSON.parse(localStorage.getItem(CONSTS.STORAGE.NAMESPACE)),e&&_.isNumber(e.totalContentLength)&&_.isArray(e.values)||(e=void 0)}catch(t){}this._inMemoryCache=e||_.cloneDeep(CONSTS.STORAGE.DEFAULT_DATASTORE)},init:function(){this._initialized||CONSTS.IN_NODE||(this._loadFromStorage(),this._initialized=!0)},save:function(e){var t=_.now(),n=this;return n._inMemoryCache.values.push({key:t,contents:e}),n._inMemoryCache.totalContentLength+=e.length,n._inMemoryCache.totalContentLength>CONSTS.STORAGE.MAX_ITEMS&&(n._inMemoryCache.values=_.dropWhile(presentationTrackingStorage._inMemoryCache.values,function(e){return n._inMemoryCache.totalContentLength>CONSTS.STORAGE.MAX_ITEMS?(n._inMemoryCache.totalContentLength-=e.contents.length,!0):void 0})),n._writeOutLocalStorage(),t},remove:function(e){var t=this,n=[];return _.isArray(e)||(e=[e]),_.remove(t._inMemoryCache.values,function(o){return-1!==e.indexOf(o.key)?(n.push(o.key),t._inMemoryCache.totalContentLength-=o.contents.length,!0):void 0}),t._writeOutLocalStorage(),n},fetch:function(){return _.cloneDeep(this._inMemoryCache)},kill:function(){this._inMemoryCache=_.cloneDeep(CONSTS.STORAGE.DEFAULT_DATASTORE),this._writeOutLocalStorage()}};module.exports=presentationTrackingStorage;


});


Requireify.register('js/common/presentationTracking/presentationTrackingSender.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),XHR=require("../../utils/XHR"),storage=require("./presentationTrackingStorage"),CONSTS=require("./presentationTrackingConsts"),presentationTrackingSender={_sendInterval:null,_currentAttempts:0,_sendErrorCount:0,_send:function(){var t=this,e=storage.fetch();if(!(!e.totalContentLength||t._sendErrorCount>CONSTS.TRANSPORT.MAX_SEND_ERROR||t._currentAttempts>CONSTS.TRANSPORT.MAX_CONCURRENT_ATTEMPTS)){var n=[],r=[];_.forEach(e.values,function(t){n.push(t.key),r=r.concat(t.contents)});var s=_.cloneDeep(CONSTS.TRANSPORT.REQUEST_DEFAULTS);s.data=JSON.stringify(r),t._currentAttempts++;{XHR.request({method:"post",data:s,resource:"/presentationtracking",service:"uitracking",postType:"text"}).subscribe(function(){storage.remove(n),t._sendErrorCount=0,t._currentAttempts--},function(){t._sendErrorCount++,t._currentAttempts--})}}},start:function(){var t=this;t._sendInterval||CONSTS.IN_NODE||(t._send(),t._sendInterval=window.setInterval(function(){t._send()},CONSTS.TRANSPORT.IMPRESSION_SEND_INTERVAL_MS_START))},stop:function(){this._sendInterval&&window.clearInterval(this._sendInterval)}};module.exports=presentationTrackingSender;


});


Requireify.register('js/common/presentationTracking/presentationTracking.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),ctx=require("../../utils/contextData"),position=require("../position"),netflix=require("../nfNamespace"),EventBus=require("../../reactMixins/eventBus"),CONSTS=require("./presentationTrackingConsts"),storage=require("./presentationTrackingStorage.js"),sender=require("./presentationTrackingSender.js"),fastProp=function(e){return CONSTS.IN_NODE?void 0:ctx.get("fastProps",e)},presentationTracking={_viewportRegion:null,_onScreen:{},_headerEl:null,_initialized:!1,_isElementInRegion:function(e,t){var n=e.left+(e.right-e.left)/2,i=e.top+(e.bottom-e.top)/2;return e.left===e.right||t.left===t.right?!1:n>=t.left&&n<=t.right&&i>=t.top&&i<=t.bottom},_calcWindowActiveRegion:function(){if(!this._headerEl){var e=document.querySelector(CONSTS.GLOBAL_HEADER_SELECTOR);this._headerEl=e}var t=position.getWindowRect();return{left:0,top:this._headerEl&&"fixed"===window.getComputedStyle(this._headerEl).getPropertyValue("position")?this._headerEl.getBoundingClientRect().height:0,right:t.right,bottom:t.bottom}},_scanElement:function(e){return this._isElementInRegion(position.getRect(e),this._viewportRegion)},_tokenizeElement:function(e){return[e.video_id,e.row,e.rank,e.track_id,!!e.parent_context].join("|")},_extractTrackingData:function(e){return JSON.parse(decodeURI(e.getAttribute("data-ui-tracking-context")))},_fullScan:function(e){if(this._initialized){var t=this,n=t._onScreen,i=[],r=document.getElementsByClassName(CONSTS.CONTAINER_SELECTOR_CLASS),o=(new Date).getTime();t._onScreen={},t._viewportRegion=t._calcWindowActiveRegion(),_.forEach(r,function(r){t._scanElement(r)&&(_.forEach(r.getElementsByClassName(CONSTS.ELEMENT_SELECTOR_CLASS),function(e){var r=t._extractTrackingData(e),a=t._tokenizeElement(r);!t._onScreen[a]&&t._scanElement(e)&&(n[a]?t._onScreen[a]=n[a]:(r.time=o,t._onScreen[a]=r,i.push(r)))}),e=e||{},e.data=t._onScreen,EventBus.emit(CONSTS.FULL_SCAN,e))}),_.isEmpty(i)||storage.save(i)}},init:function(){if(!this._initialized&&!CONSTS.IN_NODE&&fastProp(CONSTS.FAST_PROPS.ACTIVE)){var e=this;storage.init(),sender.start();var t=function(){window.addEventListener("scroll",function(){e.requestScan({event:CONSTS.SCAN_EVENTS.SCROLL})}),window.addEventListener("resize",function(){e.requestScan({isResize:!0,event:CONSTS.SCAN_EVENTS.RESIZE})})};"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t,!1),this._initialized=!0}}};presentationTracking.requestScan=_.debounce(function(e){presentationTracking._fullScan(e)},fastProp(CONSTS.FAST_PROPS.DEBOUNCE_MS)),module.exports=presentationTracking;


});


Requireify.register('js/akira/components/slider/slider.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),SliderItem=require("./sliderItem.jsx"),PaginationIndicator=require("./paginationIndicator.jsx"),LoadingTitle=require("../loaders/loadingTitle.jsx"),ScrollHorizontal=require("../../../reactMixins/scrollHorizontal.js"),SyntheticMouseEvent=require("../../../reactMixins/syntheticMouseEvent.js"),EventBus=require("../../../reactMixins/eventBus.js"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),presentationTracking=require("../../../common/presentationTracking/presentationTracking.js"),WIDTH_100_PERCENT=100,touchStart={},isAnimating=!1,animateHoverTimeout=null,Slider=React.createClass({displayName:"Slider",statics:{MOVE_DIRECTION_RIGHT:1,MOVE_DIRECTION_LEFT:-1},mixins:[ScrollHorizontal,SyntheticMouseEvent,IsomorphicContext],getInitialState:function(){var t=this.props.initialLeftmostVisibleIndex||0,e=this.getTotalItemCount();return!this.props.enableLooping&&e&&t+this.props.itemsInRow>e&&(t=e-this.props.itemsInRow,0>t&&(t=0)),{leftmostVisibleItemIndex:t,hasMovedOnce:this.props.initialLeftmostVisibleIndex||!1,sliderHandleFocused:!1}},advanceRight:function(t){var e,i=this.state.leftmostVisibleItemIndex+this.props.itemsInRow,s=this.state.leftmostVisibleItemIndex+2*this.props.itemsInRow,n=this.getTotalItemCount();t&&t.preventDefault(),this.isRightNavActive()&&!this.isAnimating&&(this.isAnimating=!0,this.props.onAdvanceRight&&this.props.onAdvanceRight(i),i!==n&&s>n&&(i=n-this.props.itemsInRow),e=this.getNewSliderOffset(i),i===n&&(i=0),t&&"wheel"===t.type?this.shiftSlider(i,e,Slider.MOVE_DIRECTION_RIGHT,{x:t.clientX,y:t.clientY}):this.shiftSlider(i,e,Slider.MOVE_DIRECTION_RIGHT))},advanceLeft:function(t){var e,i=this.state.leftmostVisibleItemIndex-this.props.itemsInRow,s=this.getTotalItemCount();t&&t.preventDefault(),this.isLeftNavActive()&&!this.isAnimating&&(this.isAnimating=!0,this.props.onAdvanceLeft&&this.props.onAdvanceLeft(),0!==this.state.leftmostVisibleItemIndex&&0>i&&(i=0),e=this.getNewSliderOffset(i),0===this.state.leftmostVisibleItemIndex&&(i=s-this.props.itemsInRow),t&&"wheel"===t.type?this.shiftSlider(i,e,Slider.MOVE_DIRECTION_LEFT,{x:t.clientX,y:t.clientY}):this.shiftSlider(i,e,Slider.MOVE_DIRECTION_LEFT))},shiftSlider:function(t,e,i,s){var n=this,o=this.refs.sliderContent.getDOMNode(),r=this.refs.handleLeft?this.refs.handleLeft.getDOMNode():null,a=this.getAnimationStyle(e);clearTimeout(animateHoverTimeout),"function"==typeof this.props.handleSliderMove&&this.props.handleSliderMove(t,i),"function"==typeof this.props.handleActivePageUpdate&&this.props.handleActivePageUpdate(this.getPageNumber(t)),r&&r.classList.add("active"),o.addEventListener("transitionend",function l(e){e.target===this&&(o.removeEventListener("transitionend",l),o.classList.remove("animating"),n.setState({leftmostVisibleItemIndex:t,hasMovedOnce:!0}),n.resetSliderPosition(),n.isAnimating=!1,presentationTracking.requestScan(),EventBus.emit("motion-boxart:scan"),s&&(clearTimeout(animateHoverTimeout),animateHoverTimeout=setTimeout(function(){SyntheticMouseEvent.mouseOver(s)},100)))}),o.classList.add("animating"),o.setAttribute("style",a)},resetSliderPosition:function(){if(this.refs.sliderContent){var t=this.getBaseSliderOffset(),e=this.getAnimationStyle(t);this.refs.sliderContent.getDOMNode().setAttribute("style",e)}},getSliderItemWidth:function(){return WIDTH_100_PERCENT/this.props.itemsInRow},getRightMostIndex:function(){return Math.min(this.getTotalItemCount(),this.state.leftmostVisibleItemIndex+2*this.props.itemsInRow+1)},getLeftMostIndex:function(){return Math.max(0,this.state.leftmostVisibleItemIndex-this.props.itemsInRow-1)},getTotalItemCount:function(){return this.props.totalItems},getTotalPages:function(){return Math.ceil(this.getTotalItemCount()/this.props.itemsInRow)},getPageNumber:function(t){return Math.ceil(t/this.props.itemsInRow)},getBaseSliderOffset:function(){var t=0,e=this.props.itemsInRow,i=this.getSliderItemWidth();return this.getTotalPages()>1&&((this.state.hasMovedOnce&&0===this.state.leftmostVisibleItemIndex&&this.props.enableLooping||this.state.leftmostVisibleItemIndex>=e)&&(t=-WIDTH_100_PERCENT),this.state.hasMovedOnce&&(this.props.enableLooping||this.state.leftmostVisibleItemIndex>e)&&(t-=i),this.state.leftmostVisibleItemIndex>0&&this.state.leftmostVisibleItemIndex<e&&(t-=this.state.leftmostVisibleItemIndex*i)),t},getNewSliderOffset:function(t){var e=this.state.leftmostVisibleItemIndex-t,i=this.getBaseSliderOffset(),s=this.getSliderItemWidth();return i+e*s},getSliderContents:function(){var t=[],e=[],i=this.props.itemsInRow,s=this.getTotalItemCount(),n=0,o=this.state.leftmostVisibleItemIndex-this.getLeftMostIndex();if(this.props.children&&this.props.children.length){t=this.props.children.slice(this.getLeftMostIndex(),this.getRightMostIndex()),n=this.getRightMostIndex()-this.getLeftMostIndex();for(var r=0;t.length<n&&t.length<s;)t.push(React.createElement(LoadingTitle,{className:"rowExtras",delay:.2*r,pulsate:!1,displayWhenNotPulsing:!0,key:"loading-title-"+r})),r++;this.getTotalPages()>1&&this.props.enableLooping&&(this.getRightMostIndex()-this.state.leftmostVisibleItemIndex<=2*i&&(e=this.state.leftmostVisibleItemIndex+i===s?this.props.children.slice(0,this.props.itemsInRow+1):this.props.children.slice(0,1),e=this.cloneItemsWithNewKeys(e,"_appended"),t=t.concat(e)),this.state.hasMovedOnce&&this.state.leftmostVisibleItemIndex-i<=0&&(e=0===this.state.leftmostVisibleItemIndex?this.props.children.slice(-this.props.itemsInRow-1):this.props.children.slice(-1),o+=e.length,e=this.cloneItemsWithNewKeys(e,"_prepended"),t=e.concat(t)))}return this.wrapSliderItems(t,o)},cloneItemsWithNewKeys:function(t,e){return t.map(function(t){return React.addons.cloneWithProps(t,{key:t.key+e})})},sliderWrappedItems:[],getSliderItemsInViewport:function(){return this.getSliderItems(this.sliderWrappedItems.filter(function(t){return t.inViewport}))},getAllSliderItems:function(){return this.getSliderItems(this.sliderWrappedItems)},getSliderItems:function(t){var e,i,s=[];for(e=0;i=t[e];e++)this.refs[i.uid]&&s.push(this.refs[i.uid]);return s},isTouchEnabled:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0},getItem:function(t){return this.refs[t]},isItemInMiddle:function(t){var e=this.getItem("item_"+t);return e&&("middle"===e.props.viewportPosition||"leftEdge"===e.props.viewportPosition||"rightEdge"===e.props.viewportPosition)},wrapSliderItems:function(t,e){var i=e+this.props.itemsInRow-1,s=0,n=this;return this.sliderWrappedItems=[],React.Children.map(t,function(t,o){var r="",a=!1;o===e?(r="leftEdge",a=!0):o===e-1?r="leftPeek":o===i+1?r="rightPeek":o===i?(r="rightEdge",a=!0):o>=e&&i>=o&&(r="middle",a=!0);var l=r?s:"",h=!1,d="item_"+o;return r&&(++s,h=!0),n.sliderWrappedItems.push({uid:d,inViewport:h}),t.props.sliderItemId=d,t.props.itemTabbable=a,React.createElement(SliderItem,{ref:d,key:d,viewportIndex:l,viewportPosition:r},t)})},getAnimationStyle:function(t){var e=t?"translate3d("+t+"%, 0px, 0px)":"";return["-webkit-transform: "+e,"-moz-transform: "+e,"-ms-transform: "+e,"-o-transform: "+e,"transform: "+e].join(";")},getReactAnimationStyle:function(t){var e=t?"translate3d("+t+"%, 0px, 0px)":"";return t?{WebkitTransform:e,MozTransform:e,MsTransform:e,OTransform:e,transform:e}:null},handleMouseLeaveSliderMask:function(){clearTimeout(animateHoverTimeout)},handleTouchStart:function(t){var e=this.isTouchEnabled()?t.changedTouches[0]:t;touchStart={x:parseInt(e.clientX),y:parseInt(e.clientY)}},handleTouchMove:function(t){var e=this.isTouchEnabled()?t.changedTouches[0]:t,i=touchStart.x-e.clientX,s=Math.abs(touchStart.y-e.clientY);isAnimating||(i>ScrollHorizontal.MIN_HORZ_SWIPE_THRESHOLD_IN_PX&&s<ScrollHorizontal.MIN_VERT_SWIPE_THRESHOLD_IN_PX&&this.isRightNavActive()?(this.advanceRight(),touchStart={}):i<-ScrollHorizontal.MIN_HORZ_SWIPE_THRESHOLD_IN_PX&&s<ScrollHorizontal.MIN_VERT_SWIPE_THRESHOLD_IN_PX&&this.isLeftNavActive()&&(this.advanceLeft(),touchStart={})),Math.abs(i)>Math.abs(s)&&t.preventDefault()},handleMouseWheel:function(t){if(!isAnimating){var e=this.advanceDirection(t);"right"===e?this.advanceRight(t):"left"===e&&this.advanceLeft(t)}},componentDidUpdate:function(t){if(this.props.itemsInRow!==t.itemsInRow){var e=this.getPageNumber(this.state.leftmostVisibleItemIndex);"function"==typeof this.props.handleActivePageUpdate&&this.props.handleActivePageUpdate(e),this.resetSliderPosition()}},hasMorePagesOnLeft:function(){var t=this.state.leftmostVisibleItemIndex-this.props.itemsInRow;return this.props.enableLooping||t>-this.props.itemsInRow},hasMorePagesOnRight:function(){var t=this.state.leftmostVisibleItemIndex+this.props.itemsInRow;return this.props.enableLooping||t<this.getTotalItemCount()},isLeftNavActive:function(){return this.getTotalPages()>1&&this.state.hasMovedOnce&&this.hasMorePagesOnLeft()},isRightNavActive:function(){return this.getTotalPages()>1&&this.hasMorePagesOnRight()},componentDidMount:function(){var t=this.refs.sliderContent.getDOMNode();this.isTouchEnabled()&&(t.addEventListener("pointerdown",this.handleTouchStart),t.addEventListener("pointermove",this.handleTouchMove))},componentWillUnmount:function(){var t=this.refs.sliderContent.getDOMNode();this.isTouchEnabled()&&(t.removeEventListener("pointerdown",this.handleTouchStart),t.removeEventListener("pointermove",this.handleTouchMove))},renderPageHandle:function(t,e,i,s,n){if(1>=t||e&&!this.state.hasMovedOnce)return null;var o=React.addons.classSet,r={handle:!0,handleLeft:e,handleRight:!e,active:s},a={"indicator-icon":!0,"icon-leftCaret":e,"icon-rightCaret":!e};return React.createElement("a",{href:"#",className:o(r),tabIndex:!e||this.state.hasMovedOnce?0:-1,ref:i,onClick:n,onMouseEnter:this.props.onMouseEnterSliderHandle,onFocus:this.props.onMouseEnterSliderHandle,onMouseLeave:this.props.onMouseLeaveSliderHandle,onBlur:this.props.onMouseLeaveSliderHandle},React.createElement("b",{className:o(a)}))},render:function(){var t,e=React.addons.classSet,i=this.getReactAnimationStyle(this.getBaseSliderOffset()),s="sliderContent row-with-x-columns",n=this.getTotalPages(),o=this.props.enablePaginationIndicator&&n>1,r=this.getFeatureData("browserInfo"),a=_.get(r,"isWindows",!1);return t={sliderMask:!0,showPeek:this.props.enablePeek},React.createElement("div",{className:"slider"},this.renderPageHandle(n,!0,"handleLeft",this.isLeftNavActive(),this.advanceLeft),o?React.createElement(PaginationIndicator,{totalPages:n,activePage:this.getPageNumber(this.state.leftmostVisibleItemIndex)}):null,React.createElement("div",{className:e(t),onMouseLeave:this.handleMouseLeaveSliderMask},React.createElement("div",{className:s,ref:"sliderContent",style:i,role:a?"application":null,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onWheel:this.handleMouseWheel},this.getSliderContents())),this.renderPageHandle(n,!1,"handleRight",this.isRightNavActive(),this.advanceRight))}});module.exports=Slider;


});


Requireify.register('js/utils/pathEvaluatorUtils.js', function(require, requireAsync, module, exports) {


"use strict";function toObservable(r){return Rx.Observable.create(function(o){return r.subscribe(function(r){o.onNext(r)},function(r){o.onError(r)},function(){o.onCompleted()}),function(){}})}function isValueError(r){return void 0!==r&&"error"===r.$type}function isBoundToError(r){return isValueError(r.getBoundValue())}function hasAnyError(r){var o=!1;return r&&Array.isArray(r)&&r.length>0&&(o=r.some(function(r){return isValueError(r)})),o}var Rx=require("../common/nfRx");module.exports={toObservable:toObservable,isValueError:isValueError,isBoundToError:isBoundToError,hasAnyError:hasAnyError};


});


Requireify.register('js/akira/components/jawBone/progress.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Common";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["progress.summary"]}]}},render:function(){var e,s=parseInt(this.props.bookmarkPosition/60,10),r=parseInt(this.props.runtime/60,10);return this.props.runtime?(e={width:parseInt(100*this.props.bookmarkPosition/this.props.runtime,10)+"%"},React.createElement("div",{className:"progress"},React.createElement("span",{className:"progress-bar"},React.createElement("span",{className:"progress-completed",style:e})),this.props.showSummary?React.createElement("span",{className:"summary"},this.getString(BUNDLE,"progress.summary",{BOOKMARK:s,RUNTIME:r})):null)):null}});


});


Requireify.register('js/reactMixins/video/watched.js', function(require, requireAsync, module, exports) {


"use strict";var getTitleData=function(e){var t,n,r,o=e.getValueSync(["current","title"]),s=e.getValueSync(["current","summary"]),u=e.getValueSync(["seasonList","current","summary"]);return u&&(t=u.name),s&&(n=s.episode,r=s.season),{SEASON:t,SEASON_NUMBER:r,EPISODE_NUMBER:n,TITLE:o}};module.exports={getPaths:function(){return[["watched"],["episodeCount"],["seasonList","current","summary"]].concat([["current",["title","bookmarkPosition","summary"]]])},isNotAnEpisode:function(){var e=this.props.model.bind(["current"]),t=this.props.model.getValueSync(["summary"]),n=e.getValueSync(["summary"]),r=t&&t.id,o=n&&n.id;return r===o},getMovieEndPercent:function(){return.95},getEpisodeEnd:function(){return 20},isInResumeState:function(){var e=this.props.model.bind(["current"]);if(!e.getBoundValue())return!1;var t,n,r,o=e.getValueSync(["bookmarkPosition"]),s=e.getValueSync(["runtime"]);return o&&s?(t=o/s,n=o&&o>30,r=this.isNotAnEpisode()?t<this.getMovieEndPercent():s-o>this.getEpisodeEnd(),n&&r):!1},isInNextUpState:function(){var e=this.props.model.getValueSync(["current","bookmarkPosition"]),t=this.props.model.getValueSync(["watched"]),n=this.props.model.getValueSync(["episodeCount"]);return n&&t&&0>e},hasBeenWatched:function(){return this.props.model.getValueSync(["watched"])},getResumeParams:function(){return getTitleData(this.props.model)}};


});


Requireify.register('js/akira/components/jawBone/resume.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Progress=require("./progress.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),Watched=require("../../../reactMixins/video/watched"),BUNDLE="discovery/akira/JawBone",Resume=React.createClass({displayName:"Resume",mixins:[I18N,Watched],statics:{getPaths:function(){var e=[["current",["summary","synopsis","title","runtime","bookmarkPosition"]]].concat(Watched.getPaths());return e},__meta__:{strings:[{bundle:BUNDLE,ids:["overview.resume","overview.next.up","watched.title.overview"]}]}},render:function(){var e=this.props.model,t=e.hardBind(["current"]),r=t.getValueSync(["synopsis"]),s=t.getValueSync(["bookmarkPosition"]),i=t.getValueSync(["runtime"]),a=this.getString(BUNDLE,this.props.resume?"overview.resume":"overview.next.up"),n=this.getString(BUNDLE,"watched.title.overview",this.getResumeParams());return React.createElement("div",{className:"watched"},React.createElement("div",{className:"watchedTitle"},a),this.props.isStandalone?null:React.createElement("div",{className:"episodeTitle",dangerouslySetInnerHTML:{__html:n}}),this.props.resume?React.createElement(Progress,{runtime:i,bookmarkPosition:s,showSummary:!0,current:!0}):null,r?React.createElement("div",{className:"synopsis"},r):null)}});module.exports=Resume;


});


Requireify.register('js/akira/components/jawBone/overview/evidence.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Evidence=React.createClass({displayName:"Evidence",render:function(){var e="hookIcon icon-"+this.props.kind;return React.createElement("li",{className:this.props.type},this.props.imgSrc?React.createElement("img",{src:this.props.imgSrc}):React.createElement("span",{className:e}),React.createElement("p",null,this.props.children))}});module.exports=Evidence;


});


Requireify.register('js/akira/components/controls/playbutton.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PlayLink=require("./playLink.jsx"),_=require("lodash"),PlayButton=React.createClass({displayName:"PlayButton",statics:{getPaths:function(){return[["summary"],["availability"],["current","summary"]]},EPISODIC_TYPES:{show:!0,season:!0,series:!0}},getEpisodeId:function(){var e,a,t=this.props.episode||null,s=null;return t||(e=this.props.model.getValueSync(["summary"]),e&&PlayButton.EPISODIC_TYPES[e.type]&&(t=this.props.model.bind(["current"]))),t&&(a=t.getValueSync(["summary"]),s=(a||null)&&a.id),s},render:function(){var e=this.props.model,a=e.getValueSync("summary"),t=e.getValueSync("availability"),s=a&&a.id,i=_.assign({},this.props,{className:(this.props.className||"")+" playLink"});return t&&!t.isPlayable?null:React.createElement(PlayLink,React.__spread({},i,{videoId:s,episodeId:this.getEpisodeId()}),React.createElement("div",{className:"playRing"},React.createElement("div",{className:"play icon-play"})),this.props.annotation?React.createElement("div",{className:"annotation"},this.props.annotation):null)}});module.exports=PlayButton;


});


Requireify.register('js/akira/components/title/basicStarBar.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),XHR=require("../../../utils/XHR"),StarBar=React.createClass({displayName:"StarBar",statics:{starClass:{25:"icon-star-25-percent",50:"icon-star-50-percent",75:"icon-star-75-percent",100:"icon-star"}},getInitialState:function(){return{hoverRating:0}},getStarInfo:function(){var t=this.state.hoverRating||this.props.userRating||this.props.predictedRating||this.props.averageRating||0,a=this.state.hoverRating?"hover":this.props.userRating?"personal":"default",r=Math.floor(t),e=t%r,s=0;return e>=.25&&(e>=.75?s=75:e>=.5?s=50:e>=.25&&(s=25)),0>t?(t=0,r=0,s=0):t>5&&(t=5,r=5,s=0),{rating:t,ratingType:a,numWholeStars:r,partialStar:s}},getStarClass:function(t,a){return"star "+t+" "+a},handleEnter:function(t){if(!this.props.readOnly){var a=parseInt(t.target.getAttribute("data-rating"),10)||0;a&&this.setState({hoverRating:a})}},handleLeave:function(){this.props.readOnly||this.setState({hoverRating:null})},handleClick:function(t){if(!this.props.readOnly){var a=parseInt(t.target.getAttribute("data-rating"),10)||0;"function"==typeof this.props.onRating&&this.props.onRating(a),this.props.videoId&&this.sendRating(a)}},sendRating:function(t){XHR.request({method:"post",data:{},query:{titleid:this.props.videoId,rating:t},resource:"/setVideoRating",service:"api",authorize:!0}).subscribe()},createStar:function(t,a,r){var e=this.getStarClass(a,r);return React.createElement("span",{key:this.props.videoId+"_"+t+r,"data-rating":t,className:e,onMouseEnter:this.handleEnter,onMouseLeave:this.handleLeave})},renderTooltip:function(){return this.state.hoverRating&&this.props.tooltip?React.createElement("div",{className:"starbar-tooltip rating-"+this.state.hoverRating},this.props.tooltip[this.state.hoverRating-1]):null},getStarMarkup:function(){var t,a,r=this.getStarInfo(),e=[],s=[],i=[],n=1;for(t=0;t<r.numWholeStars;t++)e.push(this.createStar(n++,r.ratingType,StarBar.starClass["100"]));for(r.partialStar&&(s.push(this.createStar(n,r.ratingType,StarBar.starClass[r.partialStar])),s.push(this.createStar(n,"sb-placeholder",StarBar.starClass["100"])),n++),a=5-(r.numWholeStars+(r.partialStar?1:0)),t=0;a>t;t++)i.push(this.createStar(n++,"sb-placeholder",StarBar.starClass["100"]));return{left:e,mid:s,right:i}},render:function(){var t=React.addons.classSet,a={starbar:!0,readOnly:this.props.readOnly===!0};this.props.extraClass&&(a[this.props.extraClass]=!0);var r=this.getStarMarkup();return React.createElement("div",{className:t(a),onClick:this.handleClick},this.renderTooltip(),r.left,r.mid.length?React.createElement("div",{className:"transitionWrap"},r.mid):null,r.right)}});module.exports=StarBar;


});


Requireify.register('js/akira/components/title/falkorStarBar.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),BasicStarBar=require("./basicStarBar.jsx"),FalkorStarBar=React.createClass({displayName:"FalkorStarBar",getDefaultProps:function(){return{userRatingOnly:!1}},updateFalkorCacheWithRating:function(t){var a=this.props.model.bind(["starrating"]),r=a.getBoundValue();r.userRating=t,this.isMounted()&&this.forceUpdate(),"function"==typeof this.props.onRating&&this.props.onRating(t)},render:function(){var t=this.props.model,a=t.getValueSync(["summary"]),r=t.getValueSync(["starrating"]);return a&&r?React.createElement(BasicStarBar,React.__spread({},this.props,{videoId:a.id,predictedRating:!this.props.userRatingOnly&&r&&r.predicted,userRating:r&&r.userRating,onRating:this.updateFalkorCacheWithRating})):null}});module.exports=FalkorStarBar;


});


Requireify.register('js/akira/components/title/duration.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Common:duration",Duration=React.createClass({displayName:"Duration",mixins:[I18N],getDefaultProps:function(){return{seasonLabelKey:"Season"}},getFormattedDuration:function(e){var r=this.getStrings(BUNDLE),s=parseInt(e/60,10),a=parseInt(s/60,10),t=parseInt(s%60,10),n=r.get("hours",{hours:a}),i=r.get("minutes",{minutes:t});return this.props.onlyInMinutes?s>0?r.get("minutes",{minutes:s}):"":(a>0?n:"")+(a>0&&t>0?" ":"")+(t>0?i:"")},render:function(){var e,r=this.props.seasonLabelKey?this.props.seasonLabelKey:"Season",s=this.getStrings(BUNDLE);return this.props.runtime?(e=this.getFormattedDuration(this.props.runtime),React.createElement("span",{className:"duration"},e)):this.props.seasonCount?(r+=this.props.seasonCount>1?".plural":".singular",e=s.get(r,{numSeasons:this.props.seasonCount}),React.createElement("span",{className:"duration"},e)):null}});Duration.__meta__={strings:[{bundle:BUNDLE,ids:["minutes","hours","Season.singular","Collection.singular","Unknown.singular","Volume.singular","Special.singular","Set.singular","Book.singular","Part.singular","Series.singular","Chapter.singular","NO_NAV_LABEL.singular","Season.plural","Collection.plural","Unknown.plural","Volume.plural","Special.plural","Set.plural","Book.plural","Part.plural","Series.plural","Chapter.plural","NO_NAV_LABEL.plural"]}]},module.exports=Duration;


});


Requireify.register('js/akira/components/title/maturityRating.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),URLs=require("../../../utils/urls"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),MATURITY_REASON_CLASSNAME={NL:{707:"violence",708:"fear-anxiety",709:"sex",710:"discrimination",711:"drug-or-alcohol",712:"profanity"}},COUNTRIES_WITH_FORCED_CUSTOM_STYLES=["NL"],COUNTRIES_WITH_CUSTOM_STYLES=["BR","GB","NL"],COUNTRIES_WITH_CUSTOM_STYLES_AND_TEXT=["GB","NL"],MaturityRating=React.createClass({displayName:"MaturityRating",mixins:[IsomorphicContext],statics:{getPaths:function(){return[["maturity"]]}},getCountryGraphicClass:function(t,e){return"NL"===t?"nf-icon-button-icon icon-nicam-"+e:"maturity-rating-"+t+" maturity-rating-"+t+"-"+e},getValue:function(t,e){var r,i,a,n=t&&t.rating&&t.rating.value&&t.rating.value.toUpperCase(),s=-1!==COUNTRIES_WITH_FORCED_CUSTOM_STYLES.indexOf(e),o=this.props.useCountryStyling&&-1!==COUNTRIES_WITH_CUSTOM_STYLES.indexOf(e);return n&&(s||o?(r="maturity-custom-styling "+this.getCountryGraphicClass(e,n),-1===COUNTRIES_WITH_CUSTOM_STYLES_AND_TEXT.indexOf(e)&&(i=n)):(r="maturity-number",i=n),a=this.props.withLinkToDetail?React.createElement("a",{href:URLs.getRatingsUrl(),className:r},i):React.createElement("span",{className:r},i)),a},getReasons:function(t,e){var r,i=t&&t.rating&&t.rating.reasons;return i&&i.length?i.map(function(t){return r=MATURITY_REASON_CLASSNAME[e]&&MATURITY_REASON_CLASSNAME[e][t],r?React.createElement("span",{className:"maturity-reason nf-icon-button-icon icon-nicam-"+r}):void 0}):null},getDescription:function(t){var e=t&&t.rating&&t.rating.maturityDescription;return e?React.createElement("p",{className:"maturityDescription"},e):null},render:function(){var t=this.props.model,e=t.getValueSync(["maturity"]),r=this.getFeatureData("geo"),i=r&&r.preferredLocale&&r.preferredLocale.country&&r.preferredLocale.country.toUpperCase();return React.createElement("span",{className:"maturity-rating"},this.getValue(e,i),this.props.withReasons?this.getReasons(e,i):null,this.props.withDescription?this.getDescription(e):null)}});module.exports=MaturityRating;


});


Requireify.register('js/akira/components/title/videoMeta.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),StarBar=require("./falkorStarBar.jsx"),Duration=require("../title/duration.jsx"),MaturityRating=require("./maturityRating.jsx"),VideoMeta=React.createClass({displayName:"VideoMeta",statics:{getPaths:function(e,t,a){return MaturityRating.getPaths(e,t,a).concat([[["summary","runtime","seasonCount","releaseYear","starrating"]],["seasonList","current","showMemberType"]])}},render:function(){var e=this.props.model,t=e.getValueSync(["summary"]),a=e.getValueSync(["runtime"]),r=e.getValueSync(["seasonCount"]),s=e.getValueSync(["releaseYear"]),n=e.getValueSync(["seasonList","current","showMemberType"]);return t?React.createElement("div",{className:"meta"},React.createElement(StarBar,{model:this.props.model,extraClass:"jawmetastars",readOnly:this.props.readOnly}),this.props.suppressYear?null:React.createElement("span",{className:"year"},s?s:""),React.createElement(MaturityRating,{model:this.props.model,withReasons:this.props.withMaturityReasons}),React.createElement(Duration,{runtime:a,seasonCount:r,seasonLabelKey:n})):null}});module.exports=VideoMeta;


});


Requireify.register('js/akira/components/controls/iconButton.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),IconButton=React.createClass({displayName:"IconButton",getInitialState:function(){return{isHovered:!1}},onMouseEnter:function(){this.setState({isHovered:!0})},onMouseLeave:function(){this.setState({isHovered:!1})},render:function(){var e="nf-icon-button "+(this.props.extraClass||""),t="nf-icon-button-icon icon-button-"+this.props.icon+(this.state.isHovered?"-reverse":""),o="nf-icon-button-"+(this.props.tooltip?"tooltip":"label");return React.createElement("a",{className:e,onClick:this.props.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},React.createElement("span",{className:t}),this.props.label?React.createElement("span",{className:o},this.props.label):null,this.props.children)}});module.exports=IconButton;


});


Requireify.register('js/utils/playlist.js', function(require, requireAsync, module, exports) {


"use strict";function addToList(e,r,t){return execute("add",e,r,t)}function removeFromList(e,r,t){return execute("remove",e,r,t)}function execute(e,r,t,o){return XHR.request({method:"post",data:_.assign({operation:e,videoId:r,trackId:t},o),resource:"/playlistop",service:"api",authorize:!0})}var XHR=require("./XHR"),_=require("lodash");module.exports={addToList:addToList,removeFromList:removeFromList};


});


Requireify.register('js/utils/mylist_utils.js', function(require, requireAsync, module, exports) {


"use strict";var playlist=require("./playlist"),_=require("lodash"),root="undefined"!=typeof window?window:{},MyListUtils={addToList:function(t,e,o,i,s){this.modifyPlaylist("addToList",t,e,o,i,s)},removeFromList:function(t,e,o,i,s){this.modifyPlaylist("removeFromList",t,e,o,i,s)},getLolomo:function(){for(var t,e=root.pathEvaluator,o=["lolomo","lolomonobillboard"],i=!1,s=0;!i&&s<o.length;)t=e.hardBind([o[s++]]),i=!!t.getBoundValue();return i&&t},getMyListRow:function(){var t,e,o,i=this.getLolomo(),s=i&&i.getValueSync(["summary"]),n=s&&s.length||0;for(t=0;n>t;t++)if(e=i.bind([t]),e.getBoundValue()&&(o=e.getValueSync(["context"]),o&&"queue"===o))return{model:e,index:t};return null},isLolomoInCache:function(){var t=this.getLolomo();return t&&t.getBoundValue()},successHandler:function(t,e,o,i,s){s&&s.status&&"success"===s.status?(this.updateTitleState(t,i),setTimeout(function(){e(s)},500)):o(s)},errorHandler:function(t){t({status:"error",message:"Unknown server error"})},updateTitleState:function(t,e){var o=root.pathEvaluator,i=["videos",t,"queue"];o.getValueSync(i).inQueue="addToList"===e},modifyPlaylist:function(t,e,o,i,s,n){if(playlist[t])if(n=_.assign({},n),this.isLolomoInCache()&&this.getMyListRow())this.mutateMyList(t,e,o,i,s,n);else{var a=this.errorHandler.bind(this,s),r=this.successHandler.bind(this,e,i,s,t);playlist[t](e,o,n).subscribe(r,a)}},mutateMyList:function(t,e,o,i,s,n){var a,r=this,l=this.getLolomo(),u=["videos",e],d=["listToken",0,u,o,n.reqMsgToken,n.msgToken],c=this.getMyListRow();if(c){d[0]=c.model.getBoundValue().__key,d[1]=c.index,a=c.model.getValueSync(["length"]),"addToList"===t?a++:a--;var m=function(){s&&s(),c.model.setValueSync(["mutationFailure"],{operation:t,video:e,trackId:o})},f=function(){r.updateTitleState(e,t),"function"==typeof i&&i(),root.reactApp.refresh()},h=["length","trackIds","context","displayName"];l.call([t],d,[[h],[{to:a}],["watchedEvidence",{to:2}]],[]).subscribe(_.noop,m,f)}}};module.exports=MyListUtils;


});


Requireify.register('js/akira/components/title/myListButton.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),IconButton=require("../controls/iconButton.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),AppState=require("../../../reactMixins/appstate"),EventBus=require("../../../reactMixins/eventBus"),AkiraContext=require("../../../reactMixins/akiraContext"),MyListUtils=require("../../../utils/mylist_utils"),BUNDLE="discovery/akira/Common",ERROR_TIMEOUT=2e3,titleStates={inMyList:"inMyList",notInMyList:"notInMyList",adding:"adding",removing:"removing",error:"error"},buttonLabels={general:"button.secondary.mylist",inMyList:"my.list.remove",notInMyList:"my.list.add",adding:"my.list.adding",removing:"my.list.removing",error:"my.list.error"},MyListButton=React.createClass({displayName:"MyListButton",mixins:[I18N,AppState,AkiraContext],pqls:{summary:["summary"],queue:["queue"],data:["data"],titleState:["titleState"],availability:["availability"]},toLabel:function(t){return this.getString(BUNDLE,buttonLabels[t])},getTitleState:function(){var t=this.props.model,e=t.getValueSync(this.pqls.queue),i=e&&e.inQueue,s=t.getValueSync(this.pqls.summary),n=s&&s.id,a=this.getAppStateModel(["videos",n]),r=a.getValueSync(this.pqls.titleState);return r?r:i?titleStates.inMyList:titleStates.notInMyList},setTitleState:function(t,e,i){var s=this.props.model,n=e||s.getValueSync(this.pqls.summary).id,a=["videos",n],r=this.getAppStateModel(a);r.setValueSync(this.pqls.data,a),r.setValueSync(this.pqls.titleState,t),t||"undefined"==typeof i||(i?EventBus.emit("myList:remove:end",_.assign({},this.context,this.props)):EventBus.emit("myList:add:end",_.assign({},this.context,this.props)),"function"==typeof this.props.onStateChange&&this.props.onStateChange(i)),this.isMounted()&&this.forceUpdate()},getLabel:function(){var t=this.getTitleState();return this.props.showToolTip||t!==titleStates.inMyList&&t!==titleStates.notInMyList||(t="general"),this.toLabel(t)},toggleQueue:function(t){t.stopPropagation(),this.props.onClick&&this.props.onClick(t);var e=this.props.model,i=e.getValueSync(this.pqls.summary),s=i&&i.id,n=e.getValueSync(this.pqls.queue),a=n&&n.inQueue,r=this.context.trackId||0,o=this.setTitleState.bind(this,null,s,a);a?(EventBus.emit("myList:remove:start",_.assign({},this.context,this.props)),this.setTitleState(titleStates.removing),MyListUtils.removeFromList(s,r,o,this.errNext)):(EventBus.emit("myList:add:start",_.assign({},this.context,this.props)),this.setTitleState(titleStates.adding),MyListUtils.addToList(s,r,o,this.errNext))},errNext:function(t,e){this.setTitleState("error",t,e),setTimeout(function(){this.setTitleState(null,t,e)}.bind(this),ERROR_TIMEOUT)},render:function(){var t=this.props.model.getValueSync(this.pqls.summary),e=this.props.model.getValueSync(this.pqls.queue),i=this.props.model.getValueSync(this.pqls.availability),s=t&&t.isOriginal,n=i&&i.isPlayable;if(!s&&!n)return null;if(!e)return null;var a=this.getLabel();return React.createElement(IconButton,{extraClass:"mylist-button",icon:e.inQueue?"mylist-added":"mylist-add",label:a,tooltip:this.props.showToolTip,onClick:this.toggleQueue})},statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["button.secondary.mylist","my.list.add","my.list.remove","my.list.adding","my.list.removing","my.list.error"]}]}}});module.exports=MyListButton;


});


Requireify.register('js/components/presentationTracking/presentationTrackingContainer.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PresTrackedContainer=React.createClass({displayName:"PresTrackedContainer",render:function(){return React.createElement("div",{className:"ptrack-container"},this.props.children)}});module.exports=PresTrackedContainer;


});


Requireify.register('js/components/presentationTracking/presentationTrackingElement.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),AkiraContext=require("../../reactMixins/akiraContext"),presentationTracking=require("../../common/presentationTracking/presentationTracking"),DEFAULTS=require("../../common/presentationTracking/presentationTrackingConsts").DEFAULT_TRACKING_VALUES,PresTrackedElement=React.createClass({displayName:"PresTrackedElement",mixins:[AkiraContext],componentDidMount:function(){presentationTracking.requestScan()},componentWillUnmount:function(){presentationTracking.requestScan()},getDataAttribute:function(t,e,r){var n;return n=_.isUndefined(this.props[t])?_.isUndefined(this.context[e])?r:this.context[e]:this.props[t]},render:function(){var t={location:this.getDataAttribute("location","currentPage",DEFAULTS.STRING),rank:this.getDataAttribute("rank","rankNum",DEFAULTS.NUMBER),request_id:this.getDataAttribute("requestId","requestId",DEFAULTS.STRING),row:this.getDataAttribute("row","rowNum",DEFAULTS.NUMBER),track_id:this.getDataAttribute("trackId","trackId",-1),video_id:this.getDataAttribute("videoId","videoId",-1)},e=this.getDataAttribute("parentContext","parentContext",void 0);return e&&(t.parent_context={row:e.rowNum,rank:e.rankNum,request_id:e.requestId,track_id:e.trackId}),React.createElement("div",{className:"ptrack-content","data-ui-tracking-context":encodeURI(JSON.stringify(t))},this.props.children)}});module.exports=PresTrackedElement;


});


Requireify.register('js/utils/reactUtils.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={intersperse:function(e,t){return 0===e.length?[]:e.slice(1).reduce(function(e,n){return e.concat([t,n])},[e[0]])}};


});


Requireify.register('js/akira/components/jawBone/overview/overview.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Resume=require("./../resume.jsx"),Evidence=require("./evidence.jsx"),Link=require("../../controls/mainViewLink.jsx"),PlayButton=require("../../controls/playbutton.jsx"),VideoMeta=require("../../title/videoMeta.jsx"),MyListButton=require("../../title/myListButton.jsx"),PresTrackedContainer=require("../../../../components/presentationTracking/presentationTrackingContainer.jsx"),PresTrackedElement=require("../../../../components/presentationTracking/presentationTrackingElement.jsx"),I18N=require("../../../../reactMixins/i18nWithDeps"),Watched=require("../../../../reactMixins/video/watched"),Utils=require("../../../../utils/reactUtils"),AkiraContext=require("../../../../reactMixins/akiraContext"),MAX_TAGS=10,MAX_GENRES=3,MAX_CAST=3,BUNDLE="discovery/akira/JawBone",Overview=React.createClass({displayName:"Overview",mixins:[I18N,Watched,AkiraContext],statics:{getPaths:function(e){var t=[[["summary","regularSynopsis","queue","hookEvidence","titleEvidence","watched","episodeCount","info"]],["genres","summary"],["genres",{to:MAX_GENRES-1},["id","name"]],["tags","summary"],["tags",{to:MAX_TAGS-1},["id","name"]],["cast","summary"],["cast",{to:MAX_CAST-1},["id","name"]]];return e&&(t=t.concat(VideoMeta.getPaths()).concat(Watched.getPaths()).concat(Resume.getPaths()).concat(PlayButton.getPaths())),t}},childContextTypes:{trackId:React.PropTypes.number},getChildContext:function(){var e={};return this.props.trackId&&(e.trackId=this.props.trackId),e},updateMyListMessage:function(){this.forceUpdate()},render:function(){var e,t,a,n,i,s,r,c=this.props.model,l=c.getValueSync(["summary"]),o=c.getValueSync(["cast","summary"]),u=c.getValueSync(["genres","summary"]),m=c.getValueSync(["regularSynopsis"]),d=c.getValueSync(["tags","summary"]),v=c.getValueSync(["queue"]),g=c.getValueSync(["info"])||{},p=c.getValueSync(["hookEvidence"]),y=c.getValueSync(["titleEvidence"]),h=c.getValueSync(["episodeCount"]),E=this.getStrings(BUNDLE),R=this.props.isPrePromo,S=[],k=[],w=[],M=[],x=", ",N="",V=this.isInResumeState(),L=this.isInNextUpState(),A=null,C=React.addons.classSet;if(r=C({myListWrapper:!0,prePromo:R}),!l)return null;for(t=o?Math.min(MAX_CAST,o.length):0,a=u?Math.min(MAX_GENRES,u.length):0,n=d?Math.min(MAX_TAGS,d.length):0,N="overview.this."+l.type+".is",e=0;t>e;e++){var P=c.bind(["cast",e]);P&&(i=P.getValueSync(["id"]),s=P.getValueSync(["name"]),s&&S.push(React.createElement(Link,{key:"cast"+e,type:"person",id:i},s)))}for(S=Utils.intersperse(S,x),e=0;a>e;e++){var T=c.bind(["genres",e]);T&&(i=T.getValueSync(["id"]),s=T.getValueSync(["name"]),s&&k.push(React.createElement(Link,{key:"genres"+e,type:"genre",id:i},s)))}for(k=Utils.intersperse(k,x),e=0;n>e;e++){var f=c.bind(["tags",e]);f&&(i=f.getValueSync(["id"]),s=f.getValueSync(["name"]),s&&w.push(React.createElement(Link,{key:"tags"+e,type:"tag",id:i},s)))}w=Utils.intersperse(w,x),l.isOriginal||(y&&y.value?M.push(React.createElement(Evidence,{key:"titleEvidence",type:y.type,imgSrc:y.value.boxart},E.get("overview.evidence.watched.by",{title:y.value.title}))):p&&p.value&&M.push(React.createElement(Evidence,{key:"hookEvidence",type:p.type,kind:p.value.kind},p.value.text)));var q=!R,_=l.isOriginal&&g.message,b=!!S.length,j=k.length&&!R,I=M.length&&!R,U=w.length&&!R,B=V||L?"continue":"start",X=R?this.updateMyListMessage:null;return React.createElement("div",{className:"overview"},React.createElement(PresTrackedContainer,null,React.createElement(PresTrackedElement,{videoId:l.id},React.createElement("div",{className:"jawbone-overview-info has-jawbone-nav-transition"},q?React.createElement(VideoMeta,{model:c,withMaturityReasons:!0}):null,"continue"===B?React.createElement(Resume,{model:c,resume:V,isStandalone:!h}):null,"start"===B?React.createElement("span",null,_?React.createElement("div",{className:"supplemental-message"},g.message):null,React.createElement("div",{className:"synopsis"},m?m:React.createElement("b",{style:{color:"#fff"}},E.get("overview.loading"))),React.createElement("div",{className:"listMeta"},b?React.createElement("p",null,E.get("overview.starring")," ",React.createElement("span",{className:"metaList"},S)):null,j?React.createElement("p",null,E.get("overview.genres")," ",React.createElement("span",{className:"metaList"},k)):null,U?React.createElement("p",null,E.get(N)," ",React.createElement("span",{className:"metaList"},w)):null)):null,I?React.createElement("div",{className:"user-evidence"},React.createElement("ul",null,M)):null,v?React.createElement("div",{className:r},React.createElement(MyListButton,{model:this.props.model,videoId:l.id,inQueue:v.inQueue,onStateChange:X}),v.inQueue&&R?React.createElement("div",{className:"myListPrepromoMessage"},E.get("mylist.prepromo.message")):null):null),A)))}});Overview.__meta__={strings:[{bundle:BUNDLE,ids:["overview.starring","overview.genres","overview.this.show.is","overview.this.movie.is","overview.reasons.to.watch","overview.evidence.watched.by","overview.resume","overview.next.up","mylist.prepromo.message","overview.loading"]}]},module.exports=Overview;


});


Requireify.register('js/common/imageExtension.js', function(require, requireAsync, module, exports) {


"use strict";var contextData=require("../utils/contextData"),ImageExtension={canUseWebPFromContext:function(e){var t=e?e.browserInfo&&e.browserInfo.data||e.browserInfo:contextData.getFeatureData("browserInfo");return t?t.features.webp:void 0},getExtensionForOpaqueImage:function(e){return this.getWebpOrFallback(e,"jpg")},getExtensionForTransparentImage:function(e){return this.getWebpOrFallback(e,"png")},getWebpOrFallback:function(e,t){return this.canUseWebPFromContext(e)?"webp":t}};module.exports=ImageExtension;


});


Requireify.register('js/akira/components/jawBone/episodes/episodeCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Progress=require("./../progress.jsx"),PlayButton=require("../../controls/playbutton.jsx"),LoadingBox=require("../../loaders/loadingBox.jsx"),PresTrackedElement=require("../../../../components/presentationTracking/presentationTrackingElement.jsx"),ImageExtension=require("../../../../common/imageExtension"),IsomorphicContext=require("../../../../reactMixins/isomorphicContextWithDeps"),AkiraContext=require("../../../../reactMixins/akiraContext"),Duration=require("../../title/duration.jsx"),IMAGE_SIZE="_260x146",DEFAULT_PLACEHOLDER_DELAY=.5,PLACEHOLDER_DELAY_PER_ITEM=.2,BUNDLE="discovery/akira/Jawbone";module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext,AkiraContext],childContextTypes:{rankNum:React.PropTypes.number},getChildContext:function(){return{rankNum:this.props.rankNum}},statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["new.episode"]}]},getPaths:function(e){return[[["summary","synopsis","title","runtime","bookmarkPosition"]],["interestingMoment",IMAGE_SIZE,ImageExtension.getExtensionForOpaqueImage(e)]]}},getImage:function(e,t){var r=ImageExtension.getExtensionForOpaqueImage(t);return e&&e[IMAGE_SIZE]&&e[IMAGE_SIZE][r]?{backgroundImage:"url("+e[IMAGE_SIZE][r].url+")"}:{}},renderPlaceholders:function(){var e={"video-artwork":!0},t=DEFAULT_PLACEHOLDER_DELAY+PLACEHOLDER_DELAY_PER_ITEM*this.props.index;return React.createElement("div",{className:"episodeLockup"},React.createElement(LoadingBox,{boxClassNames:e,delay:t,pulsate:!0,displayWhenNotPulsing:!1}))},render:function(){if(this.props.isLoading)return this.renderPlaceholders();var e,t,r=this.props.model,n=this.props.show,a=r.getValueSync(["summary"]),s=r.getValueSync(["title"]),i=r.getValueSync(["interestingMoment"]),o=r.getValueSync(["synopsis"]),c=r.getValueSync(["runtime"]),l=r.getValueSync(["bookmarkPosition"]),m=l>=0,u=React.addons.classSet,E=u({episodeLockup:!0,current:this.props.current}),d=u({episodeNumber:!0,noProgress:!m});return a?(t=this.getImage(i,this.getContext()),e=React.createElement(PlayButton,{model:n,episode:r,className:"episodePlay"}),a.notStreaming&&(s=s||this.getString(BUNDLE,"new.episode"),c="",o=a.availabilityDateMessaging,e=null,t.opacity=.4),React.createElement("div",{className:E},React.createElement(PresTrackedElement,{videoId:a.id},React.createElement("div",{className:"episodeArt video-artwork",style:t},e,React.createElement("div",{className:"numberVignette"}),React.createElement("div",{className:d},a.episode),m?React.createElement(Progress,{runtime:c,bookmarkPosition:l,current:this.props.current}):null)),React.createElement("div",{className:"episodeTitle"},React.createElement("p",null,s),React.createElement(Duration,{runtime:c,onlyInMinutes:!0})),React.createElement("div",{className:"episodeSynopsis"},o))):null}});


});


Requireify.register('js/akira/components/jawBone/episodes/episodesList.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),EpisodeCard=require("./episodeCard.jsx"),PresTrackedContainer=require("../../../../components/presentationTracking/presentationTrackingContainer.jsx"),Slider=require("../../slider/slider.jsx"),AkiraContext=require("../../../../reactMixins/akiraContext"),AutoFetch=require("../../../../reactMixins/falkor-auto-fetch"),MAX_EPISODES=40,MAX_PLACEHOLDER_EPISODES=5,EpisodesList=React.createClass({displayName:"EpisodesList",mixins:[AutoFetch,AkiraContext],statics:{getPaths:function(e,t,s){var i=[["episodes","summary"],["episodes","current","summary"]],r=s&&void 0!==s.numEpisodes?s.numEpisodes:MAX_EPISODES,n=EpisodeCard.getPaths(e).map(function(e){return["episodes",{from:-1,to:r}].concat(e)});return i.concat(n)}},getDefaultProps:function(){return{seasonIndex:"current"}},getEpisodesList:function(){var e,t,s,i=this.props.model,r=[];if(this.initialLeftmostVisibleIndex=0,!i.getBoundValue())return r;if(s=i.getValueSync(["episodes","current","summary"]),e=i.bind(["episodes"]),t=e.getValueSync(["summary"]),!t)return r;for(var n=0;n<t.length;n++){var o,a,d=e.bind([n]);d.getBoundValue()&&(o=d.getValueSync(["summary"]),s&&(a=o.id===s.id,a&&(this.initialLeftmostVisibleIndex=n>0?n-1:n)),r.push(React.createElement(EpisodeCard,{key:"episode"+n,show:this.props.show,season:i,model:d,current:a,rankNum:n})))}return r},getLoadingEpisodeList:function(){for(var e=[],t=0;MAX_PLACEHOLDER_EPISODES>t;t++)e.push(React.createElement(EpisodeCard,{key:"episode"+t,isLoading:!0,index:t}));return e},render:function(){var e,t,s;return this.props.isLoading?(e=MAX_PLACEHOLDER_EPISODES,t=this.getLoadingEpisodeList(),s="placeholder-episodes-"+this.props.seasonIndex):(e=this.context.columnsInRow-1,t=this.getEpisodesList(),s="season-"+this.props.seasonIndex+this.initialLeftmostVisibleIndex),React.createElement("div",{className:"episodeWrapper"},React.createElement(PresTrackedContainer,null,React.createElement(Slider,{itemsInRow:e,totalItems:t.length,key:s,initialLeftmostVisibleIndex:this.initialLeftmostVisibleIndex},t)))}});module.exports=EpisodesList;


});


Requireify.register('js/akira/components/controls/nfDropdown.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),SubMenu=require("./subMenu.jsx");module.exports=React.createClass({displayName:"exports",getDefaultProps:function(){return{widthRestricted:!0}},getInitialState:function(){return{open:!1}},componentWillUnmount:function(){document.removeEventListener("click",this.close)},close:function(){document.removeEventListener("click",this.close),this.setState({open:!1})},handleClick:function(){this.isReadOnly()||(this.setState({open:!0}),document.addEventListener("click",this.close))},handleSubMenuClick:function(){this.close()},isReadOnly:function(){return this.props.options&&1===this.props.options.length},render:function(){var e,t=1,s=React.addons.classSet,i=s({nfDropDown:!0,widthRestricted:this.props.widthRestricted,readOnly:this.isReadOnly()}),n=s({label:!0,loading:this.props.isLoading});return this.props.isLoading&&(e=""),this.props.label&&(e=this.props.label),this.props.defaultValue&&(e=this.props.defaultValue),this.props.cols&&(t=this.props.cols),React.createElement("div",React.__spread({},this.props,{className:i}),React.createElement("div",{className:n,onClick:this.handleClick},e,React.createElement("span",{className:"arrow"})),this.state.open?React.createElement(SubMenu,{items:this.props.options,cols:t,onClick:this.handleSubMenuClick,showTopBar:!1}):null)}});


});


Requireify.register('js/akira/components/jawBone/episodes/episodes.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),EpisodesList=require("./episodesList.jsx"),Dropdown=require("../../controls/nfDropdown.jsx"),PlayLink=require("../../controls/playLink.jsx"),I18N=require("../../../../reactMixins/i18n"),IsomorphicContext=require("../../../../reactMixins/isomorphicContextWithDeps"),MAX_DROPDOWN_SEASONS=20,BUNDLE="discovery/akira/JawBone",getPaths=function(e,s,t){var n,a=void 0!==t.seasonIndex?t.seasonIndex:"current",i=void 0!==t.numSeasons?t.numSeasons:MAX_DROPDOWN_SEASONS,o=EpisodesList.getPaths(e).map(function(e){return["seasonList",a].concat(e)});return n=[["seasonList","summary"],["seasonList",{to:i},"summary"]].concat(o)};module.exports=React.createClass({displayName:"exports",mixins:[I18N,IsomorphicContext],statics:{getPaths:getPaths,__meta__:{strings:[{bundle:BUNDLE,ids:["episodes.unavailable"]}]}},childContextTypes:{trackId:React.PropTypes.number},getChildContext:function(){var e={};return this.props.trackId&&(e.trackId=this.props.trackId),e},getInitialState:function(){return{seasonIndex:void 0}},getSeasonOptions:function(){var e,s,t,n=this.props.model,a=[],i=n.bind(["seasonList"]),o=i.getValueSync(["summary"]),r=i.bind(["current"]);if(!o)return null;for(r&&(t=r.getValueSync(["summary"]),t&&(s=t.id)),e=0;e<o.length;e++){var d,c=i.bind([e]).getValueSync(["summary"]),u=e;c&&(c.id===s&&(this.currentSeasonIndex=e),d=React.createElement("a",{className:"sub-menu-link",key:"season"+e,onClick:this.dropDownClickHandler(u)},c.name),a.push(d))}return a},dropDownClickHandler:function(e){var s=this;return function(){s.handleSeasonDropDownChange(e)}},handleSeasonDropDownChange:function(e){this.setState({seasonIndex:e})},renderBojackPlayLink:function(){return React.createElement(PlayLink,{className:"bojack-d-pos",trackId:this.props.trackId,episodeId:70298935,startTime:450},React.createElement("div",{className:"bojack-d"},"D"))},renderError:function(){return React.createElement("p",{className:"unavailable"},this.getString(BUNDLE,"episodes.unavailable"))},render:function(){var e,s,t,n,a,i=this.props.model,o=this.getSeasonOptions(),r=i.getValueSync(["summary"]),d=i.bind(["seasonList"]);return o||this.props.isLoading?(void 0===this.state.seasonIndex&&(this.state.seasonIndex=this.currentSeasonIndex),e="episodes-"+r.id+"-"+this.state.seasonIndex,s=d.bind([this.state.seasonIndex]),t=s.getValueSync(["summary"]),n=t&&t.length,a=o?o[this.state.seasonIndex]:"",React.createElement("div",null,React.createElement(Dropdown,{options:o,defaultValue:a,isLoading:this.props.isLoading}),this.props.hasBojackEasterEgg&&!this.props.isLoading?this.renderBojackPlayLink():"",React.createElement(EpisodesList,{key:e,seasonIndex:this.state.seasonIndex,pqls:EpisodesList.getPaths(this.getContext(),null,{numEpisodes:n}),show:i,model:s,isLoading:this.props.isLoading}))):this.renderError()}});


});


Requireify.register('js/akira/components/jawBone/moreLikeThis/moreLikeThisCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PlayButton=require("../../controls/playbutton.jsx"),LoadingBox=require("../../loaders/loadingBox.jsx"),VideoMeta=require("../../title/videoMeta.jsx"),MyListButton=require("../../title/myListButton.jsx"),ImageExtension=require("../../../../common/imageExtension"),PresTrackedElement=require("../../../../components/presentationTracking/presentationTrackingElement.jsx"),IsomorphicContext=require("../../../../reactMixins/isomorphicContextWithDeps"),AkiraContext=require("../../../../reactMixins/akiraContext"),IMAGE_SIZE="_260x146",DEFAULT_PLACEHOLDER_DELAY=.5,PLACEHOLDER_DELAY_PER_ITEM=.2;module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext,AkiraContext],childContextTypes:{rankNum:React.PropTypes.number},getChildContext:function(){return{rankNum:this.props.rankNum}},statics:{getPaths:function(e){return[[["synopsis","title","summary","queue","trackId"]],["boxarts",IMAGE_SIZE,ImageExtension.getExtensionForOpaqueImage(e)]].concat(VideoMeta.getPaths()).concat(PlayButton.getPaths())}},renderPlaceholders:function(){var e={"video-artwork":!0},t=DEFAULT_PLACEHOLDER_DELAY+PLACEHOLDER_DELAY_PER_ITEM*this.props.index;return React.createElement("div",{className:"simsLockup"},React.createElement(LoadingBox,{boxClassNames:e,delay:t,pulsate:!0,displayWhenNotPulsing:!1}))},render:function(){if(this.props.isLoading)return this.renderPlaceholders();var e,t=this.props.model,a=t.getValueSync(["summary"]),r=t.getValueSync(["boxarts"]),n=t.getValueSync(["title"]),s=t.getValueSync(["synopsis"]),o=t.getValueSync(["queue"]),i=a&&a.id,c=ImageExtension.getExtensionForOpaqueImage(this.getContext());return r&&r[IMAGE_SIZE]&&r[IMAGE_SIZE][c]&&(e={backgroundImage:"url("+r[IMAGE_SIZE][c].url+")"}),React.createElement("div",{className:"simsLockup"},React.createElement(PresTrackedElement,{videoId:i},React.createElement("div",{className:"video-artwork sims-artwork",style:e,alt:n},React.createElement(PlayButton,{model:t,className:"simsPlay"}),React.createElement(MyListButton,{model:t.hardBind([]),showToolTip:!0,videoId:i,inQueue:o.inQueue,labelOnHover:!0,labelLeft:!0}))),React.createElement(VideoMeta,{model:t}),React.createElement("div",{className:"simsSynopsis"},s))}});


});


Requireify.register('js/akira/components/jawBone/moreLikeThis/moreLikeThis.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MoreLikeThisCard=require("./moreLikeThisCard.jsx"),Slider=require("../../slider/slider.jsx"),AkiraContext=require("../../../../reactMixins/akiraContext"),PresTrackedContainer=require("../../../../components/presentationTracking/presentationTrackingContainer.jsx"),I18N=require("../../../../reactMixins/i18nWithDeps"),NUM_PER_PANE=25,MAX_PLACEHOLDER_SIMS=5,BUNDLE="discovery/akira/JawBone";module.exports=React.createClass({displayName:"exports",NUM_PER_PANE:NUM_PER_PANE,statics:{getPaths:function(e,r,t){var i=MoreLikeThisCard.getPaths(e,r,t).map(function(e){return["similars",{to:NUM_PER_PANE}].concat(e)});return[["similars",["summary","trackId"]]].concat(i)},__meta__:{strings:[{bundle:BUNDLE,ids:["more.like.this.unavailable"]}]}},mixins:[I18N,AkiraContext],childContextTypes:{trackId:React.PropTypes.number},getChildContext:function(){return{trackId:this.getTrackId()}},getTrackId:function(){var e=this.props.model,r=e.bind(["similars"]),t=r.getValueSync(["trackId"]);return t},getSims:function(){var e,r=this.props.model,t=r.bind(["similars"]),i=t.getValueSync(["summary"]),n=5,a=[];if(!i)return null;"undefined"!=typeof i.length&&(n=Math.min(this.NUM_PER_PANE,i.length));for(var s=0;n>s;s++)e=t.bind([s]),e.getBoundValue()&&a.push(React.createElement(MoreLikeThisCard,{key:"sims"+s,model:e,rankNum:s}));return a},getLoadingSimsList:function(){for(var e=[],r=0;MAX_PLACEHOLDER_SIMS>r;r++)e.push(React.createElement(MoreLikeThisCard,{key:"sims"+r,isLoading:!0,index:r}));return e},renderError:function(){return React.createElement("p",{className:"unavailable"},this.getString(BUNDLE,"more.like.this.unavailable"))},render:function(){var e,r,t=!0;if(this.props.isLoading)e=MAX_PLACEHOLDER_SIMS,r=this.getLoadingSimsList(),t=!1;else if(e=this.context.columnsInRow-1,r=this.getSims(),null===r||0===r.length)return this.renderError();return React.createElement("div",{className:"simsWrapper"},React.createElement(PresTrackedContainer,null,React.createElement(Slider,{itemsInRow:e,totalItems:r.length,enableLooping:t},r)))}});


});


Requireify.register('js/akira/components/jawBone/trailers/trailerCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PlayButton=require("../../controls/playbutton.jsx"),LoadingBox=require("../../loaders/loadingBox.jsx"),PresTrackedElement=require("../../../../components/presentationTracking/presentationTrackingElement.jsx"),ImageExtension=require("../../../../common/imageExtension"),IsomorphicContext=require("../../../../reactMixins/isomorphicContextWithDeps"),AkiraContext=require("../../../../reactMixins/akiraContext"),IMAGE_SIZE="_260x146",DEFAULT_PLACEHOLDER_DELAY=.5,PLACEHOLDER_DELAY_PER_ITEM=.2;module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext,AkiraContext],childContextTypes:{rankNum:React.PropTypes.number},getChildContext:function(){return{rankNum:this.props.rankNum}},getImage:function(e,t){var r=ImageExtension.getExtensionForOpaqueImage(t);return e&&e[IMAGE_SIZE]&&e[IMAGE_SIZE][r]?{backgroundImage:"url("+e[IMAGE_SIZE][r].url+")"}:{}},statics:{getPaths:function(e){return[[["title","summary","trackId"]],["interestingMoment",IMAGE_SIZE,ImageExtension.getExtensionForOpaqueImage(e)]].concat(PlayButton.getPaths())}},renderPlaceholders:function(){var e={"video-artwork":!0},t=DEFAULT_PLACEHOLDER_DELAY+PLACEHOLDER_DELAY_PER_ITEM*this.props.index;return React.createElement("div",{className:"trailerLockup"},React.createElement(LoadingBox,{boxClassNames:e,delay:t,pulsate:!0,displayWhenNotPulsing:!1}))},render:function(){if(this.props.isLoading)return this.renderPlaceholders();var e,t=this.props.model,r=t.getValueSync(["summary"]),a=t.getValueSync(["interestingMoment"]),n=t.getValueSync(["title"]),i=r&&r.id;return a&&(e=this.getImage(a,this.getContext())),React.createElement("div",{className:"trailerLockup"},React.createElement(PresTrackedElement,{videoId:i},React.createElement("div",{className:"video-artwork trailer-artwork",style:e,alt:n},React.createElement(PlayButton,{model:t,className:"trailerPlay",startTime:"0"}))),React.createElement("div",{className:"trailerTitle"},n))}});


});


Requireify.register('js/akira/components/jawBone/trailers/trailers.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),TrailerCard=require("./trailerCard.jsx"),Slider=require("../../slider/slider.jsx"),AkiraContext=require("../../../../reactMixins/akiraContext"),PresTrackedContainer=require("../../../../components/presentationTracking/presentationTrackingContainer.jsx"),I18N=require("../../../../reactMixins/i18nWithDeps"),NUM_PER_PANE=25,MAX_PLACEHOLDERS=5,BUNDLE="discovery/akira/JawBone";module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,r,t){var a=TrailerCard.getPaths(e,r,t).map(function(e){return["trailers",{to:NUM_PER_PANE}].concat(e)});return[["trailers",["summary","recapCount"]]].concat(a)},__meta__:{strings:[{bundle:BUNDLE,ids:["trailers.unavailable"]}]}},childContextTypes:{trackId:React.PropTypes.number},mixins:[I18N,AkiraContext],getChildContext:function(){var e={};return this.props.trackId&&(e.trackId=this.props.trackId),e},getTrailers:function(){var e,r=this.props.model,t=r.bind(["trailers"]),a=t.getValueSync(["summary"]),i=5,n=[];if(!a)return null;"undefined"!=typeof a.length&&(i=Math.min(NUM_PER_PANE,a.length));for(var s=0;i>s;s++)e=t.bind([s]),e.getBoundValue()&&n.push(React.createElement(TrailerCard,{key:"trailer"+s,model:e,rankNum:s}));return n},getLoadingTrailersList:function(){for(var e=[],r=0;MAX_PLACEHOLDERS>r;r++)e.push(React.createElement(TrailerCard,{key:"trailer"+r,isLoading:!0,index:r}));return e},renderError:function(){return React.createElement("p",{className:"unavailable"},this.getString(BUNDLE,"trailers.unavailable"))},render:function(){var e,r;if(this.props.isLoading)e=MAX_PLACEHOLDERS,r=this.getLoadingTrailersList();else if(e=this.context.columnsInRow-1,r=this.getTrailers(),null===r||0===r.length)return this.renderError();return React.createElement("div",{className:"trailerWrapper"},React.createElement(PresTrackedContainer,null,React.createElement(Slider,{itemsInRow:e,totalItems:r.length,enableLooping:!1},r)))}});


});


Requireify.register('js/akira/components/jawBone/details/festival.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Link=require("../../controls/mainViewLink.jsx"),I18N=require("../../../../reactMixins/i18nWithDeps"),ENTITY_REG="®",BUNDLE="discovery/akira/JawBone",getPaths=function(){return[[["length","name","year"]],[{to:10},["type","winner"]],[{to:10},"person",["name","id"]]]};module.exports=React.createClass({displayName:"exports",statics:{getPaths:getPaths,__meta__:{strings:[{bundle:"discovery/akira/JawBone",ids:["details.award.nominee"]}]}},mixins:[I18N],render:function(){var e,t=this.props.model,a=t.getValueSync(["name"])+ENTITY_REG,n=t.getValueSync(["year"]),i=n?n+" "+a:a,r=t.getValueSync(["length"]),s=[],l=0;for(e=0;r>e;e++){var c,u,m=t.bind([e]),o=m.bind(["person"]),d=m.getValueSync(["type"]),p=m.getValueSync(["winner"]),y=o.getValueSync(["name"]),g=o.getValueSync(["id"]),E=null;if(l+=1.5,g&&(l+=2,E=React.createElement("ul",null,React.createElement("li",null,React.createElement(Link,{type:"person",id:g},y)))),this.props.maxLines&&l>=this.props.maxLines)break;c=p?d:this.getString(BUNDLE,"details.award.nominee",{TYPE:d}),u=c+(E?":":""),s.push(React.createElement("div",{key:"award"+e},React.createElement("div",{className:"listLabel"},u),E?E:null))}return React.createElement("div",null,React.createElement("div",{className:"listLabel"},i),s)}});


});


Requireify.register('js/akira/components/jawBone/details/people.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../../reactMixins/i18nWithDeps"),Link=require("../../controls/mainViewLink.jsx"),MAX_CAST=10,MAX_CREATORS=3,MAX_DIRECTORS=3,BUNDLE="discovery/akira/JawBone",People=React.createClass({displayName:"People",statics:{getPaths:function(){return[["creators","summary"],["creators",{to:MAX_CREATORS-1},["id","name"]],["directors","summary"],["directors",{to:MAX_DIRECTORS-1},["id","name"]],["cast","summary"],["cast",{to:MAX_CAST-1},["id","name"]]]},__meta__:{strings:[{bundle:"discovery/akira/JawBone:details",ids:["creator","director","cast"]}]}},mixins:[I18N],renderList:function(e,t,r){var a,l=[];for(a=0;a<Math.min(e,t.length);a++){var n,s,i=this.props.model.bind([r,a]);i&&(n=i.getValueSync(["id"]),s=i.getValueSync(["name"]),s&&n&&l.push(React.createElement("li",{key:r+a},React.createElement(Link,{type:"person",id:n},s))))}return l},render:function(){var e=[],t=[],r=[],a=this.props.model,l=a.getValueSync(["creators","summary"]),n=a.getValueSync(["directors","summary"]),s=a.getValueSync(["cast","summary"]);return l&&(t=this.renderList(MAX_CREATORS,l,"creators")),n&&(r=this.renderList(MAX_DIRECTORS,n,"directors")),s&&(e=this.renderList(MAX_CAST,s,"cast")),t.length||r.length||e.length?React.createElement("div",null,t.length?React.createElement("div",{className:"listLabel"},this.getString(BUNDLE,"details.creator")):null,t.length?React.createElement("ul",null,t):null,r.length?React.createElement("div",{className:"listLabel"},this.getString(BUNDLE,"details.director")):null,r.length?React.createElement("ul",null,r):null,e.length?React.createElement("div",{className:"listLabel"},this.getString(BUNDLE,"details.cast")):null,e.length?React.createElement("ul",null,e):null):null}});module.exports=People;


});


Requireify.register('js/akira/components/jawBone/details/tags.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../../reactMixins/i18nWithDeps"),Link=require("../../controls/mainViewLink.jsx"),MAX_GENRES=4,MAX_TAGS=2,BUNDLE="discovery/akira/JawBone",Tags=React.createClass({displayName:"Tags",statics:{getPaths:function(){return[["genres","summary"],["genres",{to:MAX_GENRES-1},["id","name"]],["tags","summary"],["tags",{to:MAX_TAGS-1},["id","name"]]]},__meta__:{strings:[{bundle:"discovery/akira/JawBone:details",ids:["genres","this.show.is","this.movie.is"]}]}},mixins:[I18N],renderList:function(e,t,s,i){var a,n=[];for(a=0;a<Math.min(e,t.length);a++){var r,l,g=this.props.model.bind([s,a]);g&&(r=g.getValueSync(["id"]),l=g.getValueSync(["name"]),l&&r&&n.push(React.createElement("li",{key:s+a},React.createElement(Link,{type:i,id:r},l))))}return n},render:function(){var e=[],t=[],s=this.props.model,i=s.getValueSync(["genres","summary"]),a=s.getValueSync(["tags","summary"]),n=this.props.isShow?this.getString(BUNDLE,"details.this.show.is"):this.getString(BUNDLE,"details.this.movie.is");return i&&(e=this.renderList(MAX_GENRES,i,"genres","genre")),a&&(t=this.renderList(MAX_TAGS,a,"tags","tag")),e.length||t.length?React.createElement("div",null,e.length?React.createElement("div",{className:"listLabel"},this.getString(BUNDLE,"details.genres")):null,e.length?React.createElement("ul",null,e):null,t.length?React.createElement("div",{className:"listLabel"},n):null,t.length?React.createElement("ul",null,t):null):null}});module.exports=Tags;


});


Requireify.register('js/akira/components/reviews/reviewText.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),ReviewText=React.createClass({displayName:"ReviewText",render:function(){var e=this.props.text;return this.props.maxLength&&(e=_.trunc(e,{length:this.props.maxLength,separator:/\s/})),React.createElement("div",{className:"reviewText"},e)}});module.exports=ReviewText;


});


Requireify.register('js/akira/components/reviews/helpfulCount.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Reviews",HelpfulCount=React.createClass({displayName:"HelpfulCount",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["helpful.review.count"]}]}},mixins:[I18N],render:function(){var e=this.getStrings(BUNDLE);return React.createElement("div",{className:"helpfulCount",dangerouslySetInnerHTML:{__html:e.get("helpful.review.count",{numHelpful:this.props.numHelpful,totalNum:this.props.numHelpful+this.props.numNotHelpful})}})}});module.exports=HelpfulCount;


});


Requireify.register('js/akira/components/reviews/reviewsConstants.js', function(require, requireAsync, module, exports) {


"use strict";var Constants={votes:{HELPFUL:"HELPFUL",NOT_HELPFUL:"NOT_HELPFUL"},voteLocalizationLabels:{HELPFUL:"helpful",NOT_HELPFUL:"not.helpful"},flags:{OBJECTIONABLE_CONTENT:"OBJECTIONABLE_CONTENT",HAS_SPOILER:"HAS_SPOILER",NOT_A_REVIEW:"NOT_A_REVIEW"}};module.exports=Constants;


});


Requireify.register('js/akira/components/reviews/voteReview.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),ReviewConstants=require("./reviewsConstants.js"),BUNDLE="discovery/akira/Reviews:vote.review",VoteReview=React.createClass({displayName:"VoteReview",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:[ReviewConstants.voteLocalizationLabels.HELPFUL,ReviewConstants.voteLocalizationLabels.NOT_HELPFUL]}]}},mixins:[I18N],contextTypes:{reviewListId:React.PropTypes.string},handleChange:function(){this.props.checked||this.props.onVoteChange(this.props.value)},render:function(){var e=this.context.reviewListId+"-"+this.props.reviewId+"-"+this.props.value;return React.createElement("li",{className:"akira-radio-item"},React.createElement("input",{type:"radio",className:"akira-radio",name:this.context.reviewListId+"-helpfulVote-"+this.props.reviewId,id:e,value:this.props.value,checked:this.props.checked,onChange:this.handleChange}),React.createElement("label",{className:"akira-radio-label action",htmlFor:e},this.getStrings(BUNDLE).get(ReviewConstants.voteLocalizationLabels[this.props.value])))}});module.exports=VoteReview;


});


Requireify.register('js/akira/components/reviews/voteReviewSection.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),ReviewConstants=require("./reviewsConstants.js"),VoteReview=require("./voteReview.jsx"),BUNDLE="discovery/akira/Reviews",VoteReviewSection=React.createClass({displayName:"VoteReviewSection",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["vote.review.prompt","flag.review.inappropriate"]}]}},mixins:[I18N],contextTypes:{pathEvaluator:React.PropTypes.object},voteReview:function(e){var t=this,i=this.props.reviewModel.getValueSync(["id"]),o=this.props.videoModel.getValueSync(["reviewVotes"])||{},r=o[i];return r===e?!1:(this.context.pathEvaluator.call(["reviews",i,"voteReview"],[e],[],[["reviews",i,["helpfulCount","notHelpfulCount"]],["videos",this.props.videoModel.getValueSync(["summary"]).id,"reviewVotes"]]).subscribe(function(){t.props.onVoteChange(e)}),void 0)},renderVoteReview:function(e,t){return t&&t!==e?null:React.createElement(VoteReview,{reviewId:this.props.reviewModel.getValueSync(["id"]),value:e,checked:t===e,onVoteChange:this.voteReview})},render:function(){var e=this.getStrings(BUNDLE),t=React.addons.classSet,i=this.props.reviewModel.getValueSync(["id"]),o=(this.props.videoModel.getValueSync(["reviewVotes"])||{})[i];return React.createElement("div",{className:"voteReview"},React.createElement("span",{className:"voteReviewPrompt"},e.get("vote.review.prompt"))," ",React.createElement("div",{className:"reviewActions"},React.createElement("ul",{className:"voteReviewChoices"},this.renderVoteReview(ReviewConstants.votes.HELPFUL,o),this.renderVoteReview(ReviewConstants.votes.NOT_HELPFUL,o)),React.createElement("span",{className:t({action:!0,inappropriateTrigger:!0,selected:this.props.flagsForReview}),onClick:this.props.onInappropriateReviewClick},e.get("flag.review.inappropriate"))))}});module.exports=VoteReviewSection;


});


Requireify.register('js/akira/components/reviews/checkbox.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),ReviewConstants=require("./reviewsConstants.js"),BUNDLE="discovery/akira/Reviews:inappropriate.reason",Checkbox=React.createClass({displayName:"Checkbox",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:[ReviewConstants.flags.OBJECTIONABLE_CONTENT,ReviewConstants.flags.HAS_SPOILER,ReviewConstants.flags.NOT_A_REVIEW]}]}},mixins:[I18N],handleChange:function(){this.props.onChange(this.props.value,!this.props.checked)},render:function(){var e=this.props.reviewId+"-"+this.props.value;return React.createElement("div",{className:"akira-checkbox-item"},React.createElement("input",{type:"checkbox",className:"akira-checkbox",name:"inappropriateReason-"+this.props.reviewId,id:e,value:this.props.value,defaultChecked:this.props.checked,onChange:this.handleChange}),React.createElement("label",{className:"akira-checkbox-label action",htmlFor:e},this.getStrings(BUNDLE).get(this.props.value)))}});module.exports=Checkbox;


});


Requireify.register('js/akira/components/reviews/inappropriateReview.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),Checkbox=require("./checkbox.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),ReviewConstants=require("./reviewsConstants.js"),BUNDLE="discovery/akira/Reviews",InappropriateReview=React.createClass({displayName:"InappropriateReview",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["report.as.inappropriate","submit","cancel"]}]}},mixins:[I18N],contextTypes:{pathEvaluator:React.PropTypes.object},getInitialState:function(){var e=this.props.reviewModel.getValueSync(["id"]),t=this.props.videoModel.getValueSync(["reviewFlags"])||{},a=t[e]||[];return{flagsForReview:_.clone(a)}},flagReview:function(e,t){var a=_.clone(this.state.flagsForReview);t?a.push(e):a=_.without(a,e),this.setState({flagsForReview:a})},saveFlags:function(){var e=this,t=this.props.reviewModel.getValueSync(["id"]);this.context.pathEvaluator.bind(["reviews",t]).call(["flagReview"],[this.state.flagsForReview],[],[["video","reviewFlags"]]).subscribe(function(){e.props.onFlagsChange(e.state.flagsForReview)})},cancel:function(){this.setState(this.getInitialState()),this.props.onCancel()},render:function(){var e=this.getStrings(BUNDLE),t=this.props.reviewModel.getValueSync(["id"]),a=_.contains(this.state.flagsForReview,ReviewConstants.flags.OBJECTIONABLE_CONTENT),i=_.contains(this.state.flagsForReview,ReviewConstants.flags.HAS_SPOILER),s=_.contains(this.state.flagsForReview,ReviewConstants.flags.NOT_A_REVIEW);return React.createElement("fieldset",{className:"inappropriate-review"},React.createElement("legend",{className:"inappropriate-review-legend"},e.get("report.as.inappropriate")),React.createElement("ul",{className:"inappropriate-review-types"},React.createElement("li",null,React.createElement(Checkbox,{value:ReviewConstants.flags.OBJECTIONABLE_CONTENT,reviewId:t,checked:a,onChange:this.flagReview})),React.createElement("li",null,React.createElement(Checkbox,{value:ReviewConstants.flags.HAS_SPOILER,reviewId:t,checked:i,onChange:this.flagReview})),React.createElement("li",null,React.createElement(Checkbox,{value:ReviewConstants.flags.NOT_A_REVIEW,reviewId:t,checked:s,onChange:this.flagReview}))),React.createElement("button",{className:"akira-button akira-button-red",onClick:this.saveFlags},e.get("submit")),React.createElement("button",{className:"akira-button",onClick:this.cancel},e.get("cancel")))}});module.exports=InappropriateReview;


});


Requireify.register('js/akira/components/reviews/deleteReview.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),EventBus=require("../../../reactMixins/eventBus"),BUNDLE="discovery/akira/Reviews:delete",DeleteReview=React.createClass({displayName:"DeleteReview",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["my.review","review.success"]}]}},mixins:[I18N],getDefaultProps:function(){return{reviewDeleted:!1}},deleteReview:function(){var e=this.props.videoModel.getValueSync(["summary"]).id;this.props.onReviewDeleted(),this.props.videoModel.call(["deleteReview"],[],[],[]).subscribe(function(){EventBus.emit("reviews:reviewsCountChanged",{videoId:e})})},render:function(){var e=this.getStrings(BUNDLE);return this.props.reviewDeleted?React.createElement("h4",{className:"reviewDeleted"},e.get("review.success")):React.createElement("div",{className:"deleteReview action",onClick:this.deleteReview},e.get("my.review"))}});module.exports=DeleteReview;


});


Requireify.register('js/akira/components/reviews/review.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),PathEvaluatorUtils=require("../../../utils/pathEvaluatorUtils"),BasicStarBar=require("./../title/basicStarBar.jsx"),ReviewText=require("./reviewText.jsx"),HelpfulCount=require("./helpfulCount.jsx"),VoteReviewSection=require("./voteReviewSection.jsx"),InappropriateReview=require("./inappropriateReview.jsx"),DeleteReview=require("./deleteReview.jsx"),MAX_REVIEW_TEXT_LENGTH=200,Review=React.createClass({displayName:"Review",getDefaultProps:function(){return{forUsersReview:!1,readOnly:!0,truncatedTextLength:MAX_REVIEW_TEXT_LENGTH}},getInitialState:function(){return{inappropriateFormOpen:!1,reviewDeleted:!1}},contextTypes:{pathEvaluator:React.PropTypes.object},onVoteChange:function(){this.forceUpdate()},onFlagsChanged:function(){this.forceUpdate()},onReviewDeleted:function(){this.setState({reviewDeleted:!0})},toggleInappropriateReviewForm:function(){this.setState({inappropriateFormOpen:!this.state.inappropriateFormOpen})},closeInappropriateReviewForm:function(){this.setState({inappropriateFormOpen:!1})},renderDeletedReview:function(){return React.createElement(DeleteReview,{videoModel:this.props.videoModel,onReviewDeleted:this.onReviewDeleted,reviewDeleted:this.state.reviewDeleted})},isValidReview:function(){var e=["id","rating","reviewText","helpfulCount","notHelpfulCount"];return void 0===this.props.reviewModel.getBoundValue()?!1:PathEvaluatorUtils.isBoundToError(this.props.reviewModel)?!1:_.every(e,function(e){var t=this.props.reviewModel.getValueSync([e]);return void 0!==t&&!PathEvaluatorUtils.isValueError(t)},this)},renderReview:function(){var e=this.props.reviewModel,t=this.props.videoModel,r=e.getValueSync(["id"]),i=(t.getValueSync(["reviewFlags"])||{})[r];return React.createElement("div",{className:"memberReview"},React.createElement(BasicStarBar,{averageRating:e.getValueSync(["rating"]),readOnly:!0}),React.createElement(ReviewText,{text:e.getValueSync(["reviewText"]),maxLength:this.props.readOnly?MAX_REVIEW_TEXT_LENGTH:null}),this.props.readOnly?null:React.createElement(HelpfulCount,{numHelpful:e.getValueSync(["helpfulCount"]),numNotHelpful:e.getValueSync(["notHelpfulCount"])}),this.props.readOnly||this.props.forUsersReview?null:React.createElement(VoteReviewSection,{reviewModel:e,videoModel:t,onVoteChange:this.onVoteChange,onInappropriateReviewClick:this.toggleInappropriateReviewForm,flagsForReview:i}),this.props.readOnly||!this.state.inappropriateFormOpen||i&&i.length>0?null:React.createElement(InappropriateReview,{reviewModel:e,videoModel:t,onCancel:this.closeInappropriateReviewForm,onFlagsChange:this.onFlagsChanged}),this.props.readOnly||!this.props.forUsersReview?null:React.createElement(DeleteReview,{videoModel:this.props.videoModel,onReviewDeleted:this.onReviewDeleted,reviewDeleted:this.state.reviewDeleted}))},renderError:function(){return null},render:function(){return this.isValidReview()?this.state.reviewDeleted?this.renderDeletedReview():this.renderReview():this.renderError()}});module.exports=Review;


});


Requireify.register('js/akira/components/reviews/writeReview.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),URLs=require("../../../utils/urls"),I18N=require("../../../reactMixins/i18nWithDeps"),StarBar=require("../title/falkorStarBar.jsx"),LoadingSpinner=require("../../components/loaders/loadingSpinner.jsx"),EventBus=require("../../../reactMixins/eventBus"),BUNDLE="discovery/akira/Reviews",FAQ_URL=URLs.page.external.support+"/node/9977",MIN_REVIEW_LENGTH=80,MAX_REVIEW_LENGTH=2e3,WriteReview=React.createClass({displayName:"WriteReview",statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["write.review.cta","rate.show","write.review.prompt","question.about.reviews","submit","cancel","write.review.success.heading","write.review.success.msg","write.review.error.msg.rate","write.review.error.msg.bad.word","write.review.error.msg.general"]}]}},getDefaultProps:function(){return{defaultOpen:!1}},mixins:[I18N],getInitialState:function(){return{formOpen:this.props.defaultOpen,reviewValid:!1,reviewSaving:!1,reviewSubmitted:!1,errorMessage:null,showNotRatedError:!1,userHasRatedTitle:null!==this.props.videoModel.getValueSync(["starrating"]).userRating}},titleRatedHandler:function(){this.setState({userHasRatedTitle:!0})},validateReview:function(){var e=this.refs.reviewTextarea.getDOMNode(),t=e.value,r=t.length;this.setState({reviewValid:r>=MIN_REVIEW_LENGTH&&MAX_REVIEW_LENGTH>r})},openReviewForm:function(){this.setState({reviewValid:!1,formOpen:!0})},closeReviewForm:function(){this.setState({formOpen:!1})},submitReview:function(){this.state.userHasRatedTitle?(this.setState({reviewSaving:!0}),this.props.videoModel.call(["createReview"],[this.refs.reviewTextarea.getDOMNode().value],[],[[["createReviewResult"],["usersReview"]]]).subscribe(this.handleCreateReviewResponse)):this.setState({showNotRatedError:!0})},handleCreateReviewResponse:function(){var e,t,r=this.props.videoModel.getValueSync(["createReviewResult"]),i=this.getStrings(BUNDLE);if(r.success)EventBus.emit("reviews:reviewsCountChanged",{videoId:this.props.videoModel.getValueSync(["summary"]).id}),this.setState({reviewSaving:!1,reviewSubmitted:!0,formOpen:!1,reviewValid:!1,errorMessage:null,showNotRatedError:!1});else{switch(e=_.get(r,"info.validationInfo[0]",{infoType:"unknown"}),e.infoType){case"REVIEW_CONTAIN_BAD_WORDS":t=i.get("write.review.error.msg.bad.word",{BAD_WORD:e.value});break;default:t=i.get("write.review.error.msg.general")}this.setState({reviewSaving:!1,reviewValid:!1,errorMessage:t})}},renderButton:function(){var e=this.getStrings(BUNDLE);return React.createElement("button",{className:"akira-button akira-button-red",onClick:this.openReviewForm},e.get("write.review.cta"))},renderForm:function(){var e=this.getStrings(BUNDLE),t=React.addons.classSet;return React.createElement("div",{className:t({writeReviewForm:!0,saving:this.state.reviewSaving}),key:"writeReviewForm"},React.createElement("div",{className:"writeReviewSavingMask",key:"writeReviewSavingMask"},React.createElement(LoadingSpinner,null)),!this.state.userHasRatedTitle&&this.state.showNotRatedError?React.createElement("div",{className:"error"},e.get("write.review.error.msg.rate")):null,React.createElement("div",{className:"rating",key:"writeReviewRating"},e.get("rate.show"),React.createElement(StarBar,{model:this.props.videoModel,readOnly:!1,userRatingOnly:!0,onRating:this.titleRatedHandler})),this.state.errorMessage?React.createElement("div",{className:"error"},this.state.errorMessage):null,React.createElement("textarea",{ref:"reviewTextarea",name:"reviewText",className:"reviewText",key:"writeReviewTextArea",onChange:this.validateReview,placeholder:e.get("write.review.prompt")}),React.createElement("div",{className:"buttons",key:"writeReviewButtons"},React.createElement("button",{className:"akira-button akira-button-red",disabled:!this.state.reviewValid,onClick:this.submitReview},e.get("submit")),React.createElement("button",{className:"akira-button",onClick:this.closeReviewForm},e.get("cancel")),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"faq",dangerouslySetInnerHTML:{__html:e.get("question.about.reviews",{URL:FAQ_URL})}})))},renderSuccessMessage:function(){var e=this.getStrings(BUNDLE);return React.createElement("div",{className:"writeReviewSuccess",key:"writeReviewSuccess"},React.createElement("h3",{className:"heading"},e.get("write.review.success.heading")),React.createElement("div",{className:"details",dangerouslySetInnerHTML:{__html:e.get("write.review.success.msg")}}))},render:function(){return this.state.reviewSubmitted?this.renderSuccessMessage():this.state.formOpen?this.renderForm():this.renderButton()}});module.exports=WriteReview;


});


Requireify.register('js/akira/components/reviews/reviewList.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PathEvaluatorUtils=require("../../../utils/pathEvaluatorUtils"),Review=require("../reviews/review.jsx"),ReviewList=React.createClass({displayName:"ReviewList",getDefaultProps:function(){return{uniqueId:Math.random().toString()}},childContextTypes:{reviewListId:React.PropTypes.string},getChildContext:function(){return{reviewListId:this.props.uniqueId}},buildReviewsMarkup:function(){var e,r,t=[];for(r=0;r<this.props.numReviews;r++)e=this.props.forUsersReview?this.props.reviewsModel:this.props.reviewsModel.bind([r]),void 0!==e.getBoundValue()&&t.push(React.createElement("li",{key:"review-"+r},React.createElement(Review,{reviewModel:e,videoModel:this.props.videoModel,readOnly:this.props.readOnly,forUsersReview:this.props.forUsersReview})));return t},renderError:function(){return null},render:function(){if(PathEvaluatorUtils.isBoundToError(this.props.reviewsModel))return this.renderError();var e=this.buildReviewsMarkup();return e.length>0?React.createElement("div",null,React.createElement("h3",null,this.props.heading),React.createElement("ul",{className:"memberReviews"},e)):null}});module.exports=ReviewList;


});


Requireify.register('js/akira/components/modals/reviews.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),ModalContent=require("./modalContent.jsx"),WriteReview=require("../reviews/writeReview.jsx"),ReviewList=require("../reviews/reviewList.jsx"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),ScrollLock=require("../../../reactMixins/scrollLock"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Reviews",NUM_HELPFUL_SHOWN=2,INITIAL_NUM_SHOWN=20,REVIEW_PAGE_SIZE=20,INFINITE_SCROLL_STRATEGY="infiniteScrollStrategy",ADDITIONAL_FETCH_KEY="infinite-scroll-fetch-reviews",INFINITE_SCROLL_BUFFER_PX=500,SCROLL_THROTTLE_MS=100,ReviewsModal=React.createClass({displayName:"ReviewsModal",numReviewsToFetch:INITIAL_NUM_SHOWN,mixins:[I18N,AutoFetch,ScrollLock],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["most.helpful.reviews","recent.reviews","number.reviews.for.title","your.review"]}]},getPaths:function(e,t,i){return t===INFINITE_SCROLL_STRATEGY?[["recentReviews",{from:0,to:i.numToFetch-1},["id","rating","reviewText","helpfulCount","notHelpfulCount"]]]:[["title"],["reviewsCount"],["usersReview",["id","rating","reviewText","helpfulCount","notHelpfulCount"]],["helpfulReviews",{from:0,to:NUM_HELPFUL_SHOWN-1},["id","rating","reviewText","helpfulCount","notHelpfulCount"]],["recentReviews",{from:0,to:INITIAL_NUM_SHOWN-1},["id","rating","reviewText","helpfulCount","notHelpfulCount"]],["reviewVotes"],["reviewFlags"]]}},contextTypes:{modalDismiss:React.PropTypes.func,modalUpdate:React.PropTypes.func},componentDidMount:function(){this.refs["modal-body"]?this.scrollLock("modal-body"):this.refs["modal-header"]&&this.scrollLock("modal-header")},modalScrolled:_.throttle(function(){this.numReviewsToFetch<this.props.model.getValueSync(["reviewsCount"])&&this.isWithinDistanceBuffer(INFINITE_SCROLL_BUFFER_PX,this.refs["modal-body"].getDOMNode())&&this.fetchMoreReviews()},SCROLL_THROTTLE_MS),fetchMoreReviews:function(){if(!this.isLoading()){this.numReviewsToFetch+=REVIEW_PAGE_SIZE;var e=ReviewsModal.getPaths(this.getContext(),INFINITE_SCROLL_STRATEGY,{numToFetch:this.numReviewsToFetch});this.isMounted()&&this.fetchData(this.props.model,e,ADDITIONAL_FETCH_KEY)}},isWithinDistanceBuffer:function(e,t){var i=t.getBoundingClientRect(),r=t.scrollTop+i.height;return r+e>t.scrollHeight},buildModal:function(){var e,t=this.getStrings(BUNDLE),i=this.props.model,r=i.getValueSync(["title"]),o=i.getValueSync(["reviewsCount"]),s=void 0!==i.getValueSync(["usersReview"]);return e=React.createElement("div",{className:"reviewsModalHeader",ref:"modal-header"},React.createElement("h2",{className:"nf-modal-heading"},t.get("number.reviews.for.title",{number:o,title:r})),s?null:React.createElement(WriteReview,{videoModel:i,defaultOpen:0===o})),0===o?{body:e,useScrollLock:!1}:{header:e,customBody:React.createElement("div",{onScroll:this.modalScrolled,className:"nf-modal-body",ref:"modal-body"},React.createElement("div",{className:"reviewsModalBody"},React.createElement(ReviewList,{reviewsModel:i.bind(["usersReview"]),numReviews:1,videoModel:i,readOnly:!1,forUsersReview:!0,uniqueId:"yourReview",heading:t.get("your.review")}),React.createElement(ReviewList,{reviewsModel:i.bind(["helpfulReviews"]),numReviews:NUM_HELPFUL_SHOWN,videoModel:i,readOnly:!1,uniqueId:"helpfulReviews",heading:t.get("most.helpful.reviews")}),React.createElement(ReviewList,{reviewsModel:i.bind(["recentReviews"]),numReviews:this.numReviewsToFetch,videoModel:i,readOnly:!1,uniqueId:"recentReviews",heading:t.get("recent.reviews")}))),useScrollLock:!1}},render:function(){return React.createElement(ModalContent,React.__spread({},this.buildModal()))}});module.exports=ReviewsModal;


});


Requireify.register('js/akira/components/jawBone/details/reviews.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Review=require("../../reviews/review.jsx"),ModalManager=require("../../modals/modalManager.jsx"),ReviewsModal=require("../../modals/reviews.jsx"),I18N=require("../../../../reactMixins/i18nWithDeps"),EventBus=require("../../../../reactMixins/eventBus"),AutoFetch=require("../../../../reactMixins/falkor-auto-fetch"),NUM_HELPFUL_SHOWN=2,BUNDLE="discovery/akira/Reviews",JAW_BONE_OVERVIEW_BUNDLE="discovery/akira/JawBone:overview",Reviews=React.createClass({displayName:"Reviews",mixins:[I18N,AutoFetch],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["no.reviews","read.more","see.all.reviews.with.number","write.review.cta","write.review.error.msg.general"]},{bundle:JAW_BONE_OVERVIEW_BUNDLE,ids:["loading"]}]},getPaths:function(){return[["reviewsCount"],["helpfulReviews",{from:0,to:NUM_HELPFUL_SHOWN-1},["id","rating","reviewText","helpfulCount","notHelpfulCount"]],["usersReview",["id","rating","reviewText","helpfulCount","notHelpfulCount"]]]}},componentDidMount:function(){EventBus.on("reviews:reviewsCountChanged",this.onNumberReviewsChanged)},componentWillUnmount:function(){EventBus.removeListener("reviews:reviewsCountChanged",this.onNumberReviewsChanged),EventBus.removeListener("modal:close:reviewsModal",this.invalidateData)},onNumberReviewsChanged:function(e){e.videoId===this.props.model.getValueSync(["summary"]).id&&this.forceUpdate()},invalidateData:function(){this.props.model.invalidate(["reviewVotes"]).subscribe(function(){})},launchModal:function(){var e=["reviews-modal"],i=this.props.model.getValueSync(["reviewsCount"]);0===i&&e.push("write-first-review"),EventBus.once("modal:close:reviewsModal",this.invalidateData),ModalManager.open(ReviewsModal,{name:"reviewsModal",additionalClasses:e,contentProps:{model:this.props.model.hardBind([]),pqls:ReviewsModal.getPaths(this.getContext(),null,null)}})},render:function(){var e,i,t,r,s=[],a=this.getStrings(BUNDLE);if(null!==this.state.fetchDataError)return React.createElement("div",{className:"memberReviews error"},a.get("write.review.error.msg.general"));if(this.isLoading()===!0)return React.createElement("div",{className:"memberReviews loading"},this.getStrings(JAW_BONE_OVERVIEW_BUNDLE).get("loading"));if(i=this.props.model.getValueSync(["reviewsCount"]),0===i)return React.createElement("div",{className:"noReviews"},a.get("no.reviews"),React.createElement("div",{className:"action",onClick:this.launchModal},a.get("write.review.cta")));for(r=0;NUM_HELPFUL_SHOWN>r;r++)t=this.props.model.bind(["helpfulReviews",r]),void 0!==t.getBoundValue()&&s.push(React.createElement("li",{key:"review-"+r},React.createElement(Review,{reviewModel:t,videoModel:this.props.model})));return e=void 0===i?null:React.createElement("div",{className:"seeAllLink",onClick:this.launchModal},a.get("see.all.reviews.with.number",{number:i})),React.createElement("div",{className:"memberReviews"},React.createElement("ul",{className:"memberReviews"},s),e)}});module.exports=Reviews;


});


Requireify.register('js/akira/components/jawBone/details/availabilityInfo.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../../reactMixins/i18nWithDeps"),PathEvaluatorUtils=require("../../../../utils/pathEvaluatorUtils"),BUNDLE="discovery/akira/JawBone:details.availability",AvailabilityInfo=React.createClass({displayName:"AvailabilityInfo",mixins:[I18N],statics:{getPaths:function(){return[["availabilityEndDateNear"]]},__meta__:{strings:[{bundle:BUNDLE,ids:["heading","until.date"]}]}},render:function(){var a=this.props.videoModel.getValueSync(["availabilityEndDateNear"]),e=this.getStrings(BUNDLE);return a&&!PathEvaluatorUtils.isValueError(a)?React.createElement("div",{className:"availability-info"},React.createElement("div",{className:"listLabel"},e.get("heading")),e.get("until.date",{localizedDate:a})):null}});module.exports=AvailabilityInfo;


});


Requireify.register('js/akira/components/slider/simpleSlider.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),presentationTracking=require("../../../common/presentationTracking/presentationTracking.js"),MIN_HORZ_SWIPE_THRESHOLD_IN_PX=100,WIDTH_100_PERCENT=100,MIN_VERT_SWIPE_THRESHOLD_IN_PX=30,touchStart={},isAnimating=!1,SimpleSlider=React.createClass({displayName:"SimpleSlider",statics:{MOVE_DIRECTION_RIGHT:1,MOVE_DIRECTION_LEFT:-1},getInitialState:function(){return{translateX:0}},advanceRight:function(){var t=this.refs.sliderContent.getDOMNode(),e=this.calculateMinTranslateX();this.isAnimating=!0,t.classList.add("animating"),this.setState({translateX:Math.max(e,this.state.translateX-WIDTH_100_PERCENT)})},advanceLeft:function(){var t=this.refs.sliderContent.getDOMNode();this.isAnimating=!0,t.classList.add("animating"),this.setState({translateX:Math.min(0,this.state.translateX+WIDTH_100_PERCENT)})},isTouchEnabled:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0},getReactAnimationStyle:function(t){var e=t?"translate3d("+t+"%, 0px, 0px)":"";return t?{WebkitTransform:e,MozTransform:e,MsTransform:e,OTransform:e,transform:e}:null},handleTouchStart:function(t){var e=this.isTouchEnabled()?t.changedTouches[0]:t;touchStart={x:parseInt(e.clientX,10),y:parseInt(e.clientY,10)}},handleTouchMove:function(t){var e=this.isTouchEnabled()?t.changedTouches[0]:t,n=touchStart.x-e.clientX,a=Math.abs(touchStart.y-e.clientY);isAnimating||(n>MIN_HORZ_SWIPE_THRESHOLD_IN_PX&&MIN_VERT_SWIPE_THRESHOLD_IN_PX>a&&this.isRightNavActive()?(this.advanceRight(),touchStart={}):-MIN_HORZ_SWIPE_THRESHOLD_IN_PX>n&&MIN_VERT_SWIPE_THRESHOLD_IN_PX>a&&this.isLeftNavActive()&&(this.advanceLeft(),touchStart={})),Math.abs(n)>Math.abs(a)&&t.preventDefault()},calculateMinTranslateX:function(){if(this.refs.sliderContent){var t=this.refs.sliderContent.getDOMNode(),e=t.scrollWidth,n=t.clientWidth,a=-100*(e/n-1);return a}return 0},hasMorePagesOnLeft:function(){return this.state.translateX<0},hasMorePagesOnRight:function(){var t=this.state.translateX-this.calculateMinTranslateX();if(this.refs.sliderContent){var e=this.refs.sliderContent.getDOMNode(),n=e.clientWidth,a=t/100*n;return a>3}return t>1},isLeftNavActive:function(){return this.hasMorePagesOnLeft()},isRightNavActive:function(){return this.hasMorePagesOnRight()},animationComplete:function(){var t=this.refs.sliderContent.getDOMNode();t.classList.remove("animating"),this.isAnimating=!1,presentationTracking.requestScan()},componentDidMount:function(){var t=this.refs.sliderContent.getDOMNode();this.isTouchEnabled()&&(t.addEventListener("pointerdown",this.handleTouchStart),t.addEventListener("pointermove",this.handleTouchMove)),t.addEventListener("transitionend",this.animationComplete),this.forceUpdate()},componentWillUnmount:function(){var t=this.refs.sliderContent.getDOMNode();this.isTouchEnabled()&&(t.removeEventListener("pointerdown",this.handleTouchStart),t.removeEventListener("pointermove",this.handleTouchMove)),t.removeEventListener("transitionend",this.animationComplete)},render:function(){var t,e,n,a=React.addons.classSet,i=this.getReactAnimationStyle(this.state.translateX),s="sliderContent",r={simpleSlider:!0,slider:!0};return this.props.className&&(r[this.props.className]=!0),n={sliderMask:!0},t={handle:!0,handleLeft:!0,active:this.isLeftNavActive()},e={handle:!0,handleRight:!0,active:this.isRightNavActive()},React.createElement("div",{className:a(r)},React.createElement("div",{className:a(t),ref:"handleLeft",onClick:this.advanceLeft,onMouseEnter:this.props.onMouseEnterSliderHandle,onMouseLeave:this.props.onMouseLeaveSliderHandle},React.createElement("b",{className:"indicator-icon icon-leftCaret"})),React.createElement("div",{className:a(e),ref:"handleRight",onClick:this.advanceRight,onMouseEnter:this.props.onMouseEnterSliderHandle,onMouseLeave:this.props.onMouseLeaveSliderHandle},React.createElement("b",{className:"indicator-icon icon-rightCaret"})),React.createElement("div",{className:a(n),ref:"sliderMask"},React.createElement("div",{className:s,ref:"sliderContent",style:i,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},this.props.children)))}});module.exports=SimpleSlider;


});


Requireify.register('js/akira/components/title/commonSenseIcon.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react");module.exports=React.createClass({displayName:"exports",render:function(){var e="common-sense-icon";return React.createElement("div",{className:e})}});


});


Requireify.register('js/akira/components/title/commonSense.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),CommonSenseIcon=require("./commonSenseIcon.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/JawBone:common.sense";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{getPaths:function(){return[["commonsense"]]},__meta__:{strings:[{bundle:BUNDLE,ids:["maturity.rating","recommendation","copyright"]}]}},render:function(){return React.createElement("div",{className:"common-sense"},React.createElement(CommonSenseIcon,null),React.createElement("span",{className:"common-sense-age"},this.getString(BUNDLE,"recommendation",{AGE:this.props.ageRecommendation})),React.createElement("p",{className:"common-sense-title"},this.getString(BUNDLE,"maturity.rating")),React.createElement("p",{className:"common-sense-copyright"},React.createElement("small",null,this.getString(BUNDLE,"copyright"))))}});


});


Requireify.register('js/utils/dvdApi.js', function(require, requireAsync, module, exports) {


"use strict";var Rx=require("../falkorClient/rxUltraLite"),XHR=require("./XHR"),DVD_TERM="DVD",BLU_RAY_TERM="Blu-ray",FORMAT_PATH="/format_availability",SERIES_PATH="/catalog/titles/series/",MOVIES_PATH="/catalog/titles/movies/",isDiscRentable=function(e){var t=e.category.term;return t===DVD_TERM||t===BLU_RAY_TERM?e.rentable:!1},isDiscSaveable=function(e){var t=e.category.term;return t===DVD_TERM||t===BLU_RAY_TERM?e.saveable:!1},checkFormatState=function(e,t){var r,a;try{if(r=e.delivery_formats.availability,!(r.length>1))return t(r,!1);for(a in r)if(r.hasOwnProperty(a)&&t(r[a],!1))return!0}catch(i){return!1}},isRentable=function(e){return checkFormatState(e,isDiscRentable)},isSaveable=function(e){return checkFormatState(e,isDiscSaveable)},getApiPath=function(e,t){return(t?SERIES_PATH:MOVIES_PATH)+e+FORMAT_PATH},getDVDInfo=function(e,t,r,a){var i={};return Rx.Observable.create(function(n){var o=!1,u=function(e){i.dvdAvailable=r(e),i.dvdSaveable=a(e),o||(n.onNext(i),n.onCompleted())},c=function(){o||n.onError({apiRequest:"fail",userAgent:navigator.userAgent,videoId:e})};return XHR.request({method:"get",query:{apiPath:getApiPath(e,t),output:"json",m:"internal"},resource:"",service:"dvd",authorize:!0}).subscribe(u,c),function(){o=!0}})};module.exports={getRentabilityInfo:function(e,t){return getDVDInfo(e,t,isRentable,isSaveable)}};


});


Requireify.register('js/akira/components/title/dvdAvailability.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),AkiraContext=require("../../../reactMixins/akiraContext"),DVDApi=require("../../../utils/dvdApi"),URLs=require("../../../utils/urls"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/JawBone";module.exports=React.createClass({displayName:"exports",mixins:[I18N,AkiraContext],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["details.also.available.on.dvd","details.save.to.queue"]}]}},successRetrievingRentability:function(e){if(e){var t={};this.props.model.setValueSync(["dvdAvailable"],!!e.dvdAvailable),this.props.model.setValueSync(["dvdSaveable"],!!e.dvdSaveable),t[this.props.videoId]=!0,this.isMounted()&&this.setState(t)}},getAvailability:function(){void 0===this.props.model.getValueSync(["dvdAvailable"])&&DVDApi.getRentabilityInfo(this.props.videoId,this.props.isShow).subscribe(this.successRetrievingRentability)},componentWillMount:function(){this.getAvailability()},componentWillReceiveProps:function(){this.getAvailability()},render:function(){var e=this.props.model,t=!1,i=!1;if(!e)return null;if(t=e.getValueSync(["dvdAvailable"]),i=e.getValueSync(["dvdSaveable"]),t||i){var a=URLs.getDVDCoMDPURL(this.props.videoId,this.context.trackId);return React.createElement("a",{className:"dvdAvailability",href:a},React.createElement("span",{className:"icon-disc disc"}),t?React.createElement("span",{className:"dvdAvailable"},this.getString(BUNDLE,"details.also.available.on.dvd")):i?React.createElement("span",{className:"dvdSaveable"},this.getString(BUNDLE,"details.save.to.queue")):null)}return null}});


});


Requireify.register('js/akira/components/jawBone/details/copyright.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),PathEvaluatorUtils=require("../../../../utils/pathEvaluatorUtils"),Copyright=React.createClass({displayName:"Copyright",statics:{getPaths:function(){return[["copyright"]]}},getDefaultProps:function(){return{classSet:{}}},render:function(){var t=this.props.model.getValueSync(["copyright"]),e=_.merge({"video-copyright":!0},this.props.classSet);return null===t||PathEvaluatorUtils.isValueError(t)?null:React.createElement("div",{className:React.addons.classSet(e)},React.createElement("div",null,t))}});module.exports=Copyright;


});


Requireify.register('js/akira/components/jawBone/details/details.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),MaturityRating=require("../../title/maturityRating.jsx"),Festival=require("./festival.jsx"),People=require("./people.jsx"),Tags=require("./tags.jsx"),Reviews=require("./reviews.jsx"),AvailabilityInfo=require("./availabilityInfo.jsx"),Link=require("../../controls/mainViewLink.jsx"),SimpleSlider=require("../../slider/simpleSlider.jsx"),CommonSenseSection=require("../../title/commonSense.jsx"),DVDAvailability=require("../../title/dvdAvailability.jsx"),Copyright=require("./copyright.jsx"),AkiraContext=require("../../../../reactMixins/akiraContext"),ctx=require("../../../../utils/contextData"),I18N=require("../../../../reactMixins/i18nWithDeps"),MAX_AWARD_LINES=14,MAX_FESTIVALS=10,BUNDLE="discovery/akira/JawBone:details",Details=React.createClass({displayName:"Details",mixins:[I18N,AkiraContext],statics:{getPaths:function(e,t,a){var i,l=Festival.getPaths(e,t,a).map(function(e){return["festivals",{to:MAX_FESTIVALS}].concat(e)});return i=MaturityRating.getPaths(e,t,a).concat(CommonSenseSection.getPaths(e,t,a)).concat(l).concat(People.getPaths(e,t,a)).concat(Tags.getPaths(e,t,a)).concat([[["subtitles","audio"]],["festivals","length"]]).concat(AvailabilityInfo.getPaths(e,t,a)).concat(Copyright.getPaths(e,t,a))}},placeHolder:function(){return React.createElement("div",{className:"jawBoneDetails"},"Loading details...")},render:function(){var e,t=this.props.model,a=t.getValueSync(["summary"]),i=t.getValueSync(["subtitles"]),l=t.getValueSync(["commonsense"]),s=t.getValueSync(["delivery"]),n=t.getValueSync(["audio"]),r=t.getValueSync(["festivals","length"]),c=this.getStrings(BUNDLE),o="show"===a.type,m=l&&"US"===_.get(this.getFeatureData("geo"),"preferredLocale.country"),d=React.createElement(People,{model:t}),u=React.createElement(Tags,{model:t,isShow:o}),g="",v=[],h={},p=[],y={},R=this.getFeatureData("userInfo"),E=!1,D=[];if(R&&(E=R.isDVD),s&&(g=s.hasUltraHD?c.get("available.in.super.HD"):s.hasHD?c.get("available.in.HD"):c.get("available.in.standard.def")),n)for(e=0;e<Math.min(5,n.length);e++){var b=n[e].languageName;n[e].languageName&&!h[b]&&(h[b]=!0,v.push(React.createElement("li",{key:"languages"+e},b)))}if(i)for(e=0;e<Math.min(5,i.length);e++){var S=i[e].englishName;S&&!y[S]&&(y[S]=!0,p.push(React.createElement("li",{key:"subtitles"+e},React.createElement(Link,{type:"subtitle",id:i[e].bcp47Code},S))))}for(d&&D.push(React.createElement("div",{key:"detailsPeople",className:"detailsItem detailsPeople"},E?React.createElement("div",{key:"detailsDVD"},React.createElement(DVDAvailability,{model:t,videoId:a.id,isShow:o})):null,d)),u&&D.push(React.createElement("div",{key:"detailsTags",className:"detailsItem detailsTags"},u)),D.push(React.createElement("div",{key:"detailsMaturity",className:"detailsItem detailsMaturity"},React.createElement("div",{className:"listLabel"},c.get("ratings")),React.createElement(MaturityRating,{model:t,withLinkToDetail:!0,withDescription:!0,withReasons:!0,useCountryStyling:!0}),m?React.createElement(CommonSenseSection,{alertType:l.alertType,description:l.description,ageRecommendation:l.ageRecommendation}):null,React.createElement(Copyright,{key:"detailsCopyright",model:t,classSet:{"details-copyright":!0}}))),e=0;r>e;e++)D.push(React.createElement("div",{key:"festival"+e,className:"detailsItem detailsFestivals"},React.createElement(Festival,{model:t.bind(["festivals",e]),maxLines:MAX_AWARD_LINES})));if(D.push(React.createElement("div",{key:"detailsMedia",className:"detailsItem detailsMedia"},g?React.createElement("div",{className:"listLabel"},c.get("streaming")):null,g,v.length?React.createElement("div",{className:"listLabel"},c.get("audio")):null,v.length?React.createElement("ul",null,v):null,p.length?React.createElement("div",{className:"listLabel"},c.get("subtitles")):null,p.length?React.createElement("ul",null,p):null,React.createElement(AvailabilityInfo,{videoModel:this.props.model}))),ctx.get("fastProps","netflix.ui.akira.memberReviewsEnabled")){var f=3===this.context.columnsInRow?3:2,x=React.createElement("div",{key:"detailsReviews",className:"detailsItem detailsReviews doubleWidth"},React.createElement("div",{className:"listLabel"},c.get("reviews")),React.createElement(Reviews,{model:t,pqls:Reviews.getPaths(this.props.model,null,null)}));D.splice(f,0,x)}return React.createElement(SimpleSlider,{className:"jawBoneDetails"},D)}});Details.__meta__={strings:[{bundle:BUNDLE,ids:["ratings","streaming","audio","subtitles","available.in.HD","available.in.super.HD","available.in.standard.def","award.nominee","reviews"]}]},module.exports=Details;


});


Requireify.register('js/akira/components/jawBone/overview/playButton.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PlayButton=require("../../controls/playbutton.jsx"),I18N=require("../../../../reactMixins/i18nWithDeps"),Transition=require("../../../../reactMixins/transition"),Watched=require("../../../../reactMixins/video/watched"),BUNDLE="discovery/akira/JawBone",JawBonePlayButton=React.createClass({displayName:"JawBonePlayButton",mixins:[I18N,Watched,Transition],transitions:{fadeIn:300,fadeOut:300},render:function(){var t,e=this.props.model,n=this.isInResumeState(),a=this.isInNextUpState(),i=this.getStrings(BUNDLE);return n&&(t=i.get("play.button.annotation.resume")),a&&(t=i.get("play.button.annotation.next.up")),React.createElement(PlayButton,{model:e,className:"overviewPlay",annotation:t,tabIndex:1})}});JawBonePlayButton.__meta__={strings:[{bundle:BUNDLE,ids:["play.button.annotation.resume","play.button.annotation.next.up"]}]},module.exports=JawBonePlayButton;


});


Requireify.register('js/akira/components/jawBone/pane.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition");module.exports=React.createClass({displayName:"exports",mixins:[Transition],transitions:{fadeIn:300,fadeOut:300},render:function(){return React.createElement("div",{className:"jawBonePane"},this.props.children)}});


});


Requireify.register('js/akira/components/jawBone/menuTab.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Tab=React.createClass({displayName:"Tab",render:function(){var e={current:this.props.currentPane===this.props.id};return e[this.props.id]=!0,React.createElement("li",{className:React.addons.classSet(e),onClick:this.props.clickHandler(this.props.id)},React.createElement("p",null,this.props.children),React.createElement("span",null))}});module.exports=Tab;


});


Requireify.register('js/akira/components/jawBone/menu.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MenuTab=require("./menuTab.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/JawBone",JawBoneMenu=React.createClass({displayName:"JawBoneMenu",mixins:[I18N],statics:{__meta__:{strings:[{bundle:"discovery/akira/JawBone:tab",ids:["overview","episodes","more.like.this","show.details","trailers.only","trailers.and.recaps"]}]}},render:function(){var e=this.getString(BUNDLE,"tab.episodes");this.props.hasBojackEasterEgg&&(e=e.replace(/d/i,"  "));var r=this.props.visiblePane,s=this.props.tabClicked,a=this.props.hasRecaps?".and.recaps":".only",i=React.createElement(MenuTab,{id:"Overview",key:"Overview",clickHandler:s,currentPane:r},this.getString(BUNDLE,"tab.overview")),t=this.props.hasEpisodes&&!this.props.isPrePromo?React.createElement(MenuTab,{id:"Episodes",key:"Episodes",clickHandler:s,currentPane:r},e):null,n=this.props.hasTrailers?React.createElement(MenuTab,{id:"Trailers",key:"Trailers",clickHandler:s,currentPane:r},this.getString(BUNDLE,"tab.trailers"+a)):null,o=this.props.isPrePromo?null:React.createElement(MenuTab,{id:"MoreLikeThis",key:"MoreLikeThis",clickHandler:s,currentPane:r},this.getString(BUNDLE,"tab.more.like.this")),l=this.props.isPrePromo?null:React.createElement(MenuTab,{id:"ShowDetails",key:"ShowDetails",clickHandler:s,currentPane:r},this.getString(BUNDLE,"tab.show.details")),c=[];return c.push(i),c.push(t),c.push(n),c.push(o),c.push(l),React.createElement("ul",{className:"menu",onMouseEnter:this.props.onMouseEnter},c)}});module.exports=JawBoneMenu;


});


Requireify.register('js/akira/components/title/imageRotatorCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition"),FADE_DURATION=750,BURNS_DURATION=4250;module.exports=React.createClass({displayName:"exports",mixins:[Transition],transitions:{crossFade:FADE_DURATION},componentWillMount:function(){this.props.burnsEffectType&&(this.transitions=null)},componentDidMount:function(){if(this.props.burnsEffectType){var t=this.props.numRotations%2;this.startBurnsEffect(t),this.css({zIndex:2})}},componentWillLeave:function(t){var e=this;this.props.burnsEffectType?(this.css({zIndex:0}),setTimeout(function(){e.isMounted()&&t()},FADE_DURATION)):e.isMounted()&&t()},startBurnsEffect:function(t){this.animate({before:{opacity:0},keyframes:{name:this.props.burnsEffectType+"-burnsEffect"+(t?"Left":"Right"),duration:BURNS_DURATION,easing:"linear"}})},render:function(){var t={backgroundImage:"url("+this.props.url+")"},e=this.props.isPreload?"preload-image":"";return React.createElement("div",{className:"image-rotator-image "+e,style:t})}});


});


Requireify.register('js/akira/components/title/imageRotator.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ImageRotatorCard=require("../title/imageRotatorCard.jsx"),Animation=require("../../../reactMixins/cssAnimation.jsx"),ReactTransitionGroup=React.addons.TransitionGroup,IMAGE_RETRY_DELAY_MS=500,PRELOAD_DELAY=150;module.exports=React.createClass({displayName:"exports",timeout:0,numRotations:0,mixins:[Animation],getInitialState:function(){return{imageIndex:0,numImagesLoaded:0}},nextImage:function(){var t=this.props.images,e=t&&t.length||0,s=(this.state.imageIndex+1)%e;s>=this.state.numImagesLoaded?this.timeout=setTimeout(this.nextImage,IMAGE_RETRY_DELAY_MS):(this.numRotations+=1,this.timeout=setTimeout(this.nextImage,this.props.duration),this.setState({imageIndex:s}))},preloadImages:function(){var t=this.props.images;setTimeout(function(){for(var e=0;e<t.length;e++){var s=new Image;s.onload=this.handleImageLoaded.bind(this,e),s.src=t[e]}}.bind(this),PRELOAD_DELAY)},handleImageLoaded:function(t){var e=this,s=function(){e.isMounted()&&(e.setState({numImagesLoaded:e.state.numImagesLoaded+1}),0!==t||e.state.numImagesLoaded||(e.props.onFirstImageLoaded&&e.props.onFirstImageLoaded(),e.props.auto&&e.start()))};-1!==window.location.search.indexOf("throttle")?setTimeout(s,2e3):s()},componentDidMount:function(){this.preloadImages()},componentDidUpdate:function(t){!t.images.length&&this.props.images.length&&this.preloadImages(),this.props.stop?this.stop():this.props.auto&&this.start()},componentWillUnmount:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},mouseLeaveHandler:function(){this.props.auto||this.stop()},mouseEnterHandler:function(){this.props.auto||this.start()},start:function(){if(!this.timeout&&!this.props.stop){var t;t=this.props.firstDelay&&0===this.state.imageIndex?this.props.firstDelay:this.props.duration,this.timeout=setTimeout(this.nextImage,t)}},stop:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},render:function(){var t=this.props,e=this.state.imageIndex,s=t.style||{},a=this.props.images.length<2||this.props.stop?"":this.props.burnsEffectType,i=React.addons.classSet,o={"image-rotator":!0};t.className&&(o[t.className]=!0);var n;if(!this.state.numImagesLoaded&&this.props.preloadImage)n=React.createElement(ImageRotatorCard,{key:"image-rotator-image-preload",isPreload:!0,duration:this.props.duration,index:0,url:this.props.preloadImage,numRotations:0,burnsEffectType:""});else if(this.state.numImagesLoaded){var r=this.props.stop?"-stopped":"";n=React.createElement(ImageRotatorCard,{key:"image-rotator-image-"+e+r,duration:this.props.duration,index:e,url:t.images[e],numRotations:this.numRotations,burnsEffectType:a})}return React.createElement("div",{id:t.id,key:t.id,className:i(o),style:s,onMouseEnter:this.mouseEnterHandler,onMouseLeave:this.mouseLeaveHandler},React.createElement(ReactTransitionGroup,null,n),this.props.children)}});


});


Requireify.register('js/akira/components/title/heroImages.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ImageRotator=require("../title/imageRotator.jsx"),ImageExtension=require("../../../common/imageExtension"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps");module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext],statics:{getPaths:function(e,t,r){var n=ImageExtension.getExtensionForOpaqueImage(e),s=[["BGImages",r.height,n],["bookmarkPosition"]];return s=r.isShow?s.concat([["current","interestingMoment",r.size,n]]):s.concat([["recentInterestingMoment",r.height,n]])}},getInitialState:function(){return{isLoaded:!1}},getBackgroundImages:function(){var e,t=[],r=this.props.model,n=r.getValueSync(["BGImages",this.props.height]),s=ImageExtension.getExtensionForOpaqueImage(this.getContext());if(this.props.watched&&(e=this.props.isStandalone?r.getValueSync(["recentInterestingMoment",this.props.height,s]):r.getValueSync(["current","interestingMoment",this.props.size,s])))return t=[e.url];if(n&&n[s])for(var i=0;i<n[s].length;i++){var o=n[s][i].url;o&&t.push(o)}return t},render:function(){var e=this.getBackgroundImages();return React.createElement(ImageRotator,React.__spread({},this.props,{duration:this.props.duration,images:e,preloadImage:this.props.preloadImage,hasBurnsEffect:this.props.hasBurnsEffect}))}});


});


Requireify.register('js/components/svg/blur.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),SvgBlur=React.createClass({displayName:"SvgBlur",getDefaultProps:function(){return{radius:5,id:"blur"}},render:function(){var e='<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><filter id="'+this.props.id+'" x="0" y="0"><feGaussianBlur in="SourceGraphic" stdDeviation="'+this.props.radius+'" /></filter></defs></svg>';return React.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}});module.exports=SvgBlur;


});


Requireify.register('js/akira/components/jawBone/background.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),HeroImages=require("../title/heroImages.jsx"),ImageExtension=require("../../../common/imageExtension"),Watched=require("../../../reactMixins/video/watched"),AkiraTest=require("../../../reactMixins/ab/akira"),SvgBlur=require("../../../components/svg/blur.jsx"),SIZE="_665x375",HEIGHT=470,ROTATION_DURATION=3300,JawBoneImages=React.createClass({displayName:"JawBoneImages",mixins:[Watched,AkiraTest],statics:{getPaths:function(e,a,t){var s=[[["bookmarkPosition","runtime"]],["boxarts",SIZE,ImageExtension.getExtensionForOpaqueImage(e)]];return s.concat(HeroImages.getPaths(e,null,{isShow:t.isShow,height:HEIGHT,size:SIZE}))}},getInitialState:function(){return{hasWebKitFilter:!1}},render:function(){var e,a=this.props.model,t=React.addons.classSet,s=a.getValueSync("bookmarkPosition"),i="nav-shadow"+(this.hasJawBoneNavigation()?" full-width":""),r=this.hasKenBurnsBOB()?"jaw":"",n=null;return e=t({background:!0,blur:this.props.dim,dim:this.props.dim}),React.createElement("div",{className:e},React.createElement(SvgBlur,null),React.createElement(HeroImages,{id:"jawBoneIR"+this.props.id,stop:this.props.dim,duration:ROTATION_DURATION,burnsEffectType:r,className:"jawBoneBackground",auto:!0,isStandalone:this.props.isStandalone,model:a,style:n,bookmarkPosition:s,height:HEIGHT,size:SIZE,variance:120,watched:this.hasBeenWatched()}),React.createElement("div",{className:"vignette"}),React.createElement("div",{className:i}))}});module.exports=JawBoneImages;


});


Requireify.register('js/akira/components/jawBone/overview/navigationArrow.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/JawBone";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{__meta__:{strings:[{bundle:"discovery/akira/JawBone:navigate",ids:["previous","next"]}]}},render:function(){var e=this.props.direction,a=React.addons.classSet,t=a({caret:!0,"icon-rightCaret":e>0,"icon-leftCaret":0>e}),i=a({previous:0>e,next:e>0,jawBoneNavigation:!0}),r=0>e?this.getString(BUNDLE,"navigate.previous"):this.getString(BUNDLE,"navigate.next");return React.createElement("a",React.__spread({},this.props,{className:i}),React.createElement("span",{className:t}),r)}});


});


Requireify.register('js/akira/components/jawBone/overview/navigation.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),AkiraTest=require("../../../../reactMixins/ab/akira"),NavigationArrow=require("./navigationArrow.jsx"),JawBoneNavigations=React.createClass({displayName:"JawBoneNavigations",mixins:[AkiraTest],getDefaultProps:function(){return{leftNavActive:!0,rightNavActive:!0}},handleClick:function(i){var e=this;return e.props.onClick?function(){e.props.onClick(i)}:void 0},render:function(){return this.hasJawBoneNavigation()?React.createElement("div",{className:"jawBoneNavigations"},this.props.leftNavActive?React.createElement(NavigationArrow,{direction:-1,onClick:this.handleClick(-1)}):null,this.props.rightNavActive?React.createElement(NavigationArrow,{direction:1,onClick:this.handleClick(1)}):null):null}});module.exports=JawBoneNavigations;


});


Requireify.register('js/reactMixins/fastProperty.js', function(require, requireAsync, module, exports) {


"use strict";var contextData=require("../utils/contextData");module.exports={fastProperty:function(t){return this.inNode()?this.requestContext().fastProps[t]:contextData.get("fastProps",t)}};


});


Requireify.register('js/akira/components/jawBone/jawBone.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PathEvaluatorUtils=require("../../../utils/pathEvaluatorUtils"),Overview=require("./overview/overview.jsx"),Episodes=require("./episodes/episodes.jsx"),MoreLikeThis=require("./moreLikeThis/moreLikeThis.jsx"),Trailers=require("./trailers/trailers.jsx"),ShowDetails=require("./details/details.jsx"),PlayButton=require("./overview/playButton.jsx"),Pane=require("./pane.jsx"),Menu=require("./menu.jsx"),Background=require("./background.jsx"),Navigation=require("./overview/navigation.jsx"),Link=require("../controls/mainViewLink.jsx"),ImageExtension=require("../../../common/imageExtension"),AkiraTest=require("../../../reactMixins/ab/akira"),JawBoneLink=require("../../../reactMixins/jawBoneLink"),AkiraContext=require("../../../reactMixins/akiraContext"),FalkorFetch=require("../../../reactMixins/falkor-fetch"),IsomorphicContext=require("../../../reactMixins/isomorphicContext"),FastProperty=require("../../../reactMixins/fastProperty"),Prefetch=require("../../../reactMixins/prefetch"),Scheduler=require("../../../reactMixins/scheduler"),KeyCodes=require("../../../common/keyCodes"),EventBus=require("../../../reactMixins/eventBus"),Transition=require("../../../reactMixins/transition"),OVERVIEW="Overview",EPISODES="Episodes",TRAILERS="Trailers",MORE_LIKE_THIS="MoreLikeThis",SHOW_DETAILS="ShowDetails",SHORT_TITLE_LENGTH=30,DELAY_PREFETCH=600,BOJACK_VIDEO_ID=70300800,prefetchStrategies={allJawBonePanes:{all:!0}},getPaths=function(e,t,a){t||(t={all:!1}),a||(a={isShow:!0});var i=ImageExtension.getExtensionForTransparentImage(e);Overview.pql={originalsLogo:["bb2OGLogo","_400x90",i]};var s=void 0===a.isShow?!0:a.isShow,r=[[["summary","title","maturity","bookmarkPosition","runtime","requestId","availability"]]].concat([["trailers",["summary","recapCount"]]]).concat([Overview.pql.originalsLogo]).concat(Overview.getPaths(e,null,{isShow:s})).concat(Background.getPaths(e,null,{isShow:s}));return s&&(r=r.concat([["episodeCount"]])),t.all&&(r=r.concat(MoreLikeThis.getPaths(e,t,a)).concat(ShowDetails.getPaths(e,t,a)).concat(Trailers.getPaths(e,t,a)).concat(Episodes.getPaths(e,t,{seasonIndex:"current"}))),r},JawBoneContent=React.createClass({displayName:"JawBoneContent",childContextTypes:{parentContext:React.PropTypes.object,rowNum:React.PropTypes.number,rankNum:React.PropTypes.number,requestId:React.PropTypes.string,trackId:React.PropTypes.number},getChildContext:function(){var e,t={rowNum:0,rankNum:0};return this.props.isStandaloneJawbone||(t.parentContext={rowNum:this.context.rowNum,rankNum:this.context.rankNum,requestId:this.context.requestId,trackId:this.context.trackId},t.trackId=this.context.jawBoneTrackId||this.context.trackId),e=this.getRequestId(),e&&(t.requestId=e),t},mixins:[AkiraTest,AkiraContext,JawBoneLink,FalkorFetch,IsomorphicContext,Prefetch,Scheduler,FastProperty,Transition],transitions:{show:function(e){this.animateInfo(e,{before:{translateX:"30px",opacity:0},translateX:"0px",opacity:1,delay:250,duration:500})},hide:function(e,t){this.animateInfo(e,{opacity:0,duration:250}),setTimeout(t,950)}},animateInfo:function(e,t){if(!this.props.isFirstJaw)for(var a=e.getElementsByClassName("has-jawbone-nav-transition"),i=0;i<a.length;i++)t.target=a[i],this.animate(t)},ID:"jawBone-container",statics:{getPaths:getPaths,prefetchStrategies:prefetchStrategies},getDefaultProps:function(){return{disableClose:!1,disableNavigation:!1}},getRequestId:function(){return this.props.model.getValueSync(["requestId"])},getDefaultPane:function(){return"Overview"},getInitialState:function(){return{data:void 0,isShow:!0,visiblePane:this.getDefaultPane(this.props.model),hasClickedMenu:!1,hasPaneData:[],hasBojackEasterEgg:this.hasBojackEasterEgg(this.props.model)}},hasBojackEasterEgg:function(){var e=this.props.model.getValueSync(["summary"]),t=e&&e.id;return t===BOJACK_VIDEO_ID&&this.fastProperty("netflix.ui.akira.originals.easterEgg.bojack.enabled")},handleNavHover:function(){var e=this.props.model.getValueSync(["summary"]),t=e&&e.id,a=this.state.hasPaneData,i=this;if(t&&!a[t]){var s=this.getStrategy("netflix.ui.akira.prefetch.jawBoneNavHover");this.queue(function(){i.fetchData(i.props.model,getPaths(i.getContext(),s,{isShow:i.state.isShow}),"jawBoneNavHover",null,s.forceUpdate)}),a[t]=!0,this.setState({hasPaneData:a})}},getVisiblePane:function(e,t){var a,i=this.props.model;switch(e){case OVERVIEW:a=React.createElement(Overview,{model:i,isPrePromo:t.isPrePromo});break;case EPISODES:a=React.createElement(Episodes,{model:i,trackId:this.context.jawBoneEpisodeTrackId,disableNavigation:this.props.disableNavigation,isLoading:this.isLoading(),hasBojackEasterEgg:this.state.hasBojackEasterEgg});break;case TRAILERS:a=React.createElement(Trailers,{model:i,trackId:this.context.jawBoneTrailerTrackId,isLoading:this.isLoading()});break;case MORE_LIKE_THIS:a=React.createElement(MoreLikeThis,{model:i,isLoading:this.isLoading()});break;case SHOW_DETAILS:a=React.createElement(ShowDetails,{model:i,isLoading:this.isLoading()})}return React.createElement(Pane,{key:"pane-"+e},a)},tabClicked:function(e){var t=this;return function(){t.setState({visiblePane:e,hasClickedMenu:!0})}},prefetchOnLoad:function(){var e=this,t=this.props.model,a=t.getValueSync(["summary"]),i=a&&a.id,s=this.state.hasPaneData;i&&!s[i]&&(this.mountPrefetchTimeout=setTimeout(function(){var t=getPaths(e.getContext(),prefetchStrategies.allJawBonePanes,{isShow:e.state.isShow});e.fetchData(e.props.model,t),s[i]=!0,e.setState({hasPaneData:s})},DELAY_PREFETCH))},handleCloseJawBone:function(){EventBus.emit("jawbone:close",{reason:"explicit"}),this.closeJawBone()},handleKeyDown:function(e){switch(e&&e.which){case KeyCodes.ESC:this.handleCloseJawBone();break;case KeyCodes.ENTER:this.refs.closeJawboneButton.getDOMNode().contains(e.target)&&this.handleCloseJawBone()}},componentWillMount:function(){this.suppressOriginalsJaw=this.fastProperty("netflix.ui.akira.originals.jawbone.disable")||!1},componentDidMount:function(){this.prefetchOnLoad(),document.location.search.indexOf("focus")>0&&this.getDOMNode().focus()},componentDidUpdate:function(){this.prefetchOnLoad()},componentWillUnmount:function(){clearTimeout(this.mountPrefetchTimeout)},componentWillReceiveProps:function(e){var t,a;e.jawBoneRankNum!==this.props.jawBoneRankNum&&(t=e.model,a=t.getValueSync(["episodeCount"]),this.setState({isShow:a,visiblePane:this.getDefaultPane(t)}))},getOriginalsModel:function(){var e=this.props.model,t=e.getValueSync(["summary"]),a=t&&t.isOriginal;if(!a||this.suppressOriginalsJaw)return{};var i=e.getValueSync(["trailers",["summary"]]),s=e.getValueSync(["availability"])||{},r=e.getValueSync(Overview.pql.originalsLogo)||{url:""},n={isOriginal:!0,logoUrl:r.url,isPrePromo:!s.isPlayable,hasTrailers:i&&!!i.length,hasRecaps:e.getValueSync(["trailers",["recapCount"]])};return n.suppressMenu=n.isPrePromo&&!n.hasTrailers,n},renderTitle:function(e,t,a,i){var s;s=t.isOriginal?t.logoUrl?React.createElement("img",{alt:e,className:"logo "+(a?"":"small-logo"),src:t.logoUrl}):null:e;var r="title has-jawbone-nav-transition";return e.length>SHORT_TITLE_LENGTH&&(r+=" title-small"),React.createElement(Link,{type:"title",params:{id:i}},React.createElement("div",{className:r},s))},render:function(){var e=this.props.model,t=this.getOriginalsModel(),a=e.getValueSync(["summary"]),i=e.getValueSync(["title"]),s=e.getValueSync(["episodeCount"]),r=this.state.visiblePane;if(PathEvaluatorUtils.isValueError(a)||!a||!i)return null;s||r!==EPISODES||(r=OVERVIEW);var n=r===OVERVIEW,o=React.addons.classSet({jawBonePanes:!0,"offset-for-logo":t.isOriginal&&!n});return React.createElement("div",{id:a.id,className:"jawBoneContainer slider-hover-trigger-layer",onKeyDown:this.handleKeyDown,tabIndex:1},React.createElement(Background,{id:a.id,dim:!n,model:e,isStandalone:!s}),n?React.createElement(PlayButton,{model:e}):null,n&&!this.props.disableNavigation?React.createElement(Navigation,{onClick:this.props.handleNavClick,leftNavActive:this.props.leftNavActive,rightNavActive:this.props.rightNavActive}):null,React.createElement("div",{className:"jawBone"},t.suppressMenu?null:React.createElement(Menu,{hasEpisodes:s,hasTrailers:t.hasTrailers,hasRecaps:t.hasRecaps,isPrePromo:t.isPrePromo,visiblePane:r,tabClicked:this.tabClicked,onMouseEnter:this.handleNavHover,hasBojackEasterEgg:this.state.hasBojackEasterEgg}),this.props.disableClose?null:React.createElement("a",{className:"close-button icon-close",ref:"closeJawboneButton",onClick:this.handleCloseJawBone,tabIndex:1}),React.createElement("div",{className:"jawBoneCommon"},this.renderTitle(i,t,n,a.id),React.createElement("div",{className:o},this.getVisiblePane(r,t)))))}});module.exports=JawBoneContent;


});


Requireify.register('js/akira/components/jawBone/jawBoneOnRow.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),JawBone=require("./jawBone.jsx"),Slider=require("../slider/slider.jsx"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),AkiraContext=require("../../../reactMixins/akiraContext"),JawBoneLink=require("../../../reactMixins/jawBoneLink"),EventBus=require("../../../reactMixins/eventBus"),TimeoutTransitionGroup=require("../timeoutTransitionGroup.jsx"),TRANSITION_BETWEEN_OPEN_JAWS_SLA_MS=640,TRANSITION_TO_OPEN_JAW_SLA_MS=640,JawBoneOnRow=React.createClass({displayName:"JawBoneOnRow",mixins:[IsomorphicContext,JawBoneLink,AkiraContext],getInitialState:function(){return{jawBoneIsNavigating:!1}},childContextTypes:{rankNum:React.PropTypes.number},getChildContext:function(){return{rankNum:this.props.jawBoneRankNum}},getDefaultProps:function(){return{infinite:!0}},componentWillReceiveProps:function(e){var t;if(this.props.jawBoneRankNum!==e.jawBoneRankNum&&(this.isFirstJaw=null===this.props.jawBoneRankNum),this.props.showJawBone&&e.leftmostVisibleItemIndex!==this.props.leftmostVisibleItemIndex){if(this.state.jawBoneIsNavigating)return this.state.jawBoneIsNavigating=!1,void 0;var n=this.props.model,i=n.bind([e.leftmostVisibleItemIndex]),o=i&&i.getValueSync(["summary"]),a=o.id;a&&(t=e.sliderMoveDirection===Slider.MOVE_DIRECTION_RIGHT?"rowNext":"rowPrev",EventBus.emit("jawbone:open",_.assign({},this.context,this.props,{trigger:t,videoId:a,rankNum:e.leftmostVisibleItemIndex})),this.openJawBoneAtRankNum(e.leftmostVisibleItemIndex,a))}},getJawboneRankNum:function(e){var t=e;return t},getJawBoneModel:function(){return this.props.jawBoneModelIndex>=0?this.props.model.bind([this.props.jawBoneModelIndex]):void 0},handleJawBoneNavigation:function(e){var t,n,i,o=this.props.model,a=this.props.jawBoneRankNum,s=this.props.sliderRef,r=s&&s.getTotalItemCount(),u=r,p=e>0?"jawNext":"jawPrev";if(this.props.showJawBone)for(;u--;)if(a+=e,0>a&&(a=r-1),a===r&&(a=0),t=o.bind([a]),n=t.getValueSync(["summary"]),i=n&&n.id)return s&&!s.isItemInMiddle(this.getJawboneRankNum(a))&&(this.state.jawBoneIsNavigating=!0,e>0?s.advanceRight():s.advanceLeft()),EventBus.emit("jawbone:open",_.assign({},this.context,this.props,{trigger:p,videoId:i,rankNum:a})),this.openJawBoneAtRankNum(a,i),void 0},isRightNavActive:function(){var e,t=this.props.sliderRef,n=this.props.jawBoneRankNum;return t?(e=t.getTotalItemCount(),1===e?!1:!(!this.props.infinite&&n===e-1)):void 0},isLeftNavActive:function(){var e=this.props.jawBoneRankNum,t=this.props.sliderRef;if(e>0)return!0;if(!this.props.infinite)return!1;if(t){if(1===t.getTotalItemCount())return!1;if(!t.isLeftNavActive())return!1}return!0},renderJawBone:function(e){var t,n,i;return this.props.showJawBone&&(t=this.getJawBoneModel(),n=t&&t.getValueSync(["summary"]),i=n&&n.id),React.createElement(TimeoutTransitionGroup,{transitionName:"jawBoneFadeInPlace",key:"jawbone",className:"jawBoneOpenContainer",enterTimeout:TRANSITION_BETWEEN_OPEN_JAWS_SLA_MS,leaveTimeout:TRANSITION_BETWEEN_OPEN_JAWS_SLA_MS},React.createElement("div",{key:"jawbone-"+i,className:"jawBoneFadeInPlaceContainer"},React.createElement(JawBone,{model:t,pqls:e,handleNavClick:this.handleJawBoneNavigation,leftNavActive:this.isLeftNavActive(),jawBoneRankNum:this.props.jawBoneRankNum,rightNavActive:this.isRightNavActive(),isFirstJaw:this.isFirstJaw})))},render:function(){var e,t,n,i,o,a,s=React.addons.classSet;return this.props.showJawBone&&(e=this.getJawBoneModel(),o=e&&e.getValueSync(["summary"]),t=o&&"show"===o.type,n=JawBone.getPaths(this.getContext(),null,{isShow:t}),i=e&&n),a={jawBoneContent:!0,open:i},React.createElement(TimeoutTransitionGroup,{transitionName:"jawBoneOpen",className:s(a),enterTimeout:TRANSITION_TO_OPEN_JAW_SLA_MS,leaveTimeout:TRANSITION_TO_OPEN_JAW_SLA_MS},i?this.renderJawBone(n):null)}});module.exports=JawBoneOnRow;


});


Requireify.register('js/akira/components/row.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),IsomorphicContext=require("../../reactMixins/isomorphicContext"),JawBoneLink=require("../../reactMixins/jawBoneLink"),Animation=require("../../reactMixins/cssAnimation.jsx"),AkiraTest=require("../../reactMixins/ab/akira"),AkiraContext=require("../../reactMixins/akiraContext"),FalkorPureRender=require("../../reactMixins/falkorPureRenderMixin"),Slider=require("./slider/slider.jsx"),JawBone=require("./jawBone/jawBone.jsx"),JawBoneOnRow=require("./jawBone/jawBoneOnRow.jsx"),PresTrackedContainer=require("../../components/presentationTracking/presentationTrackingContainer.jsx"),BOB_CLOSE_TIMEOUT=500,sliderMoveDirection=null,Row=React.createClass({displayName:"Row",mixins:[IsomorphicContext,JawBoneLink,Animation,AkiraTest,FalkorPureRender,AkiraContext],getInitialState:function(){return{leftmostVisibleItemIndex:0}},childContextTypes:{rowNum:React.PropTypes.number},getChildContext:function(){return{rowNum:this.props.rowNum}},handleSliderMove:function(e,o){this.setState({leftmostVisibleItemIndex:e}),sliderMoveDirection=o,"function"==typeof this.props.handleSliderMove&&this.props.handleSliderMove(e,o)},closingBobs:[],onBobLeave:function(e,o){var i=this,t={position:e,callback:o,closeTimeout:setTimeout(function(){i.isMounted()&&i.closePrevBobs(!1)},BOB_CLOSE_TIMEOUT)};this.closingBobs.push(t)},onBobOpen:function(e,o,i,t,n){this.pushSliderItems(e,o,i,t,n),this.closePrevBobs(!0),this.rowDidBob=!0},onBobClose:function(e,o,i){!this.ignoreClosingPush||this.isJawBoneOpen()?this.pushSliderItems(e,0,0,o,i):i(),this.ignoreClosingPush=!1},closePrevBobs:function(e){this.ignoreClosingPush=e;for(var o=0,i=this.closingBobs.length;i>o;o++){var t=this.closingBobs[o];clearTimeout(t.closeTimeout),t.callback&&t.callback()}this.closingBobs=[]},cleanUpAllBobStyles:function(){var e,o;this.isMounted()&&(e=this.refs.slider,e&&(o=e.getAllSliderItems()||[],o.map(function(e){Animation.clearStyles(e.getDOMNode())})))},getRowDidBob:function(){return this.rowDidBob},pushSliderItems:function(e,o,i,t,n){var s=this.refs.slider,r=s.getItem(e);if(r){var a,l=r.props.viewportPosition;a="leftEdge"===l?1:"rightEdge"===l?-1:0;for(var d,c=s.getSliderItemsInViewport(),h=0;d=c[h];h++){var p=0;if(d===r)p=a*o;else{var u=a?2:1,B=d.props.viewportIndex>r.props.viewportIndex?1:-1;a&&B!==a&&(u=0),p=B*o*i*u}this.animate({target:d.getDOMNode(),translate3d:Math.floor(p)+"px, 0,0",duration:t,callback:n,easing:"cubic-bezier(0.5, 0, 0.1, 1)"})}}},isJawBoneOpen:function(){return this.props.showJawBone},getJawBoneModel:function(){return this.props.jawBoneModelIndex>=0?this.props.model.bind([this.props.jawBoneModelIndex]):void 0},handleRowBlur:function(){this.closePrevBobs(!1),this.getRowDidBob()&&setTimeout(this.cleanUpAllBobStyles,BOB_CLOSE_TIMEOUT),this.rowDidBob=!1},wrapChildItems:function(e){var o=this;return e.map(function(e){return React.addons.cloneWithProps(e,{key:e.key,onBobOpen:o.onBobOpen,onBobClose:o.onBobClose,onBobLeave:o.onBobLeave,getRowDidBob:o.getRowDidBob,aJawBoneOpen:o.isJawBoneOpen(),myJawBoneOpen:o.isJawBoneOpen()&&o.props.jawBoneRankNum===e.props.rankNum})})},render:function(){var e,o,i,t,n,s,r=this.props.model;return this.isJawBoneOpen()&&(i=this.getJawBoneModel(),e=i&&i.getValueSync(["summary"]),t=e&&"show"===e.type,n=JawBone.getPaths(this.getContext(),null,{isShow:t}),s=i&&n),o=React.addons.classSet({rowContainer:!0,largeGutter:this.hasLargeBOB(),jawBoneOpen:s&&this.props.isGallery,rowContainer_title_card:!0}),React.createElement("div",{className:o,id:"row-"+this.props.rowNum},React.createElement(PresTrackedContainer,null,React.createElement("div",{className:"rowContent slider-hover-trigger-layer",onMouseLeave:this.handleRowBlur},React.createElement(Slider,{ref:"slider",itemsInRow:this.context.columnsInRow,totalItems:this.props.totalItems,handleSliderMove:this.handleSliderMove,enableLooping:!0,enablePeek:!0,onAdvanceRight:this.handleSliderMove,enablePaginationIndicator:this.props.enablePaginationIndicator},this.wrapChildItems(this.props.children))),React.createElement(JawBoneOnRow,{model:r,sliderRef:this.refs.slider,jawBoneRankNum:this.props.jawBoneRankNum,showJawBone:this.isJawBoneOpen(),leftmostVisibleItemIndex:this.state.leftmostVisibleItemIndex,sliderMoveDirection:sliderMoveDirection,infinite:!this.props.isGallery,jawBoneModelIndex:this.props.jawBoneModelIndex})))}});module.exports=Row;


});


Requireify.register('js/akira/components/lolomo/rowHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),Link=require("../controls/mainViewLink.jsx"),RowHeader=React.createClass({displayName:"RowHeader",renderLinked:function(){return React.createElement("h2",{className:"rowHeader"},React.createElement(Link,{className:"rowTitle",type:this.props.listContext,id:this.props.id},_.unescape(this.props.title),React.createElement("span",{className:"rowChevron icon-akiraCaretRight"})))},render:function(){return this.props.listContext?this.renderLinked():React.createElement("h2",{className:"rowTitle"},_.unescape(this.props.title))}});module.exports=RowHeader;


});


Requireify.register('js/akira/components/title/tinyTitleCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),PlayButton=require("../controls/playbutton.jsx"),ImageExtension=require("../../../common/imageExtension"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),SIZE="_233x131",TinyTitleCard=React.createClass({displayName:"TinyTitleCard",mixins:[IsomorphicContext],statics:{extension:function(e){return ImageExtension.getExtensionForOpaqueImage(e)},getPaths:function(e){return[["summary"],["boxarts",SIZE,ImageExtension.getExtensionForOpaqueImage(e)]].concat(PlayButton.getPaths())},getSize:function(){return SIZE}},placeHolder:function(){var e="lockup title_card "+(this.props.className||"");return React.createElement("div",{className:e},React.createElement("div",{className:"video-artwork tc-load"},"Loading..."))},render:function(){var e,t,a=this.props.model,n=a.getValueSync(["summary"]),r=a.getValueSync(["boxarts"]),i=TinyTitleCard.extension(this.getContext()),o="lockup title_card "+(this.props.className||"");return n?r?r&&r[SIZE]&&r[SIZE][i]?(e={backgroundImage:"url("+r[SIZE][i].url+")"},t="video-artwork-"+n.id,React.createElement("div",{id:t,key:t,className:o,onClick:this.handleClick},React.createElement("div",{className:"video-artwork",style:e},React.createElement(PlayButton,{model:a,className:"evidencePlay"})))):null:null:this.placeHolder()}});module.exports=TinyTitleCard;


});


Requireify.register('js/akira/components/lolomo/watchedEvidence.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),TinyTitleCard=require("../title/tinyTitleCard.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),BUNDLE="discovery/akira/Common",NUM_EVIDENCE=2,WatchedEvidence=React.createClass({displayName:"WatchedEvidence",mixins:[I18N,AutoFetch],statics:{__meta__:{strings:[{bundle:"discovery/akira/Common",ids:["based.on.your.interest.in"]}]},getPaths:function(e){var t=TinyTitleCard.getPaths(e).map(function(e){return[{to:NUM_EVIDENCE}].concat(e)});return t}},childContextTypes:{rankNum:React.PropTypes.number},getChildContext:function(){return{rankNum:this.props.rankNum}},renderVideos:function(){var e,t=[],r=this.props.model;for(e=0;NUM_EVIDENCE>e;e++){var i=r.bind([e]);i.getBoundValue()&&t.push(React.createElement(TinyTitleCard,{model:i,className:"videoEvidence",key:"watchedEvidence"+e}))}return t},render:function(){var e=this.renderVideos();return e.length<=0?null:React.createElement("div",{className:"ratio-16x9"},React.createElement("div",{className:"watchedEvidence"},React.createElement("div",{className:"evidenceLabel"},this.getString(BUNDLE,"based.on.your.interest.in")),e))}});module.exports=WatchedEvidence;


});


Requireify.register('js/akira/components/title/errorTitleCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ErrorTitleCard=React.createClass({displayName:"ErrorTitleCard",render:function(){var e={display:"none"},r={backgroundImage:"url(http://cdn0.nflximg.net/images/unavailable/342x192/unavailable.jpg)"};return React.createElement("div",{className:this.props.classes+" error-title-card"},React.createElement("div",{className:"video-artwork",style:r},React.createElement("div",{style:e},this.props.errorMessage)))}});module.exports=ErrorTitleCard;


});


Requireify.register('js/utils/mouseUtils.js', function(require, requireAsync, module, exports) {


"use strict";var mouseUtil={modifiedClick:function(t){return t&&(t.ctrlKey||t.shiftKey||t.metaKey||t.which&&2===t.which||t.button&&1===t.button)}};module.exports=mouseUtil;


});


Requireify.register('js/akira/components/title/bobCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),VideoMeta=require("../title/videoMeta.jsx"),MyListButton=require("../title/myListButton.jsx"),HeroImages=require("../title/heroImages.jsx"),PlayButton=require("../controls/playbutton.jsx"),Progress=require("../jawBone/progress.jsx"),SliderItem=require("../slider/sliderItem.jsx"),Link=require("../controls/mainViewLink.jsx"),Animation=require("../../../reactMixins/cssAnimation.jsx"),AkiraTest=require("../../../reactMixins/ab/akira"),AkiraContext=require("../../../reactMixins/akiraContext"),Watched=require("../../../reactMixins/video/watched"),I18N=require("../../../reactMixins/i18n"),Context=require("../../../reactMixins/isomorphicContext"),JawBoneLink=require("../../../reactMixins/jawBoneLink"),EventBus=require("../../../reactMixins/eventBus"),Position=require("../../../common/position"),MouseUtils=require("../../../utils/mouseUtils"),SIZE="_665x375",HEIGHT=470,IMAGE_ROTATOR_FIRST_DELAY=2e3,IMAGE_ROTATOR_DURATION=2e3,EXPAND_DURATION=400,MINI_BOB_SCALE=1.4,MINI_BOB_PRE_EXPAND_SCALE=.71428571,FULL_BOB_SCALE=1.82,FULL_BOB_PRE_EXPAND_SCALE=.54945055,Z_INDEX_DEFAULT=null,Z_INDEX_CLOSING=2,Z_INDEX_OPEN=4,MAX_SYNOPSIS_LENGTH=160,HOVER_RED="#E50914",BUNDLE="discovery/akira/Common",BobCard=React.createClass({displayName:"BobCard",mixins:[JawBoneLink,Animation,AkiraTest,Watched,I18N,Context,AkiraContext],statics:{DELAY_OPEN_FAST:100,DELAY_OPEN_SLOW:400,getPaths:function(e,t,i){return i||(i={}),[["summary"],["title"],["availability"],["synopsis"],["queue"],["episodeCount"],["info"]].concat([["current",["summary","runtime","bookmarkPosition","creditsOffset"]]]).concat(VideoMeta.getPaths(e)).concat(HeroImages.getPaths(e,null,{isShow:i.isShow,height:HEIGHT,size:SIZE})).concat(Watched.getPaths()).concat(PlayButton.getPaths())},__meta__:{strings:[{bundle:BUNDLE,ids:["label.resume","label.next.up","watched.title.bob"]}]}},getInitialState:function(){return{disablePlayButton:!1,inPlayHitZone:!1}},componentDidMount:function(){this.openBOB()},openBOB:function(){var e=this,t=FULL_BOB_SCALE;this.preExpandScale=FULL_BOB_PRE_EXPAND_SCALE,this.hasMiniBOB()?(t=MINI_BOB_SCALE,this.preExpandScale=MINI_BOB_PRE_EXPAND_SCALE):this.hasNoGrowBOB()&&(t=1,this.preExpandScale=.9999,this.animate({target:"title-under",before:{opacity:0},opacity:1,duration:100}));var i=100*t,s=(i-100)/-2;this.setParentZIndex(Z_INDEX_OPEN),this.setState({disablePlayButton:!0}),setTimeout(function(){e.isMounted()&&e.setState({disablePlayButton:!1})},EXPAND_DURATION+250),this.animate({before:{scale:this.preExpandScale,visibility:"visible",width:i+"%",height:i+"%",top:s+"%",left:s+"%"},scale:1,easing:"cubic-bezier(0.5, 0, 0.1, 1)",duration:EXPAND_DURATION}),this.animate({target:"title-art",opacity:0,duration:EXPAND_DURATION,easing:"linear",after:{display:"none"}}),this.animate({target:"jawbone-chevron",before:{translateY:"-10px",opacity:0},translateY:"0px",opacity:1,duration:EXPAND_DURATION,delay:200,after:{reset:!0}}),this.pushSiblings(t)},pushSiblings:function(e){var t=Position.getRect(this.props.parentNode),i=t.width*e,s=(i-t.width)/2,a=0;this.hasFullPushBOB()?a=1:this.hasHalfPushBOB()?a=.5:this.hasNoPushBOB()&&(a=0),this.props.onBobOpen(s,a,EXPAND_DURATION)},getParentSliderItem:function(){for(var e=this.getDOMNode();e=e.parentNode;)if(e.classList&&e.classList.contains(SliderItem.className))return e;return null},setParentZIndex:function(e){var t=this.getParentSliderItem();t&&this.css({target:t,zIndex:e})},componentWillLeave:function(e){this.animate({scale:this.preExpandScale,duration:EXPAND_DURATION,easing:"cubic-bezier(0.5, 0, 0.1, 1)"}),this.animate({target:"title-art",before:{display:"block"},opacity:1,duration:EXPAND_DURATION}),this.hasNoGrowBOB()&&this.animate({target:"title-under",opacity:0,duration:100});var t=this;this.setParentZIndex(Z_INDEX_CLOSING),setTimeout(function(){t.isMounted()&&(t.setParentZIndex(Z_INDEX_DEFAULT),e())},EXPAND_DURATION),this.props.onBobClose(EXPAND_DURATION)},onEnterPlayHitZone:function(){this.isVideoPlayable()&&this.css({target:"playButton",opacity:null}),this.css({target:"jawbone-chevron",fontWeight:"normal"}),this.toggleBigHitZoneHover(!0)},onEnterJawHitZone:function(){this.isVideoPlayable()&&this.css({target:"playButton",opacity:.2}),this.css({target:"jawbone-chevron",fontWeight:"bold"}),this.toggleBigHitZoneHover(!1)},onClickPlayHitZone:function(e){this.hasBigHitZoneBOB()&&this.isVideoPlayable()?this.refs.playButton.getDOMNode().click():e.target.classList.contains("play")||this.onClickJawHitZone()},onClickJawHitZone:function(e){MouseUtils.modifiedClick(e)||(e&&e.preventDefault(),EventBus.emit("jawbone:open",_.assign({},this.context,this.props,{trigger:"bob"})),this.props.onJawOpen&&this.props.onJawOpen(),this.openJawBoneAtRankNum(this.context.rankNum,this.props.videoId))},toggleBigHitZoneHover:function(e){this.hasBigHitZoneBOB()&&(this.setState({inPlayHitZone:e}),this.css({target:"jawbone-chevron",color:e?null:HOVER_RED}),this.isVideoPlayable()&&this.css({target:this.getDOMNode().querySelector(".icon-play"),color:e?HOVER_RED:null}))},getFeatureSet:function(e){var t={titlePosition:"inside",chevronSize:"normal",meta:!0,year:!0,synopsis:!0,queue:!!e.queue,burns:!1,cssClass:"",watchedTitle:!1,progress:!1,progressSummary:!1,playButton:"normal",playPosition:"normal",playHitZone:"normal",state:"play"};return this.hasMiniBOB()?(t.cssClass="mini-bob",t.synopsis=!1,t.queue=!1,t.year=!1):this.hasNoGrowBOB()?(t.cssClass="no-grow-bob",t.meta=!1,t.synopsis=!1,t.queue=!1,t.playButton="small",t.chevronSize="small",t.titlePosition="under"):this.hasNoSynopsisBOB()?(t.cssClass="no-synopsis-bob",t.synopsis=!1,t.queue=!1):this.hasKenBurnsBOB()?(t.cssClass="burns-bob",t.synopsis=!1,t.queue=!1,t.burns=!0):this.hasBigHitZoneBOB()&&(t.cssClass="big-hitzone-bob",t.playHitZone="large"),this.isInResumeState()?(t.state="resume",t.watchedTitle=!0,t.progress=!0,t.progressSummary=!this.hasNoGrowBOB()):this.isInNextUpState()&&(t.state="nextup",t.watchedTitle=!0),"play"!==t.state&&(t.synopsis=!1,t.meta=!1),this.hasNoGrowBOB()||t.synopsis||(t.playPosition="lower"),e.summary.isOriginal&&!this.isVideoPlayable()&&(t.meta=!1,t.queue=!1,e.info&&e.info.message&&(t.tagline=e.info&&e.info.message)),t},getData:function(){var e=this.props.model;return{title:e.getValueSync(["title"]),summary:e.getValueSync(["summary"]),heroImages:e.getValueSync(["heroImages"]),queue:e.getValueSync(["queue"]),bookmarkPosition:e.getValueSync(["bookmarkPosition"]),episodeRuntime:e.getValueSync(["current","runtime"]),episodeBookmark:e.getValueSync(["current","bookmarkPosition"]),isStandalone:e.getValueSync(["episodeCount"])<=0,info:e.getValueSync(["info"]),synopsis:_.trunc(e.getValueSync(["synopsis"]),{length:MAX_SYNOPSIS_LENGTH,separator:/\s/,omission:"…"})}},isVideoPlayable:function(){var e=this.props.model.getValueSync(["availability"]),t=e&&e.isPlayable;return!e||t},getResumeBobTitle:function(){var e=this.getResumeParams();return this.getString(BUNDLE,"watched.title.bob",e)},render:function(){var e=this.props.model,t=this.getData(),i=this.getFeatureSet(t),s=React.addons.classSet,a={"bob-card":!0};a[i.cssClass]=!0;var n={"bob-play":!0,"bob-play-lower":"lower"===i.playPosition};n["bob-play-"+i.playButton]=!0,"large"===i.playHitZone&&(n.hitZoneBased=!0,n.hitZoneHover=this.state.inPlayHitZone);var o={"bob-title":!0},r={"icon-akiraCaretDown":!0,"bob-jawbone-chevron":!0};r["chevron-size-"+i.chevronSize]=!0;var l=i.watchedTitle&&!t.isStandalone?this.getResumeBobTitle():"",c=i.progress?React.createElement(Progress,{runtime:t.episodeRuntime,bookmarkPosition:t.episodeBookmark,current:!0,showSummary:i.progressSummary}):null;return React.createElement("div",{className:s(a),key:"bob-"+t.summary.id},React.createElement(HeroImages,{firstDelay:IMAGE_ROTATOR_FIRST_DELAY,duration:IMAGE_ROTATOR_DURATION,className:"bob-background",auto:!0,isStandalone:t.isStandalone,model:e,preloadImage:this.props.titleArt,bookmarkPosition:t.bookmarkPosition,height:HEIGHT,size:SIZE,burnsEffectType:i.burns?"bob":"",watched:this.hasBeenWatched()}),React.createElement("div",{className:"bob-outline"}),React.createElement("div",{className:"bob-overlay",ref:"overlay"},React.createElement("div",{className:"bob-play-hitzone",onMouseEnter:this.onEnterPlayHitZone,onClick:this.onClickPlayHitZone}),React.createElement(Link,{type:"title",params:{id:t.summary.id},preventClick:!0,className:"bob-jaw-hitzone",onMouseEnter:this.onEnterJawHitZone,onClick:this.onClickJawHitZone}),this.isVideoPlayable()?React.createElement(PlayButton,{ref:"playButton",model:e,onMouseEnter:this.onEnterPlayHitZone,className:s(n),disableClick:this.state.disablePlayButton,tabIndex:0}):null,React.createElement("div",{className:"bob-info"},"inside"===i.titlePosition?React.createElement("div",{className:s(o)},t.title):null,"inside"===i.titlePosition&&i.watchedTitle?React.createElement("div",{className:"watched-title",dangerouslySetInnerHTML:{__html:l}}):null,i.meta?React.createElement(VideoMeta,{model:e,readOnly:!0,suppressYear:!i.year}):null,i.tagline?React.createElement("div",{className:"tagline"},t.info.message):null,i.synopsis?React.createElement("div",{className:"synopsis"},t.synopsis):null,i.queue?React.createElement("div",{className:"mylist-wrapper"},React.createElement(MyListButton,{model:e,videoId:t.summary.id,inQueue:t.queue.inQueue,showToolTip:!0})):null,"inside"===i.titlePosition?c:null,"under"===i.titlePosition?React.createElement("div",{ref:"title-under",className:"bob-title-under-pos"},React.createElement("div",{className:"bob-title-under",dangerouslySetInnerHTML:{__html:l}}),c):null,React.createElement("div",{className:s(r),ref:"jawbone-chevron"}))),React.createElement("img",{src:this.props.titleArt,ref:"title-art",className:"bob-title-art"}))}});module.exports=BobCard;


});


Requireify.register('js/reactMixins/testerParams.jsx', function(require, requireAsync, module, exports) {


"use strict";var URI=require("URIjs"),ctx=require("../utils/contextData"),serverDefs=ctx.getFeatureData("serverDefs"),env=serverDefs&&serverDefs.production?"prod":"test",TesterParams={getTesterParamFlag:function(e){var r=this.getTesterParamValue(e);return"true"===r},getTesterParamValue:function(e){var r=URI.parseQuery(location.search),t=r[e],s=!1,a=s||"test"===env;return a?t:null}};module.exports=TesterParams;


});


Requireify.register('js/reactMixins/ab/motionBoxArtTest.js', function(require, requireAsync, module, exports) {


"use strict";var AB=require("../ab"),TesterParams=require("../testerParams.jsx"),TEST_ID=6392,CDN_ROOT="http://cdn.nflximg.com/ffe/siteui/akira/originals/motionBoxArt/",MotionBoxArtTest={mixins:[AB,TesterParams],hasMotionBoxArt:function(){return this.ab().attr(TEST_ID,"hasMotion")&&!this.fastProperty("netflix.ui.akira.originals.motionBoxArt.disabled")},useRandomMotionOrder:function(){return this.ab().attr(TEST_ID,"isRandom")},getMotionAsset:function(t,i){var r=this.fastProperty("netflix.ui.akira.originals.motionBoxArt.fileVersionTag")||"",o=this.fastProperty("netflix.ui.akira.originals.motionBoxArt.cdnRoot")||CDN_ROOT;return"static"===t?o+"static_"+i+"_"+r+".png":o+"motion_boxart_"+i+"_"+r+".mp4"},getMotionVideoId:function(t,i){if(!this.hasMotionBoxArt()||"queue"===i||"continueWatching"===i)return 0;var r=this.getTesterParamValue("forceMotionBoxArt")||"";if(r){var o=r.split(","),n={};if(o.forEach(function(t){var i=t.split(":");n[parseInt(i[0],10)]=parseInt(i[1],10)}),n[t])return n[t]}var a=this.fastProperty("netflix.ui.akira.originals.motionBoxArt.videos")||"";return a.indexOf(t)>-1?t:0}};module.exports=MotionBoxArtTest;


});


Requireify.register('js/akira/components/title/motionBoxArt.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),EventBus=require("../../../reactMixins/eventBus"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),FastProperty=require("../../../reactMixins/fastProperty"),MotionBoxArtTest=require("../../../reactMixins/ab/motionBoxArtTest"),MotionBoxArt=React.createClass({displayName:"MotionBoxArt",mixins:[IsomorphicContext,MotionBoxArtTest,FastProperty],componentWillMount:function(){this.videoUrl=this.getMotionAsset("video",this.props.videoId)},componentDidMount:function(){var e=this.getVideoNode();e.readyState>3?this.onVideoLoaded():e.addEventListener("canplaythrough",this.onVideoLoaded)},componentWillUnmount:function(){EventBus.emit("motion-boxart:deregister",!this.refs.video.getDOMNode().paused)},getVideoNode:function(){return this.refs.video&&this.refs.video.getDOMNode()},onVideoLoaded:function(){var e=this.getVideoNode();e&&(e.removeEventListener("canplaythrough",this.onVideoLoaded),EventBus.emit("motion-boxart:scan"))},render:function(){return React.createElement("video",{ref:"video",className:"motion-boxart"},React.createElement("source",{src:this.videoUrl,preload:"auto",type:"video/mp4"}))}});module.exports=MotionBoxArt;


});


Requireify.register('js/akira/components/title/titleCardFocus.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition"),PlayButton=require("../controls/playbutton.jsx"),TitleCardFocus=React.createClass({displayName:"TitleCardFocus",mixins:[Transition],transitions:{fadeIn:300,fadeOut:300},render:function(){return React.createElement("div",{className:"title-card-jawbone-focus"},React.createElement("div",{className:"title-card-focus-ring"}),React.createElement(PlayButton,{ref:"playButton",model:this.props.model,className:"title-card-play"}))}});module.exports=TitleCardFocus;


});


Requireify.register('js/akira/components/title/titleCard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),PathEvaluatorUtils=require("../../../utils/pathEvaluatorUtils"),ErrorTitleCard=require("./errorTitleCard.jsx"),BobCard=require("./bobCard.jsx"),MotionBoxArt=require("./motionBoxArt.jsx"),JawBone=require("../jawBone/jawBone.jsx"),ImageExtension=require("../../../common/imageExtension"),JawBoneLink=require("../../../reactMixins/jawBoneLink"),AkiraContext=require("../../../reactMixins/akiraContext"),FalkorFetch=require("../../../reactMixins/falkor-fetch"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),FalkorPureRender=require("../../../reactMixins/falkorPureRenderMixin"),Scheduler=require("../../../reactMixins/scheduler"),EventBus=require("../../../reactMixins/eventBus"),I18N=require("../../../reactMixins/i18n"),FastProperty=require("../../../reactMixins/fastProperty"),MotionBoxArtTest=require("../../../reactMixins/ab/motionBoxArtTest"),KeyCodes=require("../../../common/keyCodes"),CSSAnimation=require("../../../reactMixins/cssAnimation.jsx"),PresTrackedElement=require("../../../components/presentationTracking/presentationTrackingElement.jsx"),TitleCardFocus=require("./titleCardFocus.jsx"),ReactTransitionGroup=React.addons.TransitionGroup,SIZE="_342x192",DELAY_JAWBONE=300,BUNDLE="discovery/akira/Common",prefetchStrategies={bobs:{bobs:!0},jawBones:{jawBones:!0}},getPaths=function(e,t,o){t||(t={}),o||(o={});var i,n,s=[["summary"],["title"],["boxarts",SIZE,ImageExtension.getExtensionForOpaqueImage(e)]];return t.bobs&&(i=BobCard.getPaths(e,t,o),s=s.concat(i)),t.jawBones&&(n=JawBone.getPaths(e,t,{isShow:o.isShow}),s=s.concat(n)),s},TitleCard=React.createClass({displayName:"TitleCard",mixins:[I18N,JawBoneLink,CSSAnimation,FalkorFetch,IsomorphicContext,FalkorPureRender,Scheduler,AkiraContext,FastProperty,MotionBoxArtTest],isHovering:!1,statics:{extension:function(e){return ImageExtension.getExtensionForOpaqueImage(e)},getPaths:getPaths,getSize:function(){return SIZE},__meta__:{strings:[{bundle:"discovery/akira/Common",ids:["loading"]}]}},childContextTypes:{rankNum:React.PropTypes.number},getChildContext:function(){return{rankNum:this.props.rankNum}},getInitialState:function(){return{hasBob:!1,hideJawFocus:!1}},placeHolder:function(){var e="lockup title_card "+(this.props.className||"");return React.createElement("div",{className:e},React.createElement("div",{className:"video-artwork tc-load"},this.getString(BUNDLE,"loading")))},eventOpenJaw:function(e){this.props.myJawBoneOpen||"keydown"!==e.type&&this.state.hasBob||(EventBus.emit("jawbone:open",_.assign({},this.context,this.props,{trigger:"minibob"})),this.openJawBoneAtRankNum(this.props.rankNum,this.props.videoId,e.type),this.onOpenJaw(!0))},handleKeyDown:function(e){var t=this;switch(e&&e.which){case KeyCodes.ENTER:this.eventOpenJaw(e);break;case KeyCodes.ESC:this.props.myJawBoneOpen&&(EventBus.emit("jawbone:close",{reason:"explicit"}),this.closeJawBone(function(){t.getDOMNode().focus()}))}},handleClick:function(e){this.eventOpenJaw(e)},handleMouseOver:function(e){var t=document.activeElement||document.body;e.preventDefault(),e&&e.currentTarget&&this.getDOMNode().contains(e.currentTarget)&&!this.state.hasBob&&(t!==document.body&&t.blur(),this.handleEnter())},handleMouseOut:function(e){e.preventDefault(),(e&&!e.relatedTarget||e.relatedTarget&&!this.getDOMNode().contains(e.relatedTarget))&&this.handleLeave()},handleFocus:function(){this.handleEnter()},handleBlur:function(e){var t=this.getDOMNode(),o=e&&e.relatedTarget||document.activeElement;e&&"blur"===e.type&&o&&t.contains(o)&&o!==t||this.handleLeave()},handleEnter:function(){var e=this,t=this.getContext();if(this.isHovering=!0,this.showHoverPulse=!1,this.fetchedBOBData||(this.queue(function(){var o=prefetchStrategies.bobs;e.fetchData(e.props.model,getPaths(t,o),"titleCardEnter1",null,o.forceUpdate)}),this.queue(function(){var o=prefetchStrategies.jawBones,i=getPaths(t,o);e.fetchData(e.props.model,i,"titleCardEnter2",null,o.forceUpdate)}),this.fetchedBOBData=!0),this.props.aJawBoneOpen)this.jawBoneTimeout||this.props.myJawBoneOpen||(this.showHoverPulse=!0,this.jawBoneTimeout=setTimeout(function(){EventBus.emit("jawbone:open",_.assign({},e.context,e.props,{trigger:"minibob"})),e.openJawBoneAtRankNum(e.props.rankNum,e.props.videoId),e.clearDelays()},DELAY_JAWBONE));else if(!this.bobTimeout){var o=this.props.getRowDidBob&&this.props.getRowDidBob()?BobCard.DELAY_OPEN_FAST:BobCard.DELAY_OPEN_SLOW;o===BobCard.DELAY_OPEN_SLOW&&(this.showHoverPulse=!0),this.bobTimeout=setTimeout(function(){e.isHovering&&e.isMounted()&&(EventBus.emit("bob:open",_.assign({},e.context,e.props)),e.setState({hasBob:!0}),EventBus.once("bob:open",function(t){var o=_.get(e.getData(),"summary.id",null),i=_.get(t,"videoId",null);o&&i&&o!==i&&e.handleLeave()})),e.clearDelays()},o)}},clearDelays:function(){clearTimeout(this.jawBoneTimeout),clearTimeout(this.bobTimeout),this.jawBoneTimeout=0,this.bobTimeout=0},handleLeave:function(){this.clearDelays();var e=this;this.state.hasBob&&-1===window.location.search.indexOf("stickybob")&&(EventBus.emit("bob:close",_.assign({},this.context,this.props)),this.props.onBobLeave(this.props.rankNum,function(){e.isMounted()&&e.setState({hasBob:!1})})),this.isHovering=!1},onBobOpenJaw:function(){this.onOpenJaw(!1)},onOpenJaw:function(e){this.handleLeave(),this.setState({hideJawFocus:!e,hasBob:!1})},componentDidMount:function(){if(this.motionBoxArtVideoId=this.getMotionVideoId(this.getVideoId(),this.props.listContext),this.motionBoxArtVideoId){var e=this;EventBus.emit("motion-boxart:register",{component:this,element:this.getDOMNode(),videoId:this.motionBoxArtVideoId,sortIndex:100*this.props.rowNum+this.props.rankNum,getVideo:function(){return e.isMounted()?e.refs.motion.getDOMNode():null}}),this.forceUpdate()}},componentWillUnmount:function(){this.clearDelays()},handleWindowVisibilityChange:function(e){e||this.handleLeave()},componentWillUpdate:function(e,t){t.hasBob&&!this.state.hasBob?EventBus.once("window-visibility:changed",this.handleWindowVisibilityChange):!t.hasBob&&this.state.hasBob&&EventBus.removeListener("window-visibility:changed",this.handleWindowVisibilityChange)},onBobOpen:function(e,t,o){this.props.onBobOpen&&this.props.sliderItemId&&this.props.onBobOpen(this.props.sliderItemId,e,t,o)},onBobClose:function(e,t){var o=this,i=function(){o.props.myJawBoneOpen&&o.setState({hideJawFocus:!1}),t&&t()};this.props.onBobClose&&this.props.sliderItemId&&this.props.onBobClose(this.props.sliderItemId,e,i)},getVideoId:function(){var e=this.props.model.getValueSync(["summary"]);return e&&e.id?e.id:0},getBoxArt:function(e){var t=e.getValueSync(["boxarts"]),o=TitleCard.extension(this.getContext());return t&&t[SIZE]&&t[SIZE][o]?t[SIZE][o].url:null},getTitle:function(e){return e&&e.getValueSync(["title"])},getData:function(){var e=this.props.model,t={model:e,summary:e.getValueSync(["summary"]),boxart:this.getBoxArt(e),title:this.getTitle(e)};return this.motionBoxArtVideoId&&(t.boxart=this.getMotionAsset("static",this.motionBoxArtVideoId)),t},getInnerContent:function(){return!this.motionBoxArtVideoId||this.props.aJawBoneOpen||this.state.hasBob?null:React.createElement(MotionBoxArt,{ref:"motion",videoId:this.motionBoxArtVideoId})},render:function(){var e,t=this.getData(),o=React.addons.classSet,i=o({smallTitleCard:!0,lockup:!0,title_card:!0,"pop-in":this.props.animateIn,highlighted:this.props.myJawBoneOpen,"not-highlighted":this.props.aJawBoneOpen&&!this.props.myJawBoneOpen,"hover-pulse":this.showHoverPulse}),n={};if(PathEvaluatorUtils.isValueError(t.summary))return React.createElement(ErrorTitleCard,{classes:i,errorMessage:t.summary.message});if(!t.summary||!t.boxart)return React.createElement(ErrorTitleCard,{classes:i,errorMessage:"Summary or boxart is undefined"});this.props.animateIn&&(e=t.summary.id%20*2.5/100+.3,n=CSSAnimation.getAnimationStyle({keyframes:{delay:e+"s"}}));var s="title-card-"+t.summary.id,a=this.props.myJawBoneOpen&&!this.state.hideJawFocus,r={backgroundImage:"url("+t.boxart+")"};return React.createElement("div",{id:s,key:s,className:i+" "+this.props.className,style:n,tabIndex:this.props.itemTabbable?0:null,"aria-label":t.title?t.title:null,role:"link",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown},React.createElement(PresTrackedElement,{videoId:t.summary.id},React.createElement("div",{className:"video-artwork",style:r},this.getInnerContent())),a?React.createElement(TitleCardFocus,{model:t.model}):null,React.createElement(ReactTransitionGroup,null,this.state.hasBob?React.createElement(BobCard,{model:t.model,parentNode:this.getDOMNode(),titleArt:t.boxart,onBobOpen:this.onBobOpen,onBobClose:this.onBobClose,onJawOpen:this.onBobOpenJaw,videoId:this.props.videoId}):null))}});module.exports=TitleCard;


});


Requireify.register('js/akira/components/lolomo/lolomoRow.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),FalkorFetch=require("../../../reactMixins/falkor-fetch"),NodeContext=require("../../../reactMixins/nodecontext"),Animation=require("../../../reactMixins/cssAnimation.jsx"),Prefetch=require("../../../reactMixins/prefetchWithDeps"),Scheduler=require("../../../reactMixins/scheduler"),AkiraContext=require("../../../reactMixins/akiraContext"),FalkorPureRender=require("../../../reactMixins/falkorPureRenderMixin"),LolomoRowChangeDetector=require("../../../reactMixins/modelChangeDetectors/lolomoRowChangeDetector"),Row=require("../row.jsx"),RowHeader=require("../lolomo/rowHeader.jsx"),WatchedEvidence=require("../lolomo/watchedEvidence.jsx"),TitleCard=require("../title/titleCard.jsx"),MAX_ROW_TITLES=100,prefetchStrategies={justJawBones:{numVideos:7,bobs:!1,jawBones:!0},visibleRowBobs:{numVideos:7,bobs:!0,jawBones:!1},allTitles:{numVideos:MAX_ROW_TITLES,bobs:!1,jawBones:!1}},defaultStrategy=prefetchStrategies.allTitles,getPaths=function(e,t,o){t||(t=defaultStrategy);var a,r,n=o&&void 0!==o.totalVideos?Math.min(t.numVideos,o.totalVideos):t.numVideos,i=t.startIndex||0,s=WatchedEvidence.getPaths(e).map(function(e){return["watchedEvidence"].concat(e)});return r=TitleCard.getPaths(e,t,{isShow:void 0}).map(function(e){return[{from:i,to:n}].concat(e)}),a=s.concat(r).concat([[["trackIds","context","length","genreId","videoId","displayName"]]])},LolomoRow=React.createClass({displayName:"LolomoRow",mixins:[FalkorFetch,NodeContext,Animation,Prefetch,Scheduler,FalkorPureRender,AkiraContext],statics:{getPaths:getPaths,defaultStrategy:defaultStrategy,prefetchStrategies:prefetchStrategies},leftmostVisibleItemIndex:0,getInitialState:function(){return{fullDataLoaded:!1}},childContextTypes:{trackId:React.PropTypes.number,jawBoneTrackId:React.PropTypes.number,jawBoneEpisodeTrackId:React.PropTypes.number,jawBoneTrailerTrackId:React.PropTypes.number},getChildContext:function(){var e=this.getTrackIds();return{trackId:e.trackId,jawBoneTrackId:e.trackId_jaw,jawBoneEpisodeTrackId:e.trackId_jawEpisode,jawBoneTrailerTrackId:e.trackId_jawTrailer}},componentDidMount:function(){this.setCustomModelChangeDetector(new LolomoRowChangeDetector(this.props.model))},getId:function(){var e=this.props.model,t=e.getValueSync(["genreId"]),o=e.getValueSync(["videoId"]);return t?t:o?o:void 0},getWatchedEvidenceModel:function(){var e,t=this.props.model,o=t.getValueSync(["context"]),a=t.bind(["watchedEvidence"]),r=a.bind([0]);return e=a.getBoundValue()&&r.getBoundValue()&&"similars"!==o,e&&a},hasWatchedEvidence:function(){return!!this.getWatchedEvidenceModel()},getWatchedEvidence:function(){var e=this.getWatchedEvidenceModel();return e?React.createElement(WatchedEvidence,{key:"watchedEvidence",model:e,pqls:WatchedEvidence.getPaths(),rankNum:0}):null},getTrackIds:function(){var e=this.props.model,t=e.getValueSync(["trackIds"]);return t||{}},getTitles:function(){for(var e,t,o,a,r,n=this.props.model,i=n.getValueSync(["length"]),s=[],c=0;i>c;c++)if(e=n.bind([c]),t=e.getValueSync(["summary"]),t&&t.id){o=t?t.id:"ph"+c,a=t&&t.id,r="title_"+o+"_"+this.props.rowNum+"_"+c;try{s.push(React.createElement(TitleCard,{key:r,model:e,listContext:this.props.listContext,rowNum:this.props.rowNum,rankNum:c,videoId:a}))}catch(d){}}return s},getRowItems:function(){var e,t=[];return e=this.getWatchedEvidence(),e&&t.push(e),t.concat(this.getTitles()).slice(0,MAX_ROW_TITLES)},getTotalItemsInRow:function(){var e=this.props.model,t=e.getValueSync(["length"]);return this.hasWatchedEvidence()&&t++,t>MAX_ROW_TITLES&&(t=MAX_ROW_TITLES),t},handleSliderMove:function(){var e,t=this;this.state.fullDataLoaded||(t.state.fullDataLoaded=!0,this.queue(function(){e=t.getStrategy("netflix.ui.akira.prefetch.rowSlide"),t.fetchData(t.props.model,getPaths(t.getContext(),e))}))},showJawBone:function(){return this.props.showJawBone},render:function(){var e=React.addons.classSet,t=this.props.model,o=t.getValueSync(["context"]),a=t.getValueSync(["length"]),r={lolomoRow:!0,lolomoRow_title_card:!0,jawBoneOpen:this.props.showJawBone},n=this.props.jawBoneRankNum,i=this.getRowItems(),s=this.state.fullDataLoaded?i.length:this.getTotalItemsInRow();return 0===a?null:React.createElement("div",{key:o+this.props.rowNum,className:e(r)},React.createElement(RowHeader,{listContext:o,id:this.getId(),title:this.props.title?this.props.title:t.getValueSync(["displayName"])}),React.createElement(Row,{model:t,pqls:this.props.pqls,totalItems:s,rowNum:this.props.rowNum,jawBoneRankNum:this.props.jawBoneRankNum,showJawBone:this.props.showJawBone,handleSliderMove:this.handleSliderMove,jawBoneModelIndex:n,columnsInRow:this.context.columnsInRow,enablePaginationIndicator:!0},i))}});module.exports=LolomoRow;


});


Requireify.register('js/utils/billboard.js', function(require, requireAsync, module, exports) {


"use strict";var XHR=require("./XHR");module.exports={logImpression:function(e,i,r,s){XHR.request({method:"post",service:"api",resource:"/billboardimpression",data:{type:e,videoId:i,isKids:!1,imageDescriptor:"Image_Iconic",award:r,billboardTheme:s}}).subscribe()}};


});


Requireify.register('js/akira/components/billboard/billboard.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MyListButton=require("../title/myListButton.jsx"),VideoMeta=require("../title/videoMeta.jsx"),IconButton=require("../controls/iconButton.jsx"),PlayButton=require("../controls/playbutton.jsx"),Episodes=require("../jawBone/episodes/episodes.jsx"),PresTrackedContainer=require("../../../components/presentationTracking/presentationTrackingContainer.jsx"),PresTrackedElement=require("../../../components/presentationTracking/presentationTrackingElement.jsx"),ImageExtension=require("../../../common/imageExtension"),Transition=require("../../../reactMixins/transition"),I18N=require("../../../reactMixins/i18nWithDeps"),BillboardUtils=require("../../../utils/billboard"),PANE_MAIN="main",PANE_EPISODES="episodes",BUNDLE="discovery/akira/Common",Billboard=React.createClass({displayName:"Billboard",mixins:[Transition,I18N],statics:{pql:{},__meta__:{strings:[{bundle:BUNDLE,ids:["button.secondary.episodes"]}]},getPaths:function(e,t){var a=ImageExtension.getExtensionForOpaqueImage(e),l=ImageExtension.getExtensionForTransparentImage(e);return Billboard.pql={titleCard:["titleCard","_265x149",a],titleTreatment:["titleTreatment","_612x260",l],bgImages:["BGImages",513,a],bb2OGBackground:["bb2OGBackground","_1280x520",a],bb2OGLogoStacked:["bb2OGLogoStacked","_400x160",l],synopsis:["synopsis"],queue:["queue"],summary:["summary"],episodeCount:["episodeCount"],supplementalMessage:["supplementalMessage"]},[Billboard.pql.synopsis,Billboard.pql.supplementalMessage,Billboard.pql.titleCard,Billboard.pql.titleTreatment,Billboard.pql.bgImages,Billboard.pql.bb2OGBackground,Billboard.pql.bb2OGLogoStacked,Billboard.pql.queue,Billboard.pql.summary,Billboard.pql.episodeCount].concat(VideoMeta.getPaths(e)).concat(Episodes.getPaths(e,t,{seasonIndex:"current"}))}},transitions:{skipFirst:!0,fadeIn:500,fadeOut:500},getInitialState:function(){return{currentPane:PANE_MAIN}},componentDidMount:function(){this.sendImpression("impression")},sendImpression:function(e){BillboardUtils.logImpression(e,this.getData().summary.id)},recordAction:function(){this.sendImpression("action")},onClickPaneClose:function(){this.setState({currentPane:PANE_MAIN}),this.props.onSwitchPane(!1)},onClickEpisodes:function(){this.recordAction(),this.setState({currentPane:PANE_EPISODES}),this.props.onSwitchPane(!0)},getCurrentPane:function(e){var t,a;switch(this.state.currentPane){case PANE_EPISODES:t=React.createElement("div",{className:"billboard-pane billboard-pane-episodes"},React.createElement("div",{className:"close-button icon-close",onClick:this.onClickPaneClose}),React.createElement("div",{className:"title"},e.title),React.createElement(Episodes,{model:e.model,disableNavigation:!1}));break;default:a=e.summary.isOriginal&&e.supplementalMessage?React.createElement("div",{className:"meta supplementalMessage"},e.supplementalMessage):React.createElement(VideoMeta,{model:e.model}),t=React.createElement("div",{className:"billboard-pane billboard-pane-main"},React.createElement("div",{className:"info"},React.createElement(PresTrackedContainer,null,React.createElement(PresTrackedElement,{videoId:e.summary.id},React.createElement("img",{className:e.logoClass,src:e.logoUrl,title:e.title}),a,React.createElement("div",{className:"synopsis"},e.synopsis)),React.createElement("div",{className:"billboard-links"},React.createElement(MyListButton,{model:e.model,videoId:e.summary.id,inQueue:e.queue.inQueue,onClick:this.recordAction}),e.episodeCount>0?React.createElement(IconButton,{label:this.getString(BUNDLE,"button.secondary.episodes"),icon:"episodes",onClick:this.onClickEpisodes}):null))),React.createElement(PlayButton,{model:e.model,trackId:this.props.trackId,className:"nav-layer billboard-play",onClick:this.recordAction}))}return t},getData:function(){var e=this.props.model,t={title:e.getValueSync(["title"])||"",summary:e.getValueSync(Billboard.pql.summary)||{id:0},fullBleedBillboard:!1,bgImages:e.getValueSync(Billboard.pql.bgImages)||[{url:""}],bb2OGBackground:e.getValueSync(Billboard.pql.bb2OGBackground)||[{url:""}],bb2OGLogoStacked:e.getValueSync(Billboard.pql.bb2OGLogoStacked)||[{url:""}],titleCard:e.getValueSync(Billboard.pql.titleCard)||{url:""},titleTreatment:e.getValueSync(Billboard.pql.titleTreatment)||{url:""},synopsis:e.getValueSync(Billboard.pql.synopsis)||"",supplementalMessage:e.getValueSync(Billboard.pql.supplementalMessage)||"",queue:e.getValueSync(Billboard.pql.queue)||!1,episodeCount:e.getValueSync(Billboard.pql.episodeCount)||0};return t.fullBleedBillboard=t.bb2OGBackground&&t.bb2OGBackground.url&&""!==t.bb2OGBackground.url&&t.bb2OGLogoStacked&&t.bb2OGLogoStacked.url&&""!==t.bb2OGLogoStacked.url,t.fullBleedBillboard?(t.heroImageUrl=t.bb2OGBackground.url,t.logoUrl=t.bb2OGLogoStacked.url,t.logoClass="title-logo"):(t.heroImageUrl=t.bgImages[0]&&t.bgImages[0].url,""!==t.titleTreatment.url?(t.logoUrl=t.titleTreatment.url,t.logoClass="title-treatment"):(t.logoUrl=t.titleCard.url,t.logoClass="title-card")),t.model=e,t},render:function(){var e=this.getData(),t=this.getCurrentPane(e),a=this.state.currentPane!==PANE_MAIN?"hero-faded":"";return React.createElement("div",{className:"billboard slider-hover-trigger-layer"+(e.fullBleedBillboard?" full-bleed-billboard":"")},React.createElement("img",{className:"hero "+a,src:e.heroImageUrl}),React.createElement("div",{className:"hero-vignette"}),t)}});module.exports=Billboard;


});


Requireify.register('js/reactMixins/fastPropertyWithDeps.js', function(require, requireAsync, module, exports) {


"use strict";var NodeContext=require("./nodecontext"),FastProps=require("./fastProperty");module.exports={mixins:[NodeContext,FastProps]};


});


Requireify.register('js/akira/components/billboard/billboardMotion.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),IconButton=require("../controls/iconButton.jsx"),LoadingSpinner=require("../loaders/loadingSpinner.jsx"),BrowserScroll=require("../../../reactMixins/browserScroll"),EventBus=require("../../../reactMixins/eventBus"),Position=require("../../../common/position"),FastProperty=require("../../../reactMixins/fastPropertyWithDeps"),AkiraContext=require("../../../reactMixins/akiraContext"),SCROLL_THRESHOLD_POS_Y=200,LOOP_COUNT_LIMIT=3,VIDEO_DEFAULT_TYPE="video/mp4",VIDEO_STATE={ERROR:0,LOADING:1,LOADED:2,PLAYING:3,PAUSED:4,COMPLETED:5},VIDEO_ERRORS={TIMEOUT:"loadTimeout",LOAD_ERROR:"loadError",UNSUPPORTED:"Unsupported Device/Platform"},PAUSE_TYPE={SCROLL:"userScrolled",WINDOW_BLUR:"appInBackground"},BillboardMotion=React.createClass({displayName:"BillboardMotion",mixins:[AkiraContext,BrowserScroll,FastProperty],loadTimeoutId:null,playCount:0,getDefaultProps:function(){return{srcType:VIDEO_DEFAULT_TYPE}},getInitialState:function(){return{videoState:VIDEO_STATE.LOADING,muted:!0,isWindowVisible:!0}},getVideoDOMNode:function(){return this.refs.video&&this.refs.video.getDOMNode()},componentDidMount:function(){var e=this.getVideoDOMNode(),t=e&&!!e.canPlayType,i=this.fastProperty("netflix.ui.akira.originals.billboard.motionTimeout")||15e3;EventBus.on("window-visibility:changed",this.handleWindowVisibilityChange),EventBus.emit("motionBillboard:loadingStarted",_.assign({},this.context,this.props)),t?e.error?this.handleError(VIDEO_ERRORS.LOAD_ERROR):(this.loadTimeoutId=setTimeout(this.handleTimeout,i),4===e.readyState&&this.handleCanPlayThrough(),e.addEventListener("error",this.handleError,!0),e.addEventListener("canplaythrough",this.handleCanPlayThrough),e.addEventListener("ended",this.handleEnded)):this.handleError(VIDEO_ERRORS.UNSUPPORTED)},componentWillUnmount:function(){var e=this.getVideoDOMNode();this.clearLoadTimeout(),this.state.videoState===VIDEO_STATE.PLAYING&&EventBus.emit("motionBillboard:playEnded",_.assign({},this.context,this.props,{reason:"canceled",detailedCompletionReason:"modalViewChanged"})),EventBus.removeListener("window-visibility:changed",this.handleWindowVisibilityChange),e&&(e.removeEventListener("error",this.handleError),e.removeEventListener("canplaythrough",this.handleCanPlayThrough),e.removeEventListener("ended",this.handleEnded))},clearLoadTimeout:function(){this.loadTimeoutId&&(clearTimeout(this.loadTimeoutId),this.loadTimeoutId=null)},pauseVideo:function(e){var t=this.getVideoDOMNode();EventBus.emit("motionBillboard:playEnded",_.assign({},this.context,this.props,{reason:"canceled",detailedCompletionReason:e})),this.setState({videoState:VIDEO_STATE.PAUSED}),t&&t.pause&&t.pause()},resumeVideo:function(){var e=this.getVideoDOMNode();EventBus.emit("motionBillboard:playStarted",_.assign({},this.context,this.props,{trigger:"resume",startOffset:e&&e.currentTime})),this.setState({videoState:VIDEO_STATE.PLAYING}),e&&e.play&&e.play()},render:function(){var e=this.props,t=this.state.videoState,i=this.state.muted,o={width:e.width,height:e.height},a=React.addons.classSet({"billboard-motion":!0,"dismiss-mask":t!==VIDEO_STATE.LOADING,"dismiss-static":t===VIDEO_STATE.PLAYING||t===VIDEO_STATE.PAUSED}),n={backgroundImage:"url("+e.staticImageUrl+")"};return React.createElement("div",{className:a,style:o},React.createElement("video",{ref:"video",preload:"auto",controls:!1,muted:i},React.createElement("source",{src:e.src,type:e.srcType})),React.createElement("div",{className:"static-image",style:n}),React.createElement("div",{key:"vignette",className:"hero-vignette"}),React.createElement(IconButton,{extraClass:"audio-btn",icon:i?"audio-off":"audio-on",onClick:this.handleAudioButtonClick}),React.createElement("div",{className:"loading-mask"},React.createElement(LoadingSpinner,null)))},onScroll:function(){var e,t=this.state.videoState,i=t===VIDEO_STATE.PLAYING;t!==VIDEO_STATE.LOADING&&t!==VIDEO_STATE.COMPLETED&&t!==VIDEO_STATE.ERROR&&(e=Position.getScrollTop()<SCROLL_THRESHOLD_POS_Y,!i&&e?this.resumeVideo():i&&!e&&this.pauseVideo(PAUSE_TYPE.SCROLL))},handleWindowVisibilityChange:function(e){var t,i=this.state.videoState,o=i===VIDEO_STATE.PLAYING;this.setState({isWindowVisible:e}),i!==VIDEO_STATE.LOADING&&i!==VIDEO_STATE.COMPLETED&&i!==VIDEO_STATE.ERROR&&(t=Position.getScrollTop()<SCROLL_THRESHOLD_POS_Y,!o&&e&&t?this.resumeVideo():o&&!e&&this.pauseVideo(PAUSE_TYPE.WINDOW_BLUR))},handleAudioButtonClick:function(){this.setState({muted:!this.state.muted})},handleTimeout:function(){this.handleError(VIDEO_ERRORS.TIMEOUT)},handleError:function(e){var t,i=this.getVideoDOMNode();this.clearLoadTimeout(),t="string"==typeof e?e:VIDEO_ERRORS.LOAD_ERROR,EventBus.emit("motionBillboard:loadingError",_.assign({errorType:t},this.context,this.props)),i&&i.pause&&i.pause(),this.setState({videoState:VIDEO_STATE.ERROR})},handleCanPlayThrough:function(){var e,t=this.getVideoDOMNode(),i=this.state.videoState,o=this.state.isWindowVisible;t&&(t.removeEventListener("canplaythrough",this.handleCanPlayThrough),i===VIDEO_STATE.LOADING&&(EventBus.emit("motionBillboard:loadingEnded",_.assign({},this.context,this.props)),EventBus.emit("motionBillboard:playStarted",_.assign({},this.context,this.props,{startOffset:t.currentTime})),this.clearLoadTimeout(),e=Position.getScrollTop()<SCROLL_THRESHOLD_POS_Y,o&&e?(this.setState({videoState:VIDEO_STATE.PLAYING}),t.play()):(EventBus.emit("motionBillboard:playError",_.assign({},this.context,this.props,{detailedCompletionReason:o?"userScrolled":"appInBackground",errorType:"notInViewport"})),this.setState({videoState:VIDEO_STATE.LOADED}))))},handleEnded:function(){var e,t=this.playCount||0,i=this.getVideoDOMNode();this.playCount=++t,LOOP_COUNT_LIMIT>t?(e="loop"+t+"Ended",i.currentTime=0,i.play()):(e="Completed",this.setState({videoState:VIDEO_STATE.COMPLETED})),EventBus.emit("motionBillboard:playEnded",_.assign({},this.context,this.props,{detailedCompletionReason:e}))}});module.exports=BillboardMotion;


});


Requireify.register('js/akira/components/billboard/billboardOriginals.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),BillboardMotion=require("./billboardMotion.jsx"),MyListButton=require("../title/myListButton.jsx"),PlayButton=require("../controls/playbutton.jsx"),PlayLink=require("../controls/playLink.jsx"),PresTrackedContainer=require("../../../components/presentationTracking/presentationTrackingContainer.jsx"),PresTrackedElement=require("../../../components/presentationTracking/presentationTrackingElement.jsx"),I18N=require("../../../reactMixins/i18n"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),Transition=require("../../../reactMixins/transition"),AB=require("../../../reactMixins/ab"),BillboardUtils=require("../../../utils/billboard"),BUNDLE="discovery/akira/Billboard:billboard.actions",FP_MOTION_BB_ENABLED="netflix.ui.akira.originals.billboard.motionEnabled",MOTION_HOLDBACK_TEST_ID=6583,BillboardOriginals=React.createClass({displayName:"BillboardOriginals",mixins:[I18N,IsomorphicContext,Transition,AB],statics:{pql:{},__meta__:{strings:[{bundle:BUNDLE,ids:["play","watchNow","watchEpisode","playSeason","playEpisode","playNextEpisode","rewatchShow","rewatchSeason","rewatchEpisode","continueWatching","continueSeason","playTrailer","playShowTrailer","playSeasonTrailer","playEpisodeTrailer","playRecap","playShowRecap","playSeasonRecap","playEpisodeRecap","info","playNewEpisodes"]}]},getPaths:function(e,a,t){return BillboardOriginals.pql={queue:["queue"]},[BillboardOriginals.pql.queue].concat(PlayButton.getPaths(e,a,t))}},transitions:{skipFirst:!0,fadeIn:500,fadeOut:500},logImpression:function(e){var a=this.props.model.getValueSync(),t=a.awardTrackId,i=a.billboardTheme;BillboardUtils.logImpression(e,a.id,t,i)},componentDidMount:function(){this.logImpression("impression")},recordAction:function(){this.logImpression("action")},renderActions:function(){var e=this,a=e.props,t=a.model.getValueSync(),i=a.videoModel.getValueSync("summary"),l=a.videoModel.getValueSync(BillboardOriginals.pql.queue)||{},n=[];return _.each(t.actions,function(t,l){var r="btn-flat"+(0===l?" btn-flat-primary":""),o=e.getString(BUNDLE,t.name,{sequenceNumber:t.sequenceNumber});"play"===t.type&&(i&&t.videoId===i.id?n.push(React.createElement(PlayButton,{key:l,className:r,annotation:o,model:a.videoModel,trackId:a.trackId,onClick:e.recordAction})):n.push(React.createElement(PlayLink,{key:l,className:r+" playLink",trackId:a.trackId,onClick:e.recordAction,videoId:t.videoId},React.createElement("div",{className:"playRing"},React.createElement("div",{className:"play icon-play"})),React.createElement("div",{className:"annotation"},o))))}),n.length<2&&n.push(React.createElement(MyListButton,{key:n.length,model:a.videoModel,videoId:t.id,inQueue:l.inQueue,onClick:e.recordAction})),React.createElement("div",{className:"billboard-links"},n)},render:function(){var e,a,t,i,l,n=this.props,r=n.model.getValueSync(),o=r.assets,s=o.background,c="light"===s.tone,d=this.isMotionBillboardEnabled(),m=!!r.motionUrl,p=!!r.isAward;return a=d&&m?[React.createElement(BillboardMotion,{videoId:r.id,motionId:r.motionId,key:"video",staticImageUrl:s.url,src:r.motionUrl})]:[React.createElement("img",{key:"hero",className:"hero",src:s.url}),React.createElement("div",{key:"vignette",className:"hero-vignette"})],t=o.logo?React.createElement("img",{className:"title-logo",src:o.logo.url,title:r.title}):React.createElement("div",{className:"title"},r.title),r.synopsis&&!p&&(i=React.createElement("div",{className:"synopsis"},r.synopsis)),r.supplementalMessage&&(l=React.createElement("div",{className:"supplemental"},r.supplementalMessage)),e=React.addons.classSet({billboard:!0,"billboard-pane":!0,"billboard-pane-main":!0,"billboard-originals":!0,"full-bleed-billboard":!0,"awards-billboard":p,"light-tone":c}),React.createElement("div",{className:e},a,React.createElement("div",{className:"info"},React.createElement(PresTrackedContainer,null,React.createElement("div",{className:"logo-and-text"},React.createElement(PresTrackedElement,{videoId:r.id},t,l,i)),this.renderActions())))},isMotionBillboardEnabled:function(){return this.ab().attr(MOTION_HOLDBACK_TEST_ID,"motionBillboardEnabled")!==!1&&this.getFastProperty(FP_MOTION_BB_ENABLED)}});module.exports=BillboardOriginals;


});


Requireify.register('js/akira/components/billboard/billboardRowOriginals.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Billboard=require("./billboard.jsx"),BillboardOriginals=require("./billboardOriginals.jsx"),PlayButton=require("../controls/playbutton.jsx"),ImageExtension=require("../../../common/imageExtension"),Position=require("../../../common/position"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),AkiraContext=require("../../../reactMixins/akiraContext"),ScrollHorizontal=require("../../../reactMixins/scrollHorizontal.js"),EventBus=require("../../../reactMixins/eventBus"),AUTOCYCLE_INTERVAL_MS=1e4,AUTOCYCLE_SCROLL_POS=100,DIR_PREV=-1,DIR_NEXT=1,MAX_BILLBOARDS=5,ignoreMouseWheel=!1,ignoreMouseWheelTimeout=null,BillboardRow=React.createClass({displayName:"BillboardRow",mixins:[IsomorphicContext,AkiraContext,ScrollHorizontal],wasClicked:!1,autoCycleId:0,statics:{getPaths:function(e,t){var o=ImageExtension.getExtensionForTransparentImage(e),i=t.numBillboards||1,n=[["billboards",["length","trackIds"]],["billboards","billboardData",{to:i},o]],l=Billboard.getPaths(e).map(function(e){return["billboards",{to:i}].concat(e)}),a=BillboardOriginals.getPaths(e).map(function(e){return["billboards",{to:i}].concat(e)}),r=PlayButton.getPaths(e).map(function(e){return["billboards",{to:i}].concat(e)});return n.concat(l).concat(a).concat(r)},MAX_BILLBOARDS:MAX_BILLBOARDS},getInitialState:function(){var e=this.props.model.getValueSync(["length"]);return{billboardNum:0,numBillboards:e,disableNav:!1}},childContextTypes:{rowNum:React.PropTypes.number,rankNum:React.PropTypes.number,trackId:React.PropTypes.number},getChildContext:function(){return{rowNum:this.props.rowNum,rankNum:this.state.billboardNum,trackId:this.getTrackId()}},componentDidMount:function(){this.startAutoCycle(),window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("focus",this.handleWindowFocus),EventBus.once("modal:open:welcomeModal",this.stopAutoCycle),EventBus.once("modal:open:paymentHoldModal",this.stopAutoCycle),EventBus.once("modal:close:welcomeModal",this.startAutoCycle),EventBus.once("modal:close:paymentHoldModal",this.startAutoCycle)},componentWillUnmount:function(){this.stopAutoCycle(),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("focus",this.handleWindowFocus),EventBus.removeListener("modal:open:welcomeModal",this.stopAutoCycle),EventBus.removeListener("modal:open:paymentHoldModal",this.stopAutoCycle),EventBus.removeListener("modal:close:welcomeModal",this.startAutoCycle),EventBus.removeListener("modal:close:paymentHoldModal",this.startAutoCycle)},handleWindowBlur:function(){this.isBlurred=!0},handleWindowFocus:function(){this.isBlurred=!1},handleClickArrow:function(e){this.switchBillboard(e)},handleClickDot:function(e){this.setBillboardNum(e)},handleMouseWheel:function(e){if(!(ignoreMouseWheel||this.state.numBillboards<=1)){var t=this.advanceDirection(e);"right"===t?this.switchBillboard(DIR_NEXT):"left"===t&&this.switchBillboard(DIR_PREV)}},switchBillboard:function(e){var t=this.state.billboardNum+e;0>t?t=this.state.numBillboards-1:t>this.state.numBillboards-1&&(t=0),ignoreMouseWheel=!0,clearTimeout(ignoreMouseWheelTimeout),ignoreMouseWheelTimeout=setTimeout(function(){ignoreMouseWheel=!1},500),this.setBillboardNum(t)},setBillboardNum:function(e){this.setState({billboardNum:e})},stopAutoCycle:function(){this.autoCycleId&&(clearInterval(this.autoCycleId),this.autoCycleId=0)},startAutoCycle:function(){clearInterval(this.autoCycleId),this.autoCycleId=setInterval(this.autoCycle,AUTOCYCLE_INTERVAL_MS)},autoCycle:function(){Position.getScrollTop()>=AUTOCYCLE_SCROLL_POS||this.isBlurred||this.switchBillboard(DIR_NEXT)},onSwitchPane:function(e){this.setState({disableNav:e})},getTrackId:function(){var e,t=this.props.model.getValueSync(["trackIds"]);return t&&(e=t.trackId),e},render:function(){var e,t=this.props.model.bind([this.state.billboardNum]),o=this.renderBillboardOriginals(),i=o&&o.isMotion?null:this.renderNavControls();return e=o?o.component:React.createElement(Billboard,{model:t,key:"bb-"+this.state.billboardNum,onSwitchPane:this.onSwitchPane}),React.createElement("div",{className:"billboard-row",onClick:this.stopAutoCycle,onMouseEnter:this.stopAutoCycle,onMouseLeave:this.startAutoCycle,onWheel:this.handleMouseWheel},i,e)},renderNavControls:function(){var e,t,o=[],i=this.state,n=i.billboardNum;if(i.disableNav||i.numBillboards<=1)return null;for(e=0;e<i.numBillboards;e++)t=React.addons.classSet({"nav-dot":!0,"icon-circle-solid":!0,"dot-active":e===n}),o.push(React.createElement("div",{key:"dot-"+e,className:t,onClick:this.handleClickDot.bind(this,e)}));return[React.createElement("div",{key:"left",className:"nav-layer nav-arrow nav-arrow-left icon-leftCaret",onClick:this.handleClickArrow.bind(this,DIR_PREV)}),React.createElement("div",{key:"right",className:"nav-layer nav-arrow nav-arrow-right icon-rightCaret",onClick:this.handleClickArrow.bind(this,DIR_NEXT)}),React.createElement("div",{key:"dots",className:"nav-layer nav-dots"},o)]},renderBillboardOriginals:function(){var e,t,o,i,n=this.state,l=this.props.model,a=n.billboardNum,r=n.numBillboards,s=!1,c=ImageExtension.getExtensionForTransparentImage(this.getContext());for(e=0;r>e;e++)if(o=l.bind(["billboardData",e,c]),i=o&&o.getValueSync(),i&&i.motionId){s=!0,t=l.bind([e]);break}return s||(o=l.bind(["billboardData",a,c]),i=o.getValueSync(),t=l.bind([a])),i&&i.isOriginal?{isMotion:s,component:React.createElement(BillboardOriginals,{model:o,videoModel:t,key:"bb-"+a,onSwitchPane:this.onSwitchPane})}:null}});module.exports=BillboardRow;


});


Requireify.register('js/akira/components/billboard/billboardRowResolver.jsx', function(require, requireAsync, module, exports) {


"use strict";function isNotDefined(r){return null===r||void 0===r}function resolveFastProperty(r,o,e){var t;return r&&(t=r.fastProps[o],isNotDefined(t)&&r.fastProps.data&&(t=r.fastProps.data[o])),isNotDefined(t)&&(t=ContextData.get("fastProps",o),isNotDefined(t)&&(t=e)),t}var BillboardRowOld=require("./billboardRow.jsx"),BillboardRowNew=require("./billboardRowOriginals.jsx"),ContextData=require("../../../utils/contextData"),FP_ORIGINALS_BILLBOARD_ENABLED="netflix.ui.akira.originals.billboard.enabled";module.exports.resolve=function(r){if(BillboardRowOld.stub===!0)return BillboardRowNew;if(BillboardRowNew.stub===!0)return BillboardRowOld;var o=resolveFastProperty(r,FP_ORIGINALS_BILLBOARD_ENABLED,!1);return o?BillboardRowNew:BillboardRowOld};


});


Requireify.register('js/akira/components/loaders/loadingRow.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),LoadingSpinner=require("./loadingSpinner.jsx"),LoadingTitle=require("./loadingTitle.jsx"),NUM_LOADING_BOXES=7,LoadingRow=React.createClass({displayName:"LoadingRow",render:function(){var e=React.addons.classSet,a={lolomoRow:!0,lolomoRow_title_card:!0,lolomoPreview:!0},t={rowTitle:!0,pulsate:this.props.pulsateHeader},l=[],o=.2,r=0;for(r=0;NUM_LOADING_BOXES>r;r++)l.push(React.createElement(LoadingTitle,{delay:o*r,pulsate:this.props.pulsateTitles,displayWhenNotPulsing:!0,key:"loading-row-"+r}));return React.createElement("div",{className:e(a)},React.createElement("div",{className:"rowHeader"},React.createElement("span",{className:e(t)}," ")),React.createElement("div",{className:"rowContent"},React.createElement("div",{className:"slider"},l)),this.props.showSpinner?React.createElement("div",{className:"lolomoSpinLoader"},React.createElement(LoadingSpinner,null)):null)}});module.exports=LoadingRow;


});


Requireify.register('js/reactMixins/browserResize.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),RESIZE_THROTTLE_MS=300;module.exports={componentDidMount:function(){this.throttledResize||(this.throttledResize=_.throttle(this.onResize,RESIZE_THROTTLE_MS)),window.addEventListener("resize",this.throttledResize,!1)},componentWillUnmount:function(){this.throttledResize&&window.removeEventListener("resize",this.throttledResize,!1)}};


});


Requireify.register('js/akira/components/lolomo/motionBoxArtController.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),Position=require("../../../common/position.js"),EventBus=require("../../../reactMixins/eventBus"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),FastProperty=require("../../../reactMixins/fastProperty"),BrowserScroll=require("../../../reactMixins/browserScroll"),BrowserResize=require("../../../reactMixins/browserResize"),MotionBoxArtTest=require("../../../reactMixins/ab/motionBoxArtTest"),MotionBoxArtController=React.createClass({displayName:"MotionBoxArtController",mixins:[IsomorphicContext,FastProperty,MotionBoxArtTest,BrowserScroll,BrowserResize],useRandomOrder:!1,numLoopsPerBox:0,gapBetweenBoxesMS:0,allBoxes:[],boxesToAnimate:[],videoPlayed:{},componentDidMount:function(){this.useRandomOrder=this.useRandomMotionOrder(),this.numLoopsPerBox=this.fastProperty("netflix.ui.akira.originals.motionBoxArt.numLoopsPerBox")||3,this.gapBetweenBoxesMS=this.fastProperty("netflix.ui.akira.originals.motionBoxArt.gapBetweenBoxesMS")||0,this.retryDelayMS=this.fastProperty("netflix.ui.akira.originals.motionBoxArt.retryDelayMS")||2e3,EventBus.on("motion-boxart:register",this.registerBox),EventBus.on("motion-boxart:deregister",this.deregisterBox),EventBus.on("motion-boxart:scan",this.scan)},componentWillUnmount:function(){EventBus.removeListener("motion-boxart:register",this.registerBox),EventBus.removeListener("motion-boxart:deregister",this.deregisterBox),EventBus.removeListener("motion-boxart:scan",this.scan)},onScrollEnd:function(){this.scan()},onResize:function(){this.scan()},registerBox:function(e){this.allBoxes.push(e)},deregisterBox:function(e){e&&this.animateNextBox()},scan:_.debounce(function(){this.animateBoxesInViewport()},200),animateBoxesInViewport:function(){var e=this;this.allBoxes=_.filter(this.allBoxes,function(e){return e.component.isMounted()});var t=_.filter(this.allBoxes,function(e){return e.inViewport=Position.isElementInViewport(e.element),e.inViewport}),o={};t=_.filter(t,function(e){var t=o[e.videoId];return o[e.videoId]=!0,!t}),_.forOwn(this.videoPlayed,function(t,i){o[i]||(e.videoPlayed[i]=!1)}),t=_.filter(t,function(t){return!e.videoPlayed[t.videoId]}),t=this.useRandomOrder?_.shuffle(t):t.sort(function(e,t){return e.sortIndex-t.sortIndex}),this.boxesToAnimate=t,this.isPlaying||this.animateNextBox()},animateNextBox:function(e){var t=this;if(!this.boxesToAnimate.length)return this.isPlaying=!1,void 0;var o=this.boxesToAnimate.shift(),i=o.getVideo(),r=e?2:4,n=i&&i.readyState>=r;if(EventBus.emit("motionBoxArt:enterViewport",{videoId:o.videoId,success:n}),this.isPlaying=!0,n){this.videoPlayed[o.videoId]=!0,i.classList.toggle("active",!0);var s=0,a=function(){s+=1,s<=t.numLoopsPerBox&&o.inViewport?(i.play(),EventBus.emit("motionBoxArt:playLoop",{videoId:o.videoId,loopNum:s})):(i.removeEventListener("ended",a),i.classList.toggle("active",!1),setTimeout(function(){t.animateNextBox()},t.gapBetweenBoxesMS))};i.addEventListener("ended",a),a()}else if(e||!i)this.animateNextBox();else{this.boxesToAnimate.push(o);var u=!1,x=function(){u=!0,i.removeEventListener("canplaythrough",x),t.animateNextBox(!0)};i.addEventListener("canplaythrough",x),setTimeout(function(){u||x()},this.retryDelayMS)}},render:function(){return null}});module.exports=MotionBoxArtController;


});


Requireify.register('js/akira/page/siteError.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),I18N=require("../../reactMixins/i18nWithDeps"),COMMON_BUNDLE="common/common",SiteError=React.createClass({displayName:"SiteError",mixins:[I18N,Router.State],render:function(){return React.createElement("div",null,React.createElement("div",{className:"seBox"},React.createElement("h1",{className:"seHeader"},this.getString(COMMON_BUNDLE,"nfse.header")),React.createElement("p",null,this.getString(COMMON_BUNDLE,"nfse.desc"),"  "),React.createElement("p",null,this.getString(COMMON_BUNDLE,"nfse.desc2")," "),React.createElement("div",{className:"seNflxButton"},React.createElement("a",{className:"seHomeLink",href:"/"},this.getString(COMMON_BUNDLE,"nfse.button.home")))))}});module.exports=SiteError;


});


Requireify.register('js/akira/components/lolomo/lolomo.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),LolomoRow=require("./lolomoRow.jsx"),BillboardRowResolver=require("../billboard/billboardRowResolver.jsx"),LoadingRow=require("../loaders/loadingRow.jsx"),cookieUtils=require("../../../utils/cookieUtils"),urls=require("../../../utils/urls"),pathEvaluatorUtils=require("../../../utils/pathEvaluatorUtils"),AkiraContext=require("../../../reactMixins/akiraContext"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),EventBus=require("../../../reactMixins/eventBus"),FastProperty=require("../../../reactMixins/fastProperty"),MotionBoxArtTest=require("../../../reactMixins/ab/motionBoxArtTest"),MotionBoxArtController=require("./motionBoxArtController.jsx"),SiteError=require("../../page/siteError.jsx"),MAX_ROWS=50,prefetchStrategies={allRows:{numRows:MAX_ROWS,numVideos:7,bobs:!1,jawBones:!1}},defaultStrategy=prefetchStrategies.allRows,getPaths=function(e,t){var o=["responseExpiration","statusCode"];t||(t=defaultStrategy);var r={from:t.rowMin||0,to:t.numRows};return LolomoRow.getPaths(e,t).map(function(e){return[r].concat(e)}).concat([[r,"context"]]).concat([["summary"]]).concat([["meta",o]]).concat([["requestId"]])},Lolomo=React.createClass({displayName:"Lolomo",mixins:[AutoFetch,IsomorphicContext,AkiraContext,FastProperty,MotionBoxArtTest],statics:{getPaths:getPaths,prefetchStrategies:prefetchStrategies,MAX_ROWS:MAX_ROWS},childContextTypes:{requestId:React.PropTypes.string},getChildContext:function(){return{requestId:this.getRequestId()}},getInitialState:function(){return{bouncing:!1}},allRowsPQLS:function(){return getPaths(this.getContext(),prefetchStrategies.allRows)},getRequestId:function(){return this.props.model.getValueSync(["requestId"])},seedLolomoImpression:function(){var e=this.getFeatureData("userInfo").lolomoCookieName;if(e){var t,o,r,i=cookieUtils.get(e),s=window&&window.pathEvaluator||!1,n=this.getFeatureData("geo").preferredLocale.country;i&&s&&(t=i.split(":"),o=t[0],r=t[1],n===o&&(s.setValueSync(["lolomo"],["lolomos",r]),s.setValueSync(["lolomos",r,"aLeafNode"],"anyValue")))}},prepareForAutoFetch:function(){if(!this.props.suppressBillboard){var e=this.props.model;e.getBoundValue()||this.seedLolomoImpression()}},lolomoIsValid:function(){var e=this.props.model,t=e.getBoundValue(),o=!!t&&"error"!==t.$type;return o&&this.hasFirstRow()},getNumRows:function(){var e,t=this.props.model,o=-1;if(!t.getBoundValue())return-1;if(this.props.newArrivals===!0)o=t.getValueSync(["length"]);else{if(e=t.getValueSync(["summary"]),!e)return-1;o=e.length}return o},allRowsFetched:function(){var e,t=this.props.model,o=this.getNumRows();if(0>o)return!1;for(e=0;o>e;e++)if(!t.bind([e]).getBoundValue())return!1;return!0},renderPlaceHolder:function(){return React.createElement(LoadingRow,{pulsateTitles:!0,pulsateHeader:!1,showSpinner:!1})},renderSiteError:function(){return React.createElement(SiteError,null)},setIsInteractive:function(){this.isLoading()||this.isInteractive||(EventBus.emit("app:interactive",this.props),this.isInteractive=!0)},bounceLolomo:function(){var e=this.getFeatureData("userInfo").lolomoCookieName;cookieUtils.clear(e),setTimeout(function(){document.location.href=urls.page.app},10)},componentDidMount:function(){var e=this;this.setIsInteractive(),this.once("auto-fetch-done",function(t){if("timeout"===t||!this.lolomoIsValid()){var o=this.getFeatureData("userInfo").lolomoCookieName;if(o){var r=cookieUtils.get(o);if(r)return e.setState({bouncing:!0}),e.bounceLolomo(),void 0}this.isMounted()&&this.forceUpdate()}})},componentDidUpdate:function(){this.setIsInteractive()},renderLolomo:function(){for(var e,t,o,r,i=React.addons.classSet,s=!0,n=!1,a=[],l=0,u=null,c=BillboardRowResolver.resolve(this.getContext());s;){if(s=this.hasNthRow(l)){if(e=this.props.model.bind([l]),t=e.getValueSync(["context"]),this.props.jawBoneRowNum===l?(u=this.props.jawBoneRankNum,o=!0):(u=null,o=!1),this.props.suppressBillboard&&"billboard"===t||"socialPopular"===t||"rateMovies"===t){l++;continue}"billboard"===t?(a.push(React.createElement(c,{model:e,rowNum:l,key:l})),n=!0):a.push(React.createElement(LolomoRow,{key:l,model:e,listContext:t,rowNum:l,showJawBone:o,jawBoneRankNum:u,columnsInRow:this.context.columnsInRow}))}l++}return r={lolomo:!0,"is-fullbleed":n,"has-open-jaw":this.props.jawBoneVideoId},React.createElement("div",{className:i(r),ref:"lolomo"},this.hasMotionBoxArt()?React.createElement(MotionBoxArtController,null):null,a,this.isLoading()||this.allRowsFetched()?null:this.renderPlaceHolder())},hasFirstRow:function(){return this.hasNthRow(0)},hasNthRow:function(e){var t=this.props.model.bind([e]),o=t.getBoundValue();return!!o&&!pathEvaluatorUtils.isValueError(o)},render:function(){return this.isAutoLoading()&&!this.hasFirstRow()?this.renderPlaceHolder():this.state.bouncing?null:this.lolomoIsValid()?this.renderLolomo():this.renderSiteError()}});module.exports=Lolomo;


});


Requireify.register('js/falkorClient/prefetchStrategy.js', function(require, requireAsync, module, exports) {


"use strict";var ContextData=require("../utils/contextData"),getFastProperty=function(t,e){return ContextData.getFeatureDataFromContext(e,"fastProps")[t]},getStrategy=function(t,e){if("string"==typeof t){var r=getFastProperty(t,e);return"string"==typeof r?JSON.parse(r):"object"==typeof r?r:null}return t},getFastPropertyValue=function(t){return null===t?null:JSON.stringify(t)},getFastProperties=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=getFastPropertyValue(t[e]));return r};module.exports={getStrategy:getStrategy,getFastProperties:getFastProperties};


});


Requireify.register('js/akira/page/home.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Lolomo=require("../components/lolomo/lolomo.jsx"),TitleCard=require("../components/title/titleCard.jsx"),BillboardRowResolver=require("../components/billboard/billboardRowResolver.jsx"),AB=require("../../reactMixins/abWithDeps"),FalkorFetch=require("../../reactMixins/falkor-fetch"),Prefetch=require("../../reactMixins/prefetchWithDeps"),Scheduler=require("../../reactMixins/scheduler"),FastProperty=require("../../reactMixins/fastProperty"),PrefetchStrategy=require("../../falkorClient/prefetchStrategy"),MAX_BILLBOARDS=5,prefetchStrategies={minimum:{numBillboards:0,numRows:0,numVideos:0,bobs:!1,jawBones:!1},small:{numBillboards:1,numRows:3,numVideos:7,bobs:!1,jawBones:!1},medium:{numBillboards:MAX_BILLBOARDS,numRows:3,numVideos:19,bobs:!0,jawBones:!1},firstClient:{numBillboards:0,rowMin:4,numRows:7,numVideos:7,bobs:!1,jawBones:!1},secondClient:{numBillboards:0,rowMin:8,numRows:11,numVideos:7,bobs:!1,jawBones:!1},thirdClient:{numBillboards:0,rowMin:12,numRows:16,numVideos:7,bobs:!1,jawBones:!1},fourthClient:{numBillboards:0,rowMin:17,numRows:24,numVideos:7,bobs:!1,jawBones:!1},fifthClient:{numBillboards:0,rowMin:25,numRows:Lolomo.MAX_ROWS,numVideos:7,bobs:!1,jawBones:!1},maximum:{numBillboards:5,numRows:Lolomo.MAX_ROWS,numVideos:100,bobs:!0,jawBones:!0}},defaultStrategy=prefetchStrategies.small,lastAdditionalFetchRowMin=prefetchStrategies.fifthClient.rowMin,FIRST_CHUNK_LOAD_INTERVAL_MS=50,CHUNK_LOAD_INTERVAL_MS=750,getPaths=function(e,t){t||(t=defaultStrategy);var o,s=t.numVideos,a=s,i=BillboardRowResolver.resolve(e);return o=[["summary"]].concat(Lolomo.getPaths(e,t)).concat(i.getPaths(e,t)).concat([["mylist","summary"]]).concat(TitleCard.getPaths(e,t).map(function(e){return["mylist",{to:a}].concat(e)}))},getInitialPaths=function(e){var t=PrefetchStrategy.getStrategy("netflix.ui.akira.prefetch.page",e);return getPaths(e,t)},HomeContent=React.createClass({displayName:"HomeContent",mixins:[AB,FalkorFetch,Prefetch,Scheduler,FastProperty],statics:{NUM_ROWS_TO_RENDER:15,NUM_TITLES_TO_RENDER:20,getPaths:getPaths,prefetchStrategies:prefetchStrategies,defaultStrategy:defaultStrategy,getInitialPaths:getInitialPaths},prefetchCallbacks:[],componentDidMount:function(){var e=this.refs.lolomo;e.isLoading()?e.once("dataFetch:complete",this.loadAdditionalLolomoData):this.loadAdditionalLolomoData()},componentWillUnmount:function(){for(var e=this.prefetchCallbacks.pop();e;)this.cancelQueuedItem(e),e=this.prefetchCallbacks.pop()},loadAdditionalLolomoData:function(){if(!this.getRootModel().bind([lastAdditionalFetchRowMin]).getBoundValue()){var e=this,t=this.props.suppressBillboard?"lolomonobillboard":"lolomo",o=this.props.model.pathEvaluator.bind([t]),s="netflix.ui.akira.prefetch.homeLoaded",a=[null,s,s+".2",s+".3",s+".4",s+".5",s+".6"],i=function(t){if(o&&o.getBoundValue()){var s=e.getStrategy(t),a=getPaths(e.getContext(),s);e.fetchData(o,a,t,null,s.forceUpdate)}},n=parseInt(this.fastProperty("netflix.ui.lolomo.firstChunkLoadIntervalMS"),10)||FIRST_CHUNK_LOAD_INTERVAL_MS,r=parseInt(this.fastProperty("netflix.ui.lolomo.chunkLoadIntervalMS"),10)||CHUNK_LOAD_INTERVAL_MS;this.prefetchCallbacks.push(this.queue(function(){i(a[1])},n)),this.prefetchCallbacks.push(this.queue(function(){i(a[2])},n+1*r)),this.prefetchCallbacks.push(this.queue(function(){i(a[3])},n+2*r)),this.prefetchCallbacks.push(this.queue(function(){i(a[4])},n+3*r)),this.prefetchCallbacks.push(this.queue(function(){i(a[5])},n+4*r)),this.prefetchCallbacks.push(this.queue(function(){i(a[6])},n+5*r))}},getRootModel:function(){var e=this.props.suppressBillboard?"lolomonobillboard":"lolomo";return this.props.model.pathEvaluator.bind([e])},render:function(){var e=this.getRootModel(),t=HomeContent.NUM_ROWS_TO_RENDER,o=getInitialPaths(this.getContext(),this.nodeRequest());return React.createElement(Lolomo,{ref:"lolomo",model:e,pqls:o,numRows:t,jawBoneRankNum:this.props.jawBoneRankNum,jawBoneRowNum:this.props.jawBoneRowNum,jawBoneVideoId:this.props.jawBoneVideoId,suppressBillboard:this.props.suppressBillboard})}});module.exports=HomeContent;


});


Requireify.register('js/utils/lolomo/lolomoUtils.js', function(require, requireAsync, module, exports) {


"use strict";var TWO_HOURS_IN_SECONDS=7200;module.exports={generateHpMapRequestId:function(e,t,n){return e+t.replace(/\//g,"-")+"-"+n},getLolomoCookieValue:function(e,t){return e&&2===e.length?t+":"+e[1]:null},getLolomoExpiry:function(e,t){var n,o,r=e.getValueSync(["meta","responseExpiration"]);return"number"==typeof r?(n=new Date(r),o=!1):(n=new Date((new Date).getTime()+1e3*parseInt(t||TWO_HOURS_IN_SECONDS,10)),o=!0),{expiry:n,isFallback:o}},isLolomoCookieValueValid:function(e){return e&&"string"==typeof e&&-1===e.indexOf("Fallback")}};


});


Requireify.register('js/utils/lolomo/lolomoActions.js', function(require, requireAsync, module, exports) {


"use strict";var cookieUtils=require("../cookieUtils"),HomeContent=require("../../akira/page/home.jsx"),EventBus=require("../../reactMixins/eventBus.js"),context=require("../contextData"),urls=require("../urls"),lolomoUtils=require("./lolomoUtils"),_=require("lodash");module.exports={refreshLolomo:function(o){this.evictLolomo(o),this.fetchLolomo(o)},evictLolomo:function(o){var e=context.getFeatureData("userInfo").lastLolomoImpressionKey;window.pathEvaluator.invalidate(["lolomo"],["lolomonobillboard"]).subscribe(),e&&cookieUtils.clear(e,context.getFeatureData("serverDefs").host||cookieUtils.TOP_DOMAIN,cookieUtils.ROOT_PATH),EventBus.emit("lolomo:refreshStart",{message:o})},fetchLolomo:function(o){var e=HomeContent.getInitialPaths(context.getContext()),t=window.pathEvaluator.bind(["lolomo"]);t.get.apply(t,e).subscribe(_.noop,function(){EventBus.emit("lolomo:refreshEnd",{success:!1,reason:"networkError",message:o})},function(){var e=context.getFeatureData("userInfo").lastLolomoImpressionTtl,s=lolomoUtils.generateHpMapRequestId(context.getFeatureData("userContext").lolomoCookiePrefix,urls.paths.app,context.getFeatureData("userInfo").guid),l=lolomoUtils.getLolomoCookieValue(window.pathEvaluator.getValueSync(["lolomo"]),context.getFeatureData("geo").preferredLocale.country);lolomoUtils.isLolomoCookieValueValid(l)?(cookieUtils.set(s,l,lolomoUtils.getLolomoExpiry(t,e).expiry,context.getFeatureData("serverDefs").host||cookieUtils.TOP_DOMAIN,cookieUtils.ROOT_PATH),EventBus.emit("lolomo:refreshEnd",{success:!0,message:o})):EventBus.emit("lolomo:refreshEnd",{success:!1,reason:"invalidCookie",message:o})})}};


});


Requireify.register('js/utils/dynamicMessages/reno.js', function(require, requireAsync, module, exports) {


"use strict";function _initRenoMessages(){var e=contextData.getFeatureData("fastProps");RenoMessages.config={messages:{NewLolomo:e["web.ui.reno.message.newlolomo.enabled"]}}}var contextData=require("../contextData"),CURRENT_TIME=Date.now(),Rx=require("nf-rx"),EventBus=require("../../reactMixins/eventBus"),LolomoActions=require("../lolomo/lolomoActions"),RenoMessages={config:{},resourceName:"reno",messages:{NEW_LOLOMO:"NewLolomo"},_lastTimestamp:new Rx.BehaviorSubject(CURRENT_TIME),onMessage:function(e,s){if(RenoMessages.config.messages[e.messageType]){var o=RenoMessages._lastTimestamp.value;e.creationTS>o&&RenoMessages._lastTimestamp.onNext(e.creationTS),EventBus.emit("reno:message",{message:e,type:s.getPollTypeName()}),RenoMessages._handleMessage(e)}},_handleMessage:function(e){RenoMessages.messages.NEW_LOLOMO===e.messageType&&LolomoActions.refreshLolomo(e)},getRequestData:function(){var e=RenoMessages._lastTimestamp.value;return e||(e=Date.now(),RenoMessages._lastTimestamp.onNext(e)),{lastTimestamp:e}}};"undefined"!=typeof window&&_initRenoMessages(),module.exports=RenoMessages;


});


Requireify.register('js/utils/dynamicMessages/identifier.js', function(require, requireAsync, module, exports) {


"use strict";var contextData=require("../contextData"),EventBus=require("../../reactMixins/eventBus"),IdentifierMessages={config:{},resourceName:"identifier",_isStale:!1,onMessage:function(e,t){var i=contextData.getFeatureData("serverDefs").BUILD_IDENTIFIER;e.identifier!==i&&(IdentifierMessages._isStale=!0,EventBus.emit("identifier:stale",{clientIdentifier:i,serverIdentifier:e.identifier})),t.getPollTypeName()===t.pollingTypes.PROFILESGATE.name&&window.document.hidden&&window.document.location.reload(!0)},isStale:function(){return IdentifierMessages._isStale},getRequestData:function(){return{identifier:contextData.getFeatureData("serverDefs").BUILD_IDENTIFIER}}};module.exports=IdentifierMessages;


});


Requireify.register('js/utils/dynamicMessages/dynamicMessages.js', function(require, requireAsync, module, exports) {


"use strict";function _initDynamicMessages(){var e=contextData.getFeatureData("fastProps"),s=[];RenoMessages.stub||s.push(RenoMessages),IdentifierMessages.stub||s.push(IdentifierMessages),DynamicMessages.config={enabled:e["web.ui.dynamic.messages.enabled"]},DynamicMessages.pollingTypes={PLAYBACK:{interval:parseInt(e["web.ui.dynamic.messages.polling.interval.playback"],10)||FIVE_MINUTES_IN_MS,resources:s,name:"playback"},PROFILESGATE:{interval:parseInt(e["web.ui.dynamic.messages.polling.interval.profilesgate"],10)||THIRTY_MINUTES_IN_MS,resources:s,name:"profilesgate"}}}var contextData=require("../contextData"),Rx=require("nf-rx"),XHR=require("../XHR"),_=require("lodash"),RenoMessages=require("./reno"),IdentifierMessages=require("./identifier"),FIVE_MINUTES_IN_MS=3e5,THIRTY_MINUTES_IN_MS=18e5,SUCCESS="success",DynamicMessages={config:{},pollingTypes:{},_isPolling:null,_dispose:new Rx.Subject,poll:function(e){if(!DynamicMessages.config.enabled)return Rx.Observable.empty();if(DynamicMessages._isPolling){if(DynamicMessages._isPolling===e)return DynamicMessages._messages;DynamicMessages.stop(),DynamicMessages._isPolling=e}else DynamicMessages._isPolling=e;switch(e){case DynamicMessages.pollingTypes.PLAYBACK:return DynamicMessages._startPolling(e.interval);case DynamicMessages.pollingTypes.PROFILESGATE:return DynamicMessages._startPolling(e.interval);default:return Rx.Observable.empty()}},_startPolling:function(e){return DynamicMessages._messages=Rx.Observable.interval(e).takeUntil(DynamicMessages._dispose).flatMap(function(){return Rx.Observable.create(function(e){return XHR.request({method:"get",data:{resources:DynamicMessages._getResourcesRequestData()},resource:"/dynamicMessages",service:"api",authorize:!0}).subscribe(function(s){null!==DynamicMessages._isPolling&&e.onNext(s)},_.noop,function(){e.onCompleted()}),_.noop})}).onErrorResumeNext(Rx.Observable.return(null)).filter(function(e){return e&&e.status&&e.status===SUCCESS}).doAction(function(e){_.forEach(DynamicMessages._isPolling.resources,function(s){var a=e[s.resourceName];a&&a.messages&&a.messages.length&&_.forEach(a.messages,function(e){s.onMessage(e,DynamicMessages)})})}),DynamicMessages._messages},_getResourcesRequestData:function(){var e={};return DynamicMessages._isPolling?(_.forEach(DynamicMessages._isPolling.resources,function(s){e[s.resourceName]=s.getRequestData()}),JSON.stringify(e)):JSON.stringify(e)},stop:function(){DynamicMessages._dispose&&(DynamicMessages._dispose.onNext(),DynamicMessages._dispose=new Rx.Subject),DynamicMessages._isPolling=null},getPollTypeName:function(){var e=DynamicMessages.pollingTypes;switch(DynamicMessages._isPolling){case e.PLAYBACK:return e.PLAYBACK.name;case e.PROFILESGATE:return e.PROFILESGATE.name;default:return""}}};"undefined"!=typeof window&&_initDynamicMessages(),module.exports=DynamicMessages;


});


Requireify.register('js/akira/components/profile/profilesGate.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ProfileChoices=require("./profileChoices.jsx"),ProfileLoad=require("./profileLoad.jsx"),ProfileLoadError=require("./profileLoadError.jsx"),ProfileCreate=require("./profileCreate.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),Transition=require("../../../reactMixins/transition"),EventBus=require("../../../reactMixins/eventBus"),FalkorFetch=require("../../../reactMixins/falkor-fetch"),DynamicMessages=require("../../../utils/dynamicMessages/dynamicMessages"),AVATAR_WIDTH=320,MAX_PROFILE_COUNT=5,BUNDLE="discovery/akira/Chrome",ProfilesGate=React.createClass({displayName:"ProfilesGate",mixins:[I18N,FalkorFetch,Transition],statics:{getPaths:function(){return[["profilesList","summary"],["profilesList",{to:MAX_PROFILE_COUNT},"summary"],["profilesList",{to:MAX_PROFILE_COUNT},"avatar","images","byWidth",AVATAR_WIDTH]]},__meta__:{strings:[{bundle:BUNDLE,ids:["whos.watching"]}]}},transitions:{show:{target:"profilesGate",before:{scale:1.1,opacity:0},scale:1,opacity:1,duration:450},hide:{target:"profilesGate",scale:1,opacity:0,duration:350}},getInitialState:function(){return{animateSwitchingProfilesComplete:!1,createNewProfile:!1}},onAddProfile:function(e){e.preventDefault(),this.setState({createNewProfile:!0})},onCancelAddProfile:function(){this.setState({createNewProfile:!1})},onSuccessAddProfile:function(){this.setState({createNewProfile:!1}),"function"==typeof this.props.onSuccessAddProfile&&this.props.onSuccessAddProfile()},onSwitchProfile:function(e){var i=this.refs.profilesGate.getDOMNode(),t=this;i.addEventListener("transitionend",function r(){i.removeEventListener("transitionend",r),t.state.animateSwitchingProfilesComplete=!0}),i.classList.add("hideChoices"),this.props.onSwitchProfile(e)},onRetryProfile:function(){this.onSwitchProfile(this.props.switchToNewProfile)},componentDidMount:function(){EventBus.emit("app:interactive"),DynamicMessages.stub||DynamicMessages.poll(DynamicMessages.pollingTypes.PROFILESGATE).subscribe()},componentDidUpdate:function(e){!this.props.reloadingProfileData&&e.reloadingProfileData&&this.runTransition("show")},componentWillUnmount:function(){DynamicMessages.stub||DynamicMessages.stop()},render:function(){var e=this.props.model.bind(["profilesList"]),i=e.getValueSync(["summary"]),t=this.state.animateSwitchingProfilesComplete||this.props.switchToNewProfile,r=React.addons.classSet({profilesGate:!0,hideChoices:t}),o=!this.state.createNewProfile&&!this.props.reloadingProfileData;return i&&i.length?React.createElement("div",{className:"profilesGateContainer"},React.createElement("div",{className:"modal"}),this.props.reloadingProfileData?null:React.createElement("div",{className:"profilesGateWrapper",ref:"profilesGateWrapper"},React.createElement("div",{className:r,ref:"profilesGate"},o?React.createElement("div",{className:"profileGateLabel"},this.getString(BUNDLE,"whos.watching")):null,o?React.createElement(ProfileChoices,{model:e,onSwitchProfile:this.onSwitchProfile,onAddProfile:this.onAddProfile,profileSelectorHidden:t}):null,this.props.switchToNewProfile?React.createElement(ProfileLoad,{newProfile:this.props.switchToNewProfile,errorLoadingProfile:this.props.errorLoadingProfile}):null,this.props.errorLoadingProfile?React.createElement(ProfileLoadError,{onRetryProfile:this.onRetryProfile}):null,this.state.createNewProfile?React.createElement(ProfileCreate,{onSuccessAddProfile:this.onSuccessAddProfile,onCancelAddProfile:this.onCancelAddProfile}):null))):null}});module.exports=ProfilesGate;


});


Requireify.register('js/akira/components/modals/modalOverlay.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition"),EventBus=require("../../../reactMixins/eventBus"),CLOSE_EVENT="app:closeModalOverlay",ModalOverlay=React.createClass({displayName:"ModalOverlay",mixins:[Transition],_onClickMargin:function(e){"modal-overlay-content"===e.target.className&&this.props.canDismiss&&(this.props.onDismiss&&this.props.onDismiss(),ModalOverlay.close())},transitions:{show:function(e,a){var t=this;this.animate({delay:500,opacity:1,duration:500,callback:function(){t.animate({target:"overlay-content",opacity:1,duration:500,callback:a})}})},fadeOut:750},render:function(){return React.createElement("div",{className:"modal-overlay"},React.createElement("div",{className:"modal-overlay-smoked-glass"}),React.createElement("div",{className:"modal-overlay-content",ref:"overlay-content",onClick:this._onClickMargin},this.props.children))}});ModalOverlay.close=function(){EventBus.emit(CLOSE_EVENT)},ModalOverlay.onClose=function(e){EventBus.once(CLOSE_EVENT,e)},module.exports=ModalOverlay;


});


Requireify.register('js/account/components/nfButton.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),NFButton=React.createClass({displayName:"NFButton",handleClick:function(t){this.props.handleClick&&this.props.handleClick(t)},getDefaultProps:function(){return{enabled:!0,additionalClasses:""}},componentDidUpdate:function(){var t=this.getDOMNode();this.props.enabled&&t.disabled?t.removeAttribute("disabled"):this.props.enabled||t.setAttribute("disabled",!0)},render:function(){var t="button "+this.props.additionalClasses+(this.props.enabled?"":" disabled");return React.createElement("button",{className:t,id:this.props.id,onClick:this.handleClick},this.props.text)}});module.exports=NFButton;


});


Requireify.register('js/akira/components/modals/satisfactionSurvey.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Transition=require("../../../reactMixins/transition"),i18n=require("../../../reactMixins/i18nWithDeps"),EventBus=require("../../../reactMixins/eventBus"),BasicStarBar=require("../title/basicStarBar.jsx"),ModalOverlay=require("./modalOverlay.jsx"),NFButton=require("../../../account/components/nfButton.jsx"),BUNDLE="discovery/akira/Messaging:messaging.satisfactionSurvey",SatisfactionSurvey=React.createClass({displayName:"SatisfactionSurvey",mixins:[i18n,Transition],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["help","thanks","submit","question.1.text","question.1.starbar.tooltip.1","question.1.starbar.tooltip.2","question.1.starbar.tooltip.3","question.1.starbar.tooltip.4","question.1.starbar.tooltip.5"]}]}},getInitialState:function(){return{rating:0}},componentDidMount:function(){EventBus.emit("satisfactionSurvey:open")},onStarBarRating:function(t){this.setState({rating:t})},onSubmit:function(){this.state.rating&&(EventBus.emit("satisfactionSurvey:close",{rating:this.state.rating}),this.animate({target:"page-question",opacity:0,duration:500}),this.animate({target:"page-thanks",before:{display:"block"},opacity:1,duration:750}),setTimeout(function(){ModalOverlay.close()},1500))},onDismiss:function(){EventBus.emit("satisfactionSurvey:close",{rating:0})},getStarbarLabels:function(t){for(var e=[],a=1;5>=a;a++)e.push(t.get("question.1.starbar.tooltip."+a));return e},render:function(){var t=this.getStrings(BUNDLE);return React.createElement(ModalOverlay,{canDismiss:!0,onDismiss:this.onDismiss},React.createElement("div",{className:"survey-content"},React.createElement("div",{className:"page-question",ref:"page-question"},React.createElement("div",{className:"survey-question"},t.get("question.1.text")),React.createElement("div",{className:"survey-hint",dangerouslySetInnerHTML:{__html:t.get("help")}}),React.createElement("div",{className:"survey-starbar"},React.createElement(BasicStarBar,{predictedRating:"0",userRating:this.state.rating,onRating:this.onStarBarRating,tooltip:this.getStarbarLabels(t)})),React.createElement(NFButton,{handleClick:this.onSubmit,additionalClasses:"action-button responsive",enabled:this.state.rating>0,text:t.get("submit")})),React.createElement("div",{className:"page-thanks",ref:"page-thanks"},t.get("thanks"))))}});SatisfactionSurvey.onClose=function(t){return ModalOverlay.onClose(t)},module.exports=SatisfactionSurvey;


});


Requireify.register('js/reactMixins/profiles/profileOperations.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),XHR=require("../../utils/XHR"),URLs=require("../../utils/urls"),Header=require("../../akira/components/header/appHeader.jsx"),ProfilesGate=require("../../akira/components/profile/profilesGate.jsx"),ContextData=require("../../utils/contextData"),EventBus=require("../eventBus"),SWITCH_TIMEOUT=5e3,ONE_MINUTE_IN_MS=6e4,ONE_MINUTE_IN_SECONDS=60,IDLE_TIMER_IN_MINUTES=ContextData.getData("profilesGate","idle_timer")||30,PROFILE_INACTIVITY_TIMEOUT_IN_MS=IDLE_TIMER_IN_MINUTES*ONE_MINUTE_IN_MS,PROFILE_INACTIVITY_TIMEOUT_IN_SECONDS=IDLE_TIMER_IN_MINUTES*ONE_MINUTE_IN_SECONDS,MYLIST_SORTSETTING_PATH=[["profilesList","current","usesManualMyListSort"]],VISITED_AKIRA_PATH=[["profilesList","current","hasVisitedAkira"]],EVENT_THROTTLE_MS=3e4,profileTimeout,profileIntervalPlayback;module.exports={addedPlaybackHooks:!1,clockSkew:null,setProfileGateCookie:function(){document.cookie="profilesNewSession=0; domain=.netflix.com; path=/;max-age="+PROFILE_INACTIVITY_TIMEOUT_IN_SECONDS+";"},resetProfileGateCookieExpiry:function(){if(!this.state.showingProfileGate){var e=this;clearInterval(profileIntervalPlayback),clearTimeout(profileTimeout),this.setProfileGateCookie(),profileTimeout=setTimeout(function(){e.isMounted()&&e.showProfilesGate()},PROFILE_INACTIVITY_TIMEOUT_IN_MS)}},addProfileGateSessionTracking:function(e){this.throttledResetProfileGateCookieExpiry||(this.throttledResetProfileGateCookieExpiry=_.throttle(this.resetProfileGateCookieExpiry,EVENT_THROTTLE_MS)),e&&(this.clockSkew=e,window.removeEventListener("change",this.throttledResetProfileGateCookieExpiry,!1),window.removeEventListener("mousemove",this.throttledResetProfileGateCookieExpiry,!1),window.addEventListener("change",this.throttledResetProfileGateCookieExpiry,!1),window.addEventListener("mousemove",this.throttledResetProfileGateCookieExpiry,!1))},removeProfileGateSessionTracking:function(){clearTimeout(profileTimeout),window.removeEventListener("change",this.throttledResetProfileGateCookieExpiry,!1),window.removeEventListener("mousemove",this.throttledResetProfileGateCookieExpiry,!1)},pauseProfileGateSessionTracking:function(){profileIntervalPlayback=setInterval(this.resetProfileGateCookieExpiry,ONE_MINUTE_IN_MS)},componentDidMount:function(){var e=this;this.addedPlaybackHooks||(this.addedPlaybackHooks=!0,EventBus.on("playback:start",function(){e.pauseProfileGateSessionTracking()}),EventBus.on("playback:end",function(){e.addProfileGateSessionTracking(e.clockSkew)}))},fetchPageChrome:function(e,t){var i=Header.getPaths(null,Header.fullHeaderStrategy).concat(MYLIST_SORTSETTING_PATH).concat(VISITED_AKIRA_PATH).concat(ProfilesGate.getPaths());this.fetchData(e,i,null,t)},resetData:function(e,t){this.resetFalkorCache(e),this.fetchPageChrome(e,t)},resetPINState:function(){try{var e="NFPlaybackSession",t=window.netflix&&window.netflix.clientNotifications&&window.netflix.clientNotifications.getCurrentSession("userSession")||{},i=t.sessionId,o=JSON.parse(localStorage.getItem(e));if(!o)return;var r=o[i]||{};r.data&&r.data.pin&&(delete r.data.pin,localStorage.setItem(e,JSON.stringify(o)))}catch(a){}},handleProfileSwitchSuccess:function(e,t,i,o){var r=i.getValueSync(["summary"]);return r.active?void 0:(this.resetPINState(),r.isFirstUse?(location.href=URLs.page.merchweb.onRamp,void 0):r.isKids?(location.href=URLs.page.merchweb.kidsHome,void 0):t&&t===r.guid?(o(),void 0):(document.location.reload(!0),!0))},attemptSwitchProfile:function(e,t,i,o){var r=t.getValueSync(["summary"]);return e&&e===r.guid?(i(),void 0):(XHR.request({resource:"/profiles/switch",method:"get",service:"api",protocol:"https",data:{switchProfileGuid:r.guid},timeout:SWITCH_TIMEOUT}).subscribe(i,function(e){401===e.status?window.location=URLs.page.signOut:o()}),void 0)}};


});


Requireify.register('js/reactMixins/columnsInRow.js', function(require, requireAsync, module, exports) {


"use strict";var Position=require("../common/position"),BrowserResize=require("./browserResize"),DEFAULT_NUM_COLUMNS=6,DESIGN_STOP_PHONE=500,DESIGN_STOP_SMALL=800,DESIGN_STOP_MEDIUM=1100,DESIGN_STOP_LARGE=1400;module.exports={mixins:[BrowserResize],getInitialState:function(){return{columnsInRow:DEFAULT_NUM_COLUMNS}},componentDidMount:function(){this.onResize()},onResize:function(){var S=Position.getWindowRect().width,e=null;DESIGN_STOP_PHONE>=S?e=2:S>DESIGN_STOP_PHONE&&DESIGN_STOP_SMALL>=S?e=3:S>DESIGN_STOP_SMALL&&DESIGN_STOP_MEDIUM>=S?e=4:S>DESIGN_STOP_MEDIUM&&DESIGN_STOP_LARGE>=S?e=5:S>DESIGN_STOP_LARGE&&(e=6),e&&this.state.columnsInRow!==e&&this.setState({columnsInRow:e})}};


});


Requireify.register('js/reactMixins/browserVisibility.js', function(require, requireAsync, module, exports) {


"use strict";function onWindowVisibilityChange(){EventBus.emit("window-visibility:changed",!document[PROPERTY_NAME])}var EventBus=require("./eventBus"),PROPERTY_NAME="hidden",EVENT_NAME="visibilitychange",browserVisibilityMixin={componentDidMount:function(){document.addEventListener(EVENT_NAME,onWindowVisibilityChange)},componentWillUnmount:function(){document.removeEventListener(EVENT_NAME,onWindowVisibilityChange)}};module.exports=browserVisibilityMixin;


});


Requireify.register('js/common/iframeCommunicator.js', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),ctx=require("../utils/contextData"),IN_NODE="undefined"==typeof window,IFRAME_STYLE={height:"1px",width:"1px",position:"absolute",top:"-9px",left:"-9px"},FAST_PROPS={LIFETIME_MAX:"ui.iframeCommunicator.maxLifetimeMs",IS_ACTIVE:"ui.iframeCommunicator.isActive"},ACTIVE=!IN_NODE&&ctx.get("fastProps",FAST_PROPS.IS_ACTIVE)||!1,IFRAME_MAX_LIFETIME_MS=ctx.get("fastProps",FAST_PROPS.LIFETIME_MAX)||3e4,FRAME_NAME_PREFIX="if-communicator-",protoIframe,iframeCommunicator={_initialized:!1,_currentChannels:{},_buildUrl:function(e,t){var i=encodeURIComponent(JSON.stringify(t));return e+(-1===e.search("\\?")?"?":"&")+"data="+i},_init:function(){return this._initialized?!1:(protoIframe=document.createElement("iframe"),_.assign(protoIframe.style,IFRAME_STYLE),window.addEventListener("message",this._processMessage.bind(this)),this._initialized=!0,!0)},_processMessage:function(e){e&&e.data&&e.data.sender&&this._removeIframe(e.data.sender)},_removeIframe:function(e){var t=this._currentChannels[e];t&&(window.clearTimeout(t.timeout),t.ref.parentNode.removeChild(t.ref),delete this._currentChannels[e])},_saveIframe:function(e,t){var i=this,r=window.setTimeout(function(){i._removeIframe(e)},IFRAME_MAX_LIFETIME_MS);this._currentChannels[e]={timeout:r,ref:t}},send:function(e,t){if(!IN_NODE&&ACTIVE&&e){this._init();var i=protoIframe.cloneNode(!1),r=FRAME_NAME_PREFIX+String(Math.random()).slice(2,15);if(i.src=this._buildUrl(e,t),i.src)return i.name=r,document.body.appendChild(i),this._saveIframe(r,i),r}}};module.exports=iframeCommunicator;


});


Requireify.register("cookie-dough",function(e,n,o,r){!function(e){if("object"==typeof r&&"undefined"!=typeof o)o.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.cookieDough=e()}}(function(){return function n(o,r,t){function i(f,c){if(!r[f]){if(!o[f]){var a="function"==typeof e&&e;if(!c&&a)return a(f,!0);if(u)return u(f,!0);var s=new Error("Cannot find module '"+f+"'");throw s.code="MODULE_NOT_FOUND",s}var d=r[f]={exports:{}};o[f][0].call(d.exports,function(e){var n=o[f][1][e];return i(n?n:e)},d,d.exports,n,o,r,t)}return r[f].exports}for(var u="function"==typeof e&&e,f=0;f<t.length;f++)i(t[f]);return i}({1:[function(e,n,o){function r(e,n){var o={},r=n||{},t=e.split(/; */),f=r.decode||u;return t.forEach(function(e){var n=e.indexOf("=");if(!(0>n)){var r=e.substr(0,n).trim(),t=e.substr(++n,e.length).trim();'"'==t[0]&&(t=t.slice(1,-1)),void 0==o[r]&&(o[r]=i(t,f))}}),o}function t(e,n,o){var r=o||{},t=r.encode||f,i=[e+"="+t(n)];if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");i.push("Max-Age="+u)}return r.domain&&i.push("Domain="+r.domain),r.path&&i.push("Path="+r.path),r.expires&&i.push("Expires="+r.expires.toUTCString()),r.httpOnly&&i.push("HttpOnly"),r.secure&&i.push("Secure"),i.join("; ")}function i(e,n){try{return n(e)}catch(o){return e}}o.parse=r,o.serialize=t;var u=decodeURIComponent,f=encodeURIComponent},{}],"cookie-dough":[function(e,n){var o=e("cookie");n.exports=function(){return{set:function(e,n,r){return document.cookie=o.serialize(e,n,r)},get:function(e){return o.parse(document.cookie)[e]},remove:function(e){return!!(document.cookie=o.serialize(e,"",{expires:new Date(0)}))},all:function(){return o.parse(document.cookie)}}}},{cookie:1}]},{},[])("cookie-dough")})});

Requireify.register('js/reactMixins/isomorphicCookies.js', function(require, requireAsync, module, exports) {


"use strict";var CookieDough=require("cookie-dough");module.exports={ROOT_PATH:"/",TOP_DOMAIN:".netflix.com",cookies:function(){return this.inNode()?new CookieDough(this.nodeRequest()):new CookieDough}};


});


Requireify.register('js/akira/layouts/akiraLayout.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),_=require("lodash"),Uma=require("../../components/uma.jsx"),Header=require("../components/header/appHeader.jsx"),Footer=require("../components/footer/appFooter.jsx"),ProfilesGate=require("../components/profile/profilesGate.jsx"),SatisfactionSurvey=require("../components/modals/satisfactionSurvey.jsx"),I18N=require("../../reactMixins/i18nWithDeps"),FalkorFetch=require("../../reactMixins/falkor-fetch"),BrowserScroll=require("../../reactMixins/browserScroll"),ProfileOperations=require("../../reactMixins/profiles/profileOperations"),EventBus=require("../../reactMixins/eventBus"),TesterParams=require("../../reactMixins/testerParams.jsx"),FastProperty=require("../../reactMixins/fastProperty"),ColumnsInRow=require("../../reactMixins/columnsInRow"),BrowserVisibility=require("../../reactMixins/browserVisibility"),TimeoutTransitionGroup=require("../components/timeoutTransitionGroup.jsx"),iframeCommunicator=require("../../common/iframeCommunicator"),ModalManager=require("../components/modals/modalManager.jsx"),WelcomeModal=require("../components/modals/welcome.jsx"),Cookies=require("../../reactMixins/isomorphicCookies"),IdentifierMessages=require("../../utils/dynamicMessages/identifier"),ON_SCROLL_STOP_HOVERS_THRESHOLD_PX=50,PAGE_TRANSITION_ENTER_SLA_MS=200,PAGE_TRANSITION_ENTER_DELAY_MS=250,PAGE_TRANSITION_LEAVE_SLA_MS=200,ENABLE_POINTER_EVENTS_DELAY=100,persistentShowingProfileGate=null,activeProfileGuid=null,firstAkiraVisit={},RouteHandler=Router.RouteHandler,documentWheelHandler=function(e){Math.abs(e.deltaX)>=Math.abs(e.deltaY)&&e.preventDefault()},BodyContent=React.createClass({displayName:"BodyContent",mixins:[I18N,FalkorFetch,BrowserScroll,ProfileOperations,Router.State,Router.Navigation,TesterParams,FastProperty,ColumnsInRow,Cookies,BrowserVisibility],childContextTypes:{node:React.PropTypes.object,jsongDocument:React.PropTypes.object,columnsInRow:React.PropTypes.number,currentPage:React.PropTypes.string},getChildContext:function(){return{node:this.props.model.node,jsongDocument:this.props.model.pathEvaluator,columnsInRow:this.state.columnsInRow,currentPage:this.props.uiView}},getInitialState:function(){var e=this.getFeatureData("umaData")||null,t=this.getFeatureData("showGate");return"undefined"!=typeof window&&(null===persistentShowingProfileGate?persistentShowingProfileGate=t:t=persistentShowingProfileGate),{showingProfileGate:t,errorLoadingProfile:!1,switchToNewProfile:null,umaModel:e&&e.uma,showUma:!this.getFeatureData("showGate")&&!(null===e||null===e.uma),reloadingProfileData:!1,serverTime:this.getFeatureData("serverTime"),modalOverlay:null,clockSkew:void 0}},getDefaultProps:function(){return{term:""}},onScroll:function(){var e=document.body.style;Math.abs(this.getScrollDistance())>ON_SCROLL_STOP_HOVERS_THRESHOLD_PX&&"none"!==e.pointerEvents&&(e.pointerEvents="none")},onScrollEnd:function(){setTimeout(function(){document.body.style.pointerEvents=""},ENABLE_POINTER_EVENTS_DELAY)},prefetchPageData:function(){var e=this;if(this.shouldShowProfilesGate()){var t=this.getFeatureData("postGateData");t&&t.length>0&&(e.state.prefetchPageDone=!1,this.fetchData(this.props.model.pathEvaluator,t,"prefetch-page",function(){e.state.prefetchPageDone=!0}))}},logPageChange:function(e){var t=this.getPageProps();t.uiView=e.uiView,EventBus.emit("app:pageChange",t)},componentWillMount:function(){this.logPageChange(this.props)},componentDidMount:function(){var e=this.state.serverTime-Date.now(),t=document&&document.body;this.updateAkiraVisitedState(),this.addProfileGateSessionTracking(e),this.state.clockSkew=e,this.prefetchPageData(),this.checkForSurveyOverlay(),this.sendAdTech(),!this.shouldShowProfilesGate()&&firstAkiraVisit[activeProfileGuid]&&this.launchWelcomeModal(),t&&t.addEventListener("wheel",documentWheelHandler)},componentWillUnmount:function(){var e=document&&document.body;e&&e.removeEventListener("wheel",documentWheelHandler)},sendAdTech:function(){if(this.fastProperty("ui.iframeCommunicator.isActive")){var e=this.getFeatureData("geo"),t=_.get(window,"netflix.clientNotifications.getCurrentSession",function(){return{}})("userSession"),i=this.getQuery(),a=this.cookies(),o={referrer:"homeScreen",is_member:"current",session:t.sessionId,country:_.get(e,"preferredLocale.country","")},r={mqso:a.get("mqso"),nan_pid:i.nan_pid,utm_campaign:i.utm_campaign,movie_id:this.isActive("title")&&this.getParams().id};_.assign(o,_.omit(r,_.isUndefined));var s=this.fastProperty("ui.iframeCommunicator.locations.adTech");iframeCommunicator.send(s,o)}},launchWelcomeModal:function(){WelcomeModal&&!WelcomeModal.stub&&(ModalManager.open(WelcomeModal,{name:"welcomeModal",additionalClasses:["welcome-modal"]}),firstAkiraVisit[activeProfileGuid]=!1)},showOverlay:function(e){this.setState({modalOverlay:e})},closeOverlay:function(){this.setState({modalOverlay:null})},checkForSurveyOverlay:function(){var e=this,t=this.props.model.pathEvaluator,i=["messaging","satisfactionSurvey"],a=this.getTesterParamFlag("forceSurvey");(!this.fastProperty("netflix.ui.akira.satisfactionSurvey.disable")||a)&&this.fetchData(t,i.concat("messages"),"satisfactionSurvey",function(){var o=t.getValueSync(i.concat("messages"));(o&&o.messageId||a)&&(t.get(i.concat("markAsRead")).subscribe(function(){}),e.showOverlay("satisfactionSurvey"),SatisfactionSurvey.onClose(function(){e.closeOverlay()}))})},componentWillUpdate:function(e){this.logPageChange(e)},componentDidUpdate:function(){persistentShowingProfileGate=this.state.showingProfileGate,this.props.showingGateValueChange(persistentShowingProfileGate),this.state.clockSkew&&this.resetProfileGateCookieExpiry()},handleProfileSwitchFailure:function(){this.setState({errorLoadingProfile:!0})},showProfilesGate:function(){this.setState({showUma:!1,showingProfileGate:!0,switchToNewProfile:null,reloadingProfileData:!1})},hideProfileGate:function(){var e=(new Date).getTime(),t=null!==this.state.umaModel,i=this;return this.logPageChange(this.props),this.setState({showingProfileGate:!1,showUma:t}),this.replaceWith(this.getPathname(),this.getParams(),_.omit(this.getQuery(),["jbv","jbp","jbr"])),firstAkiraVisit[activeProfileGuid]&&this.launchWelcomeModal(),this.state.prefetchPageDone?(this.emit("app:interactive",0,e),void 0):(this.on("dataFetch:complete",function a(t){if("prefetch-page"===t){var o=(new Date).getTime(),r=o-e;i.removeListener(a),i.emit("app:interactive",r,o)}}),void 0)},onHideUMA:function(){this.setState({showUma:!1})},onRestoreUMA:function(){this.state.umaModel&&this.setState({showUma:!0})},updateAkiraVisitedState:function(){var e=this.props.model.pathEvaluator.bind(["profilesList","current"]);e.getBoundValue()&&(activeProfileGuid=e.getValueSync(["summary"]).guid,firstAkiraVisit[activeProfileGuid]=void 0!==firstAkiraVisit[activeProfileGuid]?firstAkiraVisit[activeProfileGuid]:!e.getValueSync(["hasVisitedAkira"]))},switchProfileSuccess:function(){this.updateAkiraVisitedState(),this.hideProfileGate()},onSwitchProfile:function(e){var t,i=this,a=this.props.model.pathEvaluator.bind(["profilesList","current"]),o=e.getValueSync(["summary"])||null;o&&!o.isActive?(EventBus.emit("profile:switch",this.props),this.setState({showUma:!1,showingProfileGate:!0,switchToNewProfile:e,errorLoadingProfile:!1}),a.getBoundValue()&&(t=a.getValueSync(["summary"])?a.getValueSync(["summary"]).guid:null),this.attemptSwitchProfile(t,e,function(){i.handleProfileSwitchSuccess(window.pathEvaluator,t,e,i.switchProfileSuccess)},function(){i.handleProfileSwitchFailure(e)})):!IdentifierMessages.stub&&IdentifierMessages.isStale()?window.document.location.reload(!0):this.hideProfileGate()},onSuccessAddProfile:function(){this.setState({showingProfileGate:!1,reloadingProfileData:!0}),this.resetFalkorCache(window.pathEvaluator),this.fetchPageChrome(window.pathEvaluator,this.showProfilesGate)},shouldShowProfilesGate:function(){var e=this.props.model.pathEvaluator.bind(["profilesList"]),t=e.getValueSync(["summary"]);return(this.state.showingProfileGate||this.state.reloadingProfileData)&&t&&t.length>0},getPageKey:function(){var e=this.getPathname();return-1!==this.props.uiView.indexOf("search")&&(e="search"),e},getPageProps:function(){var e=this.getQuery(),t="undefined"!=typeof e.jbr?parseInt(e.jbr,10):null,i="undefined"!=typeof e.jbp?parseInt(e.jbp,10):null;return{id:this.getParams().id,jawBoneRankNum:i,jawBoneRowNum:t,jawBoneVideoId:e.jbv}},afterPageTransitionLeave:function(){this.scrollTo(0,0)},renderInnerViewOrProfilesGate:function(e){var t=this.props.model,i=this.getPageProps();return e?React.createElement(ProfilesGate,{model:t.pathEvaluator,onSuccessAddProfile:this.onSuccessAddProfile,onSwitchProfile:this.onSwitchProfile,switchToNewProfile:this.state.switchToNewProfile,errorLoadingProfile:this.state.errorLoadingProfile,reloadingProfileData:this.state.reloadingProfileData}):["satisfactionSurvey"===this.state.modalOverlay?React.createElement(SatisfactionSurvey,null):null,React.createElement(TimeoutTransitionGroup,{key:"mainViewRTG",className:"mainView",component:"div",transitionName:"pageTransition",enterTimeout:PAGE_TRANSITION_ENTER_SLA_MS,leaveTimeout:PAGE_TRANSITION_LEAVE_SLA_MS,enterDelayMs:PAGE_TRANSITION_ENTER_DELAY_MS,afterTransitionLeave:this.afterPageTransitionLeave},React.createElement(RouteHandler,React.__spread({},this.props,{key:this.getPageKey(),jawBoneRankNum:i.jawBoneRankNum,jawBoneRowNum:i.jawBoneRowNum,jawBoneVideoId:i.jawBoneVideoId}))),React.createElement(Footer,{key:"footer"})]},render:function(){var e=this.props.model,t=this.getParams().term||"",i=t&&decodeURIComponent(t),a=this.shouldShowProfilesGate(),o=this.state.showUma?React.createElement("div",{className:"uma",id:"uma",key:"uma-area"},React.createElement(Uma,{key:"user-uma",model:this.state.umaModel,hideUma:this.onHideUMA})):null,r=!this.state.showUma,s=this.getFeatureData("geo"),n=_.get(s,"preferredLocale.language","en");return React.createElement("div",{className:"bd dark-background",lang:n,onClick:this.handleClick,onChange:this.handleChange,onMouseMove:this.handleMouseMove},o,React.createElement(Header,{model:e,pathEvaluator:e.pathEvaluator,term:i,showingProfilesGate:a,onSwitchProfile:this.onSwitchProfile,showProfilesGate:this.showProfilesGate,pinned:r,ref:"header"}),this.renderInnerViewOrProfilesGate(a),React.createElement("div",{className:"image-preloaders"},React.createElement("span",{className:"jawbone-images"})))}});module.exports=BodyContent;


});


Requireify.register('js/utils/consolidatedLogging/jawBone.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={openJawParams:null,isJawOpen:function(){return!!this.openJawParams},setOpenJawParams:function(a){this.openJawParams=a},getOpenJawParams:function(){return this.openJawParams},logJawOpen:function(a){var e=this;this.validateParamsAndSend({name:"logJawOpen",params:a,defaultParams:{view:"movieDetails",tab:"overview"},requiredParams:["trigger","videoId","rowNum","rankNum"],send:function(a){e.setOpenJawParams(a),e.logSessionStart("jawImpression",{category:"uiView",modalView:e.getCurrentModalView(),data:{view:a.view,trigger:a.trigger,jawTab:a.tab},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}})}})},logJawClose:function(a){var e=this;this.validateParamsAndSend({name:"logJawClose",params:a,defaultParams:this.getOpenJawParams(),requiredParams:["reason","videoId","rowNum","rankNum"],send:function(a){e.logSessionEnd("jawImpression",{category:"uiView",modalView:e.getCurrentModalView(),data:{view:a.view,trigger:a.trigger,reason:a.reason},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}}),e.setOpenJawParams(null)}})}};


});


Requireify.register('js/utils/consolidatedLogging/billboard.js', function(require, requireAsync, module, exports) {


"use strict";var billboardUtil={logMotionBillboardLoadingStarted:function(r){var e=this;e.validateParamsAndSend({name:"logMotionBillboardLoadingStarted",params:r,defaultParams:{trigger:"auto"},requiredParams:[],send:function(r){e.logSessionStart("startTrailerPlay",{category:"uiAction",modalView:e.getCurrentModalView(),data:{trigger:r.trigger,merchedVideoId:r.motionId||r.videoId},dataContext:{trackId:r.trackId,videoId:r.videoId,row:r.rowNum,rank:r.rankNum,requestId:r.requestId}})}})},logMotionBillboardLoadingEnded:function(r){var e=this;e.validateParamsAndSend({name:"logMotionBillboardLoadingEnded",params:r,defaultParams:{trigger:"auto",reason:"success"},requiredParams:[],send:function(r){e.logSessionEnd("startTrailerPlay",{category:"uiAction",modalView:e.getCurrentModalView(),data:{trigger:r.trigger,reason:r.reason,merchedVideoId:r.motionId||r.videoId},dataContext:{trackId:r.trackId,videoId:r.videoId,row:r.rowNum,rank:r.rankNum,requestId:r.requestId}})}})},logMotionBillboardLoadingError:function(r){var e=this;e.validateParamsAndSend({name:"logMotionBillboardLoadingError",params:r,defaultParams:{trigger:"auto",reason:"failure"},requiredParams:["errorType"],send:function(r){e.logSessionEnd("startTrailerPlay",{category:"uiAction",modalView:e.getCurrentModalView(),data:{trigger:r.trigger,reason:r.reason,merchedVideoId:r.motionId||r.videoId,error:{rootCause:r.errorType,uiAction:"handledSilently",deepError:{errorCode:"errorStartingMotionBillboardVideo",fatal:!1,debug:{message:r.errorType}}}},dataContext:{trackId:r.trackId,videoId:r.videoId,row:r.rowNum,rank:r.rankNum,requestId:r.requestId}})}})},logMotionBillboardPlayStarted:function(r){var e=this;e.validateParamsAndSend({name:"logMotionBillboardLoadingStarted",params:r,defaultParams:{trigger:"auto"},requiredParams:["startOffset"],send:function(r){e.logSessionStart("trailerPlay",{category:"uiAction",modalView:e.getCurrentModalView(),data:{trigger:r.trigger,merchedVideoId:r.motionId||r.videoId,startOffset:r.startOffset},dataContext:{trackId:r.trackId,videoId:r.videoId,row:r.rowNum,rank:r.rankNum,requestId:r.requestId}})}})},logMotionBillboardPlayEnded:function(r){var e=this;e.validateParamsAndSend({name:"logMotionBillboardLoadingEnded",params:r,defaultParams:{trigger:"auto",reason:"success"},requiredParams:["detailedCompletionReason"],send:function(r){e.logSessionEnd("trailerPlay",{category:"uiAction",modalView:e.getCurrentModalView(),data:{trigger:r.trigger,reason:r.reason,merchedVideoId:r.motionId||r.videoId,detailedCompletionReason:r.detailedCompletionReason},dataContext:{trackId:r.trackId,videoId:r.videoId,row:r.rowNum,rank:r.rankNum,requestId:r.requestId}})}})},logMotionBillboardPlayError:function(r){var e=this;e.validateParamsAndSend({name:"logMotionBillboardLoadingError",params:r,defaultParams:{trigger:"auto",reason:"failure"},requiredParams:["errorType"],send:function(r){e.logSessionEnd("trailerPlay",{category:"uiAction",modalView:e.getCurrentModalView(),data:{trigger:r.trigger,reason:r.reason,merchedVideoId:r.motionId||r.videoId,error:{rootCause:r.errorType,uiAction:"handledSilently",deepError:{errorCode:"errorStartingMotionBillboardVideo",fatal:!1,debug:{message:r.errorType}}}},dataContext:{trackId:r.trackId,videoId:r.videoId,row:r.rowNum,rank:r.rankNum,requestId:r.requestId}})}})}};module.exports=billboardUtil;


});


Requireify.register('js/utils/consolidatedLogging/bob.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={openBobParams:null,isBobOpen:function(){return!!this.openBobParams},setOpenBobParams:function(e){this.openBobParams=e},getOpenBobParams:function(){return this.openBobParams},logBobOpen:function(e){var a=this;this.validateParamsAndSend({name:"logBobOpen",params:e,defaultParams:{view:"bob"},requiredParams:["videoId","rowNum","rankNum"],send:function(e){a.setOpenBobParams(e),a.logSessionStart("impression",{category:"uiView",modalView:a.getCurrentModalView(),data:{view:e.view},dataContext:{trackId:e.trackId,videoId:e.videoId,row:e.rowNum,rank:e.rankNum,requestId:e.requestId}})}})},logBobClose:function(e){var a=this;this.validateParamsAndSend({name:"logBobClose",params:e,defaultParams:this.getOpenBobParams(),requiredParams:["videoId","rowNum","rankNum"],send:function(e){a.logSessionEnd("impression",{category:"uiView",modalView:a.getCurrentModalView(),data:{view:e.view},dataContext:{trackId:e.trackId,videoId:e.videoId,row:e.rowNum,rank:e.rankNum,requestId:e.requestId}}),a.setOpenBobParams(null)}})}};


});


Requireify.register('js/utils/consolidatedLogging/modal.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={previousModalView:null,currentModalView:null,currentModalViewHash:null,getCurrentModalView:function(){return this.currentModalView},setCurrentModalView:function(e){this.currentModalView=e},logModalViewChange:function(e){var a=this;this.validateParamsAndSend({name:"logModalViewChange",params:e,defaultParams:{sourceModalView:this.getCurrentModalView()},requiredParams:["modalView"],send:function(e){var i=e.modalView,o={category:"uiQOE",modalView:e.modalView,data:{sourceModalView:e.sourceModalView}};e.id&&(o.dataContext={collectionId:e.id},i+="|"+e.id),i!==a.currentModalViewHash&&(a.logEvent("uiModalViewChanged",o),a.currentModalViewHash=i)}}),this.setCurrentModalView(e.modalView)},logModelessViewStart:function(e){var a=this;this.validateParamsAndSend({name:"logModelessViewStart",params:e,defaultParams:{orientation:"portrait"},requiredParams:["modelessView"],send:function(e){var i={category:"uiQOE",modalView:a.getCurrentModalView(),data:{modelessView:e.modelessView,orientation:e.orientation}};a.logSessionStart("uiModelessView",i)}})},logModelessViewEnd:function(e){var a=this;this.validateParamsAndSend({name:"logModelessViewEnd",params:e,defaultParams:{endReason:"implicitClose",orientation:"portrait"},requiredParams:["modelessView"],send:function(e){var i={category:"uiQOE",modalView:a.getCurrentModalView(),data:{modelessView:e.modelessView,orientation:e.orientation,endReason:e.endReason}};a.logSessionEnd("uiModelessView",i)}})},logStartNavigation:function(e){var a=this,i=this.getCurrentModalView();this.validateParamsAndSend({name:"logStartNavigation",params:e,defaultParams:{sourceModalView:i},requiredParams:[],send:function(){a.previousModalView=i,a.logSessionStart("navigate",{category:"uiAction",modalView:i,data:{},dataContext:{}})}})},logEndNavigation:function(e){var a=this;this.validateParamsAndSend({name:"logEndNavigation",params:e,defaultParams:{sourceModalView:a.previousModalView},requiredParams:[],send:function(e){a.logSessionEnd("navigate",{category:"uiAction",modalView:a.getCurrentModalView(),data:{sourceModalView:e.sourceModalView},dataContext:{}})}})}};


});


Requireify.register('js/utils/consolidatedLogging/apm.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={logStartup:function(t){var a=this;this.validateParamsAndSend({name:"logStartup",params:t,defaultParams:{},requiredParams:["timeToInteractive","components"],send:function(t){var e={category:"uiQOE",modalView:a.getCurrentModalView(),duration:t.duration,data:{timeToInteractive:t.timeToInteractive,components:t.components,success:!0}};a.logSessionStart("uiBrowseStartup",e),a.logSessionEnd("uiBrowseStartup",e)}})},logDataRequest:function(t,a){var e=this;this.validateParamsAndSend({name:"uiDataRequest",params:t,defaultParams:{requestId:"unknown"},requiredParams:["url","requestId","reason"],send:function(t){var r={category:"uiQOE",modalView:e.getCurrentModalView(),duration:a,data:t};e.logSessionStart("uiDataRequest",r),e.logSessionEnd("uiDataRequest",r)}})}};


});


Requireify.register('js/utils/consolidatedLogging/reno.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={logRenoMessage:function(e){var a=this;a.validateParamsAndSend({name:"logRenoMessage",params:e,requiredParams:["type","message"],send:function(e){var n={category:"uiAction",modalView:a.getCurrentModalView(),data:e,dataContext:{}};a.logSessionStart("renoMessage",n),a.logSessionEnd("renoMessage",n)}})},logRenoRefreshStart:function(e){var a=this;a.validateParamsAndSend({name:"logRenoRefreshStart",params:e,requiredParams:["message"],send:function(e){a.logSessionStart("renoRefresh",{category:"uiAction",modalView:a.getCurrentModalView(),data:e,dataContext:{}})}})},logRenoRefreshEnd:function(e){var a=this;a.validateParamsAndSend({name:"logRenoRefreshEnd",params:e,requiredParams:["message","success"],send:function(e){a.logSessionEnd("renoRefresh",{category:"uiAction",modalView:a.getCurrentModalView(),data:e,dataContext:{}})}})}};


});


Requireify.register('js/utils/consolidatedLogging/identifierCheck.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={logIdentifierCheck:function(e){var i=this;i.validateParamsAndSend({name:"logIdentifierCheck",params:e,requiredParams:["clientIdentifier","serverIdentifier"],send:function(e){var t={category:"uiAction",modalView:i.getCurrentModalView(),data:e,dataContext:{}};i.logSessionStart("identifierCheck",t),i.logSessionEnd("identifierCheck",t)}})}};


});


Requireify.register('js/utils/consolidatedLogging/commonActions.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={logAddToPlaylistStart:function(a){var t=this;this.validateParamsAndSend({name:"logAddToPlaylistStart",params:a,defaultParams:{},requiredParams:["videoId","rowNum","rankNum","trackId"],send:function(a){t.logSessionStart("addToPlaylist",{category:"uiAction",modalView:t.getCurrentModalView(),data:{},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}})}})},logAddToPlaylistEnd:function(a){var t=this;this.validateParamsAndSend({name:"logAddToPlaylistEnd",params:a,defaultParams:{},requiredParams:["videoId","rowNum","rankNum","trackId"],send:function(a){t.logSessionEnd("addToPlaylist",{category:"uiAction",modalView:t.getCurrentModalView(),data:{reason:"success"},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}})}})},logRemoveFromPlaylistStart:function(a){var t=this;this.validateParamsAndSend({name:"logRemoveFromPlaylistStart",params:a,defaultParams:{},requiredParams:["videoId","rowNum","rankNum","trackId"],send:function(a){t.logSessionStart("removeFromPlaylist",{category:"uiAction",modalView:t.getCurrentModalView(),data:{},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}})}})},logRemoveFromPlaylistEnd:function(a){var t=this;this.validateParamsAndSend({name:"logRemoveFromPlaylistEnd",params:a,defaultParams:{},requiredParams:["videoId","rowNum","rankNum","trackId"],send:function(a){t.logSessionEnd("removeFromPlaylist",{category:"uiAction",modalView:t.getCurrentModalView(),data:{reason:"success"},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}})}})},logRequestPlaybackStart:function(a){var t=this;this.validateParamsAndSend({name:"logRequestPlaybackStart",params:a,defaultParams:{},requiredParams:["videoId","rowNum","rankNum","trackId"],send:function(a){t.logSessionStart("startPlay",{category:"uiAction",modalView:t.getCurrentModalView(),data:{},dataContext:{trackId:a.trackId,videoId:a.videoId,row:a.rowNum,rank:a.rankNum,requestId:a.requestId}})}})},logPlaybackStarted:function(a){var t=this;this.validateParamsAndSend({name:"logPlaybackStarted",params:a,defaultParams:{},requiredParams:[],send:function(a){t.logSessionEnd("startPlay",{category:"uiAction",modalView:t.getCurrentModalView(),data:{reason:a.reason},dataContext:{}})}})}};


});


Requireify.register('js/utils/consolidatedLogging/search.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={logSearchEdit:function(e){var a=this;this.validateParamsAndSend({name:"logSearchEdit",params:e,defaultParams:{view:"search"},requiredParams:["term"],send:function(e){a.logEvent("edit",{category:"uiView",modalView:a.getCurrentModalView(),data:{path:"searchQuery",value:e.term}})}})},logSearchFocus:function(e){var a=this;this.validateParamsAndSend({name:"logSearchFocus",params:e,defaultParams:{view:"search"},requiredParams:["term"],send:function(e){e.start?a.logSessionStart("focus",{category:"search",modalView:a.getCurrentModalView(),data:{path:[e.term]}}):a.logSessionEnd("focus",{category:"search",modalView:a.getCurrentModalView(),data:{path:[e.term]}})}})},logSearchImpression:function(e){var a=this;this.validateParamsAndSend({name:"logSearchImpression",params:e,defaultParams:{view:"search"},requiredParams:["referenceId","view"],send:function(e){a.logEvent("impression",{category:"search",modalView:a.getCurrentModalView(),data:{path:["search","lists",e.referenceId],view:e.view}})}})}};


});


Requireify.register('js/utils/consolidatedLogging/satisfactionSurvey.js', function(require, requireAsync, module, exports) {


"use strict";var LOGGING_RESULT_SUCCESS="success",LOGGING_RESULT_CANCELED="canceled",LOGGING_SURVEY_TYPE="satisfaction",LOGGING_QUESTION_NUM=1;module.exports={logSatisfactionSurveyOpen:function(a){var e=this;this.validateParamsAndSend({name:"logSatisfactionSurveyOpen",params:a,defaultParams:{},requiredParams:[],send:function(){e.logSessionStart("survey",{category:"uiAction",modalView:e.getCurrentModalView(),data:{},endOnUnload:{data:{reason:LOGGING_RESULT_CANCELED}}}),e.logSessionStart("surveyQuestion",{category:"uiAction",modalView:e.getCurrentModalView(),data:{},endOnUnload:{data:{reason:LOGGING_RESULT_CANCELED}}})}})},logSatisfactionSurveyClose:function(a){var e=this;this.validateParamsAndSend({name:"logSatisfactionSurveyClose",params:a,defaultParams:{},requiredParams:[],send:function(a){var t=a.rating?LOGGING_RESULT_SUCCESS:LOGGING_RESULT_CANCELED,n={reason:t};a.rating&&(n.question=LOGGING_QUESTION_NUM,n.response=a.rating),e.logSessionEnd("surveyQuestion",{category:"uiAction",modalView:e.getCurrentModalView(),data:n}),e.logSessionEnd("survey",{category:"uiAction",modalView:e.getCurrentModalView(),data:{surveyType:LOGGING_SURVEY_TYPE,reason:t}})}})}};


});


Requireify.register('js/utils/consolidatedLogging/motionBoxArt.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={logMotionBoxArtEnterViewport:function(a){var o=this;this.validateParamsAndSend({name:"logMotionBoxArtEnterViewport",params:a,defaultParams:{},requiredParams:[],send:function(a){o.logSessionStart("starTrailerPlay",{category:"uiAction",data:{}}),o.logSessionEnd("starTrailerPlay",{category:"uiAction",data:{reason:a.success?"success":"failure",merchedVideoId:a.videoId}})}})},logMotionBoxArtPlayLoop:function(a){var o=this;this.validateParamsAndSend({name:"logMotionBoxArtPlayLoop",params:a,defaultParams:{},requiredParams:[],send:function(a){o.logSessionStart("trailerPlay",{category:"uiAction",data:{}}),o.logSessionEnd("trailerPlay",{category:"uiAction",data:{startOffset:0,reason:"success",detailedCompletionReason:a.loopNum,merchedVideoId:a.videoId}})}})}};


});


Requireify.register('js/utils/consolidatedLogging/falkorHelpers.js', function(require, requireAsync, module, exports) {


"use strict";var falkorHelpers={logApiError:function(e){var r=this;this.validateParamsAndSend({name:"falkorModelError",params:e,defaultParams:{},requiredParams:["message","pql"],send:function(e){r.logEvent("apiError",{category:"uiAction",modalView:r.getCurrentModalView(),data:{pql:e.pql,message:e.message}})}})}};module.exports=falkorHelpers;


});


Requireify.register('js/utils/consolidatedLogging/index.js', function(require, requireAsync, module, exports) {


"use strict";var jawBoneConsLogHelper=require("./jawBone"),billboardHelper=require("./billboard"),bobConsLogHelper=require("./bob"),modalConsLogHelper=require("./modal"),apmConsLogHelper=require("./apm"),renoConsLogHelper=require("./reno"),identifierCheckConsLogHelper=require("./identifierCheck"),commonActionsConsLogHelper=require("./commonActions"),searchConsLogHelper=require("./search"),satisfactionSurveyConsLogHelper=require("./satisfactionSurvey"),motionBoxArt=require("./motionBoxArt"),EventBus=require("../../reactMixins/eventBus"),netflix=require("../../common/nfNamespace"),falkorHelpers=require("./falkorHelpers"),playPredictionConsLogHelper=require("./playPrediction"),globalDefaultParams={kids:!1},hasInitializedListeners=!1,currentPage=null,isNavigating=!1,VALID_CLOSE_JAW_REASONS=["bob","miniBob","jawNext","jawPrev","rowNext","rowPrev"];module.exports={logJawOpen:jawBoneConsLogHelper.logJawOpen,logJawClose:jawBoneConsLogHelper.logJawClose,getOpenJawParams:jawBoneConsLogHelper.getOpenJawParams,setOpenJawParams:jawBoneConsLogHelper.setOpenJawParams,isJawOpen:jawBoneConsLogHelper.isJawOpen,logBobOpen:bobConsLogHelper.logBobOpen,logBobClose:bobConsLogHelper.logBobClose,getOpenBobParams:bobConsLogHelper.getOpenBobParams,setOpenBobParams:bobConsLogHelper.setOpenBobParams,isBobOpen:bobConsLogHelper.isBobOpen,getCurrentModalView:modalConsLogHelper.getCurrentModalView,setCurrentModalView:modalConsLogHelper.setCurrentModalView,logModalViewChange:modalConsLogHelper.logModalViewChange,logModelessViewStart:modalConsLogHelper.logModelessViewStart,logModelessViewEnd:modalConsLogHelper.logModelessViewEnd,logStartup:apmConsLogHelper.logStartup,logDataRequest:apmConsLogHelper.logDataRequest,logAddToPlaylistStart:commonActionsConsLogHelper.logAddToPlaylistStart,logAddToPlaylistEnd:commonActionsConsLogHelper.logAddToPlaylistEnd,logRemoveFromPlaylistStart:commonActionsConsLogHelper.logRemoveFromPlaylistStart,logRemoveFromPlaylistEnd:commonActionsConsLogHelper.logRemoveFromPlaylistEnd,logRequestPlaybackStart:commonActionsConsLogHelper.logRequestPlaybackStart,logPlaybackStarted:commonActionsConsLogHelper.logPlaybackStarted,logSearchEdit:searchConsLogHelper.logSearchEdit,logSearchFocus:searchConsLogHelper.logSearchFocus,logSearchImpression:searchConsLogHelper.logSearchImpression,logStartNavigation:modalConsLogHelper.logStartNavigation,logEndNavigation:modalConsLogHelper.logEndNavigation,logSatisfactionSurveyOpen:satisfactionSurveyConsLogHelper.logSatisfactionSurveyOpen,logSatisfactionSurveyClose:satisfactionSurveyConsLogHelper.logSatisfactionSurveyClose,logMotionBillboardLoadingStarted:billboardHelper.logMotionBillboardLoadingStarted,logMotionBillboardLoadingEnded:billboardHelper.logMotionBillboardLoadingEnded,logMotionBillboardLoadingError:billboardHelper.logMotionBillboardLoadingError,logMotionBillboardPlayStarted:billboardHelper.logMotionBillboardPlayStarted,logMotionBillboardPlayEnded:billboardHelper.logMotionBillboardPlayEnded,logMotionBillboardPlayError:billboardHelper.logMotionBillboardPlayError,logMotionBoxArtEnterViewport:motionBoxArt.logMotionBoxArtEnterViewport,logMotionBoxArtPlayLoop:motionBoxArt.logMotionBoxArtPlayLoop,logRenoMessage:renoConsLogHelper.logRenoMessage,logRenoRefreshStart:renoConsLogHelper.logRenoRefreshStart,logRenoRefreshEnd:renoConsLogHelper.logRenoRefreshEnd,logIdentifierCheck:identifierCheckConsLogHelper.logIdentifierCheck,logFalkorApiError:falkorHelpers.logApiError,logPlayPredictionInputOutput:playPredictionConsLogHelper.logPlayPredictionInOut,attachListeners:function(){var o=this;hasInitializedListeners||(EventBus.on("dataRequest:send",function(e,n){o.logDataRequest(e,n)}),EventBus.on("jawbone:open",function(e){o.isJawOpen()&&-1!==VALID_CLOSE_JAW_REASONS.indexOf(e.trigger)&&o.logJawClose({reason:e.trigger}),o.logJawOpen(e)}),EventBus.on("jawbone:close",function(e){o.logJawClose(e)}),EventBus.on("bob:open",function(e){o.logBobOpen(e)}),EventBus.on("bob:close",function(e){o.logBobClose(e)}),EventBus.on("myList:add:start",function(e){o.logAddToPlaylistStart(e)}),EventBus.on("myList:add:end",function(e){o.logAddToPlaylistEnd(e)}),EventBus.on("myList:remove:start",function(e){o.logRemoveFromPlaylistStart(e)}),EventBus.on("myList:remove:end",function(e){o.logRemoveFromPlaylistEnd(e)}),EventBus.on("profile:switch",function(){o.flushBuffer()}),EventBus.on("playback:requestPlay",function(e){if(o.logRequestPlaybackStart(e),o.isJawOpen()){var n=o.getOpenJawParams();n&&e.rowNum===n.rowNum&&e.rankNum===n.rankNum?o.logJawClose({reason:"success"}):o.logJawClose({reason:"implicit"})}}),EventBus.on("playback:start",function(e){o.logPlaybackStarted(e)}),EventBus.on("app:interactive",function(e){o.logEndNavigation(e),isNavigating=!1}),EventBus.on("search:edit",function(e){o.logSearchEdit(e)}),EventBus.on("search:focus",function(e){o.logSearchFocus(e)}),EventBus.on("search:impression",function(e){o.logSearchImpression(e)}),EventBus.on("satisfactionSurvey:open",function(e){o.logSatisfactionSurveyOpen(e)}),EventBus.on("satisfactionSurvey:close",function(e){o.logSatisfactionSurveyClose(e)}),EventBus.on("motionBoxArt:enterViewport",function(e){o.logMotionBoxArtEnterViewport(e)}),EventBus.on("motionBoxArt:playLoop",function(e){o.logMotionBoxArtPlayLoop(e)}),billboardHelper.stub||(EventBus.on("motionBillboard:loadingStarted",function(e){o.logMotionBillboardLoadingStarted(e)}),EventBus.on("motionBillboard:loadingEnded",function(e){o.logMotionBillboardLoadingEnded(e)}),EventBus.on("motionBillboard:loadingError",function(e){o.logMotionBillboardLoadingError(e)}),EventBus.on("motionBillboard:playStarted",function(e){o.logMotionBillboardPlayStarted(e)}),EventBus.on("motionBillboard:playEnded",function(e){o.logMotionBillboardPlayEnded(e)}),EventBus.on("motionBillboard:playError",function(e){o.logMotionBillboardPlayError(e)})),EventBus.on("app:pageChange",function(e){var n=window.location.pathname||"generic";("profilesGate"!==o.getCurrentModalView()||"profileLoading"===e.uiView)&&((n!==currentPage||e.uiView!==o.getCurrentModalView())&&(isNavigating&&o.logEndNavigation(e),o.logStartNavigation(e),isNavigating=!0),o.isJawOpen()&&!e.jawBoneVideoId&&o.logJawClose({reason:"implicit"}),o.isBobOpen()&&o.logBobClose({reason:"implicit"}),o.logModalViewChange({modalView:e.uiView,id:"browseTitles"===e.uiView?e.id:null}),e.jawBoneVideoId&&(currentPage?n!==currentPage&&o.logJawOpen({trigger:"return",videoId:e.jawBoneVideoId,rowNum:e.jawBoneRowNum,rankNum:e.jawBoneRankNum}):o.logJawOpen({trigger:"url",videoId:e.jawBoneVideoId,rowNum:e.jawBoneRowNum,rankNum:e.jawBoneRankNum})),currentPage=n)}),renoConsLogHelper.stub||(EventBus.on("reno:message",function(e){o.logRenoMessage(e)}),EventBus.on("lolomo:refreshStart",function(e){o.logRenoRefreshStart(e)}),EventBus.on("lolomo:refreshEnd",function(e){o.logRenoRefreshEnd(e)})),identifierCheckConsLogHelper.stub||EventBus.on("identifier:stale",function(e){o.logIdentifierCheck(e)}),EventBus.once("falkorFetch:error",function(e){o.logFalkorApiError(e)}),EventBus.on("playprediction:result",function(e){o.logPlayPredictionInputOutput(e)}),hasInitializedListeners=!0)},flushBuffer:function(){netflix.clientNotifications.flushBuffer()},validateParamsAndSend:function(o){var e,n,t=o.defaultParams,i=o.requiredParams,a={};for(n in globalDefaultParams)globalDefaultParams.hasOwnProperty(n)&&(a[n]=globalDefaultParams[n]);for(n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);for(n in o.params)o.params.hasOwnProperty(n)&&"function"!=typeof o.params[n]&&(a[n]=o.params[n]);e=this.validateParams(a,i),0===e.length?"function"==typeof o.send?o.send(a):this._outputErrorMessage('Unable to log event due to missing "send" function'):this._outputErrorMessage("Unable to log event ("+o.name+") due to missing params: "+e.join(","))},getSpecification:function(o,e,n){return{constants:{sessionLength:30,ownerToken:n,locale:o||"en-US",uiMode:"member",version:{app:"shakti-"+e,ui:"akira"},pageName:this.getCurrentModalView(),logPageOnStart:!1,debugMode:!1},specification:{uiView:{impression:{send:"both"},jawImpression:{send:"both"},focus:{send:"both"},command:{send:"end"},uma:{send:"both"}},uiAction:{selectProfile:{send:"end"},rateTitle:{send:"end"},addToPlaylist:{send:"end"},removeFromPlaylist:{send:"end"},search:{send:"end"},navigate:{send:"both"},startPlay:{send:"both"},survey:{send:"end"},surveyQuestion:{send:"end"},startTrailerPlay:{send:"end"},trailerPlay:{send:"end"},renoMessage:{send:"both"},renoRefresh:{send:"both"},identifierCheck:{send:"end"},playPrediction:{send:"end"}},search:{focus:{send:"both"}},www:{debug:{send:"start"}},uiQOE:{appSession:{send:"both"},userSession:{send:"both"},uiBrowseStartup:{send:"end"},uiDataRequest:{send:"end",disabledChance:90},uiModalViewChanged:{eventProperties:{value:"modalView"},send:"start"},uiModelessView:{send:"both",overlapping:"true"}}}}},validateParams:function(o,e){return e.filter(function(e){return void 0===o[e]})},logEvent:function(o,e){netflix&&netflix.clientNotifications&&(this._outputEventDebugMessage("Event",o,e),netflix.clientNotifications.notify(o,e))},logSessionStart:function(o,e){netflix&&netflix.clientNotifications&&(this._outputEventDebugMessage("Start",o,e),netflix.clientNotifications.notifyStart(o,e))},logSessionEnd:function(o,e){netflix&&netflix.clientNotifications&&(this._outputEventDebugMessage("End",o,e),netflix.clientNotifications.notifyEnd(o,e))},logDebugEvent:function(o){var e=this;this.validateParamsAndSend({name:"logDebugEvent",params:o,defaultParams:{},requiredParams:[],send:function(o){e.logEvent("debug",{category:"www",modalView:e.getCurrentModalView(),data:o})}})},_outputEventDebugMessage:function(o,e,n){n.modalView?"'"+n.modalView+"'":"N/A",n.data||{},n.dataContext||{};netflix&&netflix.notification&&netflix.notification.constants&&netflix.notification.constants.debugMode},_outputErrorMessage:function(){netflix&&netflix.notification&&netflix.notification.constants&&netflix.notification.constants.debugMode}};


});


Requireify.register('js/akira/baseRouteHandler.jsx', function(require, requireAsync, module, exports) {


"use strict";function initConsolidatedLogging(e){ConsolidatedLogging.setCurrentModalView(e),ConsolidatedLogging.attachListeners()}var React=require("react"),Router=require("react-router"),PaymentHold=require("./components/messaging/paymentHold.js"),ConsolidatedLogging=require("../utils/consolidatedLogging/index"),EventBus=require("../reactMixins/eventBus"),HistoryBack=require("../reactMixins/historyBack"),IsomorphicContext=require("../reactMixins/isomorphicContextWithDeps"),ONE_PREVIOUS_PAGE=1,UI_VIEWS={home:"homeScreen",title:"homeScreen",addToMyList:"homeScreen",genre:"browseTitles",similars:"WiSimilarsByViewType",genreNewRelease:"NewReleases",hd:"browseTitles",person:"rolesDisplay",myList:"MyListAsGallery",watchAgain:"WiAgain",recentlyAdded:"WiRecentAdditions",newRelease:"NewReleases",newReleases:"NewReleases",newArrivals:"NewReleases",subtitle:"browseTitles",subtitles:"browseTitles",search:"searchResults",searchPerson:"searchResults",searchSuggestion:"searchResults",searchDVD:"searchResults",playback:"playback",watchNow:"playback",audioDescription:"browseTitles"},BaseRouteHandler=React.createClass({displayName:"BaseRouteHandler",mixins:[Router.Navigation,Router.State,HistoryBack,IsomorphicContext],getInitialState:function(){return{initializedCL:!1,showingProfileGate:this.getFeatureData("showGate")||!1}},getCurrentUIView:function(){var e=this.getRoutes(),t=e&&e.length>0&&e[e.length-1],i=t&&t.name,a=i&&UI_VIEWS[i];return a},isPlaybackView:function(){return"playback"===this.getCurrentUIView()},componentWillMount:function(){var e;"client"!==this.props.renderSource||this.state.initializedCL||(e=this.getCurrentUIView(),e&&(this.state.initializedCL=!0,initConsolidatedLogging(e)))},showingGateValueChange:function(e){var t=this.state.showingProfileGate;this.state.showingProfileGate=e,t&&!e&&this.drawPaymentHold()},paymentHoldModalClose:function(){this.isPlaybackView()&&this.goBackHistory(ONE_PREVIOUS_PAGE)},drawPaymentHold:function(){PaymentHold.potentiallyOpen({umaData:this.getFeatureData("umaData")||null,showingProfileGate:this.state.showingProfileGate},this.isPlaybackView())},componentDidMount:function(){EventBus.on("modal:close:paymentHoldModal",this.paymentHoldModalClose),this.drawPaymentHold()},componentDidUpdate:function(){EventBus.removeListener("modal:close:paymentHoldModal",this.paymentHoldModalClose),this.drawPaymentHold()},render:function(){return PaymentHold.preventPlay(this.getFeatureData("umaData"))&&this.isPlaybackView()?null:React.createElement(Router.RouteHandler,React.__spread({},this.props,{uiView:this.getCurrentUIView(),showingGateValueChange:this.showingGateValueChange}))}});module.exports=BaseRouteHandler;


});


Requireify.register('js/reactMixins/sortable.js', function(require, requireAsync, module, exports) {


"use strict";var Sortable={DEFAULT_SORT_ORDER:"su",ORDER_BY_SUGGESTIONS:"su",ORDER_BY_YEAR:"yr",ORDER_BY_A_Z:"az",ORDER_BY_Z_A:"za",ORDER_BY_MATURITY:"mr",ORDER_BY_HIGHEST_RATED:"rt",bindSortedModel:function(){return this.props.sortOrder?this.props.model.bind([this.props.sortOrder]):this.props.model},getSortOrder:function(r,o){var t=o||Sortable.DEFAULT_SORT_ORDER,R="undefined"!=typeof r.so?r.so:t;return R}};module.exports=Sortable;


});


Requireify.register('js/akira/components/loaders/loadingGallery.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),LoadingTitle=require("./loadingTitle.jsx"),AkiraContext=require("../../../reactMixins/akiraContext"),AkiraTest=require("../../../reactMixins/ab/akira"),NUM_LOADING_BOXES=24,LoadingGallery=React.createClass({displayName:"LoadingGallery",mixins:[AkiraTest,AkiraContext],render:function(){var e,a=React.addons.classSet,t=[],r=[],i={rowContainer:!0,largeGutter:this.hasLargeBOB()},n="",o=0,s=this.context.columnsInRow||6,l={6:[0,1,2,4,2,4,3],5:[0,1,6,1,6,1,1],4:[0,1,4,1,6,0,1],3:[0,1,4,1,6,0,1],2:[0,1,4,1,6,0,1]},c=0,d=0;for(e=0;NUM_LOADING_BOXES>e;e++)d++===l[s][c]&&(n=2*Math.random()+e%6,c++,d=0,c>5&&(c=1)),t.push(React.createElement(LoadingTitle,{delay:n,pulsate:!d,displayWhenNotPulsing:!1,key:"loading-box-"+e})),e%this.context.columnsInRow===this.context.columnsInRow-1&&(r.push(React.createElement("div",{className:a(i),key:"loadingRow-"+o},t)),t=[],o++);return React.createElement("div",{key:"loading-boxes",className:"galleryLoader"},r)}});module.exports=LoadingGallery;


});


Requireify.register('js/akira/layouts/gallery.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),_=require("lodash"),Scheduler=require("../../reactMixins/scheduler"),AutoFetch=require("../../reactMixins/falkor-auto-fetch"),Sortable=require("../../reactMixins/sortable"),BrowserScroll=require("../../reactMixins/browserScroll"),Prefetch=require("../../reactMixins/prefetchWithDeps"),NodeContext=require("../../reactMixins/nodecontext"),I18N=require("../../reactMixins/i18n"),EventBus=require("../../reactMixins/eventBus"),AkiraContext=require("../../reactMixins/akiraContext"),Position=require("../../common/position"),Row=require("../components/row.jsx"),TitleCard=require("../components/title/titleCard.jsx"),LoadingGallery=require("../components/loaders/loadingGallery.jsx"),LoadingSpinner=require("../components/loaders/loadingSpinner.jsx"),TimeoutTransitionGroup=require("../components/timeoutTransitionGroup.jsx"),PathEvaluatorUtils=require("../../utils/pathEvaluatorUtils"),INFINITE_SCROLL_BUFFER_PX=2e3,ADDITIONAL_FETCH_KEY="infinite-scroll-fetch-rows",ADDITIONAL_PAGE_LOAD_WAIT_MS=900,FADE_OUT_CONTENT_TIMEOUT_MS=550,FADE_IN_CONTENT_TIMEOUT_MS=250,BUNDLE="discovery/akira/Gallery",prefetchStrategies={minimum:{numVideos:0,bobs:!1,jawBones:!1},small:{numVideos:48,batchVideoSize:12,bobs:!1,jawBones:!1},medium:{numVideos:48,batchVideoSize:48,bobs:!1,jawBones:!1},maximum:{numVideos:5e3,batchVideoSize:150,bobs:!0,jawBones:!0}},defaultStrategy=prefetchStrategies.small,getPaths=function(e,t,r){t||(t=defaultStrategy),r||(r={});var s,i,o,a=r&&r.fromNum||0,n=r&&r.toNum||t.numVideos,l=r.sortOrder?[r.sortOrder,{from:a,to:n}]:[{from:a,to:n}],c=TitleCard.getPaths(e,t).map(function(e){return l.concat(e)}),u=[[["id","length","name","trackIds","requestId"]]];return u=u.concat(c),r.sortOrder===Sortable.ORDER_BY_MATURITY&&(s=l.concat("maturity"),u=u.concat([s])),r.sortOrder&&(i=[r.sortOrder,"requestId"],u=u.concat([i])),r.term&&(o=[[["referenceId"]]],u=u.concat(o)),u},GalleryContent=React.createClass({displayName:"GalleryContent",mixins:[AutoFetch,Sortable,BrowserScroll,NodeContext,Prefetch,I18N,AkiraContext],numTitlesToFetch:defaultStrategy.numVideos,isFirstSetOfResults:!0,isInteractive:!1,statics:{getPaths:getPaths,defaultStrategy:defaultStrategy,prefetchStrategies:prefetchStrategies},childContextTypes:{requestId:React.PropTypes.string,trackId:React.PropTypes.number,jawBoneTrackId:React.PropTypes.number,jawBoneEpisodeTrackId:React.PropTypes.number,jawBoneTrailerTrackId:React.PropTypes.number},getChildContext:function(){var e=this.getTrackIds();return{requestId:this.getRequestId(),trackId:e.trackId,jawBoneTrackId:e.trackId_jaw,jawBoneEpisodeTrackId:e.trackId_jawEpisode,jawBoneTrailerTrackId:e.trackId_jawTrailer}},allRowsFetched:function(){var e=this.bindSortedModel();return e?!e.bind([this.numTitlesToFetch-1]).getValueSync("summary"):!0},fetchMoreRows:function(e){var t,r,s=this.getStrategy("netflix.ui.akira.prefetch.galleryLoaded"),i=this.props.sortOrder===Sortable.ORDER_BY_MATURITY?prefetchStrategies.maximum.batchVideoSize:s.batchVideoSize,o=this.props.model;(e||!this.isLoading()&&!this.allRowsFetched())&&(this.numTitlesToFetch+=i,this.isFirstSetOfResults=!1,t={sortOrder:this.props.sortOrder,toNum:this.numTitlesToFetch},r=getPaths(this.getContext(),s,t),this.isMounted()&&(this.setState({fetchingMoreRows:!0}),this.state.fetchingMoreRows=!1,this.fetchData(o,r,ADDITIONAL_FETCH_KEY)))},prefetchOnLoad:function(){this.isFirstSetOfResults&&Scheduler.queue(this.fetchMoreRows,ADDITIONAL_PAGE_LOAD_WAIT_MS)},onScroll:function(){this.isWithinDistanceBuffer(INFINITE_SCROLL_BUFFER_PX)&&this.fetchMoreRows()},isWithinDistanceBuffer:function(e){var t=this.refs.gallery&&this.refs.gallery.getDOMNode(),r=!1;return t&&(r=Position.getDistanceToBottomOfElement(t)<e),r},getTrackIds:function(){var e=this.props.model,t=this.props.trackIds;return!t&&e.getValueSync(["trackIds"])&&(t=e.getValueSync(["trackIds"])),t||{}},getRequestId:function(){var e=this.props.model.getValueSync([this.props.sortOrder,"requestId"]),t=this.props.model.getValueSync(["requestId"]);return this.props.referenceId||e||t},shouldAnimateInTitle:function(){var e=["search"];return-1===e.indexOf(this.props.keyPrefix)&&this.isFirstSetOfResults},renderGallery:function(){var e,t,r,s=this.props.model.getValueSync(["id"]),i=this.bindSortedModel(),o=null,a=[],n=[],l=0,c=0,u=0,d=0;for(t=0;t<this.numTitlesToFetch;t++)if(e=i.bind([t]),e.getBoundValue())r=e.getValueSync("summary"),r&&(!this.props.filter||this.props.filter(e))&&(this.props.jawBoneRowNum===l&&this.props.jawBoneRankNum===c&&(o=t),n.push(React.createElement(TitleCard,{key:"title_"+r.id+"_"+l+"_"+t,model:e,rankNum:c,videoId:r.id,animateIn:this.shouldAnimateInTitle()})),c++,u%this.context.columnsInRow===this.context.columnsInRow-1&&(a.push(this.renderRow(i,l,n,o)),l++,c=0,n=[]),u++);else if(d++,3===d)break;return n.length>0&&a.push(this.renderRow(i,l,n,o)),React.createElement("div",{key:"gallery-"+s,className:"galleryLockups"},a)},renderRow:function(e,t,r,s){var i=null,o=null,a=!1;return this.props.jawBoneRowNum!==t||_.isUndefined(s)||(i=this.props.jawBoneRankNum,o=s,a=!0),React.createElement(Row,{model:e,pqls:this.props.pqls,totalItems:r.length,key:"gallery-row-"+t,rowNum:t,jawBoneRankNum:i,jawBoneModelIndex:o,showJawBone:a,isGallery:!0},r)},renderNoResults:function(){return React.createElement("div",{className:"galleryMessage",key:"galleryMessage"},this.getString(BUNDLE,"results.none"))},renderError:function(){return React.createElement("div",{className:"galleryMessage",key:"galleryMessageError"},this.getString(BUNDLE,"results.error"))},componentWillReceiveProps:function(e){this.props.sortOrder!==e.sortOrder&&(this.numTitlesToFetch=defaultStrategy.numVideos,this.isFirstSetOfResults=!0)},setIsInteractive:function(){this.isLoading()||!this.isFirstSetOfResults||this.isInteractive||(EventBus.emit("app:interactive",this.props),this.isInteractive=!0)},componentDidMount:function(){this.prefetchOnLoad(),this.setIsInteractive()},componentDidUpdate:function(){this.prefetchOnLoad(),this.setIsInteractive()},render:function(){var e,t,r,s,i,o,a=React.addons.classSet,n=this.props.model.getValueSync(["name"]),l=this.bindSortedModel(),c=l.bind([0]).getValueSync("summary"),u=null;return e={gallery:!0,"row-with-x-columns":!0,search:"search"===this.props.keyPrefix&&!this.props.header},e["has-open-jaw"]=this.props.jawBoneVideoId,this.inNode()||("search"===this.props.keyPrefix&&this.props.onNoResults&&this.props.onNoResults(),r=(this.isLoading()||!l.getBoundValue())&&this.isFirstSetOfResults,s=c&&!PathEvaluatorUtils.isValueError(c),i=!c&&!this.isLoading(),o=PathEvaluatorUtils.hasAnyError([n,c]),r?(u=React.createElement(LoadingGallery,null),this.isFirstSetOfResults=!1):s?u=this.renderGallery():o?u=this.renderError():i&&(u=this.props.onNoResults&&this.props.onNoResults()&&this.props.noResults?this.props.noResults():this.renderNoResults()),s&&this.state.fetchingMoreRows&&this.numTitlesToFetch>=defaultStrategy.numVideos&&(t=React.createElement("div",{className:"gallerySpinLoader"},React.createElement(LoadingSpinner,null))),u=React.createElement("div",{key:"main-gallery"},u)),React.createElement("div",{className:a(e),ref:"gallery"},this.props.header?this.props.header:React.createElement("div",{className:"title",dangerouslySetInnerHTML:{__html:n}}),React.createElement(TimeoutTransitionGroup,{className:"galleryContent",transitionName:"pulsateTransition",component:"div",enterTimeout:FADE_IN_CONTENT_TIMEOUT_MS,leaveTimeout:FADE_OUT_CONTENT_TIMEOUT_MS},u),t)}});GalleryContent.__meta__={strings:[{bundle:"discovery/akira/Gallery",ids:["results.none","results.error"]}]},module.exports=GalleryContent;


});


Requireify.register('js/akira/components/controls/breadCrumbs.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Link=require("../controls/mainViewLink.jsx"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),BreadCrumbs=React.createClass({displayName:"BreadCrumbs",mixins:[AutoFetch],statics:{getPaths:function(e,r,t){var a,s=[];if(t.breadCrumbs)for(a=0;a<t.breadCrumbs.length;a++){var n=t.breadCrumbs[a];s.push(["genres",n,"name"])}return[["genres",t.id,"name"]].concat(s)}},getBreadCrumbs:function(){var e,r=[];if(this.props.breadCrumbs)for(e=0;e<this.props.breadCrumbs.length;e++){var t=this.props.breadCrumbs[e],a=this.props.model.bind(["genres",t]),s=a.getValueSync(["name"]);s&&r.push(React.createElement("li",{key:"breadCrumb"+e},React.createElement(Link,{type:"genre",id:t},s)))}return r},render:function(){var e=[],r=this.props.model.bind(["genres",this.props.id]),t=r.getValueSync(["name"]);return t?(e=this.getBreadCrumbs(),React.createElement("div",{className:"title"},e.length?React.createElement("div",{className:"breadCrumbs"},React.createElement("ul",null,e)):null,React.createElement("span",{className:"genreTitle"},t))):null}});module.exports=BreadCrumbs;


});


Requireify.register('js/akira/components/gallery/maturitySelector.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MaturitySelector=React.createClass({displayName:"MaturitySelector",handleUpdate:function(){this.props.onChange(this.props.value,!this.props.checked)},render:function(){return this.props.label?React.createElement("li",{className:"ms"},React.createElement("input",React.__spread({},this.props,{type:"checkbox",id:"checkbox-"+this.props.reactKey})),React.createElement("label",{htmlFor:"checkbox-"+this.props.reactKey,onClick:this.handleUpdate}),React.createElement("span",{onClick:this.handleUpdate},this.props.label)):null}});module.exports=MaturitySelector;


});


Requireify.register('js/akira/components/gallery/maturitySelectors.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),MaturitySelector=require("./maturitySelector.jsx"),MAX_RATINGS=20,MaturitySelectors=React.createClass({displayName:"MaturitySelectors",statics:{getPaths:function(){return[["maturityRatings","summary"],["maturityRatings",{to:MAX_RATINGS},"summary"]]}},getInitialState:function(){return{ratings:[]}},filterByMaturity:function(t){var e=this.state.ratings,a=t.getValueSync(["maturity"]);return a&&a.rating?e[a.rating.value]!==!1:!0},handleMaturityChange:function(t,e){var a=this.state.ratings;a[t]=e,this.props.onFilterChange(this.filterByMaturity)},render:function(){var t,e=this.props.model,a=e.bind(["maturityRatings"]),r=[],i=a.getValueSync(["summary"]);if(!i)return React.createElement("b",null);for(t=0;t<Math.min(MAX_RATINGS,i.length);t++){var n,s,u,l=a.bind([t]),c=l.getValueSync(["summary"]);c&&(n=c.value,s=c.value,u=void 0!==this.state.ratings[n]?this.state.ratings[n]:!0,r.push(React.createElement(MaturitySelector,{key:"ms"+t,reactKey:"ms"+t,value:n,label:s,checked:u,onChange:this.handleMaturityChange})))}return React.createElement("ul",{className:"maturitySelectors"},r)}});module.exports=MaturitySelectors;


});


Requireify.register('js/akira/components/gallery/sortGallery.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),MaturitySelectors=require("./maturitySelectors.jsx"),DropDown=require("../controls/nfDropdown.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),Sortable=require("../../../reactMixins/sortable"),sortOptions={su:"suggestions.for.you",rt:"highest.rated",yr:"year.release",az:"a.z",za:"z.a"},BUNDLE="discovery/akira/Chrome",SortGallery=React.createClass({displayName:"SortGallery",mixins:[I18N,Sortable,Router.State,Router.Navigation],statics:{__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["sort.by","highest.rated","suggestions.for.you","year.release","maturity.rating","a.z","z.a"]}]},getPaths:function(t,e,r){return"mr"===r.sortOrder?MaturitySelectors.getPaths():[]}},handleClick:function(t){var e=this;return function(){e.handleSortOrderChange(t)}},handleSortOrderChange:function(t){var e=this.getQuery();e.so=t,"mr"!==t&&this.props.onFilterChange(function(){return!0}),this.transitionTo(this.getPathname(),{},e)},getSortOptions:function(){var t,e=[];for(t in sortOptions)sortOptions.hasOwnProperty(t)&&e.push(React.createElement("a",{className:"sub-menu-link",onClick:this.handleClick(t)},this.getString(BUNDLE,sortOptions[t])));return e},render:function(){var t=this.getString(BUNDLE,sortOptions[this.props.sortOrder]),e="mr"===this.props.sortOrder;return React.createElement("div",{className:"sortGallery"},React.createElement("span",null,this.getString(BUNDLE,"sort.by")),React.createElement(DropDown,{options:this.getSortOptions(),defaultValue:t,cols:1}),e?React.createElement(MaturitySelectors,{model:this.props.model,onFilterChange:this.props.onFilterChange}):null)}});module.exports=SortGallery;


});


Requireify.register('js/akira/components/gallery/subGenres.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),DropDown=require("../controls/nfDropdown.jsx"),Link=require("../controls/mainViewLink.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),MAX_SUBGENRES=20,BUNDLE="discovery/akira/Chrome",SubGenres=React.createClass({displayName:"SubGenres",mixins:[I18N],statics:{getPaths:function(){return[["subgenres","summary"],["subgenres",{to:MAX_SUBGENRES},"summary"]]},__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["subgenres"]}]}},getDefaultProps:function(){return{breadCrumbs:[]}},handleClick:function(e){var r=this;return function(){r.handleGenreChange(e)}},getGenreQuery:function(){for(var e=[],r=0;this.props.breadCrumbs.length;r++)e.push(this.props.breadCrumbs[r]);return e.push(this.props.id),{bc:e.join(",")}},render:function(){var e,r=this.props.model.bind(["subgenres"]),n=r.getValueSync(["summary"]),s=[];if(!n)return React.createElement("b",null);for(e=0;e<Math.min(n.length,MAX_SUBGENRES);e++){var t=r.bind([e]),i=t.getValueSync(["summary"]);i&&s.push(React.createElement(Link,{className:"sub-menu-link",type:"genre",id:i.id,query:this.getGenreQuery()},i.name))}return 0===s.length?null:React.createElement("div",{className:"subgenres"},React.createElement(DropDown,{options:s,label:this.getString(BUNDLE,"subgenres"),cols:3,widthRestricted:!1}))}});module.exports=SubGenres;


});


Requireify.register('js/akira/components/subHeaders/genreHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),BreadCrumbs=require("../controls/breadCrumbs.jsx"),SortGallery=require("../gallery/sortGallery.jsx"),SubGenres=require("../gallery/subGenres.jsx"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps"),GenreHeader=React.createClass({displayName:"GenreHeader",mixins:[AutoFetch,IsomorphicContext],statics:{getPaths:function(e,r,t){var s=SubGenres.getPaths(e,r,{id:t.id}).map(function(e){return["genres",t.id].concat(e)}),a=SortGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return["genres",t.id].concat(e)});return BreadCrumbs.getPaths(e,r,{id:t.id,breadCrumbs:t.breadCrumbs}).concat(s).concat(a)}},render:function(){var e=this.props.model.bind(["genres",this.props.id]);return React.createElement("div",{className:"galleryHeader"},React.createElement(BreadCrumbs,{breadCrumbs:this.props.breadCrumbs,id:this.props.id,model:this.props.model,pqls:BreadCrumbs.getPaths(this.getContext(),null,{id:this.props.id,breadCrumbs:this.props.breadCrumbs})}),React.createElement(SubGenres,{model:e,id:this.props.id,breadCrumbs:this.props.breadCrumbs}),React.createElement(SortGallery,{sortOrder:this.props.sortOrder,model:e,onFilterChange:this.props.onFilterChange}))}});module.exports=GenreHeader;


});


Requireify.register('js/reactMixins/filterable.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={getInitialState:function(){return{filter:function(){return!0}}},setFilter:function(t){this.setState({filter:t})}};


});


Requireify.register('js/akira/page/genre.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),GalleryContent=require("../layouts/gallery.jsx"),GenreHeader=require("../components/subHeaders/genreHeader.jsx"),Filterable=require("../../reactMixins/filterable"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable"),GenreContent=React.createClass({displayName:"GenreContent",mixins:[Filterable,IsomorphicContext,Router.State],statics:{getPaths:function(e,r,t){var a=["genres",t.id],s=GalleryContent.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return a.concat(e)}),n=GenreHeader.getPaths(e,r,{id:t.id,breadCrumbs:t.breadCrumbs,sortOrder:t.sortOrder});return s.concat(n)},getBreadCrumbs:function(e){var r=[];return e.bc&&(r=e.bc.split(",")),r}},getFalkorModel:function(){return this.props.model.pathEvaluator},render:function(){var e,r,t=this.getParams().id,a=GenreContent.getBreadCrumbs(this.getQuery()),s=Sortable.getSortOrder(this.getQuery());return e=this.props.model.pathEvaluator.bind(["genres",t]),r=React.createElement(GenreHeader,{sortOrder:s,breadCrumbs:a,model:this.props.model.pathEvaluator,id:t,onFilterChange:this.setFilter,pqls:GenreHeader.getPaths(this.getContext(),null,{id:t,breadCrumbs:a,sortOrder:s})}),React.createElement(GalleryContent,React.__spread({},this.props,{keyPrefix:"genre",key:"genre-"+t,model:e,header:r,filter:this.state.filter,sortOrder:s,pqls:GalleryContent.getPaths(this.getContext(),null,{sortOrder:s})}))}});module.exports=GenreContent;


});


Requireify.register('js/akira/components/subHeaders/personHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),ImageExtension=require("../../../common/imageExtension"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),IsomorphicContext=require("../../../reactMixins/isomorphicContextWithDeps");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e){return[["headshot",ImageExtension.getExtensionForOpaqueImage(e)],["name"]]}},mixins:[AutoFetch,IsomorphicContext],render:function(){var e=this.props.model,t=e.getValueSync(["headshot",ImageExtension.getExtensionForOpaqueImage(this.getContext())]),a=e.getValueSync(["name"]);return React.createElement("div",{className:"galleryHeader"},t?React.createElement("img",{className:"headshot",src:t}):null,React.createElement("div",{className:"title",dangerouslySetInnerHTML:{__html:a}}))}});


});


Requireify.register('js/akira/page/person.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),GalleryContent=require("../layouts/gallery.jsx"),PersonHeader=require("../components/subHeaders/personHeader.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),getPaths=function(e,t,r){var a=["person",r.id],s=PersonHeader.getPaths(e).map(function(e){return a.concat(e)}),o=GalleryContent.getPaths(e).map(function(e){return a.concat(e)});return s.concat(o)};module.exports=React.createClass({displayName:"exports",statics:{getPaths:getPaths},mixins:[IsomorphicContext,Router.State],render:function(){var e=this.props.model.pathEvaluator.bind(["person",this.getParams().id]),t=React.createElement(PersonHeader,{model:e,pqls:PersonHeader.getPaths(this.getContext())});return React.createElement(GalleryContent,React.__spread({},this.props,{keyPrefix:"person",model:e,header:t,pqls:GalleryContent.getPaths(this.getContext())}))}});


});


Requireify.register('js/akira/components/subHeaders/myListHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Gallery";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{__meta__:{strings:[{bundle:"discovery/akira/Gallery:myList",ids:["label","changeOrder.label","changeOrder.button"]}]}},render:function(){var e=this.getString(BUNDLE,"myList.label");return React.createElement("div",{className:"galleryHeader"},React.createElement("div",{className:"title"},e))}});


});


Requireify.register('js/akira/page/myList.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),GalleryContent=require("../layouts/gallery.jsx"),MyListHeader=require("../components/subHeaders/myListHeader.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,t,r){var o=["lolomo","mylist"],a=[["lolomo","summary"],["lolomo","mylist","context"]],s=GalleryContent.getPaths(e,t,r).map(function(e){return o.concat(e)});return a.concat(s)}},mixins:[IsomorphicContext,Router.State],render:function(){var e,t=this.props.model.pathEvaluator.bind(["lolomo","mylist"]);return e=React.createElement(MyListHeader,null),React.createElement(GalleryContent,React.__spread({},this.props,{keyPrefix:"mylist",model:t,header:e,pqls:GalleryContent.getPaths(this.getContext())}))}});


});


Requireify.register('js/akira/page/title.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),Home=require("./home.jsx"),JawBone=require("../components/jawBone/jawBone.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps");module.exports=React.createClass({displayName:"exports",mixins:[IsomorphicContext,Router.State],childContextTypes:{rowNum:React.PropTypes.number,rankNum:React.PropTypes.number,trackId:React.PropTypes.number},getChildContext:function(){return{rowNum:-1,rankNum:0,trackId:2}},render:function(){var e=this.props.model.pathEvaluator.bind(["videos",this.getParams().id]);return React.createElement("div",null,React.createElement(JawBone,{model:e,disableClose:!0,pqls:JawBone.getPaths(this.getContext(),null,{isShow:void 0}),disableNavigation:!0,leftNavActive:!1,rightNavActive:!1,isFirstJaw:!0,jawBoneRankNum:-1}),React.createElement(Home,React.__spread({},this.props,{model:this.props.model,suppressBillboard:!0})))}});


});


Requireify.register('js/akira/page/addToMyList.jsx', function(require, requireAsync, module, exports) {


"use strict";var _=require("lodash"),React=require("react"),Router=require("react-router"),Title=require("./title.jsx"),URI=require("URIjs"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),EventBus=require("../../reactMixins/eventBus"),MyListUtils=require("../../utils/mylist_utils");module.exports=React.createClass({displayName:"exports",mixins:[Router.State,IsomorphicContext],componentDidMount:function(){var t=this.getQuery(),e=t.msg_token,i=this.context.trackId||0,s=parseInt(this.getParams().id,10),r=URI.decode(e).replace(/ /g,"+");EventBus.emit("myList:add:start",_.assign({},this.context,this.props)),MyListUtils.addToList(s,i,this.triggerNotification,this.triggerNotification,{reqMsgToken:!0,msgToken:r})},triggerNotification:function(t){EventBus.emit("myList:add:end",_.assign({},this.context,this.props,{myListNotification:t}))},render:function(){return React.createElement(Title,React.__spread({},this.props))}});


});


Requireify.register('js/akira/components/gallery/languageDropdown.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),DropDown=require("../controls/nfDropdown.jsx"),Link=require("../controls/mainViewLink.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),MAX_LANGUAGES=25,LanguageDropDown=React.createClass({displayName:"LanguageDropDown",statics:{getPaths:function(){return[["subtitleLanguages",{to:MAX_LANGUAGES},["id","name"]],["subtitleLanguages","length"]]},__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["language.label.default"]}]}},mixins:[I18N],render:function(){var e,a=this.props.model,t=a.bind(["subtitleLanguages"]),n=t.getValueSync(["length"]),r=[],i=this.getString("discovery/akira/Chrome","language.label.default");for(e=0;n>e;e++){var s=t.bind([e]),l=s.getValueSync(["id"]),o=s.getValueSync(["name"]);l===this.props.id&&(i=o),l&&o&&r.push(React.createElement(Link,{className:"sub-menu-link",type:"subtitle",id:l},o))}return React.createElement("div",{className:"languageDropDown"},React.createElement(DropDown,{options:r,cols:1,defaultValue:i}))}});module.exports=LanguageDropDown;


});


Requireify.register('js/akira/components/subHeaders/subtitleHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),SortGallery=require("../gallery/sortGallery.jsx"),LanguageDropDown=require("../gallery/languageDropdown.jsx"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),I18N=require("../../../reactMixins/i18nWithDeps"),SubtitlesHeader=React.createClass({displayName:"SubtitlesHeader",mixins:[AutoFetch,I18N],statics:{getPaths:function(e,r,t){var a,s=SortGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return["subtitles",t.id].concat(e)});return a=LanguageDropDown.getPaths().concat(s)},__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["header.subtitles"]}]}},render:function(){var e=this.props.model.bind(["subtitles",this.props.id]);return React.createElement("div",{className:"galleryHeader"},React.createElement("div",{className:"title"},this.getString("discovery/akira/Chrome","header.subtitles")),React.createElement(LanguageDropDown,{model:this.props.model,id:this.props.id}),React.createElement(SortGallery,{sortOrder:this.props.sortOrder,model:e,onFilterChange:this.props.onFilterChange}))}});module.exports=SubtitlesHeader;


});


Requireify.register('js/akira/page/subtitle.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),Gallery=require("../layouts/gallery.jsx"),SubtitleHeader=require("../components/subHeaders/subtitleHeader.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Filterable=require("../../reactMixins/filterable"),Sortable=require("../../reactMixins/sortable"),SubtitleContent=React.createClass({displayName:"SubtitleContent",statics:{getPaths:function(e,t,r){var s=["subtitles",r.id],i=Gallery.getPaths(e,t,{sortOrder:r.sortOrder}).map(function(e){return s.concat(e)}),a=SubtitleHeader.getPaths(e,t,r);return a.concat(i)}},mixins:[IsomorphicContext,Filterable,Router.State],render:function(){var e,t=["subtitles",this.getParams().id],r=this.props.model.pathEvaluator,s=r.bind(t),i=Sortable.getSortOrder(this.getQuery()),a={id:this.getParams().id,sortOrder:i},l=SubtitleHeader.getPaths(this.getContext(),null,a),o=Gallery.getPaths(this.getContext(),null,{sortOrder:i});return e=React.createElement(SubtitleHeader,React.__spread({},this.props,{model:r,sortOrder:i,id:this.getParams().id,onFilterChange:this.setFilter,pqls:l})),React.createElement(Gallery,React.__spread({},this.props,{keyPrefix:"subtitles",sortOrder:i,pqls:o,model:s,header:e,filter:this.state.filter}))}});module.exports=SubtitleContent;


});


Requireify.register('js/akira/layouts/sortableGallery.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Gallery=require("./gallery.jsx"),SortGallery=require("../components/gallery/sortGallery.jsx"),Filterable=require("../../reactMixins/filterable"),AutoFetch=require("../../reactMixins/falkor-auto-fetch"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),SortableGallery=React.createClass({displayName:"SortableGallery",mixins:[Filterable,AutoFetch,IsomorphicContext],statics:{getPaths:function(e,r,t){var a=SortGallery.getPaths(e,r,t);return[["name"]].concat(a)}},render:function(){var e,r=this.props.model,t=r.getValueSync(["name"]);return e=React.createElement("div",{className:"galleryHeader"},React.createElement("div",{className:"title",dangerouslySetInnerHTML:{__html:t}}),React.createElement(SortGallery,{sortOrder:this.props.sortOrder,model:r,onFilterChange:this.setFilter})),React.createElement(Gallery,React.__spread({},this.props,{keyPrefix:this.props.keyPrefix,model:r,header:e,filter:this.state.filter,pqls:Gallery.getPaths(this.getContext(),null,{sortOrder:this.props.sortOrder})}))}});module.exports=SortableGallery;


});


Requireify.register('js/akira/page/newRelease.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,r,t){var a=["newrelease"];return SortableGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return a.concat(e)})}},mixins:[IsomorphicContext,Router.State],render:function(){var e=["newrelease"],r=this.props.model.pathEvaluator.bind(e),t=Sortable.getSortOrder(this.getQuery());return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"newrelease",sortOrder:t,model:r,prefix:e,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:t})}))}});


});


Requireify.register('js/akira/page/recentlyAdded.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,r,t){var a=["recentlyadded"];return SortableGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return a.concat(e)})}},mixins:[IsomorphicContext,Router.State],render:function(){var e=["recentlyadded"],r=this.props.model.pathEvaluator.bind(e),t=Sortable.getSortOrder(this.getQuery());return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"recentlyadded",sortOrder:t,model:r,prefix:e,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:t})}))}});


});


Requireify.register('js/akira/page/watchAgain.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,r,t){var a=["watchagain"];return SortableGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return a.concat(e)})}},mixins:[IsomorphicContext,Router.State],render:function(){var e=["watchagain"],r=this.props.model.pathEvaluator.bind(e),t=Sortable.getSortOrder(this.getQuery());return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"watchagain",model:r,sortOrder:t,prefix:e,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:t})}))}});


});


Requireify.register('js/akira/page/similars.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(r,e,t){var a=["similars",t.id];return SortableGallery.getPaths(r,e,{sortOrder:t.sortOrder}).map(function(r){return a.concat(r)})}},mixins:[IsomorphicContext,Router.State],render:function(){var r=["similars",this.getParams().id],e=this.props.model.pathEvaluator.bind(r),t=Sortable.getSortOrder(this.getQuery());return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"similars",sortOrder:t,model:e,prefix:r,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:t})}))}});


});


Requireify.register('js/akira/page/genreNewRelease.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable"),GenreNewReleaseContent=React.createClass({displayName:"GenreNewReleaseContent",statics:{defaultSortOrder:Sortable.ORDER_BY_YEAR,getPaths:function(e,r,t){var a=["genrenewrelease",t.id];return SortableGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return a.concat(e)})}},mixins:[IsomorphicContext,Router.State],render:function(){var e=["genrenewrelease",this.getParams().id],r=this.props.model.pathEvaluator.bind(e),t=Sortable.getSortOrder(this.getQuery(),GenreNewReleaseContent.defaultSortOrder);return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"genrenewrelease",sortOrder:t,model:r,prefix:e,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:t})}))}});module.exports=GenreNewReleaseContent;


});


Requireify.register('js/akira/page/newArrivals.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Lolomo=require("../components/lolomo/lolomo.jsx"),I18N=require("../../reactMixins/i18nWithDeps"),MAX_ROWS=20,getPaths=function(e,t){t||(t={numRows:40,numVideos:50});var r=[["length"]].concat(Lolomo.getPaths(e,t));return r};module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{getPaths:getPaths,__meta__:{strings:[{bundle:"discovery/akira/Chrome",ids:["new.arrivals"]}]}},render:function(){var e=this.props.model.pathEvaluator.bind(["newarrivals"]),t=MAX_ROWS,r=getPaths(this.getContext());return React.createElement("div",null,React.createElement("div",{className:"lolomoHeader"},React.createElement("div",{className:"title"},this.getString("discovery/akira/Chrome","new.arrivals"))),React.createElement(Lolomo,React.__spread({},this.props,{model:e,pqls:r,numRows:t,newArrivals:!0,suppressBillboard:this.props.suppressBillboard})))}});


});


Requireify.register('js/akira/page/HD.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,r,t){var a=["hd",t.id];return SortableGallery.getPaths(e,r,{sortOrder:t.sortOrder}).map(function(e){return a.concat(e)})}},mixins:[IsomorphicContext,Router.State],render:function(){var e=["hd",this.getParams().id],r=this.props.model.pathEvaluator.bind(e),t=Sortable.getSortOrder(this.getQuery());return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"hd",sortOrder:t,model:r,prefix:e,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:t})}))}});


});


Requireify.register('js/akira/components/subHeaders/suggestionHeader.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(){return[["header"]]}},render:function(){var e=this.props.model,a=e.getValueSync(["summary"])&&e.getValueSync(["summary"]).name,t=a&&e.getValueSync(["header"]).replace("${TITLE}",a);return React.createElement("div",{className:"suggestionHeader"},React.createElement("div",{className:"title"},t))}});


});


Requireify.register('js/akira/components/search/searchPeople.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Link=require("../controls/mainViewLink.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),EventBus=require("../../../reactMixins/eventBus"),URLs=require("../../../utils/urls"),MAX_PEOPLE=20,BUNDLE="discovery/akira/Search",SearchPeople=React.createClass({displayName:"SearchPeople",mixins:[I18N,AutoFetch],statics:{__meta__:{strings:[{bundle:"discovery/akira/Search",ids:["search.people"]}]},getPaths:function(){return[["person",["summary","reference","trackId"]],["person",{to:MAX_PEOPLE},"person","summary"],["person",{to:MAX_PEOPLE},["referenceId"]]]}},hasLoggedImpression:!1,firstResult:null,peopleCount:0,getPeople:function(){var e,r=this.props.model.bind(["person"]),t=r.getValueSync(["summary"]),s=[];if(this.firstResult=null,!t)return s;for(e=0;e<t.length;e++){var n=r.bind([e,"person"]),i=n.getValueSync(["summary"]),o=new RegExp("("+this.props.term+")","gi"),a=i&&i.name.replace(o,function(e){return"<strong>"+e+"</strong>"}),c=null;i&&(0===e&&(this.firstResult=n),this.props.personId===i.id&&(c="selected"),s.push(React.createElement("li",{key:"person"+e,className:c},React.createElement(Link,{type:"searchPerson",params:{personId:i.id,term:this.props.term},onClick:this.props.onRailClick,dangerouslySetInnerHTML:{__html:a}}))))}return s},getReferenceId:function(){var e=this.props.model.bind(["person"]);return e&&e.getValueSync(["reference"])},getFirstResultLink:function(){var e;return this.firstResult?(e=this.firstResult.getValueSync(["summary"]).id,URLs.getSearchPersonUrl(this.props.term,e)):void 0},logSearchImpression:function(e){var r;!this.peopleCount||this.isLoading()||!e&&this.hasLoggedImpression||(r=this.getReferenceId(),r&&(EventBus.emit("search:impression",{referenceId:r,view:"peopleResults"}),this.hasLoggedImpression=!0))},componentDidMount:function(){this.logSearchImpression()},componentDidUpdate:function(e){var r=e.searchKey!==this.props.searchKey;r&&(this.hasLoggedImpression=!1),this.logSearchImpression(r)},render:function(){var e=this.getPeople();return this.peopleCount=e?e.length:0,this.peopleCount?React.createElement("div",{className:"people"},React.createElement("span",{className:"peopleLabel"},this.getString(BUNDLE,"search.people")),React.createElement("ul",null,e)):React.createElement("b",null)}});module.exports=SearchPeople;


});


Requireify.register('js/akira/components/search/noResults.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Search:search.noresults",NoResults=React.createClass({displayName:"NoResults",mixins:[I18N],statics:{getPaths:function(){},__meta__:{strings:[{bundle:BUNDLE,ids:["title","suggestions","keywords","looking","try","genre"]}]}},render:function(){var e=this.getStrings(BUNDLE);return React.createElement("div",{className:"noResultsWrapper"},React.createElement("div",{className:"noResults"},React.createElement("p",null," ",e.get("title",{query:this.props.term})," "),React.createElement("p",null,e.get("suggestions")),React.createElement("ul",null,React.createElement("li",null,e.get("keywords")),React.createElement("li",null,e.get("looking")),React.createElement("li",null,e.get("try")),React.createElement("li",null,e.get("genre")))))}});module.exports=NoResults;


});


Requireify.register('js/akira/components/search/searchSuggestions.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Link=require("../controls/mainViewLink.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),AutoFetch=require("../../../reactMixins/falkor-auto-fetch"),EventBus=require("../../../reactMixins/eventBus"),URLs=require("../../../utils/urls"),MAX_SUGGESTIONS=20,BUNDLE="discovery/akira/Search",SearchSuggestions=React.createClass({displayName:"SearchSuggestions",mixins:[I18N,AutoFetch],statics:{getPaths:function(){return[["suggestions",["summary","reference","trackId"]],["suggestions",{to:MAX_SUGGESTIONS},["referenceId","summary"]]]},__meta__:{strings:[{bundle:"discovery/akira/Search",ids:["search.suggestions.label"]}]}},hasLoggedImpression:!1,suggestionCount:0,getFirstResultLink:function(){return this.firstResult?URLs.getSearchSuggestionUrl(this.props.term,0):void 0},getReferenceId:function(){var e=this.props.model.bind(["suggestions"]);return e&&e.getValueSync(["reference"])},getSuggestions:function(){var e,s=[],t=this.props.model,i=t.bind(["suggestions"]),r=i.getValueSync(["summary"]);if(this.firstResult=null,!r||0===r.length)return s;for(e=0;e<r.length;e++){var n=i.bind([e]),a=n.getValueSync(["summary"]),o=a.name,u=null;0===e&&(this.firstResult=n),this.props.suggestionId===e&&(u="selected"),s.push(React.createElement("li",{key:s+e,className:u},React.createElement(Link,{type:"searchSuggestion",params:{suggestionId:e,term:this.props.term},onClick:this.props.onRailClick},o)))}return s},logSearchImpression:function(e){var s;!this.suggestionCount||this.isLoading()||!e&&this.hasLoggedImpression||(s=this.getReferenceId(),s&&(EventBus.emit("search:impression",{referenceId:s,view:"suggestionResults"}),this.hasLoggedImpression=!0))},componentDidMount:function(){this.logSearchImpression()},componentDidUpdate:function(e){var s=e.searchKey!==this.props.searchKey;s&&(this.hasLoggedImpression=!1),this.logSearchImpression(s)},render:function(){var e=this.getSuggestions();return this.suggestionCount=e.length,this.suggestionCount?React.createElement("div",{className:"suggestions"},React.createElement("span",{className:"suggestionsLabel"},this.getString(BUNDLE,"search.suggestions.label")),React.createElement("ul",null,e)):React.createElement("b",null)}});module.exports=SearchSuggestions;


});


Requireify.register('js/akira/components/search/searchDVDs.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Link=require("../controls/mainViewLink.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),EventBus=require("../../../reactMixins/eventBus"),URLs=require("../../../utils/urls"),MAX_DVDS=20,BUNDLE="discovery/akira/Search",SearchDVDs=React.createClass({displayName:"SearchDVDs",mixins:[I18N],statics:{getPaths:function(){return[["dvds","summary"],["dvds","referenceId"],["dvds",{to:MAX_DVDS},"summary"]]},__meta__:{strings:[{bundle:"discovery/akira/Search:search",ids:["dvd.label","see.all.dvd.results"]}]}},hasLoggedImpression:!1,suggestionCount:0,getDVDs:function(){var e,s=[],t=this.props.model,r=t.bind(["dvds"]),n=r.getValueSync(["summary"]);if(n&&n.length>0)for(e=0;e<n.length;e++){var a=r.bind([e]),i=a.getValueSync(["summary"]),c=i&&i.name.toLowerCase(),d=null;this.props.dvdId===encodeURIComponent(c)&&(d="selected"),c&&s.push(React.createElement("li",{key:"dvd"+s+e,className:d},React.createElement(Link,{type:"searchDVD",params:{dvdId:c,term:this.props.term},onClick:this.props.onRailClick},c)))}return s.push(React.createElement("li",{key:"allDVD"},React.createElement("a",{href:URLs.getDVDCoSearchURL(decodeURI(this.props.term))},this.getString(BUNDLE,"search.see.all.dvd.results")))),s},getReferenceId:function(){var e=this.props.model.bind(["dvds"]);return e&&e.getValueSync(["referenceId"])},logSearchImpression:function(e){var s;!this.suggestionCount||!e&&this.hasLoggedImpression||(s=this.getReferenceId(),s&&(EventBus.emit("search:impression",{referenceId:s,view:"dvdResults"}),this.hasLoggedImpression=!0))},componentDidMount:function(){this.logSearchImpression()},componentDidUpdate:function(e){var s=e.searchKey!==this.props.searchKey;s&&(this.hasLoggedImpression=!1),this.logSearchImpression(s)},render:function(){var e=this.getDVDs();return this.suggestionCount=e?e.length:0,this.suggestionCount?React.createElement("div",{className:"dvds"},React.createElement("span",{className:"dvdLabel"},this.getString(BUNDLE,"search.dvd.label")),React.createElement("ul",null,e)):null}});module.exports=SearchDVDs;


});


Requireify.register('js/akira/components/search/hybridDVDDetails.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),URLs=require("../../../utils/urls"),BUNDLE="discovery/akira/Search",HybridDVDDetails=React.createClass({displayName:"HybridDVDDetails",mixins:[I18N],statics:{__meta__:{strings:[{bundle:"discovery/akira/Search",ids:["search.see.dvd.details"]}]}},render:function(){var e=this.props.model,t=e.getValueSync(["title"]),a=e.getValueSync(["summary"]),s=a&&a.id,i=e.getValueSync(["synopsis"]),r=URLs.getDVDCoMDPURL(s);return React.createElement("div",{className:"dvdUpsellText"},React.createElement("div",{className:"dvdTitle"},t),React.createElement("div",{className:"dvdSynopsis"},i),React.createElement("a",{href:r},React.createElement("div",{className:"dvdAction"},this.getString(BUNDLE,"search.see.dvd.details"))))}});module.exports=HybridDVDDetails;


});


Requireify.register('js/akira/components/search/softUpsellDVDDetails.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),URLs=require("../../../utils/urls"),BUNDLE="discovery/akira/Search:search.dvd.softupsell",SoftUpsellDVDDetails=React.createClass({displayName:"SoftUpsellDVDDetails",mixins:[I18N],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["details","title"]}]}},render:function(){var e=this.props.model,t=e.getValueSync(["title"]),s=e.getValueSync(["summary"]),l=s&&s.id,a=URLs.getDVDUpsellURL(l,"search");return React.createElement("div",{className:"dvdUpsellText"},React.createElement("div",{className:"dvdStreamingTitle",dangerouslySetInnerHTML:{__html:this.getString(BUNDLE,"title",{title:t})}}),React.createElement("div",{className:"dvdUpsellLink",dangerouslySetInnerHTML:{__html:this.getString(BUNDLE,"details",{dvdUpsellUrl:a})}}))}});module.exports=SoftUpsellDVDDetails;


});


Requireify.register('js/akira/components/search/hardUpsellDVDDetails.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),I18N=require("../../../reactMixins/i18nWithDeps"),URLs=require("../../../utils/urls"),BUNDLE="discovery/akira/Search:search",HardUpsellDVDDetails=React.createClass({displayName:"HardUpsellDVDDetails",mixins:[I18N],statics:{__meta__:{strings:[{bundle:BUNDLE,ids:["dvd.hardupsell.title","dvd.hardupsell.details","dvd.hardupsell.freetrial","add.dvds"]}]}},render:function(){var e=this.props.model,t=e.getValueSync(["title"]),a=e.getValueSync(["summary"]),l=a&&a.id,s=URLs.getDVDUpsellURL(l,"search"),d=this.getStrings(BUNDLE);return React.createElement("div",{className:"dvdUpsellText"},React.createElement("div",{className:"dvdTitle"},d.get("dvd.hardupsell.title",{title:t})),React.createElement("div",{className:"dvdUpsellLink",dangerouslySetInnerHTML:{__html:d.get("dvd.hardupsell.details",{title:t})}}),React.createElement("a",{href:s},React.createElement("div",{className:"dvdAction"},d.get("add.dvds"))))}});module.exports=HardUpsellDVDDetails;


});


Requireify.register('js/akira/components/search/dvdUpsell.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),HybridDVDDetails=require("./hybridDVDDetails.jsx"),SoftUpsellDVDDetails=require("./softUpsellDVDDetails.jsx"),HardUpsellDVDDetails=require("./hardUpsellDVDDetails.jsx"),I18N=require("../../../reactMixins/i18nWithDeps"),BUNDLE="discovery/akira/Search",DVD_IMAGE_PREFIX="//cdn.nflximg.com/us/boxshots/large/";module.exports=React.createClass({displayName:"exports",mixins:[I18N],statics:{getPaths:function(){return[["dvdresult",0,"video",["summary","title","synopsis"]],["dvdresult",0,"isSoftUpsell"]]},__meta__:{strings:[{bundle:"discovery/akira/Search",ids:["search.dvd.icon.text"]}]}},render:function(){var e,t=this.props.model,s=t.bind(["dvdresult",0,"video"]),a=t.bind(["dvdresult",0,"isSoftUpsell"]),l=a.getValueSync(["value"]),r=s.getValueSync(["title"]),i=s.getValueSync(["summary"]),c=i&&i.id,d=DVD_IMAGE_PREFIX+c+".jpg",n=this.getFeatureData("userInfo").isDVD,D=n||!l?" showDisc":"";return e=n?React.createElement(HybridDVDDetails,{model:s}):l?React.createElement(SoftUpsellDVDDetails,{model:s}):React.createElement(HardUpsellDVDDetails,{model:s}),r?React.createElement("div",{className:"dvdUpsell"},React.createElement("div",{className:"dvdUpsellImg"+D},React.createElement("img",{src:d})),e,React.createElement("div",{className:"dvdParent"},React.createElement("div",{className:"dvdIcon"},React.createElement("div",{className:"upsellText",dangerouslySetInnerHTML:{__html:this.getString(BUNDLE,"search.dvd.icon.text")}})))):React.createElement("b",null)}});


});


Requireify.register('js/akira/page/search.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),PathEvaluatorUtils=require("../../utils/pathEvaluatorUtils"),Gallery=require("../layouts/gallery.jsx"),PersonHeader=require("../components/subHeaders/personHeader.jsx"),SuggestionHeader=require("../components/subHeaders/suggestionHeader.jsx"),SearchPeople=require("../components/search/searchPeople.jsx"),NoResults=require("../components/search/noResults.jsx"),SearchSuggestions=require("../components/search/searchSuggestions.jsx"),SearchDVDs=require("../components/search/searchDVDs.jsx"),DVDUpsell=require("../components/search/dvdUpsell.jsx"),AutoFetch=require("../../reactMixins/falkor-auto-fetch"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),EventBus=require("../../reactMixins/eventBus"),ctx=require("../../utils/contextData"),getPaths=function(e,t,s){var r,n,a,o,i=["search",s.term],c=i,d=SearchPeople.getPaths(e).map(function(e){return i.concat(e)}),u=SearchSuggestions.getPaths().map(function(e){return i.concat(e)}),g=!1,l=ctx.getFeatureData("userInfo");if(g=l&&l.isDVD,g&&(o=SearchDVDs.getPaths().map(function(e){return i.concat(e)})),s.personId&&(c=["person",s.personId]),s.suggestionId&&(c=i.concat(["suggestions",s.suggestionId,"relatedvideos"]),r=i.concat(["suggestions",s.suggestionId])),s.dvdId&&(c=i.concat(["dvds",s.dvdId.toLowerCase(),"relatedvideos"]),r=i.concat(["dvds",s.dvdId.toLowerCase()])),n=Gallery.getPaths(e,t,s).map(function(e){return c.concat(e)}),a=n.concat(d).concat(u),g&&(a=a.concat(o)),s.personId){var h=PersonHeader.getPaths(e).map(function(e){return c.concat(e)});a=a.concat(h)}if(s.suggestionId||s.dvdId){var p=DVDUpsell.getPaths(e).map(function(e){return c.concat(e)}),I=SuggestionHeader.getPaths(e).map(function(e){return r.concat(e)});a=a.concat(p).concat(I)}return a},Search=React.createClass({displayName:"Search",mixins:[AutoFetch,IsomorphicContext,Router.State,Router.Navigation],statics:{getPaths:getPaths},pageKey:null,hasLoggedImpression:!1,getFalkorModel:function(){return this.props.model.pathEvaluator},onNoResults:function(){if(this.props.personId||this.props.suggestionId||this.props.dvdId)return!1;var e=this.refs.searchPeople.getFirstResultLink(),t=this.refs.searchSuggestions.getFirstResultLink();return e?(this.navigateTo=e,!1):t?(this.navigateTo=t,!1):!0},isHybridUser:function(){},renderNoResults:function(){return React.createElement(NoResults,{term:decodeURIComponent(this.props.term)})},navigateToFallback:function(){var e=this.getSearchModel().getValueSync("length");this.navigateTo&&0===e&&this.replaceWith(this.navigateTo)},getSearchModel:function(){var e=this.props.term;return this.props.model.pathEvaluator.bind(["search",e])},getReferenceId:function(){var e=this.getSearchModel(),t=this.getSuggestionId(),s=e&&e.getValueSync(["referenceId"]);return e&&this.getPersonId()&&(s=this.getPersonRefId(e.bind(["person"]))),e&&"undefined"!=typeof t&&(s=e.getValueSync(["suggestions",t,"referenceId"])),e&&this.getDvdId()&&(s=e.getValueSync(["dvds","referenceId"])),s},getPersonRefId:function(e){var t,s,r,n=e.getValueSync(["summary"]),a=parseInt(this.props.personId,10);if(!n)return null;for(s=0;s<n.length;s++)if(t=e.bind([s,"person"]),r=t.getValueSync(["summary"]),a===r.id)return e.bind([s]).getValueSync(["referenceId"])},getSearchView:function(){var e="titleResults",t=this.getSuggestionId();return this.getPersonId()&&(e="peopleTitleResults"),"undefined"!=typeof t&&(e="suggestionTitleResults"),this.getDvdId()&&(e="dvdTitleResults"),e},getSearchPageKey:function(){return this.props.term+":"+this.getPersonId()+":"+this.getSuggestionId()+":"+this.getDvdId()},logSearchImpression:function(e){var t;this.isLoading()||!e&&this.hasLoggedImpression||(t=this.getReferenceId(),t&&(EventBus.emit("search:impression",{referenceId:t,view:this.getSearchView()}),this.hasLoggedImpression=!0))},componentDidMount:function(){this.logSearchImpression(),this.navigateToFallback()},componentDidUpdate:function(){var e=this.getSearchPageKey(),t=this.pageKey!==e;t&&(this.pageKey=e,this.hasLoggedImpression=!1),this.logSearchImpression(),this.navigateToFallback()},shouldComponentUpdate:function(){return!this.isLoading()},onRailClick:function(e,t){return this.props.personId||this.props.suggestionId||this.props.dvdId?this.replaceWith(t.type,t.params):this.transitionTo(t.type,t.params),!1},getPersonId:function(){return this.props.personId&&parseInt(this.props.personId,10)},getSuggestionId:function(){return this.props.suggestionId&&parseInt(this.props.suggestionId,10)},getDvdId:function(){return this.props.dvdId},getTrackIdOverrides:function(e){var t;return this.getPersonId()&&(t=e.bind(["person"]).getValueSync(["trackId"])),"undefined"!=typeof this.getSuggestionId()&&(t=e.bind(["suggestions"]).getValueSync(["trackId"])),{trackId:t,jawBoneTrackId:t,jawBoneEpisodeTrackId:t,jawBoneTrailerTrackId:t}},hasSearchError:function(){var e,t=this.state&&this.state.fetchDataError;return t?(e=this.getSearchModel(),e&&PathEvaluatorUtils.isValueError(e.getValueSync([0]))):!1},render:function(){var e,t,s,r,n=this.props.term,a=this.getSearchModel(),o=a,i=this.getFeatureData("userInfo"),c=this.getPersonId(),d=this.getSuggestionId(),u=this.getDvdId(),g=i&&i.isDVD?i.isDVD:!1,l=this.getReferenceId(),h=this.getSearchPageKey();return this.navigateTo=null,(c||"undefined"!=typeof d)&&(e=this.getTrackIdOverrides(a)),c&&(o=this.props.model.pathEvaluator.bind(["person",c]),t=React.createElement(PersonHeader,{model:o,pqls:PersonHeader.getPaths(this.getContext())})),"undefined"!=typeof d&&(o=a.bind(["suggestions",d,"relatedvideos"]),s=a.bind(["suggestions",d]),r=o&&o.bind(["dvdresult",0,"video"]),t=r&&r.getValueSync(["title"])?React.createElement("div",null,React.createElement(DVDUpsell,{model:o}),React.createElement(SuggestionHeader,{model:s})):React.createElement(SuggestionHeader,{model:s})),u&&(o=a.bind(["dvds",u,"relatedvideos"]),s=a.bind(["suggestions",d]),t=React.createElement("div",null,React.createElement(DVDUpsell,{model:o}),React.createElement(SuggestionHeader,{model:s}))),React.createElement("div",null,React.createElement("div",{className:"rail"},g?React.createElement(SearchDVDs,{model:a,searchKey:h,term:n,ref:"searchDVDs",dvdId:u,onRailClick:this.onRailClick}):null,React.createElement(SearchSuggestions,{model:a,searchKey:h,term:n,ref:"searchSuggestions",pqls:SearchSuggestions.getPaths(),suggestionId:d,onRailClick:this.onRailClick}),React.createElement(SearchPeople,{model:a,searchKey:h,term:n,ref:"searchPeople",pqls:SearchPeople.getPaths(),personId:c,onRailClick:this.onRailClick})),React.createElement(Gallery,React.__spread({},this.props,{keyPrefix:"search",key:h,model:o,onNoResults:this.onNoResults,noResults:this.renderNoResults,pqls:Gallery.getPaths(this.getContext()),referenceId:l,header:t,trackIds:e})))}});module.exports=Search;


});


Requireify.register('js/reactMixins/htmlSafe.js', function(require, requireAsync, module, exports) {


"use strict";module.exports={entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","~":""},regexEntity:/[&<>"'\/]/g,invalidMap:["<",">",'"',"~"],hasInvalidCharacter:function(t){var n=null;return this.invalidMap.map(function(e){t&&t.indexOf(e)>=0&&(n=e)}),n},escapeHtml:function(t){var n=this.entityMap;return t.replace(this.regexEntity,function(t){return n[t]})},getHtmlSafeString:function(t){return null===this.hasInvalidCharacter(t)?t:this.escapeHtml(t)}};


});


Requireify.register('js/akira/page/searchRoute.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),Search=require("./search.jsx"),HtmlSafe=require("../../reactMixins/htmlSafe"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),SearchRoute=React.createClass({displayName:"SearchRoute",mixins:[IsomorphicContext,Router.State],statics:{getPaths:function(e,t,r){return Search.getPaths(e,t,r)}},render:function(){var e={term:HtmlSafe.getHtmlSafeString(this.getParams().term),personId:this.getParams().personId,suggestionId:this.getParams().suggestionId,dvdId:this.getParams().dvdId};return React.createElement(Search,React.__spread({},this.props,e,{pqls:Search.getPaths(this.getContext(),null,e)}))}});module.exports=SearchRoute;


});


Requireify.register('js/reactMixins/player/initParams.js', function(require, requireAsync, module, exports) {


"use strict";var URLs=require("../../utils/urls"),context=require("../../utils/contextData"),PathEvaluatorUtils=require("../../utils/pathEvaluatorUtils"),Rx=require("../../common/nfRx"),Router=require("react-router"),_=require("lodash"),INVALID_VALUE_NO_INCOMING_CONTEXT=-97;module.exports={pathEvaluator:null,isKidsProfile:function(){var t=this.pathEvaluator.getValueSync(["profilesList","current","summary"]);return t?t.isKids:!1},getPreplayConfig:function(t){var e=this.pathEvaluator.getValueSync(["videos",t,"current","preplay"])||[],r={};return e.forEach(function(t){if("recapPrePlay"===t.type){var e={};e.movieId=t.trailerVideoId,e.backgroundImage=t.backgroundImg,e.logoImage=t.logoImg,e.seasonNumber=t.seasonNumber-1,r.recap=e,r.preplay={trackId:t.trackId}}}),r},getBackToBrowseUrl:function(t){return this.isKidsProfile()?URLs.page.merchweb.kidsHome:t?URLs.getTitleUrl(t):URLs.paths.app},getInitParams:function(){function t(){var t=u[6395];return!(!t||2!==t.cell)}this.pathEvaluator=this.props.model.pathEvaluator;var e=this,r=context.getData("player","config")||{},a=this.prepareInitParamsFromConfig(r.ui,r.core),i=_.clone(a.initParams,!0,this),o={},s=this.getPlayable().take(1),n=context.getData("ab","serializedAB")||{},u=n._evaluatedTests||{};return s.map(function(r){var a,s=r.id,n=parseInt(this.getParams().characterId);"movie"===r.type?o.movieId=s:"episode"===r.type?o.episodeId=s:o.videoId=s||0,o.backToBrowsingUrl=this.getBackToBrowseUrl(s),o.trackingId=parseInt(this.getQuery().trackId||this.getQuery().trkid,10)||0,o.playcontext=this.getUIPlayContext(),o.signoutUrl=URLs.page.signOut,o.referrerIsNetflix=Router.History.length>1,o.timedTextStyleDefaults=context.getData("userInfo","timedTextStyleDefaults"),o.timedTextStyleOverrides=context.getData("userInfo","timedTextStyleOverrides"),o.bookmarkByMovieId=this.getPTSForPlayable(r),o.reportProblemEnabled=t(),_.merge(o,i),isNaN(n)||(a=this.getCharacterModel(n),a.invalidate(["current"]));var u=e.getPreplayConfig(r.id);return u&&(o.recap=u.recap,o.preplay=u.preplay),o}.bind(this))},prepareInitParamsFromConfig:function(t,e){return t=t||{},e=e||{},_.merge(_.clone(t),_.clone(e))},getUIPlayContext:function(){var t,e={location:"WATCHNOW"},r=this.getQuery().tctx;return this.getQuery().tctx&&r.split(",").length>=3?(t=r.split(","),e.row=t[0],e.rank=t[1],e.request_id=t[2]):(e.row=INVALID_VALUE_NO_INCOMING_CONTEXT,e.rank=INVALID_VALUE_NO_INCOMING_CONTEXT,e.request_id=document.referrer),e},getPTSForPlayable:function(t){if(!t||!t.id)return 0;var e=this.pathEvaluator.bind(["videos",t.id]),r=parseInt(e.getValueSync(["bookmarkPosition"]),10);r=0>r?0:r;var a=parseInt(e.getValueSync(["creditsOffset"]),10),i=r>=a?0:r,o={};return o[t.id]=1e3*i,o},getPlayable:function(){var t,e,r=parseInt(this.getParams().id),a=parseInt(this.getParams().characterId),i=parseInt(this.getQuery().episodeId,10);return i?Rx.Observable.return({id:i,type:"episode"}):isNaN(r)?isNaN(a)?Rx.Observable.empty():(e=this.getCharacterModel(a),PathEvaluatorUtils.toObservable(e.get(["current",["summary","bookmarkPosition","creditsOffset"]])).map(function(){return e.getValueSync(["current","summary"])})):(t=this.getVideoModel(r),PathEvaluatorUtils.toObservable(t.get(["current",["summary","bookmarkPosition","creditsOffset","preplay"]])).map(function(){return t.getValueSync(["current","summary"])}))},getSubtitleSettings:function(){var t=this.getSubtitleModel();return PathEvaluatorUtils.toObservable(t.get(["summary"])).map(function(){return t.getValueSync(["summary"])})},getSubtitleModel:function(){return this.pathEvaluator.bind(["user","subtitleSettings"])},getVideoModel:function(t){return this.pathEvaluator.bind(["videos",t])},getCharacterModel:function(t){return this.pathEvaluator.bind(["characters",t])}};


});


Requireify.register('js/utils/player/playerAssets.js', function(require, requireAsync, module, exports) {


"use strict";var Rx=require("../../common/nfRx"),contextData=require("../../utils/contextData"),netflix=require("../../common/nfNamespace"),_=require("lodash"),ASSET_LOAD_SLA=5e3,RETRY_COUNT=5,RETRY_DELAY=1e3,jsLoadObs,cssLoadObs,coreJsLoadObs,makeLoadObservable=function(e,r){return Rx.Observable.fromEvent(e,"load").merge(Rx.Observable.fromEvent(e,"error").map(function(){return Rx.Observable.throwError(new Error(r))})).timeout(ASSET_LOAD_SLA).retryWithBackoff(RETRY_COUNT,RETRY_DELAY).shareReplay()};module.exports={getPlayerCSS:function(e){if(cssLoadObs)return cssLoadObs;var r=document.createElement("link");cssLoadObs=makeLoadObservable(r,"Loading CSS Resource failed."),r.href=e,r.type="text/css",r.rel="stylesheet";var s=document.getElementsByTagName("head")[0];return s.appendChild(r),cssLoadObs},getCorePlayerJS:function(e){if(coreJsLoadObs)return coreJsLoadObs;var r=document.createElement("script");return coreJsLoadObs=makeLoadObservable(r,"Loading Core JS Resource failed."),r.src=e,document.body.appendChild(r),coreJsLoadObs},getPlayerJS:function(e){if(jsLoadObs)return jsLoadObs;var r=document.createElement("script");return jsLoadObs=makeLoadObservable(r,"Loading JS Resource failed."),r.src=e,document.body.appendChild(r),jsLoadObs},getPlayerAssets:function(){var e=contextData.getData("player","config");if(e.ui=e.ui||{},e.core=e.core||{},!e.ui.assets&&!e.core.assets&&!e.ui.isFallback)return Rx.Observable.throw(new Error("No assets defined!"));var r=_.merge(e.ui.assets,e.core.assets||{}),s=netflix.reactContext.fastProps["wwwplayer.mdx"];return netflix.constants=netflix.constants||{},netflix.constants.page=netflix.constants.page||{},netflix.constants.page.merchMdxJs=s,Rx.Observable.zip([this.getPlayerCSS(r.css),this.getPlayerJS(r.js)],_.noop)}};


});


Requireify.register('js/reactMixins/popstate.js', function(require, requireAsync, module, exports) {


"use strict";var Rx=require("../common/nfRx");module.exports={popStateObservable:null,onPopState:function(){return this.popStateObservable||(this.popStateObservable=Rx.Observable.fromEvent(window,"popstate")),this.popStateObservable}};


});


Requireify.register('js/falkorClient/lolomoRefresh.js', function(require, requireAsync, module, exports) {


"use strict";function findListWithContext(t,e){for(var o,r=!0,n=0;r;)if(o=t.bind([n]),r=!!o.getBoundValue()){if(o.getValueSync("context")===e)return{list:o,index:n};n++}return null}function getId(t){return t.getBoundValue().__key}function refreshUI(){root.reactApp.refresh()}function refreshListImpl(t,e,o,r){var n=LolomoRow.getPaths(ContextData.getContext());t.call(["refreshListByContext"],[getId(e),r,o],n,[]).subscribe(refreshUI)}function refreshLolomoList(t,e){var o=findListWithContext(t,e);o&&refreshListImpl(t,o.list,e,o.index)}function refreshListWithContext(t,e){var o,r,n=["lolomo","lolomonobillboard"];for(o=0;o<n.length;o++)r=t.hardBind([n[o]]),r.getBoundValue()&&refreshLolomoList(r,e)}var ContextData=require("../utils/contextData"),LolomoRow=require("../akira/components/lolomo/lolomoRow.jsx"),root="undefined"!=typeof window?window:{};module.exports={refreshList:refreshListWithContext};


});


Requireify.register('js/akira/page/player.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),I18N=require("../../reactMixins/i18nWithDeps"),InitParams=require("../../reactMixins/player/initParams"),PlayerAssets=require("../../utils/player/playerAssets"),fastProperty=require("../../reactMixins/fastProperty"),PopState=require("../../reactMixins/popstate"),FalkorFetch=require("../../reactMixins/falkor-fetch"),EventBus=require("../../reactMixins/eventBus"),context=require("../../utils/contextData"),TitleCard=require("../components/title/titleCard.jsx"),LolomoRefresh=require("../../falkorClient/lolomoRefresh"),DynamicMessages=require("../../utils/dynamicMessages/dynamicMessages"),netflix=require("../../common/nfNamespace"),Rx=require("../../common/nfRx"),_=require("lodash"),prefetchStrategies={defaultStrategy:{bobs:!0,jawBones:!0}},hasInitializedPlayer=!1,noop=_.noop,getPaths=function(e,t,o){return TitleCard.getPaths(e,t,o)},getCharacterPaths=function(){return[["summary"]]},disposed,Player=React.createClass({displayName:"Player",statics:{getPaths:getPaths,getCharacterPaths:getCharacterPaths,prefetchStrategies:prefetchStrategies,defaultStrategy:prefetchStrategies.defaultStrategy},mixins:[I18N,InitParams,fastProperty,PopState,FalkorFetch,Router.State],getInitialState:function(){return{assetsLoading:!1,playerError:!1}},setIsInteractive:function(e){EventBus.emit("playback:start",{reason:e.interactiveReason}),EventBus.emit("app:interactive")},setupI18nFascia:function(){var e=this,t=context.getData("player","config").ui.assets.i18n,o=function(e,t){return e=e||"",t=t||"",t.indexOf(e)<0?t:""};"undefined"==typeof netflix&&(netflix={}),"undefined"==typeof netflix.I18n&&(netflix.I18n={}),netflix.I18n.get=function(i){return i.indexOf("mdx")>=0?o(i,e.getString("discovery/akira/Mdx",i)):o(i,e.getString(t,i))},netflix.I18n.getWithParams=function(i,r,a){var n,s={};for(n in r)r.hasOwnProperty(n)&&(s[r[n]]=a[n]);return o(i,e.getString(t,i,s))}},initLegacyNamespace:function(){netflix.constants=netflix.constants||{},netflix.constants.global=netflix.constants.global||this.props.model.contextData.serverDefs.data,netflix.constants.page=netflix.constants.page||{},netflix.constants.page.UITRACKING_SEND_RATE_MS=8e3,netflix.constants.page.UITRACKING_SEND_RATE_MAX_DECAY_MULTIPLIER=5,netflix.constants.page.merchMdxJs=this.fastProperty("wwwplayer.mdx"),netflix.constants.page.xsrf=context.getFeatureData("userInfo").authURL},initPlayer:function(){var e,t,o=netflix&&netflix.cadmium,i=o&&o.UiEvents,r=i&&i.knownEvents,a=o&&o.objects,n=this;e=r&&"string"==typeof r.VIDEO_FIRST_PLAY?Rx.Observable.fromEvent(i,r.VIDEO_FIRST_PLAY).take(1).doAction(function(){n.setIsInteractive({interactiveReason:"success"})}):Rx.Observable.return(null),t=context.getFeatureData("browserInfo").isChrome&&this.fastProperty("wwwplayer.mdx.enabled")?PlayerAssets.getPlayerJS("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"):Rx.Observable.return(null),this.getInitParams().doAction(function(e){hasInitializedPlayer?a.setPlayContext(e.playcontext):hasInitializedPlayer=!0,o.ui.master.init(document.getElementById("playerContainer"),e)}).takeUntil(disposed).merge(e).merge(t).subscribe(noop,this.onPlayerInitError,noop)},getModel:function(e){return e=e||this.videoId||this.getParams().id,this.props.model.pathEvaluator&&e?this.props.model.pathEvaluator.bind(["videos",e]):void 0},onPlayerInitError:function(){this.setState({playerError:!0}),this.setIsInteractive({interactiveReason:"failed"})},componentWillMount:function(){EventBus.emit("app:pageChange",this.props)},componentDidMount:function(){var e=this;this.videoId=this.getParams().id,this.episodeId=this.getQuery().episodeId,disposed=new Rx.Subject,this.initLegacyNamespace(),this.setupI18nFascia(),netflix.cadmium?this.initPlayer():PlayerAssets.getPlayerAssets().take(1).takeUntil(disposed).doAction(function(){e.initPlayer()}).subscribe(noop,this.onPlayerInitError,noop),DynamicMessages.stub||DynamicMessages.poll(DynamicMessages.pollingTypes.PLAYBACK).takeUntil(disposed).subscribe()},invalidateSeasonCurrent:function(){var e=this.getModel(),t=e.getValueSync(["seasonCount"]),o=t&&e.bind(["seasonList"]);o.getBoundValue()&&o.invalidate([{to:t-1},"episodes","current"]).subscribe()},shutdownCadmium:function(){var e=netflix&&netflix.cadmium&&netflix.cadmium.ui&&netflix.cadmium.ui.master&&"function"==typeof netflix.cadmium.ui.master.shutdown&&netflix.cadmium.ui.master.shutdown();e instanceof Rx.Observable&&e.doAction(function(){var e=netflix&&netflix.player&&netflix.player.togglePanel||noop;e("info",!1),e("streams",!1),e("log",!1)}).subscribe(noop,function(){},noop),disposed&&disposed.onNext()},invalidateFalkorCache:function(){var e=this.getModel(),t=!!this.episodeId;if(t){e.invalidate(["current"]).subscribe();var o=this.getModel(this.episodeId);o.getBoundValue()&&o.invalidate(["bookmarkPosition"]).subscribe(),this.invalidateSeasonCurrent()}else e.invalidate(["bookmarkPosition"]).subscribe();LolomoRefresh.refreshList(this.props.model.pathEvaluator,"continueWatching")},componentWillUnmount:function(){this.shutdownCadmium(),this.invalidateFalkorCache(),EventBus.emit("playback:end")},renderError:function(){var e=context.getData("player","config").ui.assets.i18n;return React.createElement("div",{className:"playerError"},this.getString(e,"ce-text-default"))},render:function(){return React.createElement("div",{id:"playerWrapper"},this.state.playerError?this.renderError():React.createElement("div",{id:"playerContainer"}))}});Player.__meta__={strings:[{bundle:"akira/player/player.js",isSymLink:!0,ids:["ce-time-hours-minutes-seconds","ce-time-hours-minutes","ce-time-hours-seconds","ce-time-hours","ce-time-minutes-seconds","ce-time-minutes","ce-time-seconds","ce-loading-show-title","ce-back-to-browse","ce-next-episode-header","ce-next-episode-title","ce-episode-abbreviation","ce-audio-tracks-title","ce-text-tracks-title","ce-none-track","ce-audio-tracks-commentator-title","ce-season-recap-text","ce-start-next-season-button","ce-long-pause-youre-watching","ce-long-pause-paused","ce-post-autoplay","ce-post-autoplay-singular","ce-post-autoplay-character-test","ce-post-autoplay-character-test-singular","ce-post-no-autoplay","ce-post-back-to-browse","ce-post-more-episodes","ce-post-exit-fullscreen","ce-post-recommend-head","ce-post-recommend-body","ce-post-recommend-singular","ce-post-more-info","ce-post-autoplay-prepromo-trailer-plural","ce-post-autoplay-prepromo-trailer-singular","ce-post-play-trailer","ce-post-play-promo-episode","ce-post-play-promo-title","ce-post-save-to-my-list","ce-post-add-to-my-list","ce-post-remove-to-my-list","ce-post-replay-trailer","ce-post-original-promote-header","ce-post-original-promote-text","ce-post-rate","ce-post-break-continue","ce-post-break-restart","ce-post-break-back-to-browse","ce-post-bob-actors","ce-post-bob-director","ce-post-bob-genre","ce-post-bob-duration-episode","ce-post-bob-duration-episode-plural","ce-post-bob-duration-book","ce-post-bob-duration-book-plural","ce-post-bob-duration-chapter","ce-post-bob-duration-chapter-plural","ce-post-bob-duration-collection","ce-post-bob-duration-collection-plural","ce-post-bob-duration-part","ce-post-bob-duration-part-plural","ce-post-bob-duration-season","ce-post-bob-duration-season-plural","ce-post-bob-duration-season-span","ce-post-bob-duration-series","ce-post-bob-duration-series-plural","ce-post-bob-duration-set","ce-post-bob-duration-set-plural","ce-post-bob-duration-special","ce-post-bob-duration-special-plural","ce-post-bob-duration-volume","ce-post-bob-duration-volume-plural","ce-pin-play","ce-pin-cancel","ce-enter-pin","ce-invalid-pin","ce-forgot-pin","ce-pin-network-error","ce-header","ce-head-default","ce-head-code","ce-text-default","ce-support-text","ce-head-ui_no_metadata","ce-text-ui_no_metadata","ce-text-title-unavailable-us","ce-text-title-unavailable-ca","ce-text-title-unavailable-mx","ce-text-title-unavailable-br","ce-text-title-unavailable-uk","ce-text-title-unavailable-ie","ce-text-title-unavailable-dk","ce-text-title-unavailable-fi","ce-text-title-unavailable-no","ce-text-title-unavailable-se","ce-text-title-unavailable-nl","ce-text-title-unavailable-fr","ce-text-title-unavailable-de","ce-text-title-unavailable-ch","ce-text-title-unavailable-at","ce-text-title-unavailable-be","ce-text-title-unavailable-lu","ce-text-title-unavailable","ce-head-streaming_error","ce-head-pause_timeout","ce-text-pause_timeout","ce-head-internet_connection_problem","ce-text-internet_connection_problem-phone","ce-text-internet_connection_problem","ce-head-should_signout_and_signin","ce-text-should_signout_and_signin","ce-head-multiple_tabs","ce-text-multiple_tabs","ce-head-storage_quota","ce-text-storage_quota","ce-head-plugin_error","ce-text-plugin_error","ce-text-please_call-phone","ce-text-please_call","ce-head-no_cdm","ce-text-no_cdm","ce-head-should_upgrade","ce-text-should_upgrade","ce-head-admin_mode_not_supported","ce-text-admin_mode_not_supported","ce-head-private_mode","ce-text-private_mode","ce-error-dialog-button-ok","ce-incognito-private-menu","ce-incognito-private-on","ce-incognito-private-off","ce-incognito-anonymous-menu","ce-incognito-anonymous-on","ce-incognito-anonymous-off","ce-incognito-history-menu","ce-incognito-history-save","ce-incognito-history-hide","ce-incognito-api-error-title","ce-incognito-api-error-text","ce-dontshare-prompt","ce-dontshare-unshared","ce-social-error","ce-report-error","ce-report-problem-menu","ce-report-problem-title","ce-report-problem-subtext","ce-report-problem-label-problem-title","ce-report-problem-label-problem-subtext","ce-report-problem-video-problem-title","ce-report-problem-video-problem-subtext","ce-report-problem-sound-problem-title","ce-report-problem-sound-problem-subtext","ce-report-problem-subtitle-problem-title","ce-report-problem-subtitle-problem-subtext","ce-report-problem-buffering-problem-title","ce-report-problem-buffering-problem-subtext","ce-report-problem-details-text","ce-report-problem-details-optional","ce-report-problem-submit","ce-report-confirmation-title","ce-report-confirmation-subtext","ce-report-buffering-confirmation-subtext","ce-report-buffering-confirmation-link","ce-report-confirmation-finish"]},{bundle:"discovery/akira/Mdx",ids:["mdx-description-loading","mdx-description-playing","mdx-description-paused","mdx-description-seeking","mdx-description-time-hours-minutes-seconds","mdx-description-time-hours-minutes","mdx-description-time-hours-seconds","mdx-description-time-hours","mdx-description-time-minutes-seconds","mdx-description-time-minutes","mdx-description-time-seconds","mdx-error-dialog-header","mdx-error-dialog-title","mdx-error-device-lost-title","mdx-error-device-lost-text","mdx-error-plugin-crash-text","mdx-back-to-browse","mdx-controls-audio","mdx-controls-timed-text","mdx-play-on","mdx-device-name","mdx-computer-name"]}]},module.exports=Player;


});


Requireify.register('js/akira/page/audioDescription.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),SortableGallery=require("../layouts/sortableGallery.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),Sortable=require("../../reactMixins/sortable");module.exports=React.createClass({displayName:"exports",statics:{getPaths:function(e,t,r){var o=["assistiveAudio"];return SortableGallery.getPaths(e,t,{sortOrder:r.sortOrder}).map(function(e){return o.concat(e)})}},mixins:[IsomorphicContext,Router.State],childContextTypes:{audioDescription:React.PropTypes.bool},getChildContext:function(){return{audioDescription:!0}},render:function(){var e=["assistiveAudio"],t=this.props.model.pathEvaluator.bind(e),r=Sortable.getSortOrder(this.getQuery());return React.createElement(SortableGallery,React.__spread({},this.props,{keyPrefix:"assistiveAudio",sortOrder:r,model:t,prefix:e,pqls:SortableGallery.getPaths(this.getContext(),null,{sortOrder:r})}))}});


});


Requireify.register('js/utils/player/playerMetadata.js', function(require, requireAsync, module, exports) {


"use strict";function makeEpisodeObj(e,t,a){var n={},r=e.bind(["ancestor","seasonList",t,"episodes",a]),s=r.getValueSync(["summary"]);n.id=n.episodeId=s.id,n.runtime=r.getValueSync(["runtime"]),n.creditsOffset=r.getValueSync(["creditsOffset"]),n.synopsis=r.getValueSync(["regularSynopsis"]),n.title=r.getValueSync(["title"]),n.seq=r.getValueSync(["episodeNumber"]),n.autoplayable=r.getValueSync(["autoplayEnabled"]),n.hd=r.getValueSync(["hd"]),n.requiresPin=r.getValueSync(["pinProtected"]),s.notStreaming&&(n.notStreaming=!0);var o=r.getValueSync(["interestingMoment","_2541x1080",_imageExtension]);return n.stills=[],o&&n.stills.push({h:o.height,w:o.width,url:o.url}),n}function makeSeasonObj(e,t){var a,n={},r=e.bind(["ancestor","seasonList",t]),s=r.getValueSync(["summary"]);n.id=s.id,n.title=s.name,n.year=r.getValueSync(["releaseYear"]),n.seq=r.getValueSync(["seasonNumber"]);for(var o=[],i=0;i<s.length;i++)a=makeEpisodeObj(e,t,i),a.notStreaming||o.push(a);return n.episodes=o,n}function makeVideoDataGetterObs(e,t,a){var n=[t._path.concat(["boxarts","_2541x1080",_imageExtension]),t._path.concat(["titleTreatment","_612x260",_imageExtension]),t._path.concat(["interestingMoment","_2541x1080",_imageExtension]),t._path.concat(["ancestor",["title","maturity","regularSynopsis","summary","pinProtected"]]),t._path.concat(["ancestor","boxarts","_2541x1080",_imageExtension]),t._path.concat(["ancestor","seasonList","summary"]),t._path.concat(["ancestor","seasonList",{to:BIG_NUMBER},["summary","releaseYear","seasonNumber"]]),t._path.concat(["ancestor","seasonList",{to:BIG_NUMBER},"episodes","summary"]),t._path.concat(["ancestor","seasonList",{to:BIG_NUMBER},"episodes",{to:BIG_NUMBER},episodeFieldsArray]),t._path.concat(["ancestor","seasonList",{to:BIG_NUMBER},"episodes",{to:BIG_NUMBER},"interestingMoment","_2541x1080",_imageExtension]),t._path.concat([["current","creditsOffset","info","maturity","runtime","summary","regularSynopsis","title","releaseYear","autoplayEnabled","hd","pinProtected"]])];return a&&a.length>0&&(n=n.concat(a)),PathEvaluatorUtils.toObservable(e.get.apply(e,n))}function getUnfetchedSeasonPaths(e){var t=[],a=e.getValueSync(["summary"]);if(a&&("show"===a.type||"episode"===a.type)){var n=e.bind(["ancestor"]),r=n.getValueSync(["seasonList","summary"]).length;r>BIG_NUMBER&&t.push(n._path.concat(["seasonList",{from:BIG_NUMBER,to:r},["summary","releaseYear","seasonNumber"]]),n._path.concat(["seasonList",{from:BIG_NUMBER,to:r},"episodes","summary"]),n._path.concat(["seasonList",{from:BIG_NUMBER,to:r},"episodes",{to:BIG_NUMBER},episodeFieldsArray]),n._path.concat(["seasonList",{from:BIG_NUMBER,to:r},"episodes",{to:BIG_NUMBER},"interestingMoment","_2541x1080",_imageExtension]))}return t}function getUnfetchedEpisodesPaths(e){var t=e.getValueSync(["summary"]),a=[];if(t&&("show"===t.type||"episode"===t.type))for(var n=e.bind(["ancestor"]),r=n.getValueSync(["seasonList","summary"]).length,s=0;r>s;s++){var o=n.bind(["seasonList",s]),i=o.getValueSync(["episodes","summary"]);i.length>BIG_NUMBER&&a.push(o._path.concat(["episodes",{from:BIG_NUMBER,to:i.length},episodeFieldsArray]),o._path.concat(["episodes",{from:BIG_NUMBER,to:i.length},"interestingMoment","_2541x1080",_imageExtension]))}return a}function getCadmiumContentType(e){var t=e&&e.type&&e.type;return"show"===t||"episode"===t||"series"===t||"season"===t?"show":"movie"}function makeVideoMetadataObj(e){var t=e.getValueSync(["summary"]),a=getCadmiumContentType(t),n=e.bind(["ancestor"]),r={type:a};if("show"===a){for(var s=[],o=0;o<n.getValueSync(["seasonList","summary"]).length;o++)s.push(makeSeasonObj(e,o));r.seasons=s}else{r.runtime=e.getValueSync(["runtime"]),r.creditsOffset=e.getValueSync(["creditsOffset"]),r.year=e.getValueSync(["releaseYear"]),r.autoplayable=e.getValueSync(["autoplayEnabled"]),r.hd=e.getValueSync(["hd"]);var i=e.getValueSync(["interestingMoment","_2541x1080",_imageExtension]);r.stills=[],i&&r.stills.push({h:i.height,w:i.width,url:i.url})}var u="movie"===a?e:n,l=u.getValueSync(["maturity"]),c=u.getValueSync(["boxarts","_2541x1080",_imageExtension]),m=u.getValueSync(["titleTreatment","_612x260",_imageExtension]);return r.id=u.getValueSync(["summary"]).id,r.title=u.getValueSync(["title"]),r.synopsis=u.getValueSync(["regularSynopsis"]),r.rating=l&&l.rating&&l.rating.value,r.requiresPin=u.getValueSync(["pinProtected"]),r.artwork=[{url:c&&c.url,w:2541,h:1080}],r.titleTreatment=[{url:m&&m.url,w:612,h:260}],r}var Rx=require("../../common/nfRx"),PathEvaluatorUtils=require("../../utils/pathEvaluatorUtils"),ImageExt=require("../../common/imageExtension.js"),XHR=require("../XHR"),BIG_NUMBER=50,episodeFieldsArray=["creditsOffset","info","maturity","runtime","summary","regularSynopsis","title","episodeNumber","autoplayEnabled","hd","pinProtected"],_imageExtension;module.exports={getMetadata:function(e,t){var a=t.bind(["videos",parseInt(e)]);_imageExtension=ImageExt.canUseWebPFromContext()?"webp":"jpg";var n=makeVideoDataGetterObs(t,a,[]).flatMap(function(){var e=getUnfetchedSeasonPaths(a);return e.length>0?PathEvaluatorUtils.toObservable(t.get.apply(t,e)):Rx.Observable.return(null)}).flatMap(function(){var e=getUnfetchedEpisodesPaths(a);return e.length>0?PathEvaluatorUtils.toObservable(t.get.apply(t,e)):Rx.Observable.return(null)}).map(function(){var e=makeVideoMetadataObj(a);return{version:"2.0",video:e}});return n},getMetadataCall:function(e){return _imageExtension=ImageExt.canUseWebPFromContext()?"webp":"jpg",Rx.Observable.create(function(t){return XHR.request({method:"get",service:"api",data:{movieid:e,imageFormat:_imageExtension},resource:"/metadata",authorize:!1}).subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})})},getCharacterMetadata:function(e,t){var a=10,n=t.bind(["characters",e,"gallery",{to:a}]);_imageExtension=ImageExt.canUseWebPFromContext()?"webp":"jpg";var r=makeVideoDataGetterObs(t,n,[["characters",e,"gallery","summary"],["characters",e,"current","ancestor"]]).flatMap(function(){var n=t.getValueSync(["characters",e,"gallery","summary"]).length;if(n>a){var r=t.bind(["characters",e,"gallery",{from:a,to:n}]);return makeVideoDataGetterObs(t,r,[["characters",e,"gallery","summary"]])}return Rx.Observable.return(null)}).flatMap(function(){for(var a=[],n=t.getValueSync(["characters",e,"gallery","summary"]).length,r=0;n>r;r++){var s=t.bind(["characters",e,"gallery",r]);a=a.concat(getUnfetchedSeasonPaths(s))}return a.length>0?PathEvaluatorUtils.toObservable(t.get.apply(t,a)):Rx.Observable.return(null)}).flatMap(function(){for(var a=[],n=t.getValueSync(["characters",e,"gallery","summary"]).length,r=0;n>r;r++){var s=t.bind(["characters",e,"gallery",r]);a=a.concat(getUnfetchedEpisodesPaths(s))}return a.length>0?PathEvaluatorUtils.toObservable(t.get.apply(t,a)):Rx.Observable.return(null)}).map(function(){for(var a=[],n=t.getValueSync(["characters",e,"gallery","summary"]).length,r=0;n>r;r++)a.push(makeVideoMetadataObj(t.bind(["characters",e,"gallery",r])));var s=makeVideoMetadataObj(t.bind(["characters",e,"current"]));return s.character=a,{version:"2.0",video:s}});return r},getCharacterMetadataCall:function(e){return _imageExtension=ImageExt.canUseWebPFromContext()?"webp":"jpg",Rx.Observable.create(function(t){return XHR.request({method:"get",service:"api",data:{characterId:e,imageFormat:_imageExtension},resource:"/metadata",authorize:!1}).subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})})}};


});


Requireify.register('js/akira/page/kidsPlayer.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),Klayer=require("../../kidsPlayer/player/index.js"),TitleCard=require("../components/title/titleCard.jsx"),EventBus=require("../../reactMixins/eventBus"),LolomoRefresh=require("../../falkorClient/lolomoRefresh"),I18N=require("../../reactMixins/i18nWithDeps"),InitParams=require("../../reactMixins/player/initParams"),fastProperty=require("../../reactMixins/fastProperty"),PopState=require("../../reactMixins/popstate"),FalkorFetch=require("../../reactMixins/falkor-fetch"),contextData=require("../../utils/contextData"),Metadata=require("../../utils/player/playerMetadata"),PlayerAssets=require("../../utils/player/playerAssets"),Rx=require("nf-rx");require("../../common/nfRx");var disposed,prefetchStrategies={defaultStrategy:{bobs:!0,jawBones:!0}},noop=function(){},getPaths=function(e,t,a){return TitleCard.getPaths(e,t,a)},getCharacterPaths=function(){return[["summary"]]},KidsPlayer=React.createClass({displayName:"KidsPlayer",statics:{getPaths:getPaths,getCharacterPaths:getCharacterPaths,prefetchStrategies:prefetchStrategies,defaultStrategy:prefetchStrategies.defaultStrategy},mixins:[I18N,InitParams,fastProperty,PopState,FalkorFetch,Router.State,Router.Navigation],getInitialState:function(){return{assetsLoading:!1,playerError:!1}},setIsInteractive:function(e){EventBus.emit("playback:start",{reason:e.interactiveReason}),EventBus.emit("app:interactive")},getModel:function(e){return e=e||this.videoId||this.getParams().id||this.getParams().characterId,this.props.model.pathEvaluator&&this.getParams().characterId?this.props.model.pathEvaluator.bind(["characters",e]):this.props.model.pathEvaluator&&e?this.props.model.pathEvaluator.bind(["videos",e]):void 0},onPlayerInitError:function(){this.setState({playerError:!0}),this.setIsInteractive({interactiveReason:"failed"})},componentWillMount:function(){EventBus.emit("app:pageChange",this.props)},componentDidMount:function(){var e;disposed=new Rx.Subject,this.videoId=this.getParams().id||this.getParams().characterId,this.episodeId=this.getQuery().episodeId,window.addEventListener("beforeunload",this.unloadKlayer);try{window.netflix.player&&window.netflix.player.__kidsPlayer__?this.initPlayer([this.getInitParams()]):(e=contextData.getData("player","config")||{ui:{assets:{}}},this.initPlayer([this.getInitParams(),PlayerAssets.getCorePlayerJS(e.ui.assets.js).take(1)]))}catch(t){this.onPlayerInitError(t)}},componentWillUnmount:function(){window.removeEventListener("beforeunload",this.unloadKlayer),this.unloadKlayer()},unloadKlayer:function(){disposed&&disposed.onNext(),this.klayer&&this.klayer.destroy(),this.invalidateFalkorCache(),EventBus.emit("playback:end")},initPlayer:function(e){var t=this,a={error:contextData.getData("player","config").ui.assets.i18n};Rx.Observable.zip(e,function(e){return{initParams:e}}).takeUntil(disposed).doAction(function(e){window.netflix.player.__kidsPlayer__=!0,t.klayer=Klayer.create(e.initParams,t.refs.playerContainer.getDOMNode(),a,t.updateHistory,t.getMetadataObservable,t.onPlayerInitError)}).subscribe(noop,this.onPlayerInitError,noop)},updateHistory:function(e,t,a){var r,i=this.getQuery();t&&(i.trkid=t),a?i.episodeId=a:delete i.episodeId,e||(this.getParams().characterId?r=this.getParams().characterId:e=this.getParams().id),r?this.replaceWith("watchCharacter",{characterId:r},i):this.replaceWith("watchNow",{id:e},i)},getMetadataObservable:function(){var e,t=this.getParams(),a=this.props.model.pathEvaluator,r=t.characterId,i=t.id;return e=r?Metadata.getCharacterMetadataCall(r,a):Metadata.getMetadataCall(i,a),e.takeUntil(disposed).take(1)},invalidateSeasonCurrent:function(){var e=this.getModel(),t=e.getValueSync(["seasonCount"]),a=t&&e.bind(["seasonList"]);a&&a.getBoundValue()&&a.invalidate([{to:t-1},"episodes","current"]).subscribe()},invalidateFalkorCache:function(){var e,t=this.getModel(),a=!!this.episodeId;a?(e=this.getModel(this.episodeId),t.invalidate(["current"]).subscribe(),e&&e.getBoundValue()&&e.invalidate(["bookmarkPosition"]).subscribe(),this.invalidateSeasonCurrent()):t.invalidate(["bookmarkPosition"]).subscribe(),LolomoRefresh.refreshList(this.props.model.pathEvaluator,"continueWatching")},render:function(){return React.createElement("div",{id:"playerWrapper"},this.state.playerError?this.renderError():React.createElement("div",{ref:"playerContainer",id:"playerContainer",className:"kids-player"}))},renderError:function(){var e=contextData.getData("player","config").ui.assets.i18n;return React.createElement("div",{className:"playerError"},this.getString(e,"ce-text-default"))}});module.exports=KidsPlayer;


});


Requireify.register('js/akira/page/watch.jsx', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),Router=require("react-router"),Player=require("./player.jsx"),KidsPlayer=require("./kidsPlayer.jsx"),IsomorphicContext=require("../../reactMixins/isomorphicContextWithDeps"),context=require("../../utils/contextData"),url=require("../../utils/urls"),PlayerFeatureDetection=require("../../utils/player/playerFeatureDetection"),_=require("lodash"),PLAYER_COMPONENTS={GENERAL_AUDIENCE:"ga",KIDS:"kids"};module.exports=React.createClass({displayName:"exports",mixins:[Router.State,IsomorphicContext],getInitialState:function(){return{playerComponent:null}},redirect:function(){var e=this.getQuery();window.location.replace(url.getMerchWebPlayerUrl(_.get(this.getParams(),"id"),_.get(e,"trackId"),_.get(e,"tctx")).toString())},setPlayerComponentState:function(){var e;e=context.getData("player","kidsPlayer")?PLAYER_COMPONENTS.KIDS:PLAYER_COMPONENTS.GENERAL_AUDIENCE,this.setState({playerComponent:e})},componentDidMount:function(){var e=this;PlayerFeatureDetection.hasRequiredComponentsForPlayback().doAction(function(t){t?e.setPlayerComponentState():e.redirect()}).subscribe(_.noop,function(){})},render:function(){switch(this.state.playerComponent){case PLAYER_COMPONENTS.GENERAL_AUDIENCE:return React.createElement(Player,React.__spread({},this.props));case PLAYER_COMPONENTS.KIDS:return React.createElement(KidsPlayer,React.__spread({},this.props));default:return null}}});


});


Requireify.register('js/akira/app.jsx', function(require, requireAsync, module, exports) {


"use strict";function createRouteTable(){var e=Router.Route;return React.createElement(e,{name:"app",handler:BaseRouteHandler},React.createElement(e,{name:"akira",handler:AkiraLayout,ignoreScrollBehavior:!0},React.createElement(e,{name:"home",path:URLs.page.app,handler:Home}),React.createElement(e,{name:"title",path:URLs.paths.title+"/:id",handler:Title}),React.createElement(e,{name:"addToMyList",path:URLs.paths.addToMyList+"/:id",handler:AddToMyList}),React.createElement(e,{name:"genre",path:URLs.paths.genre+"/:id",handler:Genre}),React.createElement(e,{name:"similars",path:URLs.paths.similars+"/:id",handler:Similars}),React.createElement(e,{name:"genreNewRelease",path:URLs.paths.genrenewrelease+"/:id",handler:GenreNewRelease}),React.createElement(e,{name:"hd",path:URLs.paths.hd+"/:id",handler:HD}),React.createElement(e,{name:"person",path:URLs.paths.person+"/:id",handler:Person}),React.createElement(e,{name:"myList",path:URLs.paths.mylist,handler:MyList}),React.createElement(e,{name:"watchAgain",path:URLs.paths.watchagain,handler:WatchAgain}),React.createElement(e,{name:"recentlyAdded",path:URLs.paths.recentlyadded,handler:RecentlyAdded}),React.createElement(e,{name:"newRelease",path:URLs.paths.newrelease,handler:NewRelease}),React.createElement(e,{name:"newReleases",path:URLs.paths.newreleases,handler:NewRelease}),React.createElement(e,{name:"newArrivals",path:URLs.paths.newarrivals,handler:NewArrivals}),React.createElement(e,{name:"subtitle",path:URLs.paths.subtitle+"/:id",handler:Subtitle}),React.createElement(e,{name:"subtitles",path:URLs.paths.subtitles+"/:id",handler:Subtitle}),React.createElement(e,{name:"audioDescription",path:URLs.paths.audioDescription,handler:AudioDescription}),React.createElement(e,{name:"search",path:URLs.paths.search+"/:term",handler:Search}),React.createElement(e,{name:"searchPerson",path:URLs.paths.search+"/:term/person/:personId",handler:Search}),React.createElement(e,{name:"searchSuggestion",path:URLs.paths.search+"/:term/suggestion/:suggestionId",handler:Search}),React.createElement(e,{name:"searchDVD",path:URLs.paths.search+"/:term/dvd/:dvdId",handler:Search})),React.createElement(e,{name:"playback",handler:Player,path:URLs.paths.play+"/:id"}),React.createElement(e,{name:"watchNow",handler:Watch,path:URLs.paths.watch+"/:id"}),React.createElement(e,{name:"watchCharacter",handler:Watch,path:URLs.paths.watchCharacter+"/:characterId"}))}function getRouteTable(){return routeTable||(routeTable=createRouteTable()),routeTable}function App(e){this.metadata=e,this.renderedView=null}var React=require("react"),Router=require("react-router"),URLs=require("../utils/urls"),AkiraLayout=require("./layouts/akiraLayout.jsx"),BaseRouteHandler=require("./baseRouteHandler.jsx"),Home=require("./page/home.jsx"),Genre=require("./page/genre.jsx"),Person=require("./page/person.jsx"),MyList=require("./page/myList.jsx"),Title=require("./page/title.jsx"),AddToMyList=require("./page/addToMyList.jsx"),Subtitle=require("./page/subtitle.jsx"),NewRelease=require("./page/newRelease.jsx"),RecentlyAdded=require("./page/recentlyAdded.jsx"),WatchAgain=require("./page/watchAgain.jsx"),Similars=require("./page/similars.jsx"),GenreNewRelease=require("./page/genreNewRelease.jsx"),NewArrivals=require("./page/newArrivals.jsx"),HD=require("./page/HD.jsx"),Search=require("./page/searchRoute.jsx"),Player=require("./page/player.jsx"),AudioDescription=require("./page/audioDescription.jsx"),Watch=require("./page/watch.jsx"),routeTable=null;App.prototype={serverRender:function(e,a,t){var r=this;Router.run(getRouteTable(),e.path(),function(e){try{return t(null,React.renderToString(React.createElement(e,{renderSource:"server",model:r.metadata})))}catch(a){return t(a,null)}})},clientRender:function(e){var a=this;Router.run(getRouteTable(),Router.HistoryLocation,function(t){try{e(null,React.createElement(t,{renderSource:"client",model:a.metadata}))}catch(r){e(r,null)}})},refresh:function(){this.renderedView.isMounted()&&this.renderedView.forceUpdate()},setRenderedView:function(e){this.renderedView=e}},module.exports=App;


});


Requireify.register('js/falkorClient/PathEvaluator.js', function(require, requireAsync, module, exports) {


"use strict";function PathEvaluator(e,t,_,r,n,i,o){if(null!=_&&"object"==typeof _&&(this.loader=_),"number"!=typeof e)throw new Error("PathEvaluator: maxSize must be a number.");"number"==typeof t?(t=parseFloat(t),t>1&&(t/=e)):t=.75,this._root=this,this._batches=new BatchRequestQueue(this),this._maxSize=e,this._collectRatio=t,this._cache=r||{},this._path=Array.isArray(n)?n:[],this._now="function"==typeof i?i:defaultNow,this._expired=[],this._errorSelector="function"==typeof o?o:identity}function safeValue(e){return e&&"error"===e.$type?(EventBus.emit("falkorFetch:error",{message:e.message,pql:e.pql}),Object.create(e)):e}function noop(){}function defaultNow(){return Date.now()}function identity(e){return e}function get(){var e,t=-1,_=arguments.length;for(e=new Array(_);++t<_;)e[t]=arguments[t];if(this._lazy)return getPathsAsObservable.call(this,e);var r=e[e.length-3],n=e[e.length-2],i=e[e.length-1];return void 0!==r?(e=e.slice(0,-3),getPaths.call(this,e,r,n,i)):getPathsAsPromises.call(this,e)}function set(){var e,t=-1,_=arguments.length;for(e=new Array(_);++t<_;)e[t]=arguments[t];if(this._lazy)return this._streaming?setPathsAsObservable.call(this,e):setPBFAsObservable.call(this,e[0]);var r=e[e.length-3],n=e[e.length-2],i=e[e.length-1];return void 0!==r?(e=e.slice(0,-3),this._streaming?setPaths.call(this,e,r,n,i):setPBF.call(this,e[0],r,n,i)):this._streaming?setPathsAsPromises.call(this,e):setPBFAsPromises.call(this,e[0])}function invalidate(){var e,t=-1,_=arguments.length;for(e=new Array(_);++t<_;)e[t]=arguments[t];if(this._lazy)return invalidatePathsAsObservable.call(this,e);var r=e[e.length-3],n=e[e.length-2],i=e[e.length-1];return void 0!==r?(e=e.slice(0,-3),invalidatePaths.call(this,e,r,n,i)):invalidatePathsAsPromise.call(this,e)}function call(){var e,t=-1,_=arguments.length;for(e=new Array(_);++t<_;)e[t]=arguments[t];if(this._lazy)return callPathAsObservable.apply(this,e);var r=e[e.length-3],n=e[e.length-2],i=e[e.length-1];return void 0!==r?(e=e.slice(0,-3),callPath.call(this,e,r,n,i)):callPathAsPromise.call(this,e)}function bind(e){if(!Array.isArray(e))throw new Error("PathEvaluator.bind must be called with an Array path.");var t=Object.create(this);return t._path=(this._path||(this._path=[])).concat(e),t.__context=void 0,t}function hardBind(e){if(!Array.isArray(e))throw new Error("PathEvaluator.hardBind must be called with an Array path.");var t=this._getPath(e.concat(null)),_=t.value,r=Object.create(this);if(_){r._path=t.optimized;var n=_.__refsLength||0;_["__ref"+n]=r,_.__refsLength=n+1,r.__refIndex=n,r.__context=_}else r._path=(this._path||(this._path=[])).concat(e),r.__context=null;return r}function deferBind(e){if(!Array.isArray(e))throw new Error("PathEvaluator.deferBind must be called with an Array path.");var t=this;return Observable.create(function(_){return _.onNext(t.hardBind(e)),_.onCompleted(),noop})}function getContext(){var e,t=this,_=this.__context;if(null==_||null==_.__parent){if(e=this._getPath([null]),e.path=e.optimized,e.optimized=void 0,void 0!==_&&(null===_||null==_.__parent)&&void 0!==(_=e.context)){this._path=e.path||[];var r=_.__refsLength||0;_["__ref"+r]=t,_.__refsLength=r+1,t.__refIndex=r,t.__context=_}}else e={path:this._path||(this._path=[]),value:_};return e}function getPath(e,t,_,r){var n,i,o,l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A=this,z=A._root;r=r||A._path,e=e||[],t=t||A._cache,_=_||A.__context||(e=r.concat(e))&&t,i=e,d={path:[],optimized:[]},u=[],h=[],c=[],l=0,a=0,f=i.length-1,g=t,x=_,b=x,m=b,v=d.path,p=d.optimized,y=-1,s=0,n=A._expired||(A._expired=[]),u[-1]=i,h[-1]=0;e:for(;;){for(;f>l;++l)if(o=i[l],null!=o&&"object"==typeof o&&(Array.isArray(o)?(o=o[o.index||(o.index=0)],null!=o&&"object"==typeof o&&(o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset)):o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset),null!=o){for(v[v.length=l]=o,p[p.length=l+a]=o,b=(b=x[o])&&(null==($=b.$expires)||1===$||0!==$&&$>Date.now()?b:void 0);Array.isArray(m="sentinel"===(j=b&&b.$type)?b.value:b);){var L=z.__head,P=z.__tail;if(b&&1!==b.$expires){var O=b.__next,w=b.__prev;b!==L&&(O&&null!=O&&"object"==typeof O&&(O.__prev=w),w&&null!=w&&"object"==typeof w&&(w.__next=O),(O=L)&&null!=O&&"object"==typeof O&&(L.__prev=b),z.__head=z.__next=L=b,null!=L&&"object"==typeof L&&(L.__next=O,L.__prev=void 0)),(null==P||b===P)&&(z.__tail=z.__prev=P=w||b)}if(void 0!==(b=b.__context)){for(var k=-1,E=p.length=m.length||0;++k<E;)p[k]=m[k];a=E-l-1}else{x=g,u[y]=i,h[y++]=l,i=m,f=i.length-1,a=0,l=0;t:for(;;){for(;f>l;++l)if(o=i[l],null!=o){for(p[p.length=l+a]=o,b=(b=x[o])&&(null==($=b.$expires)||1===$||0!==$&&$>Date.now()?b:void 0);Array.isArray(m="sentinel"===(j=b&&b.$type)?b.value:b);){var I=z.__head,R=z.__tail;if(b&&1!==b.$expires){var M=b.__next,U=b.__prev;b!==I&&(M&&null!=M&&"object"==typeof M&&(M.__prev=U),U&&null!=U&&"object"==typeof U&&(U.__next=M),(M=I)&&null!=M&&"object"==typeof M&&(I.__prev=b),z.__head=z.__next=I=b,null!=I&&"object"==typeof I&&(I.__next=M,I.__prev=void 0)),(null==R||b===R)&&(z.__tail=z.__prev=R=U||b)}if(void 0===(b=b.__context)){x=g,u[y]=i,h[y++]=l,i=m,f=i.length-1,a=0,l=0;continue t}for(var N=-1,D=p.length=m.length||0;++N<D;)p[N]=m[N];a=D-l-1}if(null==b||void 0!==j){p.length=l+a+1,l=h[--y],a=f-l-1,i=u[y],f=i.length-1,v[v.length]=null;break e}x=b}if(l===f){if(o=i[l],null!=o&&(p[p.length=l+a]=o,b=(b=x[o])&&(null==($=b.$expires)||1===$||0!==$&&$>Date.now()?b:void 0)),null==b||"error"===j){p.length=l+a+1,l=h[--y],a=f-l-1,i=u[y],f=i.length-1,v[v.length]=null;break e}var B;if(void 0===(B=i.__container||i).__context){var S=b.__refsLength||0;b["__ref"+S]=B,b.__refsLength=S+1,B.__refIndex=S,B.__context=b}do i=u[--y],l=h[y],a=f-l,f=i.length-1;while(y>-1&&l===f);if(f>l)for(;Array.isArray(m="sentinel"===(j=b&&b.$type)?b.value:b);){var q=z.__head,C=z.__tail;if(b&&1!==b.$expires){var T=b.__next,F=b.__prev;b!==q&&(T&&null!=T&&"object"==typeof T&&(T.__prev=F),F&&null!=F&&"object"==typeof F&&(F.__next=T),(T=q)&&null!=T&&"object"==typeof T&&(q.__prev=b),z.__head=z.__next=q=b,null!=q&&"object"==typeof q&&(q.__next=T,q.__prev=void 0)),(null==C||b===C)&&(z.__tail=z.__prev=C=F||b)}if(void 0===(b=b.__context)){x=g,u[y]=i,h[y++]=l,i=m,f=i.length-1,a=0,l=0;continue t}for(var W=-1,G=p.length=m.length||0;++W<G;)p[W]=m[W];a=G-l-1}if(y>-1){l+=1,x=b;continue t}}break t}}}if(null==b||void 0!==j){p.length=l+a+1;break e}x=b}if(l===f){if(o=i[l],null!=o&&"object"==typeof o&&(Array.isArray(o)?(o=o[o.index||(o.index=0)],null!=o&&"object"==typeof o&&(o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset)):o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset),v[v.length=l]=o,null!=o&&(p[p.length=l+a]=o,b=x[o]),null!=b&&!(null==($=b.$expires)||1===$||0!==$&&$>Date.now())){if(void 0===b.__invalidated){b.__invalidated=!0,b.$expires=0,n[n.length]=b;var Q=z.__head,V=z.__tail;if(null!=b&&"object"==typeof b){var K=b.__next,J=b.__prev;K&&null!=K&&"object"==typeof K&&(K.__prev=J),J&&null!=J&&"object"==typeof J&&(J.__next=K),b===Q&&(z.__head=z.__next=Q=K),b===V&&(z.__tail=z.__prev=V=J),b.__next=b.__prev=void 0}}b=null}m="sentinel"===(j=b&&b.$type)?b.value:b}break e}if(null==b){for(var Z,H=-1,X=-1,Y=p.length,et=0,tt=new Array(Y+f-l);++H<Y;)Z=p[H],null!=Z?tt[++X]=Z:--et;for(H=l;++H<=f;)Z=i[H],null!=Z?tt[++X]=Z:--et;tt.length+=et,d.optimized=tt,d.value=void 0}else d.value=m;return d}function getPaths(e,t,_,r,n,i,o){var l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A,z,L,P,O,w,k,E,I,R,M,U,N,D,B,S,q,C,T,F,W,G,Q,V,K,J=this,Z=J._root;for(y=e,l=J._connected,a=J._materialized,f=J._streaming,s=J._refreshing,g=o||J._path,v=y.contexts||(y.contexts=[]),p=y.messages||(y.messages=[]),q=y.batchedPathMaps||(y.batchedPathMaps=[]),E=y.originalMisses||(y.originalMisses=[]),R=y.optimizedMisses||(y.optimizedMisses=[]),u=y.errors||(y.errors=[]),M=y.refs||(y.refs=[]),N=y.crossed||(y.crossed=[]),U=y.cols||(y.cols=[]),w=y.pbv||(y.pbv={path:[],optimized:[]}),$=y.index||(y.index=0),A=y.length,S=y.batchedPathMap,V=y.value,K=V,n=n||J._cache,o=g,null==i&&null==(i=J.__context)&&(g.length>0?(w=J._getContext(),g=w.path,w.path=[],w.optimized=[],i=w.value||{}):i=n),C=n,T=i,F=T,W=F,P=w.path,O=w.optimized,D=-1,z=0,c=J._expired||(J._expired=[]),M[-1]=g,U[-1]=0,N[-1]=L=g,v[-1]=T;A>$;y.index=++$)for(g=y[$],b=g.index||(g.index=0),j=g.length-1,M[-1]=g,N=[],N[-1]=L;b>=0;){for(var H,X,Y;--b>=-1;)if(null!=(H=N[b])){for(X=-1,Y=H.length,O.length=Y,m=Y-(b+1);++X<Y;)O[X]=H[X];break}++b,U[D=-1]=b,T=v[b-1];e:for(;;){for(;j>b;++b)if(x=g[b],null!=x&&"object"==typeof x&&(Array.isArray(x)?(x=x[x.index||(x.index=0)],null!=x&&"object"==typeof x&&(x=void 0===x.offset&&(x.offset=x.from||(x.from=0))||x.offset)):x=void 0===x.offset&&(x.offset=x.from||(x.from=0))||x.offset),null!=x){for(P[P.length=b]=x,O[O.length=b+m]=x,F=(F=T[x])&&(null==(Q=F.$expires)||1===Q||0!==Q&&Q>Date.now()?F:void 0);Array.isArray(W="sentinel"===(G=F&&F.$type)?F.value:F);){var et=Z.__head,tt=Z.__tail;if(F&&1!==F.$expires){var _t=F.__next,rt=F.__prev;F!==et&&(_t&&null!=_t&&"object"==typeof _t&&(_t.__prev=rt),rt&&null!=rt&&"object"==typeof rt&&(rt.__next=_t),(_t=et)&&null!=_t&&"object"==typeof _t&&(et.__prev=F),Z.__head=Z.__next=et=F,null!=et&&"object"==typeof et&&(et.__next=_t,et.__prev=void 0)),(null==tt||F===tt)&&(Z.__tail=Z.__prev=tt=rt||F)}if(N[b]=W,void 0!==(F=F.__context)){for(var nt=-1,it=O.length=W.length||0;++nt<it;)O[nt]=W[nt];m=it-b-1}else{T=C,M[D]=g,U[D++]=b,g=W,j=g.length-1,m=0,b=0;t:for(;;){for(;j>b;++b)if(x=g[b],null!=x){for(O[O.length=b+m]=x,F=(F=T[x])&&(null==(Q=F.$expires)||1===Q||0!==Q&&Q>Date.now()?F:void 0);Array.isArray(W="sentinel"===(G=F&&F.$type)?F.value:F);){var ot=Z.__head,lt=Z.__tail;if(F&&1!==F.$expires){var at=F.__next,ft=F.__prev;F!==ot&&(at&&null!=at&&"object"==typeof at&&(at.__prev=ft),ft&&null!=ft&&"object"==typeof ft&&(ft.__next=at),(at=ot)&&null!=at&&"object"==typeof at&&(ot.__prev=F),Z.__head=Z.__next=ot=F,null!=ot&&"object"==typeof ot&&(ot.__next=at,ot.__prev=void 0)),(null==lt||F===lt)&&(Z.__tail=Z.__prev=lt=ft||F)}if(void 0===(F=F.__context)){T=C,M[D]=g,U[D++]=b,g=W,j=g.length-1,m=0,b=0;continue t}for(var st=-1,vt=O.length=W.length||0;++st<vt;)O[st]=W[st];m=vt-b-1}if(null==F||void 0!==G){O.length=b+m+1,b=U[--D],m=j-b-1,g=M[D],j=g.length-1,P[P.length]=null;break e}T=F}if(b===j){if(x=g[b],null!=x&&(O[O.length=b+m]=x,F=(F=T[x])&&(null==(Q=F.$expires)||1===Q||0!==Q&&Q>Date.now()?F:void 0)),null==F||"error"===G){O.length=b+m+1,b=U[--D],m=j-b-1,g=M[D],j=g.length-1,P[P.length]=null;break e}var pt;if(void 0===(pt=g.__container||g).__context){var dt=F.__refsLength||0;F["__ref"+dt]=pt,F.__refsLength=dt+1,pt.__refIndex=dt,pt.__context=F}do g=M[--D],b=U[D],m=j-b,j=g.length-1;while(D>-1&&b===j);if(j>b)for(;Array.isArray(W="sentinel"===(G=F&&F.$type)?F.value:F);){var ut=Z.__head,ht=Z.__tail;if(F&&1!==F.$expires){var ct=F.__next,yt=F.__prev;F!==ut&&(ct&&null!=ct&&"object"==typeof ct&&(ct.__prev=yt),yt&&null!=yt&&"object"==typeof yt&&(yt.__next=ct),(ct=ut)&&null!=ct&&"object"==typeof ct&&(ut.__prev=F),Z.__head=Z.__next=ut=F,null!=ut&&"object"==typeof ut&&(ut.__next=ct,ut.__prev=void 0)),(null==ht||F===ht)&&(Z.__tail=Z.__prev=ht=yt||F)}if(void 0===(F=F.__context)){T=C,M[D]=g,U[D++]=b,g=W,j=g.length-1,m=0,b=0;continue t}for(var gt=-1,xt=O.length=W.length||0;++gt<xt;)O[gt]=W[gt];m=xt-b-1}if(D>-1){b+=1,T=F;continue t}}break t}}}if(null==F||void 0!==G){O.length=b+m+1;break e}v[b]=T=F}if(b===j){if(x=g[b],null!=x&&"object"==typeof x&&(Array.isArray(x)?(x=x[x.index||(x.index=0)],null!=x&&"object"==typeof x&&(x=void 0===x.offset&&(x.offset=x.from||(x.from=0))||x.offset)):x=void 0===x.offset&&(x.offset=x.from||(x.from=0))||x.offset),P[P.length=b]=x,null!=x&&(O[O.length=b+m]=x,F=T[x]),null!=F&&!(null==(Q=F.$expires)||1===Q||0!==Q&&Q>Date.now())){if(void 0===F.__invalidated){F.__invalidated=!0,F.$expires=0,c[c.length]=F;var bt=Z.__head,mt=Z.__tail;if(null!=F&&"object"==typeof F){var jt=F.__next,$t=F.__prev;jt&&null!=jt&&"object"==typeof jt&&(jt.__prev=$t),$t&&null!=$t&&"object"==typeof $t&&($t.__next=jt),F===bt&&(Z.__head=Z.__next=bt=jt),F===mt&&(Z.__tail=Z.__prev=mt=$t),F.__next=F.__prev=void 0}}F=null}W="sentinel"===(G=F&&F.$type)?F.value:F}break e}if(null!=F){var At=Z.__head,zt=Z.__tail;if(F&&1!==F.$expires){var Lt=F.__next,Pt=F.__prev;F!==At&&(Lt&&null!=Lt&&"object"==typeof Lt&&(Lt.__prev=Pt),Pt&&null!=Pt&&"object"==typeof Pt&&(Pt.__next=Lt),(Lt=At)&&null!=Lt&&"object"==typeof Lt&&(At.__prev=F),Z.__head=Z.__next=At=F,null!=At&&"object"==typeof At&&(At.__next=Lt,At.__prev=void 0)),(null==zt||F===zt)&&(Z.__tail=Z.__prev=zt=Pt||F)}if(w.value=W,"error"===G){d=Array.isArray(w)?[]:null!=w&&"object"==typeof w?{}:w;var Ot,wt;for(var kt in w)if(w.hasOwnProperty(kt)){if(Ot=wt=w[kt],Array.isArray(Ot)){var Et=-1,It=Ot.length;for(wt=new Array(It);++Et<It;)wt[Et]=Ot[Et]}else null!=Ot&&"object"==typeof Ot&&(wt=Object.create(Ot));d[kt]=wt}u[u.length]=d}else if(f===!0&&void 0!==W||a===!0){B=Array.isArray(w)?[]:null!=w&&"object"==typeof w?{}:w;var Rt,Mt;for(var Ut in w)if(w.hasOwnProperty(Ut)){if(Rt=Mt=w[Ut],Array.isArray(Rt)){var Nt=-1,Dt=Rt.length;for(Mt=new Array(Dt);++Nt<Dt;)Mt[Nt]=Rt[Nt]}else null!=Rt&&"object"==typeof Rt&&(Mt=Object.create(Rt));B[Ut]=Mt}t(B)}s===!0&&(E[E.length]=o.concat(P),R[R.length]=O.concat())}else if(l===!1&&f===!0&&a===!0){for(var Bt,St=-1,qt=-1,Ct=P.length,Tt=0,Ft=new Array(Ct+j-b);++St<Ct;)Bt=P[St],null!=Bt?Ft[++qt]=Bt:--Tt;for(St=b;++St<=j;)Bt=g[St],null!=Bt?Ft[++qt]=Bt:--Tt;Ft.length+=Tt,k=Ft;for(var Wt,Gt=-1,Qt=-1,Vt=O.length,Kt=0,Jt=new Array(Vt+j-b);++Gt<Vt;)Wt=O[Gt],null!=Wt?Jt[++Qt]=Wt:--Kt;for(Gt=b;++Gt<=j;)Wt=g[Gt],null!=Wt?Jt[++Qt]=Wt:--Kt;Jt.length+=Kt,I=Jt,t({path:k,optimized:I,value:void 0})}else{for(var Zt,Ht=-1,Xt=-1,Yt=P.length,e_=0,t_=new Array(Yt+j-b);++Ht<Yt;)Zt=P[Ht],null!=Zt?t_[++Xt]=Zt:--e_;for(Ht=b;++Ht<=j;)Zt=g[Ht],null!=Zt?t_[++Xt]=Zt:--e_;t_.length+=e_,k=t_;for(var __,r_=-1,n_=-1,i_=O.length,o_=0,l_=new Array(i_+j-b);++r_<i_;)__=O[r_],null!=__?l_[++n_]=__:--o_;for(r_=b;++r_<=j;)__=g[r_],null!=__?l_[++n_]=__:--o_;l_.length+=o_,I=l_,E[E.length]=o.concat(k),R[R.length]=I.concat()}e:for(;b>=0;--b)if(x=g[b],null!=x&&"object"==typeof x){if(Array.isArray(x)){if(++x.index!==x.length)break e;if(x=x[x.index=0],null==x||"object"!=typeof x)continue e}if(!(++x.offset>(x.to||(x.to=x.from+(x.length||1)-1))))break e;x.offset=x.from}}return y.index=0,l===!0&&R.length>0?(h={onNext:t||noop,onError:_||noop,onCompleted:r||noop,originals:E.concat(),optimized:R.concat(),count:0,path:o,errors:[],streaming:f,materialized:a},s===!0&&f===!1&&t({paths:y,value:v[-1]}),J._batched===!0?J._batches.batch(E,s&&E||R,h):J._batches.flush(E,s&&E||R,h)):(f===!1&&t({paths:y,value:v[-1]}),0===u.length?r():1===u.length?_(u[0]):_({innerErrors:u}),Disposable.empty)}function setPath(e,t,_,r,n){var i,o,l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A,z,L,P,O,w,k,E,I,R=this,M=R._root,U=GENERATION_GENERATION++;Array.isArray(e)?(o=e,P=t,_=_||this._cache):(o=e.path,P=e.value,_=t||this._cache),n=n||R._path,o=o||[],_=_||R._cache,r=r||R.__context||(o=n.concat(o))&&_,o=o,u={path:[],optimized:[]},h=[],c=[],y=[],a=0,f=0,s=o.length-1,x=_,b=r,m=b,j=m,p=u.path,d=u.optimized,g=-1,v=0,i=R._expired||(R._expired=[]),h[-1]=o,c[-1]=0;e:for(;;){for(;s>a;++a)if(l=o[a],null!=l&&"object"==typeof l&&(Array.isArray(l)?(l=l[l.index||(l.index=0)],null!=l&&"object"==typeof l&&(l=void 0===l.offset&&(l.offset=l.from||(l.from=0))||l.offset)):l=void 0===l.offset&&(l.offset=l.from||(l.from=0))||l.offset),null!=l){for(p[p.length=a]=l,d[d.length=a+f]=l,m&&void 0!==!m.__generation&&(void 0===(b[l]||{$size:0}).__generation||m.__generation>(b[l]||{$size:0}).__generation)&&((b[l]||{$size:0}).__generation=m.__generation),b[l]=m=b[l]||{$size:0},m.__parent=b,m.__key=l;Array.isArray(j="sentinel"===($=m&&m.$type)?m.value:m);){var N=M.__head,D=M.__tail;if(m&&1!==m.$expires){var B=m.__next,S=m.__prev;m!==N&&(B&&null!=B&&"object"==typeof B&&(B.__prev=S),S&&null!=S&&"object"==typeof S&&(S.__next=B),(B=N)&&null!=B&&"object"==typeof B&&(N.__prev=m),M.__head=M.__next=N=m,null!=N&&"object"==typeof N&&(N.__next=B,N.__prev=void 0)),(null==D||m===D)&&(M.__tail=M.__prev=D=S||m)}if(void 0!==(m=m.__context)){for(var q=-1,C=d.length=j.length||0;++q<C;)d[q]=j[q];f=C-a-1}else{b=x,h[g]=o,c[g++]=a,o=j,s=o.length-1,f=0,a=0;t:for(;;){for(;s>a;++a)if(l=o[a],null!=l){for(m=b[l],d[d.length=a+f]=l;Array.isArray(j="sentinel"===($=m&&m.$type)?m.value:m);){var T=M.__head,F=M.__tail;if(m&&1!==m.$expires){var W=m.__next,G=m.__prev;m!==T&&(W&&null!=W&&"object"==typeof W&&(W.__prev=G),G&&null!=G&&"object"==typeof G&&(G.__next=W),(W=T)&&null!=W&&"object"==typeof W&&(T.__prev=m),M.__head=M.__next=T=m,null!=T&&"object"==typeof T&&(T.__next=W,T.__prev=void 0)),(null==F||m===F)&&(M.__tail=M.__prev=F=G||m)}if(void 0===(m=m.__context)){b=x,h[g]=o,c[g++]=a,o=j,s=o.length-1,f=0,a=0;continue t}for(var Q=-1,V=d.length=j.length||0;++Q<V;)d[Q]=j[Q];f=V-a-1}if(null==m||void 0!==$){d.length=a+f+1,a=c[--g],f=s-a-1,o=h[g],s=o.length-1,p[p.length]=null;break e}b=m}if(a===s){if(l=o[a],null!=l&&(d[d.length=a+f]=l,m&&void 0!==!m.__generation&&(void 0===(b[l]||{$size:0}).__generation||m.__generation>(b[l]||{$size:0}).__generation)&&((b[l]||{$size:0}).__generation=m.__generation),b[l]=m=b[l]||{$size:0},m.__parent=b,m.__key=l),null==m||"error"===$){d.length=a+f+1,a=c[--g],f=s-a-1,o=h[g],s=o.length-1,p[p.length]=null;break e}var K;if(void 0===(K=o.__container||o).__context){var J=m.__refsLength||0;m["__ref"+J]=K,m.__refsLength=J+1,K.__refIndex=J,K.__context=m}do o=h[--g],a=c[g],f=s-a,s=o.length-1;while(g>-1&&a===s);if(s>a)for(;Array.isArray(j="sentinel"===($=m&&m.$type)?m.value:m);){var Z=M.__head,H=M.__tail;if(m&&1!==m.$expires){var X=m.__next,Y=m.__prev;m!==Z&&(X&&null!=X&&"object"==typeof X&&(X.__prev=Y),Y&&null!=Y&&"object"==typeof Y&&(Y.__next=X),(X=Z)&&null!=X&&"object"==typeof X&&(Z.__prev=m),M.__head=M.__next=Z=m,null!=Z&&"object"==typeof Z&&(Z.__next=X,Z.__prev=void 0)),(null==H||m===H)&&(M.__tail=M.__prev=H=Y||m)}if(void 0===(m=m.__context)){b=x,h[g]=o,c[g++]=a,o=j,s=o.length-1,f=0,a=0;continue t}for(var et=-1,tt=d.length=j.length||0;++et<tt;)d[et]=j[et];f=tt-a-1}if(g>-1){a+=1,b=m;continue t}}break t}}}if(null==m||void 0!==$){d.length=a+f+1;break e}b=m}if(a===s){if(l=o[a],null!=l&&"object"==typeof l&&(Array.isArray(l)?(l=l[l.index||(l.index=0)],null!=l&&"object"==typeof l&&(l=void 0===l.offset&&(l.offset=l.from||(l.from=0))||l.offset)):l=void 0===l.offset&&(l.offset=l.from||(l.from=0))||l.offset),p[p.length=a]=l,null!=l){d[d.length=a+f]=l,m=b[l];var _t=0;if(null==P)O=P,k=0,w="primitive",I=void 0,E=void 0;else if(null==(E=P.$expires)||1===E||0!==E&&E>Date.now())E=P.$expires,I=P.$timestamp,O="sentinel"===(w=P&&P.$type)?P.value:P,Array.isArray(O)?(null==(k=P.$size)&&(k=("sentinel"===w&&50||0)+O.length),w="array"):"sentinel"===w?null==(k=P.$size)&&(k=50+("string"==typeof O&&O.length||1)):null==P||"object"!=typeof P?(k="string"==typeof O?O.length:1,w="primitive"):(k=P.$size||0,w=w||"leaf");else if(E=0,I=void 0,void 0===P.__invalidated){P.__invalidated=!0,P.$expires=0,i[i.length]=P;var rt=M.__head,nt=M.__tail;if(null!=P&&"object"==typeof P){var it=P.__next,ot=P.__prev;it&&null!=it&&"object"==typeof it&&(it.__prev=ot),ot&&null!=ot&&"object"==typeof ot&&(ot.__next=it),P===rt&&(M.__head=M.__next=rt=it),P===nt&&(M.__tail=M.__prev=nt=ot),P.__next=P.__prev=void 0}}if(m===P)j=O,A=k,$=w,L=I,z=E;else if(null==m)j=m,A=0,$="primitive",L=void 0,z=void 0;else if(null==(z=m.$expires)||1===z||0!==z&&z>Date.now())z=m.$expires,L=m.$timestamp,j="sentinel"===($=m&&m.$type)?m.value:m,Array.isArray(j)?(null==(A=m.$size)&&(A=("sentinel"===$&&50||0)+j.length),$="array"):"sentinel"===$?null==(A=m.$size)&&(A=50+("string"==typeof j&&j.length||1)):null==m||"object"!=typeof m?(A="string"==typeof j?j.length:1,$="primitive"):(A=m.$size||0,$=$||"leaf");else if(z=0,L=void 0,void 0===m.__invalidated){m.__invalidated=!0,m.$expires=0,i[i.length]=m;var lt=M.__head,at=M.__tail;if(null!=m&&"object"==typeof m){var ft=m.__next,st=m.__prev;ft&&null!=ft&&"object"==typeof ft&&(ft.__prev=st),st&&null!=st&&"object"==typeof st&&(st.__next=ft),m===lt&&(M.__head=M.__next=lt=ft),m===at&&(M.__tail=M.__prev=at=st),m.__next=m.__prev=void 0}}t:for(;(L>I||0===E&&((m=P)||!0))===!1;){if("primitive"===w?(w="sentinel",k=50+(k||1),P={$size:k,$type:w,value:O}):"array"===w?P.$type=w=P.$type||"leaf":(P.$size=k,P.$type=w=w||"leaf"),m&&m!==P){if("array"===$){var vt=m.__context;if(null!=vt){for(var pt=(m.__refIndex||0)-1,dt=(vt.__refsLength||0)-1;++pt<=dt;)vt["__ref"+pt]=vt["__ref"+(pt+1)];vt.__refsLength=dt,m.__refIndex=void 0,m.__context=null}}if(m.__refsLength){for(var ut,ht=m.__refsLength||0,ct=P.__refsLength||0,yt=-1;++yt<ht;)void 0!==(ut=m["__ref"+yt])&&(ut.__context=P,P["__ref"+(ct+yt)]=ut,m["__ref"+yt]=void 0);P.__refsLength=ct+ht,m.__refsLength=void 0}var gt=M.__head,xt=M.__tail;if(null!=m&&"object"==typeof m){var bt=m.__next,mt=m.__prev;bt&&null!=bt&&"object"==typeof bt&&(bt.__prev=mt),mt&&null!=mt&&"object"==typeof mt&&(mt.__next=bt),m===gt&&(M.__head=M.__next=gt=bt),m===xt&&(M.__tail=M.__prev=xt=mt),m.__next=m.__prev=void 0}}_t=k-A,P.$size=k-_t,m&&P&&void 0!==!m.__generation&&(void 0===P.__generation||m.__generation>P.__generation)&&(P.__generation=m.__generation),b[l]=m=P;break t}if(m.__parent=b,m.__key=l,0!==_t)for(var jt,$t,At,zt,Lt=m;void 0!==Lt;){if(Lt.$size=$t=(Lt.$size||0)+_t,Lt.__genUpdated!==U)for(var Pt,Ot,wt,kt,Et,It=Lt,Rt=[],Mt=0;Mt>=0;){if(void 0===(Pt=Rt[Mt]))for(wt=kt=-1,Et=It.__refsLength||0,Rt[Mt]=Pt=[],It.__genUpdated=U,It.__generation=(It.__generation||0)+1,void 0!==(Ot=It.__parent)&&Ot.__genUpdated!==U&&(Pt[++kt]=Ot);++wt<Et;)void 0!==(Ot=It["__ref"+wt])&&Ot.__genUpdated!==U&&(Pt[++kt]=Ot);void 0!==(It=Pt.pop())?++Mt:Rt[Mt--]=void 0}if(void 0!==(jt=Lt.__parent)&&0>=$t){for(var Ut,Nt=Lt.__refsLength||0,Dt=-1;++Dt<Nt;)void 0!==(Ut=Lt["__ref"+Dt])&&(Ut.__context=void 0,Lt["__ref"+Dt]=void 0);if(Lt.__refsLength=void 0,Array.isArray(At="sentinel"===(zt=Lt&&Lt.$type)?Lt.value:Lt)){var Bt=Lt.__context;if(null!=Bt){for(var St=(Lt.__refIndex||0)-1,qt=(Bt.__refsLength||0)-1;++St<=qt;)Bt["__ref"+St]=Bt["__ref"+(St+1)];Bt.__refsLength=qt,Lt.__refIndex=void 0,Lt.__context=null}}jt[Lt.__key]=Lt.__parent=void 0;var Ct=M.__head,Tt=M.__tail;if(null!=Lt&&"object"==typeof Lt){var Ft=Lt.__next,Wt=Lt.__prev;Ft&&null!=Ft&&"object"==typeof Ft&&(Ft.__prev=Wt),Wt&&null!=Wt&&"object"==typeof Wt&&(Wt.__next=Ft),Lt===Ct&&(M.__head=M.__next=Ct=Ft),Lt===Tt&&(M.__tail=M.__prev=Tt=Wt),Lt.__next=Lt.__prev=void 0}}Lt=jt}else for(var Gt=m;void 0!==Gt;){if(Gt.__genUpdated!==U)for(var Qt,Vt,Kt,Jt,Zt,Ht=Gt,Xt=[],Yt=0;Yt>=0;){if(void 0===(Qt=Xt[Yt]))for(Kt=Jt=-1,Zt=Ht.__refsLength||0,Xt[Yt]=Qt=[],Ht.__genUpdated=U,Ht.__generation=(Ht.__generation||0)+1,void 0!==(Vt=Ht.__parent)&&Vt.__genUpdated!==U&&(Qt[++Jt]=Vt);++Kt<Zt;)void 0!==(Vt=Ht["__ref"+Kt])&&Vt.__genUpdated!==U&&(Qt[++Jt]=Vt);void 0!==(Ht=Qt.pop())?++Yt:Xt[Yt--]=void 0}Gt=Gt.__parent}var e_=M.__head,t_=M.__tail;if(m&&1!==m.$expires){var __=m.__next,r_=m.__prev;m!==e_&&(__&&null!=__&&"object"==typeof __&&(__.__prev=r_),r_&&null!=r_&&"object"==typeof r_&&(r_.__next=__),(__=e_)&&null!=__&&"object"==typeof __&&(e_.__prev=m),M.__head=M.__next=e_=m,null!=e_&&"object"==typeof e_&&(e_.__next=__,e_.__prev=void 0)),(null==t_||m===t_)&&(M.__tail=M.__prev=t_=r_||m)}}j="sentinel"===($=m&&m.$type)?m.value:m}break e}var n_,i_,o_,l_,a_,f_,s_=R._maxSize,v_=_.$size,p_=s_*R._collectRatio,d_=0;if(v_>=s_&&(null==M._pendingRequests||M._pendingRequests<=0)){for(;v_>=p_&&null!=(l_=i.pop());){d_++,v_-=o_=l_.$size||0;do{if(i_=l_.__parent,(l_.$size-=o_)<=0){for(var u_,h_=l_.__refsLength||0,c_=-1;++c_<h_;)void 0!==(u_=l_["__ref"+c_])&&(u_.__context=void 0,l_["__ref"+c_]=void 0);if(l_.__refsLength=void 0,Array.isArray(a_="sentinel"===(f_=l_&&l_.$type)?l_.value:l_)){var y_=l_.__context;if(null!=y_){for(var g_=(l_.__refIndex||0)-1,x_=(y_.__refsLength||0)-1;++g_<=x_;)y_["__ref"+g_]=y_["__ref"+(g_+1)];y_.__refsLength=x_,l_.__refIndex=void 0,l_.__context=null}}void 0!==i_&&(i_[l_.__key]=l_.__parent=void 0)}l_=i_}while(void 0!==l_)}if(i.length<=0)for(n_=M.__tail;v_>=p_&&null!=(l_=n_);){d_++,n_=n_.__prev,v_-=o_=l_.$size||0,l_.__prev=l_.__next=void 0;do{if(i_=l_.__parent,(l_.$size-=o_)<=0){for(var b_,m_=l_.__refsLength||0,j_=-1;++j_<m_;)void 0!==(b_=l_["__ref"+j_])&&(b_.__context=void 0,l_["__ref"+j_]=void 0);if(l_.__refsLength=void 0,Array.isArray(a_="sentinel"===(f_=l_&&l_.$type)?l_.value:l_)){var $_=l_.__context;if(null!=$_){for(var A_=(l_.__refIndex||0)-1,z_=($_.__refsLength||0)-1;++A_<=z_;)$_["__ref"+A_]=$_["__ref"+(A_+1)];$_.__refsLength=z_,l_.__refIndex=void 0,l_.__context=null}}void 0!==i_&&(i_[l_.__key]=l_.__parent=void 0)}l_=i_}while(void 0!==l_)}null==(M.__tail=M.__prev=n_)?M.__head=M.__next=void 0:n_.__next=void 0}return u}function setPaths(e,t,_,r,n,i,o){var l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A,z,L,P,O,w,k,E,I,R,M,U,N,D,B,S,q,C,T,F,W,G,Q,V,K,J,Z,H,X,Y,et=this,tt=et._root,_t=GENERATION_GENERATION++;for(c=e,l=et._connected,a=et._materialized,f=et._streaming,s=et._refreshing,y=o||et._path,v=c.contexts||(c.contexts=[]),p=c.messages||(c.messages=[]),N=c.batchedPathMaps||(c.batchedPathMaps=[]),w=c.originalMisses||(c.originalMisses=[]),k=c.optimizedMisses||(c.optimizedMisses=[]),u=c.errors||(c.errors=[]),E=c.refs||(c.refs=[]),R=c.crossed||(c.crossed=[]),I=c.cols||(c.cols=[]),O=c.pbv||(c.pbv={path:[],optimized:[]}),j=c.index||(c.index=0),$=c.length,U=c.batchedPathMap,Q=c.value,V=Q,n=n||et._cache,o=y,null==i&&null==(i=et.__context)&&(y.length>0?(O=et._getContext(),y=O.path,O.path=[],O.optimized=[],i=O.value||{}):i=n),D=n,B=i,S=B,q=S,L=O.path,P=O.optimized,M=-1,A=0,h=et._expired||(et._expired=[]),E[-1]=y,I[-1]=0,R[-1]=z=y,G=i;$>j;e.index=++j){O=e[j],y=O.path,K=O.value,x=y.index||(y.index=0),b=0,m=y.length-1,B=G,E[-1]=y,I[M=-1]=x,R=[],R[-1]=z;e:for(;;){for(;m>x;++x)if(g=y[x],null!=g&&"object"==typeof g&&(Array.isArray(g)?(g=g[g.index||(g.index=0)],null!=g&&"object"==typeof g&&(g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset)):g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset),null!=g){for(L[L.length=x]=g,P[P.length=x+b]=g,S&&void 0!==!S.__generation&&(void 0===(B[g]||{$size:0}).__generation||S.__generation>(B[g]||{$size:0}).__generation)&&((B[g]||{$size:0}).__generation=S.__generation),B[g]=S=B[g]||{$size:0},S.__parent=B,S.__key=g;Array.isArray(q="sentinel"===(C=S&&S.$type)?S.value:S);){var rt=tt.__head,nt=tt.__tail;if(S&&1!==S.$expires){var it=S.__next,ot=S.__prev;S!==rt&&(it&&null!=it&&"object"==typeof it&&(it.__prev=ot),ot&&null!=ot&&"object"==typeof ot&&(ot.__next=it),(it=rt)&&null!=it&&"object"==typeof it&&(rt.__prev=S),tt.__head=tt.__next=rt=S,null!=rt&&"object"==typeof rt&&(rt.__next=it,rt.__prev=void 0)),(null==nt||S===nt)&&(tt.__tail=tt.__prev=nt=ot||S)}if(void 0!==(S=S.__context)){for(var lt=-1,at=P.length=q.length||0;++lt<at;)P[lt]=q[lt];b=at-x-1}else{B=D,E[M]=y,I[M++]=x,y=q,m=y.length-1,b=0,x=0;t:for(;;){for(;m>x;++x)if(g=y[x],null!=g){for(P[P.length=x+b]=g,S&&void 0!==!S.__generation&&(void 0===(B[g]||{$size:0}).__generation||S.__generation>(B[g]||{$size:0}).__generation)&&((B[g]||{$size:0}).__generation=S.__generation),B[g]=S=B[g]||{$size:0},S.__parent=B,S.__key=g;Array.isArray(q="sentinel"===(C=S&&S.$type)?S.value:S);){var ft=tt.__head,st=tt.__tail;if(S&&1!==S.$expires){var vt=S.__next,pt=S.__prev;S!==ft&&(vt&&null!=vt&&"object"==typeof vt&&(vt.__prev=pt),pt&&null!=pt&&"object"==typeof pt&&(pt.__next=vt),(vt=ft)&&null!=vt&&"object"==typeof vt&&(ft.__prev=S),tt.__head=tt.__next=ft=S,null!=ft&&"object"==typeof ft&&(ft.__next=vt,ft.__prev=void 0)),(null==st||S===st)&&(tt.__tail=tt.__prev=st=pt||S)}if(void 0===(S=S.__context)){B=D,E[M]=y,I[M++]=x,y=q,m=y.length-1,b=0,x=0;continue t}for(var dt=-1,ut=P.length=q.length||0;++dt<ut;)P[dt]=q[dt];b=ut-x-1}if(null==S||void 0!==C){P.length=x+b+1,x=I[--M],b=m-x-1,y=E[M],m=y.length-1,L[L.length]=null;break e}B=S}if(x===m){if(g=y[x],null!=g&&(P[P.length=x+b]=g,S&&void 0!==!S.__generation&&(void 0===(B[g]||{$size:0}).__generation||S.__generation>(B[g]||{$size:0}).__generation)&&((B[g]||{$size:0}).__generation=S.__generation),B[g]=S=B[g]||{$size:0},S.__parent=B,S.__key=g),null==S||"error"===C){P.length=x+b+1,x=I[--M],b=m-x-1,y=E[M],m=y.length-1,L[L.length]=null;break e}var ht;if(void 0===(ht=y.__container||y).__context){var ct=S.__refsLength||0;S["__ref"+ct]=ht,S.__refsLength=ct+1,ht.__refIndex=ct,ht.__context=S}do y=E[--M],x=I[M],b=m-x,m=y.length-1;while(M>-1&&x===m);if(m>x)for(;Array.isArray(q="sentinel"===(C=S&&S.$type)?S.value:S);){var yt=tt.__head,gt=tt.__tail;if(S&&1!==S.$expires){var xt=S.__next,bt=S.__prev;S!==yt&&(xt&&null!=xt&&"object"==typeof xt&&(xt.__prev=bt),bt&&null!=bt&&"object"==typeof bt&&(bt.__next=xt),(xt=yt)&&null!=xt&&"object"==typeof xt&&(yt.__prev=S),tt.__head=tt.__next=yt=S,null!=yt&&"object"==typeof yt&&(yt.__next=xt,yt.__prev=void 0)),(null==gt||S===gt)&&(tt.__tail=tt.__prev=gt=bt||S)}if(void 0===(S=S.__context)){B=D,E[M]=y,I[M++]=x,y=q,m=y.length-1,b=0,x=0;continue t}for(var mt=-1,jt=P.length=q.length||0;++mt<jt;)P[mt]=q[mt];b=jt-x-1}if(M>-1){x+=1,B=S;continue t}}break t}}}if(null==S||void 0!==C){P.length=x+b+1;break e}B=S}if(x===m){if(g=y[x],null!=g&&"object"==typeof g&&(Array.isArray(g)?(g=g[g.index||(g.index=0)],null!=g&&"object"==typeof g&&(g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset)):g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset),L[L.length=x]=g,null!=g){P[P.length=x+b]=g,S=B[g];var $t=0;if(null==K)J=K,H=0,Z="primitive",Y=void 0,X=void 0;else if(null==(X=K.$expires)||1===X||0!==X&&X>Date.now())X=K.$expires,Y=K.$timestamp,J="sentinel"===(Z=K&&K.$type)?K.value:K,Array.isArray(J)?(null==(H=K.$size)&&(H=("sentinel"===Z&&50||0)+J.length),Z="array"):"sentinel"===Z?null==(H=K.$size)&&(H=50+("string"==typeof J&&J.length||1)):null==K||"object"!=typeof K?(H="string"==typeof J?J.length:1,Z="primitive"):(H=K.$size||0,Z=Z||"leaf");else if(X=0,Y=void 0,void 0===K.__invalidated){K.__invalidated=!0,K.$expires=0,h[h.length]=K;var At=tt.__head,zt=tt.__tail;if(null!=K&&"object"==typeof K){var Lt=K.__next,Pt=K.__prev;Lt&&null!=Lt&&"object"==typeof Lt&&(Lt.__prev=Pt),Pt&&null!=Pt&&"object"==typeof Pt&&(Pt.__next=Lt),K===At&&(tt.__head=tt.__next=At=Lt),K===zt&&(tt.__tail=tt.__prev=zt=Pt),K.__next=K.__prev=void 0}}if(S===K)q=J,T=H,C=Z,W=Y,F=X;else if(null==S)q=S,T=0,C="primitive",W=void 0,F=void 0;else if(null==(F=S.$expires)||1===F||0!==F&&F>Date.now())F=S.$expires,W=S.$timestamp,q="sentinel"===(C=S&&S.$type)?S.value:S,Array.isArray(q)?(null==(T=S.$size)&&(T=("sentinel"===C&&50||0)+q.length),C="array"):"sentinel"===C?null==(T=S.$size)&&(T=50+("string"==typeof q&&q.length||1)):null==S||"object"!=typeof S?(T="string"==typeof q?q.length:1,C="primitive"):(T=S.$size||0,C=C||"leaf");else if(F=0,W=void 0,void 0===S.__invalidated){S.__invalidated=!0,S.$expires=0,h[h.length]=S;var Ot=tt.__head,wt=tt.__tail;if(null!=S&&"object"==typeof S){var kt=S.__next,Et=S.__prev;kt&&null!=kt&&"object"==typeof kt&&(kt.__prev=Et),Et&&null!=Et&&"object"==typeof Et&&(Et.__next=kt),S===Ot&&(tt.__head=tt.__next=Ot=kt),S===wt&&(tt.__tail=tt.__prev=wt=Et),S.__next=S.__prev=void 0}}t:for(;(W>Y||0===X&&((S=K)||!0))===!1;){if("primitive"===Z?(Z="sentinel",H=50+(H||1),K={$size:H,$type:Z,value:J}):"array"===Z?K.$type=Z=K.$type||"leaf":(K.$size=H,K.$type=Z=Z||"leaf"),S&&S!==K){if("array"===C){var It=S.__context;if(null!=It){for(var Rt=(S.__refIndex||0)-1,Mt=(It.__refsLength||0)-1;++Rt<=Mt;)It["__ref"+Rt]=It["__ref"+(Rt+1)];It.__refsLength=Mt,S.__refIndex=void 0,S.__context=null}}if(S.__refsLength){for(var Ut,Nt=S.__refsLength||0,Dt=K.__refsLength||0,Bt=-1;++Bt<Nt;)void 0!==(Ut=S["__ref"+Bt])&&(Ut.__context=K,K["__ref"+(Dt+Bt)]=Ut,S["__ref"+Bt]=void 0);K.__refsLength=Dt+Nt,S.__refsLength=void 0}var St=tt.__head,qt=tt.__tail;if(null!=S&&"object"==typeof S){var Ct=S.__next,Tt=S.__prev;Ct&&null!=Ct&&"object"==typeof Ct&&(Ct.__prev=Tt),Tt&&null!=Tt&&"object"==typeof Tt&&(Tt.__next=Ct),S===St&&(tt.__head=tt.__next=St=Ct),S===qt&&(tt.__tail=tt.__prev=qt=Tt),S.__next=S.__prev=void 0}}$t=H-T,K.$size=H-$t,S&&K&&void 0!==!S.__generation&&(void 0===K.__generation||S.__generation>K.__generation)&&(K.__generation=S.__generation),B[g]=S=K;
break t}if(S.__parent=B,S.__key=g,0!==$t)for(var Ft,Wt,Gt,Qt,Vt=S;void 0!==Vt;){if(Vt.$size=Wt=(Vt.$size||0)+$t,Vt.__genUpdated!==_t)for(var Kt,Jt,Zt,Ht,Xt,Yt=Vt,e_=[],t_=0;t_>=0;){if(void 0===(Kt=e_[t_]))for(Zt=Ht=-1,Xt=Yt.__refsLength||0,e_[t_]=Kt=[],Yt.__genUpdated=_t,Yt.__generation=(Yt.__generation||0)+1,void 0!==(Jt=Yt.__parent)&&Jt.__genUpdated!==_t&&(Kt[++Ht]=Jt);++Zt<Xt;)void 0!==(Jt=Yt["__ref"+Zt])&&Jt.__genUpdated!==_t&&(Kt[++Ht]=Jt);void 0!==(Yt=Kt.pop())?++t_:e_[t_--]=void 0}if(void 0!==(Ft=Vt.__parent)&&0>=Wt){for(var __,r_=Vt.__refsLength||0,n_=-1;++n_<r_;)void 0!==(__=Vt["__ref"+n_])&&(__.__context=void 0,Vt["__ref"+n_]=void 0);if(Vt.__refsLength=void 0,Array.isArray(Gt="sentinel"===(Qt=Vt&&Vt.$type)?Vt.value:Vt)){var i_=Vt.__context;if(null!=i_){for(var o_=(Vt.__refIndex||0)-1,l_=(i_.__refsLength||0)-1;++o_<=l_;)i_["__ref"+o_]=i_["__ref"+(o_+1)];i_.__refsLength=l_,Vt.__refIndex=void 0,Vt.__context=null}}Ft[Vt.__key]=Vt.__parent=void 0;var a_=tt.__head,f_=tt.__tail;if(null!=Vt&&"object"==typeof Vt){var s_=Vt.__next,v_=Vt.__prev;s_&&null!=s_&&"object"==typeof s_&&(s_.__prev=v_),v_&&null!=v_&&"object"==typeof v_&&(v_.__next=s_),Vt===a_&&(tt.__head=tt.__next=a_=s_),Vt===f_&&(tt.__tail=tt.__prev=f_=v_),Vt.__next=Vt.__prev=void 0}}Vt=Ft}else for(var p_=S;void 0!==p_;){if(p_.__genUpdated!==_t)for(var d_,u_,h_,c_,y_,g_=p_,x_=[],b_=0;b_>=0;){if(void 0===(d_=x_[b_]))for(h_=c_=-1,y_=g_.__refsLength||0,x_[b_]=d_=[],g_.__genUpdated=_t,g_.__generation=(g_.__generation||0)+1,void 0!==(u_=g_.__parent)&&u_.__genUpdated!==_t&&(d_[++c_]=u_);++h_<y_;)void 0!==(u_=g_["__ref"+h_])&&u_.__genUpdated!==_t&&(d_[++c_]=u_);void 0!==(g_=d_.pop())?++b_:x_[b_--]=void 0}p_=p_.__parent}var m_=tt.__head,j_=tt.__tail;if(S&&1!==S.$expires){var $_=S.__next,A_=S.__prev;S!==m_&&($_&&null!=$_&&"object"==typeof $_&&($_.__prev=A_),A_&&null!=A_&&"object"==typeof A_&&(A_.__next=$_),($_=m_)&&null!=$_&&"object"==typeof $_&&(m_.__prev=S),tt.__head=tt.__next=m_=S,null!=m_&&"object"==typeof m_&&(m_.__next=$_,m_.__prev=void 0)),(null==j_||S===j_)&&(tt.__tail=tt.__prev=j_=A_||S)}}q="sentinel"===(C=S&&S.$type)?S.value:S}break e}if("error"===C){d=Array.isArray(O)?[]:null!=O&&"object"==typeof O?{}:O;var z_,L_;for(var P_ in O)if(O.hasOwnProperty(P_)){if(z_=L_=O[P_],Array.isArray(z_)){var O_=-1,w_=z_.length;for(L_=new Array(w_);++O_<w_;)L_[O_]=z_[O_]}else null!=z_&&"object"==typeof z_&&(L_=Object.create(z_));d[P_]=L_}d.value=q,u[u.length]=d}else if(f===!0&&void 0!==q||a===!0){O.value=q;var k_;k_=Array.isArray(O)?[]:null!=O&&"object"==typeof O?{}:O;var E_,I_;for(var R_ in O)if(O.hasOwnProperty(R_)){if(E_=I_=O[R_],Array.isArray(E_)){var M_=-1,U_=E_.length;for(I_=new Array(U_);++M_<U_;)I_[M_]=E_[M_]}else null!=E_&&"object"==typeof E_&&(I_=Object.create(E_));k_[R_]=I_}t(k_)}}f===!1&&t({paths:e.map(function(e){return e.path}),value:G}),0===u.length?r():1===u.length?_(u[0]):_({innerErrors:u});var N_,D_,B_,S_,q_,C_,T_=et._maxSize,F_=n.$size,W_=T_*et._collectRatio,G_=0;if(F_>=T_&&(null==tt._pendingRequests||tt._pendingRequests<=0)){for(;F_>=W_&&null!=(S_=h.pop());){G_++,F_-=B_=S_.$size||0;do{if(D_=S_.__parent,(S_.$size-=B_)<=0){for(var Q_,V_=S_.__refsLength||0,K_=-1;++K_<V_;)void 0!==(Q_=S_["__ref"+K_])&&(Q_.__context=void 0,S_["__ref"+K_]=void 0);if(S_.__refsLength=void 0,Array.isArray(q_="sentinel"===(C_=S_&&S_.$type)?S_.value:S_)){var J_=S_.__context;if(null!=J_){for(var Z_=(S_.__refIndex||0)-1,H_=(J_.__refsLength||0)-1;++Z_<=H_;)J_["__ref"+Z_]=J_["__ref"+(Z_+1)];J_.__refsLength=H_,S_.__refIndex=void 0,S_.__context=null}}void 0!==D_&&(D_[S_.__key]=S_.__parent=void 0)}S_=D_}while(void 0!==S_)}if(h.length<=0)for(N_=tt.__tail;F_>=W_&&null!=(S_=N_);){G_++,N_=N_.__prev,F_-=B_=S_.$size||0,S_.__prev=S_.__next=void 0;do{if(D_=S_.__parent,(S_.$size-=B_)<=0){for(var X_,Y_=S_.__refsLength||0,er=-1;++er<Y_;)void 0!==(X_=S_["__ref"+er])&&(X_.__context=void 0,S_["__ref"+er]=void 0);if(S_.__refsLength=void 0,Array.isArray(q_="sentinel"===(C_=S_&&S_.$type)?S_.value:S_)){var tr=S_.__context;if(null!=tr){for(var _r=(S_.__refIndex||0)-1,rr=(tr.__refsLength||0)-1;++_r<=rr;)tr["__ref"+_r]=tr["__ref"+(_r+1)];tr.__refsLength=rr,S_.__refIndex=void 0,S_.__context=null}}void 0!==D_&&(D_[S_.__key]=S_.__parent=void 0)}S_=D_}while(void 0!==S_)}null==(tt.__tail=tt.__prev=N_)?tt.__head=tt.__next=void 0:N_.__next=void 0}return Disposable.empty}function setPBF(e,t,_,r,n,i,o){var l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A,z,L,P,O,w,k,E,I,R,M,U,N,D,B,S,q,C,T,F,W,G,Q,V,K,J,Z,H,X,Y=this,et=Y._root,tt=GENERATION_GENERATION++;for(c=e,l=Y._connected,a=Y._materialized,f=Y._streaming,s=Y._refreshing,y=o||Y._path,v=c.contexts||(c.contexts=[]),p=c.messages||(c.messages=[]),N=c.batchedPathMaps||(c.batchedPathMaps=[]),w=c.originalMisses||(c.originalMisses=[]),k=c.optimizedMisses||(c.optimizedMisses=[]),d=c.errors||(c.errors=[]),E=c.refs||(c.refs=[]),R=c.crossed||(c.crossed=[]),I=c.cols||(c.cols=[]),O=c.pbv||(c.pbv={path:[],optimized:[]}),j=c.index||(c.index=0),$=c.length,U=c.batchedPathMap,G=c.value,Q=G,n=n||Y._cache,o=y,null==i&&null==(i=Y.__context)&&(y.length>0?(O=Y._getContext(),y=O.path,O.path=[],O.optimized=[],i=O.value||{}):i=n),D=n,B=i,S=B,q=S,L=O.path,P=O.optimized,M=-1,A=0,h=Y._expired||(Y._expired=[]),E[-1]=y,I[-1]=0,R[-1]=z=y,c=e.paths||(e.paths=[]),(t||_||r||null==U)&&(u={onNext:t||noop,onError:_||noop,onCompleted:r||noop,originals:c.concat(),optimized:c.concat(),count:0,path:[],errors:[],streaming:f,materialized:a},U=Y._pathMapWithObserver(c,u,U)),j=e.index||(e.index=0),$=c.length,v[-1]=B,p[-1]=Q,N[-1]=U;$>j;c.index=++j)for(y=c[j],x=y.index||(y.index=0),b=y.offset||(y.offset=0),m=y.length-1,M=-1,E[-1]=y,R=[],R[-1]=z;x>=0;){for(var _t,rt,nt;--x>=-1;)if(null!=(_t=R[x])){for(rt=-1,nt=_t.length,P.length=nt,b=nt-(x+1);++rt<nt;)P[rt]=_t[rt];break}++x,I[M=-1]=x,B=v[x-1],Q=p[x-1],U=N[x-1];e:for(;;){for(;m>x;++x)if(g=y[x],null!=g&&"object"==typeof g&&(Array.isArray(g)?(g=g[g.index||(g.index=0)],null!=g&&"object"==typeof g&&(g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset)):g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset),null!=g){L[L.length=x]=g,P[P.length=x+b]=g,S=B[g],V=Q&&Q[g],U=U[g];var it=0;if(null==V)K=V,Z=0,J="primitive",X=void 0,H=void 0;else if(null==(H=V.$expires)||1===H||0!==H&&H>Date.now())H=V.$expires,X=V.$timestamp,K="sentinel"===(J=V&&V.$type)?V.value:V,Array.isArray(K)?(null==(Z=V.$size)&&(Z=("sentinel"===J&&50||0)+K.length),J="array"):"sentinel"===J?null==(Z=V.$size)&&(Z=50+("string"==typeof K&&K.length||1)):null==V||"object"!=typeof V?(Z="string"==typeof K?K.length:1,J="primitive"):(Z=V.$size||0,J=J||void 0);else if(H=0,X=void 0,void 0===V.__invalidated){V.__invalidated=!0,V.$expires=0,h[h.length]=V;var ot=et.__head,lt=et.__tail;if(null!=V&&"object"==typeof V){var at=V.__next,ft=V.__prev;at&&null!=at&&"object"==typeof at&&(at.__prev=ft),ft&&null!=ft&&"object"==typeof ft&&(ft.__next=at),V===ot&&(et.__head=et.__next=ot=at),V===lt&&(et.__tail=et.__prev=lt=ft),V.__next=V.__prev=void 0}}if(null==S||S!==V&&"array"===J){if(S===V)q=K,T=Z,C=J,W=X,F=H;else if(null==S)q=S,T=0,C="primitive",W=void 0,F=void 0;else if(null==(F=S.$expires)||1===F||0!==F&&F>Date.now())F=S.$expires,W=S.$timestamp,q="sentinel"===(C=S&&S.$type)?S.value:S,Array.isArray(q)?(null==(T=S.$size)&&(T=("sentinel"===C&&50||0)+q.length),C="array"):"sentinel"===C?null==(T=S.$size)&&(T=50+("string"==typeof q&&q.length||1)):null==S||"object"!=typeof S?(T="string"==typeof q?q.length:1,C="primitive"):(T=S.$size||0,C=C||void 0);else if(F=0,W=void 0,void 0===S.__invalidated){S.__invalidated=!0,S.$expires=0,h[h.length]=S;var st=et.__head,vt=et.__tail;if(null!=S&&"object"==typeof S){var pt=S.__next,dt=S.__prev;pt&&null!=pt&&"object"==typeof pt&&(pt.__prev=dt),dt&&null!=dt&&"object"==typeof dt&&(dt.__next=pt),S===st&&(et.__head=et.__next=st=pt),S===vt&&(et.__tail=et.__prev=vt=dt),S.__next=S.__prev=void 0}}t:for(;(W>X||0===H&&((S=V)||!0))===!1;){if(void 0!==J)if("array"===J){if(V.$type=J=V.$type||"leaf",K.__container=V,V.$size=Z,"array"===C){var ut,ht=-1;if((ut=q.length)===K.length){_:for(;++ht<ut&&q[ht]===K[ht];);if(ht===ut)break t}}}else{"primitive"===J?(J="sentinel",Z=50+(Z||1),V={$size:Z,$type:J,value:K}):(V.$size=Z,V.$type=J=J||"leaf");var ct=et.__head,yt=et.__tail;if(V&&1!==V.$expires){var gt=V.__next,xt=V.__prev;V!==ct&&(gt&&null!=gt&&"object"==typeof gt&&(gt.__prev=xt),xt&&null!=xt&&"object"==typeof xt&&(xt.__next=gt),(gt=ct)&&null!=gt&&"object"==typeof gt&&(ct.__prev=V),et.__head=et.__next=ct=V,null!=ct&&"object"==typeof ct&&(ct.__next=gt,ct.__prev=void 0)),(null==yt||V===yt)&&(et.__tail=et.__prev=yt=xt||V)}}if(null!=S){if("array"===C){var bt=S.__context;if(null!=bt){for(var mt=(S.__refIndex||0)-1,jt=(bt.__refsLength||0)-1;++mt<=jt;)bt["__ref"+mt]=bt["__ref"+(mt+1)];bt.__refsLength=jt,S.__refIndex=void 0,S.__context=null}}if(S.__refsLength){for(var $t,At=S.__refsLength||0,zt=V.__refsLength||0,Lt=-1;++Lt<At;)void 0!==($t=S["__ref"+Lt])&&($t.__context=V,V["__ref"+(zt+Lt)]=$t,S["__ref"+Lt]=void 0);V.__refsLength=zt+At,S.__refsLength=void 0}var Pt=et.__head,Ot=et.__tail;if(null!=S&&"object"==typeof S){var wt=S.__next,kt=S.__prev;wt&&null!=wt&&"object"==typeof wt&&(wt.__prev=kt),kt&&null!=kt&&"object"==typeof kt&&(kt.__next=wt),S===Pt&&(et.__head=et.__next=Pt=wt),S===Ot&&(et.__tail=et.__prev=Ot=kt),S.__next=S.__prev=void 0}}it=Z-T,V.$size=Z-it,S&&V&&void 0!==!S.__generation&&(void 0===V.__generation||S.__generation>V.__generation)&&(V.__generation=S.__generation),B[g]=S=V;break t}}if(S.__parent=B,S.__key=g,0!==it)for(var Et,It,Rt,Mt,Ut=S;void 0!==Ut;){if(Ut.$size=It=(Ut.$size||0)+it,Ut.__genUpdated!==tt)for(var Nt,Dt,Bt,St,qt,Ct=Ut,Tt=[],Ft=0;Ft>=0;){if(void 0===(Nt=Tt[Ft]))for(Bt=St=-1,qt=Ct.__refsLength||0,Tt[Ft]=Nt=[],Ct.__genUpdated=tt,Ct.__generation=(Ct.__generation||0)+1,void 0!==(Dt=Ct.__parent)&&Dt.__genUpdated!==tt&&(Nt[++St]=Dt);++Bt<qt;)void 0!==(Dt=Ct["__ref"+Bt])&&Dt.__genUpdated!==tt&&(Nt[++St]=Dt);void 0!==(Ct=Nt.pop())?++Ft:Tt[Ft--]=void 0}if(void 0!==(Et=Ut.__parent)&&0>=It){for(var Wt,Gt=Ut.__refsLength||0,Qt=-1;++Qt<Gt;)void 0!==(Wt=Ut["__ref"+Qt])&&(Wt.__context=void 0,Ut["__ref"+Qt]=void 0);if(Ut.__refsLength=void 0,Array.isArray(Rt="sentinel"===(Mt=Ut&&Ut.$type)?Ut.value:Ut)){var Vt=Ut.__context;if(null!=Vt){for(var Kt=(Ut.__refIndex||0)-1,Jt=(Vt.__refsLength||0)-1;++Kt<=Jt;)Vt["__ref"+Kt]=Vt["__ref"+(Kt+1)];Vt.__refsLength=Jt,Ut.__refIndex=void 0,Ut.__context=null}}Et[Ut.__key]=Ut.__parent=void 0;var Zt=et.__head,Ht=et.__tail;if(null!=Ut&&"object"==typeof Ut){var Xt=Ut.__next,Yt=Ut.__prev;Xt&&null!=Xt&&"object"==typeof Xt&&(Xt.__prev=Yt),Yt&&null!=Yt&&"object"==typeof Yt&&(Yt.__next=Xt),Ut===Zt&&(et.__head=et.__next=Zt=Xt),Ut===Ht&&(et.__tail=et.__prev=Ht=Yt),Ut.__next=Ut.__prev=void 0}}Ut=Et}for(;Array.isArray(q="sentinel"===(C=S&&S.$type)?S.value:S);){var e_=et.__head,t_=et.__tail;if(S&&1!==S.$expires){var __=S.__next,r_=S.__prev;S!==e_&&(__&&null!=__&&"object"==typeof __&&(__.__prev=r_),r_&&null!=r_&&"object"==typeof r_&&(r_.__next=__),(__=e_)&&null!=__&&"object"==typeof __&&(e_.__prev=S),et.__head=et.__next=e_=S,null!=e_&&"object"==typeof e_&&(e_.__next=__,e_.__prev=void 0)),(null==t_||S===t_)&&(et.__tail=et.__prev=t_=r_||S)}R[x]=q,B=D,Q=G,E[M]=y,I[M++]=x,y=q,m=y.length-1,b=0,x=0;t:for(;;){for(;m>x;++x)if(g=y[x],null!=g){P[P.length=x+b]=g,S=B[g],V=Q&&Q[g];var n_=0;if(null==V)K=V,Z=0,J="primitive",X=void 0,H=void 0;else if(null==(H=V.$expires)||1===H||0!==H&&H>Date.now())H=V.$expires,X=V.$timestamp,K="sentinel"===(J=V&&V.$type)?V.value:V,Array.isArray(K)?(null==(Z=V.$size)&&(Z=("sentinel"===J&&50||0)+K.length),J="array"):"sentinel"===J?null==(Z=V.$size)&&(Z=50+("string"==typeof K&&K.length||1)):null==V||"object"!=typeof V?(Z="string"==typeof K?K.length:1,J="primitive"):(Z=V.$size||0,J=J||void 0);else if(H=0,X=void 0,void 0===V.__invalidated){V.__invalidated=!0,V.$expires=0,h[h.length]=V;var i_=et.__head,o_=et.__tail;if(null!=V&&"object"==typeof V){var l_=V.__next,a_=V.__prev;l_&&null!=l_&&"object"==typeof l_&&(l_.__prev=a_),a_&&null!=a_&&"object"==typeof a_&&(a_.__next=l_),V===i_&&(et.__head=et.__next=i_=l_),V===o_&&(et.__tail=et.__prev=o_=a_),V.__next=V.__prev=void 0}}if(null==S||S!==V&&"array"===J){if(S===V)q=K,T=Z,C=J,W=X,F=H;else if(null==S)q=S,T=0,C="primitive",W=void 0,F=void 0;else if(null==(F=S.$expires)||1===F||0!==F&&F>Date.now())F=S.$expires,W=S.$timestamp,q="sentinel"===(C=S&&S.$type)?S.value:S,Array.isArray(q)?(null==(T=S.$size)&&(T=("sentinel"===C&&50||0)+q.length),C="array"):"sentinel"===C?null==(T=S.$size)&&(T=50+("string"==typeof q&&q.length||1)):null==S||"object"!=typeof S?(T="string"==typeof q?q.length:1,C="primitive"):(T=S.$size||0,C=C||void 0);else if(F=0,W=void 0,void 0===S.__invalidated){S.__invalidated=!0,S.$expires=0,h[h.length]=S;var f_=et.__head,s_=et.__tail;if(null!=S&&"object"==typeof S){var v_=S.__next,p_=S.__prev;v_&&null!=v_&&"object"==typeof v_&&(v_.__prev=p_),p_&&null!=p_&&"object"==typeof p_&&(p_.__next=v_),S===f_&&(et.__head=et.__next=f_=v_),S===s_&&(et.__tail=et.__prev=s_=p_),S.__next=S.__prev=void 0}}_:for(;(W>X||0===H&&((S=V)||!0))===!1;){if(void 0!==J)if("array"===J){if(V.$type=J=V.$type||"leaf",K.__container=V,V.$size=Z,"array"===C){var d_,u_=-1;if((d_=q.length)===K.length){r:for(;++u_<d_&&q[u_]===K[u_];);if(u_===d_)break _}}}else{"primitive"===J?(J="sentinel",Z=50+(Z||1),V={$size:Z,$type:J,value:K}):(V.$size=Z,V.$type=J=J||"leaf");var h_=et.__head,c_=et.__tail;if(V&&1!==V.$expires){var y_=V.__next,g_=V.__prev;V!==h_&&(y_&&null!=y_&&"object"==typeof y_&&(y_.__prev=g_),g_&&null!=g_&&"object"==typeof g_&&(g_.__next=y_),(y_=h_)&&null!=y_&&"object"==typeof y_&&(h_.__prev=V),et.__head=et.__next=h_=V,null!=h_&&"object"==typeof h_&&(h_.__next=y_,h_.__prev=void 0)),(null==c_||V===c_)&&(et.__tail=et.__prev=c_=g_||V)}}if(null!=S){if("array"===C){var x_=S.__context;if(null!=x_){for(var b_=(S.__refIndex||0)-1,m_=(x_.__refsLength||0)-1;++b_<=m_;)x_["__ref"+b_]=x_["__ref"+(b_+1)];x_.__refsLength=m_,S.__refIndex=void 0,S.__context=null}}if(S.__refsLength){for(var j_,$_=S.__refsLength||0,A_=V.__refsLength||0,z_=-1;++z_<$_;)void 0!==(j_=S["__ref"+z_])&&(j_.__context=V,V["__ref"+(A_+z_)]=j_,S["__ref"+z_]=void 0);V.__refsLength=A_+$_,S.__refsLength=void 0}var L_=et.__head,P_=et.__tail;if(null!=S&&"object"==typeof S){var O_=S.__next,w_=S.__prev;O_&&null!=O_&&"object"==typeof O_&&(O_.__prev=w_),w_&&null!=w_&&"object"==typeof w_&&(w_.__next=O_),S===L_&&(et.__head=et.__next=L_=O_),S===P_&&(et.__tail=et.__prev=P_=w_),S.__next=S.__prev=void 0}}n_=Z-T,V.$size=Z-n_,S&&V&&void 0!==!S.__generation&&(void 0===V.__generation||S.__generation>V.__generation)&&(V.__generation=S.__generation),B[g]=S=V;break _}}if(S.__parent=B,S.__key=g,0!==n_)for(var k_,E_,I_,R_,M_=S;void 0!==M_;){if(M_.$size=E_=(M_.$size||0)+n_,M_.__genUpdated!==tt)for(var U_,N_,D_,B_,S_,q_=M_,C_=[],T_=0;T_>=0;){if(void 0===(U_=C_[T_]))for(D_=B_=-1,S_=q_.__refsLength||0,C_[T_]=U_=[],q_.__genUpdated=tt,q_.__generation=(q_.__generation||0)+1,void 0!==(N_=q_.__parent)&&N_.__genUpdated!==tt&&(U_[++B_]=N_);++D_<S_;)void 0!==(N_=q_["__ref"+D_])&&N_.__genUpdated!==tt&&(U_[++B_]=N_);void 0!==(q_=U_.pop())?++T_:C_[T_--]=void 0}if(void 0!==(k_=M_.__parent)&&0>=E_){for(var F_,W_=M_.__refsLength||0,G_=-1;++G_<W_;)void 0!==(F_=M_["__ref"+G_])&&(F_.__context=void 0,M_["__ref"+G_]=void 0);if(M_.__refsLength=void 0,Array.isArray(I_="sentinel"===(R_=M_&&M_.$type)?M_.value:M_)){var Q_=M_.__context;if(null!=Q_){for(var V_=(M_.__refIndex||0)-1,K_=(Q_.__refsLength||0)-1;++V_<=K_;)Q_["__ref"+V_]=Q_["__ref"+(V_+1)];Q_.__refsLength=K_,M_.__refIndex=void 0,M_.__context=null}}k_[M_.__key]=M_.__parent=void 0;var J_=et.__head,Z_=et.__tail;if(null!=M_&&"object"==typeof M_){var H_=M_.__next,X_=M_.__prev;H_&&null!=H_&&"object"==typeof H_&&(H_.__prev=X_),X_&&null!=X_&&"object"==typeof X_&&(X_.__next=H_),M_===J_&&(et.__head=et.__next=J_=H_),M_===Z_&&(et.__tail=et.__prev=Z_=X_),M_.__next=M_.__prev=void 0}}M_=k_}for(;Array.isArray(q="sentinel"===(C=S&&S.$type)?S.value:S);){var Y_=et.__head,er=et.__tail;if(S&&1!==S.$expires){var tr=S.__next,_r=S.__prev;S!==Y_&&(tr&&null!=tr&&"object"==typeof tr&&(tr.__prev=_r),_r&&null!=_r&&"object"==typeof _r&&(_r.__next=tr),(tr=Y_)&&null!=tr&&"object"==typeof tr&&(Y_.__prev=S),et.__head=et.__next=Y_=S,null!=Y_&&"object"==typeof Y_&&(Y_.__next=tr,Y_.__prev=void 0)),(null==er||S===er)&&(et.__tail=et.__prev=er=_r||S)}B=D,Q=G,E[M]=y,I[M++]=x,y=q,m=y.length-1,b=0,x=0;continue t}if(null==S||void 0!==C){P.length=x+b+1,x=I[--M],b=m-x-1,y=E[M],m=y.length-1,L[L.length]=null;break e}B=S,Q=V}if(x===m){if(g=y[x],null!=g){P[P.length=x+b]=g,S=B[g],V=Q&&Q[g];var rr=0;if(null==V)K=V,Z=0,J="primitive",X=void 0,H=void 0;else if(null==(H=V.$expires)||1===H||0!==H&&H>Date.now())H=V.$expires,X=V.$timestamp,K="sentinel"===(J=V&&V.$type)?V.value:V,Array.isArray(K)?(null==(Z=V.$size)&&(Z=("sentinel"===J&&50||0)+K.length),J="array"):"sentinel"===J?null==(Z=V.$size)&&(Z=50+("string"==typeof K&&K.length||1)):null==V||"object"!=typeof V?(Z="string"==typeof K?K.length:1,J="primitive"):(Z=V.$size||0,J=J||void 0);else if(H=0,X=void 0,void 0===V.__invalidated){V.__invalidated=!0,V.$expires=0,h[h.length]=V;var nr=et.__head,ir=et.__tail;if(null!=V&&"object"==typeof V){var or=V.__next,lr=V.__prev;or&&null!=or&&"object"==typeof or&&(or.__prev=lr),lr&&null!=lr&&"object"==typeof lr&&(lr.__next=or),V===nr&&(et.__head=et.__next=nr=or),V===ir&&(et.__tail=et.__prev=ir=lr),V.__next=V.__prev=void 0}}if(null==S||S!==V&&"array"===J){if(S===V)q=K,T=Z,C=J,W=X,F=H;else if(null==S)q=S,T=0,C="primitive",W=void 0,F=void 0;else if(null==(F=S.$expires)||1===F||0!==F&&F>Date.now())F=S.$expires,W=S.$timestamp,q="sentinel"===(C=S&&S.$type)?S.value:S,Array.isArray(q)?(null==(T=S.$size)&&(T=("sentinel"===C&&50||0)+q.length),C="array"):"sentinel"===C?null==(T=S.$size)&&(T=50+("string"==typeof q&&q.length||1)):null==S||"object"!=typeof S?(T="string"==typeof q?q.length:1,C="primitive"):(T=S.$size||0,C=C||void 0);else if(F=0,W=void 0,void 0===S.__invalidated){S.__invalidated=!0,S.$expires=0,h[h.length]=S;var ar=et.__head,fr=et.__tail;if(null!=S&&"object"==typeof S){var sr=S.__next,vr=S.__prev;sr&&null!=sr&&"object"==typeof sr&&(sr.__prev=vr),vr&&null!=vr&&"object"==typeof vr&&(vr.__next=sr),S===ar&&(et.__head=et.__next=ar=sr),S===fr&&(et.__tail=et.__prev=fr=vr),S.__next=S.__prev=void 0}}_:for(;(W>X||0===H&&((S=V)||!0))===!1;){if(void 0!==J)if("array"===J){if(V.$type=J=V.$type||"leaf",K.__container=V,V.$size=Z,"array"===C){var pr,dr=-1;if((pr=q.length)===K.length){r:for(;++dr<pr&&q[dr]===K[dr];);if(dr===pr)break _}}}else{"primitive"===J?(J="sentinel",Z=50+(Z||1),V={$size:Z,$type:J,value:K}):(V.$size=Z,V.$type=J=J||"leaf");var ur=et.__head,hr=et.__tail;if(V&&1!==V.$expires){var cr=V.__next,yr=V.__prev;V!==ur&&(cr&&null!=cr&&"object"==typeof cr&&(cr.__prev=yr),yr&&null!=yr&&"object"==typeof yr&&(yr.__next=cr),(cr=ur)&&null!=cr&&"object"==typeof cr&&(ur.__prev=V),et.__head=et.__next=ur=V,null!=ur&&"object"==typeof ur&&(ur.__next=cr,ur.__prev=void 0)),(null==hr||V===hr)&&(et.__tail=et.__prev=hr=yr||V)}}if(null!=S){if("array"===C){var gr=S.__context;if(null!=gr){for(var xr=(S.__refIndex||0)-1,br=(gr.__refsLength||0)-1;++xr<=br;)gr["__ref"+xr]=gr["__ref"+(xr+1)];gr.__refsLength=br,S.__refIndex=void 0,S.__context=null}}if(S.__refsLength){for(var mr,jr=S.__refsLength||0,$r=V.__refsLength||0,Ar=-1;++Ar<jr;)void 0!==(mr=S["__ref"+Ar])&&(mr.__context=V,V["__ref"+($r+Ar)]=mr,S["__ref"+Ar]=void 0);V.__refsLength=$r+jr,S.__refsLength=void 0}var zr=et.__head,Lr=et.__tail;if(null!=S&&"object"==typeof S){var Pr=S.__next,Or=S.__prev;Pr&&null!=Pr&&"object"==typeof Pr&&(Pr.__prev=Or),Or&&null!=Or&&"object"==typeof Or&&(Or.__next=Pr),S===zr&&(et.__head=et.__next=zr=Pr),S===Lr&&(et.__tail=et.__prev=Lr=Or),S.__next=S.__prev=void 0}}rr=Z-T,V.$size=Z-rr,S&&V&&void 0!==!S.__generation&&(void 0===V.__generation||S.__generation>V.__generation)&&(V.__generation=S.__generation),B[g]=S=V;break _}}if(S.__parent=B,S.__key=g,0!==rr)for(var wr,kr,Er,Ir,Rr=S;void 0!==Rr;){if(Rr.$size=kr=(Rr.$size||0)+rr,Rr.__genUpdated!==tt)for(var Mr,Ur,Nr,Dr,Br,Sr=Rr,qr=[],Cr=0;Cr>=0;){if(void 0===(Mr=qr[Cr]))for(Nr=Dr=-1,Br=Sr.__refsLength||0,qr[Cr]=Mr=[],Sr.__genUpdated=tt,Sr.__generation=(Sr.__generation||0)+1,void 0!==(Ur=Sr.__parent)&&Ur.__genUpdated!==tt&&(Mr[++Dr]=Ur);++Nr<Br;)void 0!==(Ur=Sr["__ref"+Nr])&&Ur.__genUpdated!==tt&&(Mr[++Dr]=Ur);void 0!==(Sr=Mr.pop())?++Cr:qr[Cr--]=void 0}if(void 0!==(wr=Rr.__parent)&&0>=kr){for(var Tr,Fr=Rr.__refsLength||0,Wr=-1;++Wr<Fr;)void 0!==(Tr=Rr["__ref"+Wr])&&(Tr.__context=void 0,Rr["__ref"+Wr]=void 0);if(Rr.__refsLength=void 0,Array.isArray(Er="sentinel"===(Ir=Rr&&Rr.$type)?Rr.value:Rr)){var Gr=Rr.__context;if(null!=Gr){for(var Qr=(Rr.__refIndex||0)-1,Vr=(Gr.__refsLength||0)-1;++Qr<=Vr;)Gr["__ref"+Qr]=Gr["__ref"+(Qr+1)];Gr.__refsLength=Vr,Rr.__refIndex=void 0,Rr.__context=null}}wr[Rr.__key]=Rr.__parent=void 0;var Kr=et.__head,Jr=et.__tail;if(null!=Rr&&"object"==typeof Rr){var Zr=Rr.__next,Hr=Rr.__prev;Zr&&null!=Zr&&"object"==typeof Zr&&(Zr.__prev=Hr),Hr&&null!=Hr&&"object"==typeof Hr&&(Hr.__next=Zr),Rr===Kr&&(et.__head=et.__next=Kr=Zr),Rr===Jr&&(et.__tail=et.__prev=Jr=Hr),Rr.__next=Rr.__prev=void 0}}Rr=wr}}if(null==S||"error"===C){P.length=x+b+1,x=I[--M],b=m-x-1,y=E[M],m=y.length-1,L[L.length]=null;break e}var Xr;if(void 0===(Xr=y.__container||y).__context){var Yr=S.__refsLength||0;S["__ref"+Yr]=Xr,S.__refsLength=Yr+1,Xr.__refIndex=Yr,Xr.__context=S}do y=E[--M],x=I[M],b=m-x,m=y.length-1;while(M>-1&&x===m);if(m>x)for(;Array.isArray(q="sentinel"===(C=S&&S.$type)?S.value:S);){var en=et.__head,tn=et.__tail;if(S&&1!==S.$expires){var _n=S.__next,rn=S.__prev;S!==en&&(_n&&null!=_n&&"object"==typeof _n&&(_n.__prev=rn),rn&&null!=rn&&"object"==typeof rn&&(rn.__next=_n),(_n=en)&&null!=_n&&"object"==typeof _n&&(en.__prev=S),et.__head=et.__next=en=S,null!=en&&"object"==typeof en&&(en.__next=_n,en.__prev=void 0)),(null==tn||S===tn)&&(et.__tail=et.__prev=tn=rn||S)}B=D,Q=G,E[M]=y,I[M++]=x,y=q,m=y.length-1,b=0,x=0;continue t}if(M>-1){x+=1,B=S,Q=V;continue t}}break t}}if(null==S||void 0!==C){P.length=x+b+1;break e}v[x]=B=S,p[x]=Q=V,N[x]=U}if(x===m){if(g=y[x],null!=g&&"object"==typeof g&&(Array.isArray(g)?(g=g[g.index||(g.index=0)],null!=g&&"object"==typeof g&&(g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset)):g=void 0===g.offset&&(g.offset=g.from||(g.from=0))||g.offset),L[L.length=x]=g,null!=g){P[P.length=x+b]=g,S=B[g],V=Q&&Q[g],U=U[g];var nn=0;if(null==V)K=V,Z=0,J="primitive",X=void 0,H=void 0;else if(null==(H=V.$expires)||1===H||0!==H&&H>Date.now())H=V.$expires,X=V.$timestamp,K="sentinel"===(J=V&&V.$type)?V.value:V,Array.isArray(K)?(null==(Z=V.$size)&&(Z=("sentinel"===J&&50||0)+K.length),J="array"):"sentinel"===J?null==(Z=V.$size)&&(Z=50+("string"==typeof K&&K.length||1)):null==V||"object"!=typeof V?(Z="string"==typeof K?K.length:1,J="primitive"):(Z=V.$size||0,J=J||"leaf");else if(H=0,X=void 0,void 0===V.__invalidated){V.__invalidated=!0,V.$expires=0,h[h.length]=V;var on=et.__head,ln=et.__tail;if(null!=V&&"object"==typeof V){var an=V.__next,fn=V.__prev;an&&null!=an&&"object"==typeof an&&(an.__prev=fn),fn&&null!=fn&&"object"==typeof fn&&(fn.__next=an),V===on&&(et.__head=et.__next=on=an),V===ln&&(et.__tail=et.__prev=ln=fn),V.__next=V.__prev=void 0}}if(S===V)q=K,T=Z,C=J,W=X,F=H;else if(null==S)q=S,T=0,C="primitive",W=void 0,F=void 0;else if(null==(F=S.$expires)||1===F||0!==F&&F>Date.now())F=S.$expires,W=S.$timestamp,q="sentinel"===(C=S&&S.$type)?S.value:S,Array.isArray(q)?(null==(T=S.$size)&&(T=("sentinel"===C&&50||0)+q.length),C="array"):"sentinel"===C?null==(T=S.$size)&&(T=50+("string"==typeof q&&q.length||1)):null==S||"object"!=typeof S?(T="string"==typeof q?q.length:1,C="primitive"):(T=S.$size||0,C=C||"leaf");else if(F=0,W=void 0,void 0===S.__invalidated){S.__invalidated=!0,S.$expires=0,h[h.length]=S;var sn=et.__head,vn=et.__tail;if(null!=S&&"object"==typeof S){var pn=S.__next,dn=S.__prev;pn&&null!=pn&&"object"==typeof pn&&(pn.__prev=dn),dn&&null!=dn&&"object"==typeof dn&&(dn.__next=pn),S===sn&&(et.__head=et.__next=sn=pn),S===vn&&(et.__tail=et.__prev=vn=dn),S.__next=S.__prev=void 0}}t:for(;(W>X||0===H&&((S=V)||!0))===!1;){if("primitive"===J?(J="sentinel",Z=50+(Z||1),V={$size:Z,$type:J,value:K}):"array"===J?V.$type=J=V.$type||"leaf":(V.$size=Z,V.$type=J=J||"leaf"),S&&S!==V){if("array"===C){var un=S.__context;if(null!=un){for(var hn=(S.__refIndex||0)-1,cn=(un.__refsLength||0)-1;++hn<=cn;)un["__ref"+hn]=un["__ref"+(hn+1)];un.__refsLength=cn,S.__refIndex=void 0,S.__context=null}}if(S.__refsLength){for(var yn,gn=S.__refsLength||0,xn=V.__refsLength||0,bn=-1;++bn<gn;)void 0!==(yn=S["__ref"+bn])&&(yn.__context=V,V["__ref"+(xn+bn)]=yn,S["__ref"+bn]=void 0);V.__refsLength=xn+gn,S.__refsLength=void 0}var mn=et.__head,jn=et.__tail;if(null!=S&&"object"==typeof S){var $n=S.__next,An=S.__prev;$n&&null!=$n&&"object"==typeof $n&&($n.__prev=An),An&&null!=An&&"object"==typeof An&&(An.__next=$n),S===mn&&(et.__head=et.__next=mn=$n),S===jn&&(et.__tail=et.__prev=jn=An),S.__next=S.__prev=void 0}}nn=Z-T,V.$size=Z-nn,S&&V&&void 0!==!S.__generation&&(void 0===V.__generation||S.__generation>V.__generation)&&(V.__generation=S.__generation),B[g]=S=V;break t}if(S.__parent=B,S.__key=g,0!==nn)for(var zn,Ln,Pn,On,wn=S;void 0!==wn;){if(wn.$size=Ln=(wn.$size||0)+nn,wn.__genUpdated!==tt)for(var kn,En,In,Rn,Mn,Un=wn,Nn=[],Dn=0;Dn>=0;){if(void 0===(kn=Nn[Dn]))for(In=Rn=-1,Mn=Un.__refsLength||0,Nn[Dn]=kn=[],Un.__genUpdated=tt,Un.__generation=(Un.__generation||0)+1,void 0!==(En=Un.__parent)&&En.__genUpdated!==tt&&(kn[++Rn]=En);++In<Mn;)void 0!==(En=Un["__ref"+In])&&En.__genUpdated!==tt&&(kn[++Rn]=En);void 0!==(Un=kn.pop())?++Dn:Nn[Dn--]=void 0}if(void 0!==(zn=wn.__parent)&&0>=Ln){for(var Bn,Sn=wn.__refsLength||0,qn=-1;++qn<Sn;)void 0!==(Bn=wn["__ref"+qn])&&(Bn.__context=void 0,wn["__ref"+qn]=void 0);if(wn.__refsLength=void 0,Array.isArray(Pn="sentinel"===(On=wn&&wn.$type)?wn.value:wn)){var Cn=wn.__context;if(null!=Cn){for(var Tn=(wn.__refIndex||0)-1,Fn=(Cn.__refsLength||0)-1;++Tn<=Fn;)Cn["__ref"+Tn]=Cn["__ref"+(Tn+1)];Cn.__refsLength=Fn,wn.__refIndex=void 0,wn.__context=null}}zn[wn.__key]=wn.__parent=void 0;var Wn=et.__head,Gn=et.__tail;if(null!=wn&&"object"==typeof wn){var Qn=wn.__next,Vn=wn.__prev;Qn&&null!=Qn&&"object"==typeof Qn&&(Qn.__prev=Vn),Vn&&null!=Vn&&"object"==typeof Vn&&(Vn.__next=Qn),wn===Wn&&(et.__head=et.__next=Wn=Qn),wn===Gn&&(et.__tail=et.__prev=Gn=Vn),wn.__next=wn.__prev=void 0}}wn=zn}else for(var Kn=S;void 0!==Kn;){if(Kn.__genUpdated!==tt)for(var Jn,Zn,Hn,Xn,Yn,ei=Kn,ti=[],_i=0;_i>=0;){if(void 0===(Jn=ti[_i]))for(Hn=Xn=-1,Yn=ei.__refsLength||0,ti[_i]=Jn=[],ei.__genUpdated=tt,ei.__generation=(ei.__generation||0)+1,void 0!==(Zn=ei.__parent)&&Zn.__genUpdated!==tt&&(Jn[++Xn]=Zn);++Hn<Yn;)void 0!==(Zn=ei["__ref"+Hn])&&Zn.__genUpdated!==tt&&(Jn[++Xn]=Zn);void 0!==(ei=Jn.pop())?++_i:ti[_i--]=void 0}Kn=Kn.__parent}var ri=et.__head,ni=et.__tail;if(S&&1!==S.$expires){var ii=S.__next,oi=S.__prev;S!==ri&&(ii&&null!=ii&&"object"==typeof ii&&(ii.__prev=oi),oi&&null!=oi&&"object"==typeof oi&&(oi.__next=ii),(ii=ri)&&null!=ii&&"object"==typeof ii&&(ri.__prev=S),et.__head=et.__next=ri=S,null!=ri&&"object"==typeof ri&&(ri.__next=ii,ri.__prev=void 0)),(null==ni||S===ni)&&(et.__tail=et.__prev=ni=oi||S)}}q="sentinel"===(C=S&&S.$type)?S.value:S}break e}if(null!=S)if(O.value=q,"error"===C)for(var li,ai,fi,si,vi,pi,di,ui,hi=U.__observers.concat(),ci=-1,yi=hi.length;++ci<yi;){if(ui=1,m>x)for(pi=x,di=m;++pi<=di;)null!=(vi=y[pi])&&(Array.isArray(vi)?ui*=vi.length||1:null!=vi&&"object"==typeof vi&&(ui*=vi.to-(vi.offset||vi.from||0)+1));(li=hi[ci]).count=(li.count||0)-ui,ai=Array.isArray(O)?[]:null!=O&&"object"==typeof O?{}:O;var gi,xi;for(var bi in O)if(O.hasOwnProperty(bi)){if(gi=xi=O[bi],Array.isArray(gi)){var mi=-1,ji=gi.length;for(xi=new Array(ji);++mi<ji;)xi[mi]=gi[mi]}else null!=gi&&"object"==typeof gi&&(xi=Object.create(gi));ai[bi]=xi}si=Array.isArray(q)?[]:null!=q&&"object"==typeof q?{}:q;var $i,Ai;for(var zi in q)if(q.hasOwnProperty(zi)&&"_"!==zi[0]){if($i=Ai=q[zi],Array.isArray($i)){var Li=-1,Pi=$i.length;for(Ai=new Array(Pi);++Li<Pi;)Ai[Li]=$i[Li]}else null!=$i&&"object"==typeof $i&&(Ai=Object.create($i));si[zi]=Ai}ai.path=ai.path.slice(li.path.length),ai.value=si,(fi=li.errors)[fi.length]=ai}else for(var Oi,wi,ki,Ei,Ii,Ri,Mi=U.__observers.concat(),Ui=-1,Ni=Mi.length;++Ui<Ni;){if(Ri=1,void 0===q&&m>x)for(Ei=x,Ii=m;++Ei<=Ii;)null!=(ki=y[Ei])&&(Array.isArray(ki)?Ri*=ki.length||1:null!=ki&&"object"==typeof ki&&(Ri*=ki.to-(ki.offset||ki.from||0)+1));if((Oi=Mi[Ui]).count=(Oi.count||0)-Ri,Oi.streaming===!0&&(void 0!==q||Oi.materialized===!0)){wi=Array.isArray(O)?[]:null!=O&&"object"==typeof O?{}:O;var Di,Bi;for(var Si in O)if(O.hasOwnProperty(Si)){if(Di=Bi=O[Si],Array.isArray(Di)){var qi=-1,Ci=Di.length;for(Bi=new Array(Ci);++qi<Ci;)Bi[qi]=Di[qi]}else null!=Di&&"object"==typeof Di&&(Bi=Object.create(Di));wi[Si]=Bi}wi.path=wi.path.slice(Oi.path.length),Oi.onNext(wi)}}e:for(;x>=0;--x)if(g=y[x],null!=g&&"object"==typeof g){if(Array.isArray(g)){if(++g.index!==g.length)break e;if(g=g[g.index=0],null==g||"object"!=typeof g)continue e}if(!(++g.offset>(g.to||(g.to=g.from+(g.length||1)-1))))break e;g.offset=g.from}}U=N[-1];for(var Ti,Fi,Wi=U.__observers.concat(),Gi=-1,Qi=Wi.length;++Gi<Qi;)(Ti=Wi[Gi]).count<=0&&(Ti.streaming===!1&&Ti.onNext({paths:Ti.originals.map(function(e){return e.slice(Ti.path.length)}),value:Y.getValueSync(Ti.path,D,D)}),0===(Fi=Ti.errors).length?Ti.onCompleted&&Ti.onCompleted():1===Fi.length?Ti.onError&&Ti.onError(Fi[0]):Ti.onError&&Ti.onError({innerErrors:Fi}));var Vi,Ki,Ji,Zi,Hi,Xi,Yi=Y._maxSize,eo=n.$size,to=Yi*Y._collectRatio,_o=0;if(eo>=Yi&&(null==et._pendingRequests||et._pendingRequests<=0)){for(;eo>=to&&null!=(Zi=h.pop());){_o++,eo-=Ji=Zi.$size||0;do{if(Ki=Zi.__parent,(Zi.$size-=Ji)<=0){for(var ro,no=Zi.__refsLength||0,io=-1;++io<no;)void 0!==(ro=Zi["__ref"+io])&&(ro.__context=void 0,Zi["__ref"+io]=void 0);if(Zi.__refsLength=void 0,Array.isArray(Hi="sentinel"===(Xi=Zi&&Zi.$type)?Zi.value:Zi)){var oo=Zi.__context;if(null!=oo){for(var lo=(Zi.__refIndex||0)-1,ao=(oo.__refsLength||0)-1;++lo<=ao;)oo["__ref"+lo]=oo["__ref"+(lo+1)];oo.__refsLength=ao,Zi.__refIndex=void 0,Zi.__context=null}}void 0!==Ki&&(Ki[Zi.__key]=Zi.__parent=void 0)}Zi=Ki}while(void 0!==Zi)}if(h.length<=0)for(Vi=et.__tail;eo>=to&&null!=(Zi=Vi);){_o++,Vi=Vi.__prev,eo-=Ji=Zi.$size||0,Zi.__prev=Zi.__next=void 0;do{if(Ki=Zi.__parent,(Zi.$size-=Ji)<=0){for(var fo,so=Zi.__refsLength||0,vo=-1;++vo<so;)void 0!==(fo=Zi["__ref"+vo])&&(fo.__context=void 0,Zi["__ref"+vo]=void 0);if(Zi.__refsLength=void 0,Array.isArray(Hi="sentinel"===(Xi=Zi&&Zi.$type)?Zi.value:Zi)){var po=Zi.__context;if(null!=po){for(var uo=(Zi.__refIndex||0)-1,ho=(po.__refsLength||0)-1;++uo<=ho;)po["__ref"+uo]=po["__ref"+(uo+1)];po.__refsLength=ho,Zi.__refIndex=void 0,Zi.__context=null}}void 0!==Ki&&(Ki[Zi.__key]=Zi.__parent=void 0)}Zi=Ki}while(void 0!==Zi)}null==(et.__tail=et.__prev=Vi)?et.__head=et.__next=void 0:Vi.__next=void 0}return Disposable.empty}function invalidatePath(e,t,_,r){var n,i,o,l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A,z=this,L=z._root,P=GENERATION_GENERATION++;r=r||z._path,e=e||[],t=t||z._cache,_=_||z.__context||(e=r.concat(e))&&t,i=e,d={path:[],optimized:[]},u=[],h=[],c=[],l=0,a=0,f=i.length-1,g=t,x=_,b=x,m=b,v=d.path,p=d.optimized,y=-1,s=0,n=z._expired||(z._expired=[]),u[-1]=i,h[-1]=0;e:for(;;){for(;f>l;++l)if(o=i[l],null!=o&&"object"==typeof o&&(Array.isArray(o)?(o=o[o.index||(o.index=0)],null!=o&&"object"==typeof o&&(o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset)):o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset),null!=o){for(b=(b=x[o])&&(null==(A=b.$expires)||1===A||0!==A&&A>Date.now()?b:void 0);Array.isArray(m="sentinel"===(j=b&&b.$type)?b.value:b);){var O=L.__head,w=L.__tail;if(b&&1!==b.$expires){var k=b.__next,E=b.__prev;b!==O&&(k&&null!=k&&"object"==typeof k&&(k.__prev=E),E&&null!=E&&"object"==typeof E&&(E.__next=k),(k=O)&&null!=k&&"object"==typeof k&&(O.__prev=b),L.__head=L.__next=O=b,null!=O&&"object"==typeof O&&(O.__next=k,O.__prev=void 0)),(null==w||b===w)&&(L.__tail=L.__prev=w=E||b)
}if(void 0!==(b=b.__context));else{x=g,u[y]=i,h[y++]=l,i=m,f=i.length-1,a=0,l=0;t:for(;;){for(;f>l;++l)if(o=i[l],null!=o){for(b=(b=x[o])&&(null==(A=b.$expires)||1===A||0!==A&&A>Date.now()?b:void 0);Array.isArray(m="sentinel"===(j=b&&b.$type)?b.value:b);){var I=L.__head,R=L.__tail;if(b&&1!==b.$expires){var M=b.__next,U=b.__prev;b!==I&&(M&&null!=M&&"object"==typeof M&&(M.__prev=U),U&&null!=U&&"object"==typeof U&&(U.__next=M),(M=I)&&null!=M&&"object"==typeof M&&(I.__prev=b),L.__head=L.__next=I=b,null!=I&&"object"==typeof I&&(I.__next=M,I.__prev=void 0)),(null==R||b===R)&&(L.__tail=L.__prev=R=U||b)}if(void 0===(b=b.__context)){x=g,u[y]=i,h[y++]=l,i=m,f=i.length-1,a=0,l=0;continue t}}if(null==b||void 0!==j)break e;x=b}if(l===f){if(o=i[l],null!=o&&(b=(b=x[o])&&(null==(A=b.$expires)||1===A||0!==A&&A>Date.now()?b:void 0)),null==b||"error"===j)break e;var N;if(void 0===(N=i.__container||i).__context){var D=b.__refsLength||0;b["__ref"+D]=N,b.__refsLength=D+1,N.__refIndex=D,N.__context=b}do i=u[--y],l=h[y],a=f-l,f=i.length-1;while(y>-1&&l===f);if(f>l)for(;Array.isArray(m="sentinel"===(j=b&&b.$type)?b.value:b);){var B=L.__head,S=L.__tail;if(b&&1!==b.$expires){var q=b.__next,C=b.__prev;b!==B&&(q&&null!=q&&"object"==typeof q&&(q.__prev=C),C&&null!=C&&"object"==typeof C&&(C.__next=q),(q=B)&&null!=q&&"object"==typeof q&&(B.__prev=b),L.__head=L.__next=B=b,null!=B&&"object"==typeof B&&(B.__next=q,B.__prev=void 0)),(null==S||b===S)&&(L.__tail=L.__prev=S=C||b)}if(void 0===(b=b.__context)){x=g,u[y]=i,h[y++]=l,i=m,f=i.length-1,a=0,l=0;continue t}}if(y>-1){l+=1,x=b;continue t}}break t}}}if(null==b||void 0!==j)break e;x=b}if(l===f){o=i[l],null!=o&&"object"==typeof o&&(Array.isArray(o)?(o=o[o.index||(o.index=0)],null!=o&&"object"==typeof o&&(o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset)):o=void 0===o.offset&&(o.offset=o.from||(o.from=0))||o.offset),null!=o&&(b=x[o]),$=-1*(b&&b.$size||0);for(var T,F,W,G,Q=b;void 0!==Q;){if(Q.$size=F=(Q.$size||0)+$,Q.__genUpdated!==P)for(var V,K,J,Z,H,X=Q,Y=[],et=0;et>=0;){if(void 0===(V=Y[et]))for(J=Z=-1,H=X.__refsLength||0,Y[et]=V=[],X.__genUpdated=P,X.__generation=(X.__generation||0)+1,void 0!==(K=X.__parent)&&K.__genUpdated!==P&&(V[++Z]=K);++J<H;)void 0!==(K=X["__ref"+J])&&K.__genUpdated!==P&&(V[++Z]=K);void 0!==(X=V.pop())?++et:Y[et--]=void 0}if(void 0!==(T=Q.__parent)&&0>=F){for(var tt,_t=Q.__refsLength||0,rt=-1;++rt<_t;)void 0!==(tt=Q["__ref"+rt])&&(tt.__context=void 0,Q["__ref"+rt]=void 0);if(Q.__refsLength=void 0,Array.isArray(W="sentinel"===(G=Q&&Q.$type)?Q.value:Q)){var nt=Q.__context;if(null!=nt){for(var it=(Q.__refIndex||0)-1,ot=(nt.__refsLength||0)-1;++it<=ot;)nt["__ref"+it]=nt["__ref"+(it+1)];nt.__refsLength=ot,Q.__refIndex=void 0,Q.__context=null}}T[Q.__key]=Q.__parent=void 0;var lt=L.__head,at=L.__tail;if(null!=Q&&"object"==typeof Q){var ft=Q.__next,st=Q.__prev;ft&&null!=ft&&"object"==typeof ft&&(ft.__prev=st),st&&null!=st&&"object"==typeof st&&(st.__next=ft),Q===lt&&(L.__head=L.__next=lt=ft),Q===at&&(L.__tail=L.__prev=at=st),Q.__next=Q.__prev=void 0}}Q=T}}break e}return d.value=m,d}function invalidatePaths(e,t,_,r,n,i,o){var l,a,f,s,v,p,d,u,h,c,y,g,x,b,m,j,$,A,z,L,P,O,w,k,E,I,R,M,U,N,D,B,S,q,C,T,F,W,G=this,Q=G._root,V=GENERATION_GENERATION++;for(h=e,l=G._connected,a=G._materialized,f=G._streaming,s=G._refreshing,c=o||G._path,v=h.contexts||(h.contexts=[]),p=h.messages||(h.messages=[]),U=h.batchedPathMaps||(h.batchedPathMaps=[]),O=h.originalMisses||(h.originalMisses=[]),w=h.optimizedMisses||(h.optimizedMisses=[]),d=h.errors||(h.errors=[]),k=h.refs||(h.refs=[]),I=h.crossed||(h.crossed=[]),E=h.cols||(h.cols=[]),P=h.pbv||(h.pbv={path:[],optimized:[]}),m=h.index||(h.index=0),j=h.length,M=h.batchedPathMap,F=h.value,W=F,n=n||G._cache,o=c,null==i&&null==(i=G.__context)&&(c.length>0?(P=G._getContext(),c=P.path,P.path=[],P.optimized=[],i=P.value||{}):i=n),N=n,D=i,B=D,S=B,z=P.path,L=P.optimized,R=-1,$=0,u=G._expired||(G._expired=[]),k[-1]=c,E[-1]=0,I[-1]=A=c,v[-1]=D;j>m;h.index=++m)for(c=h[m],g=c.index||(c.index=0),x=c.offset||(c.offset=0),b=c.length-1,R=-1,k[-1]=c,I=[],I[-1]=A;g>=0;){E[R=-1]=g,D=v[g-1];e:for(;;){for(;b>g;++g)if(y=c[g],null!=y&&"object"==typeof y&&(Array.isArray(y)?(y=y[y.index||(y.index=0)],null!=y&&"object"==typeof y&&(y=void 0===y.offset&&(y.offset=y.from||(y.from=0))||y.offset)):y=void 0===y.offset&&(y.offset=y.from||(y.from=0))||y.offset),null!=y){for(B=(B=D[y])&&(null==(T=B.$expires)||1===T||0!==T&&T>Date.now()?B:void 0);Array.isArray(S="sentinel"===(q=B&&B.$type)?B.value:B);){var K=Q.__head,J=Q.__tail;if(B&&1!==B.$expires){var Z=B.__next,H=B.__prev;B!==K&&(Z&&null!=Z&&"object"==typeof Z&&(Z.__prev=H),H&&null!=H&&"object"==typeof H&&(H.__next=Z),(Z=K)&&null!=Z&&"object"==typeof Z&&(K.__prev=B),Q.__head=Q.__next=K=B,null!=K&&"object"==typeof K&&(K.__next=Z,K.__prev=void 0)),(null==J||B===J)&&(Q.__tail=Q.__prev=J=H||B)}if(void 0!==(B=B.__context));else{D=N,k[R]=c,E[R++]=g,c=S,b=c.length-1,x=0,g=0;t:for(;;){for(;b>g;++g)if(y=c[g],null!=y){for(B=(B=D[y])&&(null==(T=B.$expires)||1===T||0!==T&&T>Date.now()?B:void 0);Array.isArray(S="sentinel"===(q=B&&B.$type)?B.value:B);){var X=Q.__head,Y=Q.__tail;if(B&&1!==B.$expires){var et=B.__next,tt=B.__prev;B!==X&&(et&&null!=et&&"object"==typeof et&&(et.__prev=tt),tt&&null!=tt&&"object"==typeof tt&&(tt.__next=et),(et=X)&&null!=et&&"object"==typeof et&&(X.__prev=B),Q.__head=Q.__next=X=B,null!=X&&"object"==typeof X&&(X.__next=et,X.__prev=void 0)),(null==Y||B===Y)&&(Q.__tail=Q.__prev=Y=tt||B)}if(void 0===(B=B.__context)){D=N,k[R]=c,E[R++]=g,c=S,b=c.length-1,x=0,g=0;continue t}}if(null==B||void 0!==q)break e;D=B}if(g===b){if(y=c[g],null!=y&&(B=(B=D[y])&&(null==(T=B.$expires)||1===T||0!==T&&T>Date.now()?B:void 0)),null==B||"error"===q)break e;var _t;if(void 0===(_t=c.__container||c).__context){var rt=B.__refsLength||0;B["__ref"+rt]=_t,B.__refsLength=rt+1,_t.__refIndex=rt,_t.__context=B}do c=k[--R],g=E[R],x=b-g,b=c.length-1;while(R>-1&&g===b);if(b>g)for(;Array.isArray(S="sentinel"===(q=B&&B.$type)?B.value:B);){var nt=Q.__head,it=Q.__tail;if(B&&1!==B.$expires){var ot=B.__next,lt=B.__prev;B!==nt&&(ot&&null!=ot&&"object"==typeof ot&&(ot.__prev=lt),lt&&null!=lt&&"object"==typeof lt&&(lt.__next=ot),(ot=nt)&&null!=ot&&"object"==typeof ot&&(nt.__prev=B),Q.__head=Q.__next=nt=B,null!=nt&&"object"==typeof nt&&(nt.__next=ot,nt.__prev=void 0)),(null==it||B===it)&&(Q.__tail=Q.__prev=it=lt||B)}if(void 0===(B=B.__context)){D=N,k[R]=c,E[R++]=g,c=S,b=c.length-1,x=0,g=0;continue t}}if(R>-1){g+=1,D=B;continue t}}break t}}}if(null==B||void 0!==q)break e;v[g]=D=B}if(g===b){y=c[g],null!=y&&"object"==typeof y&&(Array.isArray(y)?(y=y[y.index||(y.index=0)],null!=y&&"object"==typeof y&&(y=void 0===y.offset&&(y.offset=y.from||(y.from=0))||y.offset)):y=void 0===y.offset&&(y.offset=y.from||(y.from=0))||y.offset),null!=y&&(B=D[y]),C=-1*(B&&B.$size||0);for(var at,ft,st,vt,pt=B;void 0!==pt;){if(pt.$size=ft=(pt.$size||0)+C,pt.__genUpdated!==V)for(var dt,ut,ht,ct,yt,gt=pt,xt=[],bt=0;bt>=0;){if(void 0===(dt=xt[bt]))for(ht=ct=-1,yt=gt.__refsLength||0,xt[bt]=dt=[],gt.__genUpdated=V,gt.__generation=(gt.__generation||0)+1,void 0!==(ut=gt.__parent)&&ut.__genUpdated!==V&&(dt[++ct]=ut);++ht<yt;)void 0!==(ut=gt["__ref"+ht])&&ut.__genUpdated!==V&&(dt[++ct]=ut);void 0!==(gt=dt.pop())?++bt:xt[bt--]=void 0}if(void 0!==(at=pt.__parent)&&0>=ft){for(var mt,jt=pt.__refsLength||0,$t=-1;++$t<jt;)void 0!==(mt=pt["__ref"+$t])&&(mt.__context=void 0,pt["__ref"+$t]=void 0);if(pt.__refsLength=void 0,Array.isArray(st="sentinel"===(vt=pt&&pt.$type)?pt.value:pt)){var At=pt.__context;if(null!=At){for(var zt=(pt.__refIndex||0)-1,Lt=(At.__refsLength||0)-1;++zt<=Lt;)At["__ref"+zt]=At["__ref"+(zt+1)];At.__refsLength=Lt,pt.__refIndex=void 0,pt.__context=null}}at[pt.__key]=pt.__parent=void 0;var Pt=Q.__head,Ot=Q.__tail;if(null!=pt&&"object"==typeof pt){var wt=pt.__next,kt=pt.__prev;wt&&null!=wt&&"object"==typeof wt&&(wt.__prev=kt),kt&&null!=kt&&"object"==typeof kt&&(kt.__next=wt),pt===Pt&&(Q.__head=Q.__next=Pt=wt),pt===Ot&&(Q.__tail=Q.__prev=Ot=kt),pt.__next=pt.__prev=void 0}}pt=at}}break e}e:for(;g>=0;--g)if(y=c[g],null!=y&&"object"==typeof y){if(Array.isArray(y)){if(++y.index!==y.length)break e;if(y=y[y.index=0],null==y||"object"!=typeof y)continue e}if(!(++y.offset>(y.to||(y.to=y.from+(y.length||1)-1))))break e;y.offset=y.from}}return t&&t(this),r&&r(),Disposable.empty}function pathMapWithObserver(e,t,_){{var r,n,i,o,l,a,f,s,v,p,d,u,h,c=this;c._root}for(n=t,o=e,p=0,d=o.length,i=((r=[])[-1]=h=_||(_={__observers:[]})).__observers,n&&-1===i.indexOf(n)&&(i[i.length]=n);d>p;o.index=++p)for(l=o[p],f=0,s=0,v=l.length-1;f>=0;){u=r[f-1];e:for(;;){for(;v>f;++f)a=l[f],null!=a&&"object"==typeof a&&(Array.isArray(a)?(a=a[a.index||(a.index=0)],null!=a&&"object"==typeof a&&(a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset)):a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset),null!=a&&(i=(h=u[a]||(u[a]={__observers:[]})).__observers,n&&-1===i.indexOf(n)&&(i[i.length]=n),r[f]=u=h);f===v&&(a=l[f],null!=a&&"object"==typeof a&&(Array.isArray(a)?(a=a[a.index||(a.index=0)],null!=a&&"object"==typeof a&&(a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset)):a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset),null!=a&&(i=(h=u[a]||(u[a]={__observers:[]})).__observers,n&&-1===i.indexOf(n)&&(i[i.length]=n,n.count=(n.count||0)+1)));break e}e:for(;f>=0;--f)if(a=l[f],null!=a&&"object"==typeof a){if(Array.isArray(a)){if(++a.index!==a.length)break e;if(a=a[a.index=0],null==a||"object"!=typeof a)continue e}if(!(++a.offset>(a.to||(a.to=a.from+(a.length||1)-1))))break e;a.offset=a.from}}return _}function pathMapWithoutObserver(e,t,_){{var r,n,i,o,l,a,f,s,v,p,d,u,h,c=this;c._root}if(n=t,o=e,p=0,d=o.length,i=((r=[])[-1]=h=_).__observers,null!=n){var y,g;y=i,-1!==(g=y.indexOf(n))&&y.splice(g,1)}for(;d>p;o.index=++p)for(l=o[p],f=0,s=0,v=l.length-1;f>=0;){u=r[f-1];e:for(;;){for(;v>f;++f)if(a=l[f],null!=a&&"object"==typeof a&&(Array.isArray(a)?(a=a[a.index||(a.index=0)],null!=a&&"object"==typeof a&&(a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset)):a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset),null!=a){if(i=(h=u[a]).__observers,null!=n){var x,b;x=i,-1!==(b=x.indexOf(n))&&x.splice(b,1)}r[f]=u=h}if(f===v&&(a=l[f],null!=a&&"object"==typeof a&&(Array.isArray(a)?(a=a[a.index||(a.index=0)],null!=a&&"object"==typeof a&&(a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset)):a=void 0===a.offset&&(a.offset=a.from||(a.from=0))||a.offset),null!=a&&(i=(h=u[a]).__observers,null!=n))){var m,j;m=i,-1!==(j=m.indexOf(n))&&m.splice(j,1),n.count=(n.count||0)-1}break e}e:for(;f>=0;--f)if(a=l[f],null!=a&&"object"==typeof a){if(Array.isArray(a)){if(++a.index!==a.length)break e;if(a=a[a.index=0],null==a||"object"!=typeof a)continue e}if(!(++a.offset>(a.to||(a.to=a.from+(a.length||1)-1))))break e;a.offset=a.from}}return _}function callPath(e,t,_,r,n,i,o){if(!Array.isArray(e))throw new Error("PathEvaluator.call must be called with an Array path.");n=n||[],i=i||[],o=o||[];var l=this,a=this._path,f=o.map(function(e){return a.concat(e)}),s=this.loader.call(a.concat(e),n,i,f).subscribe(function(e){var n=e.invalidated||[];if(n.length>0)s=invalidatePaths.call(l,n,function(){for(var n,i=[e.error],o=l._errorSelector;void 0!==(n=i.pop());)n.innerErrors?i.push.apply(i,n.innerErrors):(n.$type="error",l._setPath(n.path||n.pql,o(n),e.value));e.batchedPathMap=null,s=l._setPBF(e,t,_,r,l._cache,l._cache,[])},_,noop,l._cache,l._cache);else{for(var i,o=[e.error],a=l._errorSelector;void 0!==(i=o.pop());)i.innerErrors?o.push.apply(o,i.innerErrors):(i.$type="error",l._setPath(i.path||i.pql,a(i),e.value));e.batchedPathMap=null,s=l._setPBF(e,t,_,r,l._cache,l._cache,[])}},_,noop);return Disposable.create(function(){s.dispose()})}function getPathsAsObservable(){var e,t=getPaths,_=this,r=-1,n=arguments.length;for(e=new Array(n);++r<n;)e[r]=arguments[r];return Observable.createWithDisposable(function(r){function n(e){r.onNext(e)}function i(e){r.onError(e)}function o(){r.onCompleted()}var l,a=-1,f=e.length;for(l=new Array(f);++a<f;)l[a]=e[a];return l.splice(1,0,n,i,o),t.apply(_,l)})}function setPathsAsObservable(){var e,t=setPaths,_=this,r=-1,n=arguments.length;for(e=new Array(n);++r<n;)e[r]=arguments[r];return Observable.createWithDisposable(function(r){function n(e){r.onNext(e)}function i(e){r.onError(e)}function o(){r.onCompleted()}var l,a=-1,f=e.length;for(l=new Array(f);++a<f;)l[a]=e[a];return l.splice(1,0,n,i,o),t.apply(_,l)})}function setPBFAsObservable(){var e,t=setPBF,_=this,r=-1,n=arguments.length;for(e=new Array(n);++r<n;)e[r]=arguments[r];return Observable.createWithDisposable(function(r){function n(e){r.onNext(e)}function i(e){r.onError(e)}function o(){r.onCompleted()}var l,a=-1,f=e.length;for(l=new Array(f);++a<f;)l[a]=e[a];return l.splice(1,0,n,i,o),t.apply(_,l)})}function invalidatePathsAsObservable(){var e,t=invalidatePaths,_=this,r=-1,n=arguments.length;for(e=new Array(n);++r<n;)e[r]=arguments[r];return Observable.createWithDisposable(function(r){function n(e){r.onNext(e)}function i(e){r.onError(e)}function o(){r.onCompleted()}var l,a=-1,f=e.length;for(l=new Array(f);++a<f;)l[a]=e[a];return l.splice(1,0,n,i,o),t.apply(_,l)})}function callPathAsObservable(){var e,t=callPath,_=this,r=-1,n=arguments.length;for(e=new Array(n);++r<n;)e[r]=arguments[r];return Observable.createWithDisposable(function(r){function n(e){r.onNext(e)}function i(e){r.onError(e)}function o(){r.onCompleted()}var l,a=-1,f=e.length;for(l=new Array(f);++a<f;)l[a]=e[a];return l.splice(1,0,n,i,o),t.apply(_,l)})}function getPathsAsPromises(){return[]}function setPathsAsPromises(){return[]}function setPBFAsPromises(){return[]}function invalidatePathsAsPromise(){return[]}function callPathAsPromise(){return[]}function toBatched(){if(this._batched===!0)return this;var e=Object.create(this);return e._batched=!0,e}function toIndependent(){if(this._batched===!1)return this;var e=Object.create(this);return e._batched=!1,e}function toLazy(){if(this._lazy===!0)return this;var e=Object.create(this);return e._lazy=!0,e}function toEager(){if(this._lazy===!1)return this;var e=Object.create(this);return e._lazy=!1,e}function toProgressive(){if(this._streaming===!0)return this;var e=Object.create(this);return e._streaming=!0,e}function toAggregate(){if(this._streaming===!1)return this;var e=Object.create(this);return e._streaming=!1,e}function toRemote(){if(this._connected===!0)return this;var e=Object.create(this);return e._connected=!0,e}function toLocal(){if(this._connected===!1)return this;var e=Object.create(this);return e._connected=!1,e}function toRefreshed(){if(this._refreshing===!0)return this;var e=Object.create(this);return e._refreshing=!0,e}function toCached(){if(this._refreshing===!1)return this;var e=Object.create(this);return e._refreshing=!1,e}function toMaterialized(){if(this._materialized===!0)return this;var e=Object.create(this);return e._materialized=!0,e}function toDematerialized(){if(this._materialized===!1)return this;var e=Object.create(this);return e._materialized=!1,e}function toRoot(){return this._root._root=this}function serialize(e){function t(e){return"_"!==e[0]||"_"!==e[1]}var _,r,n,i=e||this._cache,o={},l=0,a=[];e:for(;l>=0;){for(_=a[l]||(a[l]={context:i,message:o,keys:Object.keys(i).filter(t)}),i=_.context,o=_.message,r=_.keys;null!=(n=r.pop());){if(i=i[n],null!=i&&"object"==typeof i){if(Array.isArray(i)){o=o[n]||(o[n]=[]),++l;continue e}o=o[n]||(o[n]={}),++l;continue e}o[n]=i,i=_.context}a[l--]=void 0}return o}function deserialize(e){function t(e){return"$"!==e[0]&&("_"!==e[0]||"_"!==e[1])}var _,r,n,i=e,o=0,l=[],a=[],f=[];e:for(;o>=0;){for(_=l[o]||(l[o]={context:i,keys:Object.keys(i).filter(t)}),i=_.context,r=_.keys;null!=(n=r.pop());){if(a[o]=n,i=i[n],null!=i&&"object"==typeof i&&void 0===i.$type&&!Array.isArray(i)){++o;continue e}f.push(a.slice(0,o+1)),i=_.context}l[o--]=void 0}return setPBF.call(this,{paths:f,value:e},null,null,null,this._cache,this._cache),this}function stringify(e,t,_){return JSON.stringify(flatten(e),t,_)}function flatten(e){var t,_,r,n;if(null===e||"object"!=typeof e)return e;if(e instanceof Array){for(t=[],r=0;r<e.length;r++)t.push(flatten(e[r]));return t}t={};do{for(_=Object.keys(e),_.sort(),r=0;r<_.length;r++)n=_[r],("_"!==n[0]||"_"!==n[1])&&(t[n]=flatten(e[n]));e=Object.getPrototypeOf(e)}while(null!=e);return t}function collapse(e){return rangeCollapse(buildQueries(e))}function rangeCollapse(e){return e.forEach(function(e){e.forEach(function(t,_){var r;Array.isArray(t)&&t.every(isNumber)&&allUnique(t)&&(t.sort(function(e,t){return e-t}),t[t.length-1]-t[0]===t.length-1&&(r={},r.from=t[0],r.to=t[t.length-1],e[_]=r))})}),e}function isNumber(e){return"number"==typeof e}function allUnique(e){var t,_,r={};for(t=0,_=e.length;_>t;t++){if(r[e[t]])return!1;r[e[t]]=!0}return!0}function sortLol(e){return e.reduce(function(e,t){return t instanceof Array?(e.push(sortLol(t).slice(0).sort()),e):e.concat(t)},[]).slice(0).sort()}function createKey(e){return JSON.stringify(sortLol(e))}function notPathMapInternalKeys(e){return"__observers"!==e&&"__pending"!==e&&"__batchID"!==e}function buildQueries(e){var t,_,r,n,i,o,l,a,f,s,v,p,d,u=Object.keys(e).filter(notPathMapInternalKeys),h=-1,c=u.length;if(0===c||Array.isArray(e)===!0)return[[]];for(_={};++h<c;)t=u[h],r=buildQueries(e[t]),n=createKey(r),i="string"==typeof t&&!charPattern.test(t),(o=_[n])&&(l=o.head)?l[l.length]=i?parseInt(t,10):t:_[n]={head:[i?parseInt(t,10):t],tail:r};s=[];for(d in _)for(l=(o=_[d]).head,a=o.tail,h=-1,c=a.length;++h<c;){if(o=a[h],v=-1,p=o.length,""===l[0])f=[];else for(f=[1===l.length?l[0]:l];++v<p;)f[v+1]=o[v];s[s.length]=f}return s}function BatchRequestQueue(e){this.rootPE=e,this.requests=[]}function BatchRequest(e,t){this.rootPE=e,this.requestQueue=t,this.originalsSet={__observers:[]},this.optimizedSet={__observers:[]},this.observers=0,this.pending=!1,this.operation=null}var Rx=require("./rxUltraLite"),EventBus=require("../reactMixins/eventBus"),Observable=Rx.Observable,Disposable=Rx.Disposable,SENTINEL_SIZE=50,isArray=Array.isArray,GENERATION_GENERATION=0,OBSERVER_GENERATION=0,µTime=1,µRate=.25,µSize=.25,MIN_SAFE_INTEGER=-Math.pow(2,53)-1;PathEvaluator.prototype={_batched:!1,_lazy:!0,_connected:!0,_streaming:!0,_refreshing:!1,_materialized:!1,loader:{get:function(){return Observable.create(function(e){return e.onCompleted(),function(){}})},call:function(){return Observable.create(function(e){return e.onCompleted(),function(){}})}},get:get,set:set,invalidate:invalidate,call:call,bind:bind,hardBind:hardBind,deferBind:deferBind,serialize:serialize,deserialize:deserialize,getValueSync:function(){return safeValue(getPath.apply(this,arguments).value)},getBoundValue:function(){return safeValue(this._getContext().value)},setValueSync:function(){return setPath.apply(this,arguments).value},toBatched:toBatched,toIndependent:toIndependent,toLazy:toLazy,toEager:toEager,toRemote:toRemote,toLocal:toLocal,toProgressive:toProgressive,toAggregate:toAggregate,toCached:toCached,toRefreshed:toRefreshed,toMaterialized:toMaterialized,toDematerialized:toDematerialized,toRoot:toRoot,_collapse:collapse,_getPaths:getPaths,_setPaths:setPaths,_setPBF:setPBF,_getPathsAsObservable:getPathsAsObservable,_setPathsAsObservable:setPathsAsObservable,_setPBFAsObservable:setPBFAsObservable,_stringify:stringify,_pathMapWithObserver:pathMapWithObserver,_pathMapWithoutObserver:pathMapWithoutObserver,_getContext:getContext,_getPath:getPath,_setPath:setPath,_invalidatePath:invalidatePath};var charPattern=/\D/i;BatchRequestQueue.prototype.get=function(){for(var e,t=this.requests,_=t.length,r=_;--r>-1;)if(null!=(e=t[r])&&e.pending!==!0)return e;return t[_]=new BatchRequest(this.rootPE,this)},BatchRequestQueue.prototype.remove=function(e){var t,_;t=this.requests,-1!==(_=t.indexOf(e))&&t.splice(_,1)},BatchRequestQueue.prototype.batch=function(e,t,_){return this.get().batch(e,t,_)},BatchRequestQueue.prototype.flush=function(e,t,_){return new BatchRequest(this.rootPE,this).flush(e,t,_)},BatchRequest.prototype.batch=function(e,t,_){var r=this,n=r.rootPE,i=r.originalsSet,o=r.optimizedSet,l=r.requestQueue;if(i=n._pathMapWithObserver(e,_,i),o=n._pathMapWithObserver(t,null,o),r.originalsSet=i,r.optimizedSet=o,1===++r.observers){var a=setTimeout(function(){a=-1,r.flush()},16);r.operation={dispose:function(){-1!==a&&clearTimeout(a),a=-1,l.remove(r)}}}return{dispose:function(){var a;i=n._pathMapWithoutObserver(e,_,i),o=n._pathMapWithoutObserver(t,null,o),r.originalsSet=i,r.optimizedSet=o,--r.observers<=0&&(l.remove(r),(a=r.operation)&&a.dispose(),r.operation=null,r.pending=!1)}}},BatchRequest.prototype.flush=function(e,t,_){var r=this,n=r.rootPE,i=r.originalsSet,o=r.optimizedSet;r.pending=!0,e&&t&&_&&(i=n._pathMapWithObserver(e,_,i),o=n._pathMapWithObserver(t,null,o),r.observers++),r.originalsSet=i,r.optimizedSet=o;var l,a,f,s,v,p=!1;return f=setTimeout(function(){f=-1,l=n._collapse(r.originalsSet)},16),n._pendingRequests=(n._pendingRequests||0)+1,r.operation={dispose:function(){s&&("function"==typeof s?s():s.dispose&&s.dispose())}},s={dispose:function(){v&&("function"==typeof v?v():v.dispose&&v.dispose()),p===!1&&(p=!0,n._pendingRequests-=1),-1!==f&&(clearTimeout(f),f=-1)}},v=n.loader.get(n._collapse(r.optimizedSet)).subscribe(function(e){a=e},function(e){s.dispose();for(var t,_=r.originalsSet.__observers.concat(),n=-1,i=_.length;++n<i;)(t=_[n]).onError&&t.onError(e)},function(){if(p===!1&&(p=!0,n._pendingRequests-=1),null!=a){-1!==f&&(clearTimeout(f),f=-1,l=n._collapse(r.originalsSet)),a.paths=l;for(var e,t=[a.error],_=n._errorSelector;void 0!==(e=t.pop());)e.innerErrors?t.push.apply(t,e.innerErrors):(e.$type="error",n._setPath(e.path||e.pql,_(e),a.value));a.batchedPathMap=r.originalsSet,s=n._setPBF(a,null,null,null,n._cache,n._cache,[])}else for(var i,o=r.originalsSet.__observers.concat(),v=-1,d=o.length;++v<d;)(i=o[v]).onCompleted&&i.onCompleted()}),r.operation},module.exports=PathEvaluator;


});


Requireify.register('js/falkorClient/falkorLoader.js', function(require, requireAsync, module, exports) {


"use strict";var XHR=require("../utils/XHR"),ContextData=require("../utils/contextData"),gpsModel=ContextData.getData("userInfo","gpsModel");module.exports={get:function(e){return XHR.request({method:"post",data:{paths:e},query:{withSize:!0,materialize:!0,model:gpsModel},resource:"/pathEvaluator",service:"api",authorize:!0})},call:function(e,t,a,r){return XHR.request({method:"post",data:{callPath:e,params:t,paths:r,pathSuffixes:a},query:{withSize:!0,materialize:!0,model:gpsModel,method:"call"},resource:"/pathEvaluator",service:"api",authorize:!0})}};


});


Requireify.register('js/utils/performanceMetrics.js', function(require, requireAsync, module, exports) {


"use strict";function getMetrics(){var e,t;return window&&window.performance&&window.performance.timing?(e=window.performance.timing,t=e.secureConnectionStart||e.requestStart,{timeToInteractive:e.domInteractive-t,components:[{name:"firstByte",elapsed:e.responseStart-t},{name:"domReady",elapsed:e.domInteractive-t},{name:"docLoad",elapsed:e.loadEventStart-t},{name:"shakti",elapsed:e.responseEnd-e.requestStart},{name:"previousPage",elapsed:e.fetchStart-e.navigationStart}]}):null}module.exports={getMetrics:getMetrics};


});


Requireify.register('js/pages/akiraClient.js', function(require, requireAsync, module, exports) {


"use strict";var React=require("react"),App=require("../akira/app.jsx"),PathEvaluator=require("../falkorClient/PathEvaluator"),loader=require("../falkorClient/falkorLoader"),logger=require("../utils/consolidatedLogging/index"),PerformanceMetrics=require("../utils/performanceMetrics"),urls=require("../utils/urls"),PlayerCompatibility=require("../utils/player/playerFeatureDetection"),netflix=require("../common/nfNamespace"),consLog=require("nf-cons-log"),presentationTracking=require("../common/presentationTracking/presentationTracking"),PlayerAssets=require("../utils/player/playerAssets"),contextData=require("../utils/contextData"),playPrediction=require("../common/playPrediction/playPrediction"),hasLoggedStartup=!1,noop=function(){},siteMountainPage={APP_MOUNT:"appMountPoint",sendStartupTiming:function(){function e(){var e=PerformanceMetrics.getMetrics();e&&logger.logStartup(e)}var t=20,r=window||{};"complete"===document.readyState?setTimeout(e,t):r.onload=setTimeout.bind(r,e,t)},logBrowseStartup:function(e){var t,r,a,i=this,o=1,n=(new Date).getTime();e&&e.getRouteComponents&&"function"==typeof e.getRouteComponents&&(t=e.getRouteComponents(),t&&t.length>1&&(r=t[o]),r&&r.shouldShowProfilesGate&&(a=r.shouldShowProfilesGate),a&&"function"==typeof a&&(a()?r.once("app:interactive",function(e,t){i.sendStartupTiming(e,t)}):this.sendStartupTiming(0,n)))},redirectIfNeeded:function(){var e,t,r=window.location.href;return urls.isAkiraPlayerUrl(r)&&!PlayerCompatibility.canPlayHTML5()?(e=urls.getAkiraPlayerParams(r),t=urls.getMerchWebPlayerUrl(e.titleId,e.trackId,e.tctx).toString(),window.location.replace(t),!0):!1},init:function(){if(!this.redirectIfNeeded()){if(!this.inNode){try{consLog.clientNotifications.start()}catch(e){}presentationTracking.init(),playPrediction.stub||playPrediction.init()}var t=new PathEvaluator(5e6,.75,loader).toAggregate().deserialize(netflix.falkorCache).toRoot(),r=this,a=window||{};a.pathEvaluator=t;var i,o=netflix.reactContext;o.pathEvaluator=t,o.node={req:null,res:null},window.addEventListener("load",function(){var e=contextData.getData("player","config"),t=contextData.getData("player","kidsPlayer"),r=contextData.getData("player","playbackSupport")||{supportsHTML5:"no"};!t&&"no"!==r.supportsHTML5&&e&&PlayerAssets.getPlayerAssets().take(1).subscribe(noop,function(){},noop)}),a.reactApp=new App(o),a.reactApp.clientRender(function(e,t){if(e)throw e.stack,e;i=React.render(t,document.getElementById(r.APP_MOUNT)),a.reactApp.setRenderedView(i),hasLoggedStartup||(r.logBrowseStartup(i),hasLoggedStartup=!0)})}}};"undefined"!=typeof window&&siteMountainPage.init();


});

!function(i){"use strict";i.Requireify.kickoff()}(window);